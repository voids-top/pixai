import{j as e}from"./vendor-motion-Bl2lDopP.js";import{r as l,s as M}from"./vendor-apollo-B9XqHIAo.js";import{u as S,bX as L,b7 as u,c2 as P,m as g,c1 as I,gE as D,aP as E,ab as R,gF as C,b5 as F,ba as z,gG as T,I as B,ap as w,T as H,gH as O,gI as $,x as G,dk as W,gJ as V,gK as K,L as Q}from"./index-JhqgbpkX.js";import{w as p,$ as U}from"./vendor-firebase-BKQqa5bK.js";import{u as m}from"./vendor-i18next-TC5y0B3W.js";import{L as A,d as J,c as X,N as Y}from"./vendor-react-router-Bm0RsDwP.js";import{g as b}from"./vendor-graphql-DeSYh9DC.js";import{S as Z}from"./ShareTopArtworks-BOuTPYe4.js";import{a1 as q,a2 as ee,a3 as te,a4 as f,a5 as i,a6 as ne,d as x,a7 as se,a8 as v,B as k,H as y}from"./vendor-mui-DTp04zm4.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="9e48399a-c613-4124-9103-05b1ee814674",t._sentryDebugIdIdentifier="sentry-dbid-9e48399a-c613-4124-9103-05b1ee814674")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(n){for(var s=1;s<arguments.length;s++){var r=arguments[s];if(r!=null)for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])}return n}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();function oe(t){return t===p.Default?{type:void 0}:{type:t}}function re(t){return U({type:t}).with({type:p.AnimatedArtwork},()=>"/generator/image/animation").otherwise(()=>"/pixai")}function ae(t){const{t:n}=m(["common"]),[{type:s},r]=S(),[a,o]=L(),j=l.useMemo(()=>JSON.stringify({order:a,type:s}),[a,s]),h=[{label:n("common:order-option.random"),value:u.trending},{label:n("common:order-option.daily-ranking"),value:u.dailyRanking},{label:n("common:order-option.following-news"),value:u.followingNews},{label:n("common:order-option.most-liked"),value:u.mostLiked},{label:n("common:order-option.newest"),value:u.newest}];return e.jsx("div",{className:t.className,children:e.jsxs("div",{className:"my-4 flex flex-col gap-4",children:[e.jsx(P,{choices:h,value:a,onChange:d=>(g("contest_order_click",{value:d}),o(d))}),e.jsx(I,{order:D(a),...oe(t.contest.extra?.artworkType),tag:"challenge",challenge:t.contest.cid,trackingArgs:{scene:"contest",section:t.contest.id,feed:a}},j)]})})}const ie=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M13.26 3C8.17 2.86 4 6.95 4 12H2.21c-.45 0-.67.54-.35.85l2.79 2.8c.2.2.51.2.71 0l2.79-2.8a.5.5 0 0 0-.36-.85H6c0-3.9 3.18-7.05 7.1-7c3.72.05 6.85 3.18 6.9 6.9c.05 3.91-3.1 7.1-7 7.1c-1.61 0-3.1-.55-4.28-1.48a.994.994 0 0 0-1.32.08c-.42.42-.39 1.13.08 1.49A8.858 8.858 0 0 0 13 21c5.05 0 9.14-4.17 9-9.26c-.13-4.69-4.05-8.61-8.74-8.74zm-.51 5c-.41 0-.75.34-.75.75v3.68c0 .35.19.68.49.86l3.12 1.85c.36.21.82.09 1.03-.26c.21-.36.09-.82-.26-1.03l-2.88-1.71v-3.4c0-.4-.34-.74-.75-.74z"})}),le=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",d:"M16 22v-9c0-1.414 0-2.121-.44-2.56C15.122 10 14.415 10 13 10h-2c-1.414 0-2.121 0-2.56.44C8 10.878 8 11.585 8 13v9m0 0c0-1.414 0-2.121-.44-2.56C7.122 19 6.415 19 5 19c-1.414 0-2.121 0-2.56.44C2 19.878 2 20.585 2 22m20 0v-3c0-1.414 0-2.121-.44-2.56C21.122 16 20.415 16 19 16c-1.414 0-2.121 0-2.56.44C16 16.878 16 17.585 16 19v3"}),e.jsx("path",{d:"M11.146 3.023C11.526 2.34 11.716 2 12 2c.284 0 .474.34.854 1.023l.098.176c.108.194.162.29.246.354c.085.064.19.088.4.135l.19.044c.738.167 1.107.25 1.195.532c.088.283-.164.577-.667 1.165l-.13.152c-.143.167-.215.25-.247.354c-.032.104-.021.215 0 .438l.02.203c.076.785.114 1.178-.115 1.352c-.23.175-.576.015-1.267-.303l-.178-.082c-.197-.09-.295-.136-.399-.136c-.104 0-.202.046-.399.136l-.178.082c-.691.318-1.037.478-1.267.303c-.23-.174-.191-.567-.115-1.352l.02-.203c.021-.223.032-.334 0-.438c-.032-.103-.104-.187-.247-.354l-.13-.152c-.503-.588-.755-.882-.667-1.165c.088-.282.457-.365 1.195-.532l.19-.044c.21-.047.315-.07.4-.135c.084-.064.138-.16.246-.354l.098-.176Z"})]})});function ce(t){const{t:n}=m(["common"]),[{before:s,after:r},a]=l.useState({}),{data:o,loading:j,refetch:h}=C({...F({before:s,after:r,pageSize:5})}),d=l.useMemo(()=>b(o).reverse(),[o]),N=l.useMemo(()=>({mutate:h,data:o}),[h,o]);return l.useImperativeHandle(t.pagingRef,()=>N,[N]),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mt-2 mb-4",children:n("common:contest.select-table.title")}),e.jsx(q,{children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(f,{children:[e.jsx(i,{children:n("common:contest.select-table.name")}),e.jsx(i,{align:"right",children:n("common:contest.select-table.start-at")}),e.jsx(i,{align:"right",children:n("common:contest.select-table.end-at")})]})}),e.jsxs(ne,{children:[d.length<1&&j&&Array.from({length:5},(c,_)=>_+1).map(c=>e.jsx(de,{},c)),d.map(c=>e.jsxs(f,{sx:{"&:last-child td, &:last-child th":{border:0}},className:"cursor-pointer transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-600",onClick:()=>{t.onContestSelect?.(c)},children:[e.jsx(i,{component:"th",scope:"row",children:e.jsx("p",{className:"font-medium",children:c.name??"Unknown"})}),e.jsx(i,{align:"right",children:e.jsx("p",{className:"text-sm",children:x(c.startAt).format("lll")})}),e.jsx(i,{align:"right",children:e.jsx("p",{className:"text-sm",children:x(c.endAt).format("lll")})})]},c.id))]}),e.jsx(se,{children:e.jsx(f,{children:e.jsx(i,{colSpan:100,align:"right",sx:{borderBottom:0},children:e.jsx(z,{pageInfo:o?.pageInfo,onCursorChange:a})})})})]})})]})}function de(){return e.jsxs(f,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(i,{component:"th",scope:"row",children:e.jsx(v,{})}),e.jsx(i,{align:"right",children:e.jsx(v,{})}),e.jsx(i,{align:"right",children:e.jsx(v,{})})]})}function me(){return new Promise((t,n)=>{const s=E({children:e.jsx(ce,{onContestSelect:async r=>{await s.current?.close(),t(r)}}),onClose:()=>{n(R)}})})}function ue(t){const{t:n}=m(["common"]),s=T(t.contest),r=s?ge(t.contest):"";return e.jsxs("div",{className:"md:absolute md:top-0 md:left-1/2 md:-translate-x-1/2 md:z-10 flex flex-col items-center gap-3",children:[s?e.jsx(k,{component:A,className:"mx-auto bg-violet-600 text-white text-md font-bold",variant:"contained",onClick:()=>{g("contest_enter_work_click")},to:r,children:n("common:contest.enter-your-artwork")}):e.jsx(k,{disabled:!0,variant:"contained",className:"mx-auto bg-black text-white text-md font-bold",children:n("common:contest.contest-ended")}),e.jsx(pe,{contest:t.contest})]})}function ge(t){const n=new URL(re(t.extra?.artworkType??p.All),"https://example.com");return t.id==="1777877148606674221"&&n.searchParams.set("initialValues",O({modelId:"1776095861009048051"})),n.href.slice(n.origin.length)}function xe(t){const{t:n}=m(["common"]),{contest:s}=t,r=$(s),{data:a}=G({first:12,isNsfw:!1,challenge:s.cid,feed:"trending1",type:p.Default}),o=b(a);return r&&o.length>0?e.jsx(Z,{artworks:o,btnProps:{className:t.className,variant:"filled",color:"theme",children:e.jsx(e.Fragment,{children:n("common:contest.share-results")}),size:"large"},title:`${s.name} Top Artworks`,trackingProps:{scene:"contest"}}):null}function he(t){const{t:n}=m(["common"]),{data:s}=C({last:10,published:!0}),r=l.useMemo(()=>b(s).reverse(),[s]),a=J();return e.jsxs(e.Fragment,{children:[e.jsxs(W,{value:t.selected.id,onChange:o=>{o.target.value!=="noop"&&a(`/contest/${o.target.value}`)},autoWidth:!0,className:t.className,displayEmpty:!0,startAdornment:e.jsx("div",{children:e.jsx(ie,{width:20,height:20})}),children:[e.jsx(y,{disabled:!0,value:t.selected.id,children:e.jsx("em",{children:t.selected.name})}),e.jsx("div",{className:"h-px my-2 bg-card-border mx-1"}),r.map(o=>e.jsx(y,{value:o.id,onClick:()=>{g("contest_selected",{value:o.name})},children:o.name},o.id)),e.jsx("div",{className:"h-px my-2 bg-card-border mx-1"}),e.jsx(y,{value:"noop",onClick:async()=>{g("contest_select_more_click");const o=await me();o&&(g("contest_selected",{value:o.name}),a(`/contest/${o.id}`))},children:n("common:contest.select-more")})]}),e.jsx("nav",{hidden:!0,className:"hidden",children:r.map(o=>e.jsx("a",{href:`/contest/${o.id}`,children:o.name},o.id))})]})}function fe(t){const{contest:n}=t,{t:s,i18n:r}=m(["common"]),a=l.useMemo(()=>n.locales?.[r.language]?n.locales?.[r.language]:n.description&&n.prize&&n.rule?n:{description:"",rule:"",prize:""},[n.id,r.language]),o=l.useMemo(()=>T(n)?`PixAI ${n.name} Contest is Live!`:`PixAI ${n.name} Contest has Ended`,[n]);return e.jsxs("div",{children:[e.jsx(B,{title:o}),n.description&&e.jsx(w,{as:"article",className:"prose dark:prose-invert mx-auto md:min-w-[600px]",children:a.description}),e.jsxs("div",{className:"relative mb-6 md:mb-12",children:[e.jsx(ue,{contest:n}),e.jsxs("section",{className:"flex flex-wrap w-full items-center justify-between mt-4 relative gap-4",children:[e.jsxs("div",{className:"flex gap-1 max-msm:w-full",children:[e.jsx(he,{className:"rounded-lg bg-background-light flex-auto md:flex-initial",selected:n}),e.jsxs(k,{component:A,to:"/ranking",className:"leading-tight font-semibold gap-1 bg-background-light dark:text-primary px-4 py-2",children:[e.jsx(le,{className:"mr-1 my-0.5 size-5"}),e.jsx(H,{i18nKey:"common:tab.ranking"})]})]}),e.jsx(xe,{className:"right-0 bg-violet-600 text-white text-md font-bold px-4 flex-auto md:flex-initial",contest:n})]})]}),e.jsx("div",{className:"h-px bg-card-border my-4 mx-8"}),e.jsxs("section",{className:"w-full flex flex-wrap justify-center gap-4",children:[a.prize&&e.jsxs("article",{className:"bg-violet-300/40 dark:bg-violet-500/40 p-6 rounded-lg md:basis-[calc(50%-8px)]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s("common:contest.prizes.title")}),e.jsx(w,{as:"article",className:"prose dark:prose-invert",children:a.prize})]}),a.rule&&e.jsxs("article",{className:"bg-violet-300/40 dark:bg-violet-500/40 p-6 rounded-lg md:basis-[calc(50%-8px)]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s("common:contest.rules.title")}),e.jsx(w,{as:"article",className:"prose dark:prose-invert",children:a.rule})]})]})]})}function pe(t){const{contest:n}=t,{endAt:s,startAt:r}=n,a=l.useMemo(()=>new Date(s)<=new Date?`${x(r).format("ll")} - ${x(s).format("ll")}`:e.jsx(be,{endAt:s}),[s,r]);return e.jsx("div",{className:"border border-violet-600 text-violet-400 text-xs rounded-lg py-1 px-2",children:a})}function be(t){const n=new Date().getTime(),s=new Date(t.endAt).getTime(),r=V(s-n);return e.jsx(e.Fragment,{children:x.duration(r).format("D[d] HH:mm:ss")})}function je(){const{id:t}=X(),{data:n}=C({last:1,published:!0}),{data:s,loading:r}=K(t??M),a=b(n)[0];return(t&&s===null&&!r||!t)&&a?e.jsx(Y,{to:`/contest/${a.id}`,replace:!0}):s?e.jsx(we,{contest:s}):e.jsx(Q,{})}function we(t){const{contest:n}=t;return e.jsxs(e.Fragment,{children:[e.jsx(fe,{contest:n}),e.jsx(ae,{contest:n,className:"mt-2"})]})}const $e=je;export{$e as Component};
