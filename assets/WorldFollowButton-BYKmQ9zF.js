import{r as u}from"./vendor-apollo-B9XqHIAo.js";import{cS as y,aj as m,a as b,G as x,m as w,t as g,U as k,p as v,cT as M}from"./index-JhqgbpkX.js";import{w as _}from"./vendor-firebase-BKQqa5bK.js";import{g as I}from"./vendor-graphql-DeSYh9DC.js";import{j as a}from"./vendor-motion-Bl2lDopP.js";import{u as C}from"./vendor-i18next-TC5y0B3W.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="36cd89cc-0fdd-4031-ada3-917a5556d0b9",e._sentryDebugIdIdentifier="sentry-dbid-36cd89cc-0fdd-4031-ada3-917a5556d0b9")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(r){for(var l=1;l<arguments.length;l++){var s=arguments[l];if(s!=null)for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])}return r}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();function P(e){const{items:r,hasMore:l,loading:s,loadMore:o,totalCount:i,reset:n}=y({fetcher:m.listWorldCharacters,getArgs:t=>({worldId:e,first:10,after:t?.artworks.pageInfo?.endCursor,type:_.Character}),getItems:t=>I(t.artworks).reverse(),getHasMore:t=>t.artworks?.pageInfo.hasNextPage??!1,getTotalCount:t=>t.artworks?.totalCount??void 0});return u.useEffect(()=>(o(),()=>{n()}),[]),{characters:r,hasMore:l,loading:s,loadMore:o,totalCount:i,reset:n}}const T=e=>a.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:a.jsx("path",{fill:"currentColor",d:"M17 3a2 2 0 0 1 2 2v16l-7-3l-7 3V5a2 2 0 0 1 2-2h10m-6 4v2H9v2h2v2h2v-2h2V9h-2V7h-2Z"})});function D({className:e,followingClassName:r,notFollowingClassName:l,showFollowingText:s,world:o,onClick:i,scene:n}){const{t}=C("worlds"),{data:c}=b(),[d,h]=u.useState(o.followedByMe),p=u.useCallback(async()=>{if(!c)return x();const f=d;await m.followWorld({id:o.id,follow:!f}),i?.(!d),f?(w("wc_world_unfollow",{worldId:o.id,scene:n}),g.success(t("worlds:world.world-follow-removed",{worldName:o.name}))):(w("wc_world_follow",{worldId:o.id,scene:n}),g.success(t("worlds:world.world-follow-added",{worldName:o.name}))),h(!f)},[c,d,o.id]);return a.jsx(k,{variant:"filled",className:v(e,d?r:l),labelClassName:"flex w-full h-full justify-center items-center gap-2",onPress:p,children:d?a.jsxs(a.Fragment,{children:[a.jsx(M,{}),s&&t("worlds:world.following")]}):a.jsxs(a.Fragment,{children:[a.jsx(T,{}),t("worlds:world.follow")]})})}export{D as W,T as m,P as u};
