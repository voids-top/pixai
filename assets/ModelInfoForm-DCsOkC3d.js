import{fr as D,fp as s,ia as B,fm as z,ib as n,fo as i,ic as _,id as ee,fn as ae,fq as q,ie as O,ig as se,ih as le,j as e,bA as p,cH as te,e as j,u as V,fK as ie,fX as re,K as H,a0 as x,T as S,fD as ne,F as u,de as R,c6 as L,U as oe,fv as de,f3 as ce,aB as y,aG as v,fM as me,c4 as xe,ii as pe,t as fe,bj as ue,f4 as he,ij as ge,cO as be,C as je,cD as ye}from"./index-BTMYyhc6.js";import{$ as ve,a as ke}from"./Disclosure-DgCWlw5X.js";import{U as we}from"./UploadImage-DewQdK81.js";import{d as Ne,C as Ce}from"./index-qPceTsh8.js";import{T as Me}from"./TagSelect-D6CyfPkY.js";import{i as Ie}from"./baseline-keyboard-arrow-right-BlgxAuax.js";import{m as Te}from"./ModelSubmitFormProvider-phtQjuMT.js";import{U as Se}from"./ModelAssetForm-CSHNk3Nd.js";import{M as G}from"./MenuItem-DLax9T5L.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[r]="95b3cf47-2335-46c7-b1cc-10103b2ddb77",l._sentryDebugIdIdentifier="sentry-dbid-95b3cf47-2335-46c7-b1cc-10103b2ddb77")}catch{}})();{var T=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};T._sentryModuleMetadata=T._sentryModuleMetadata||{},T._sentryModuleMetadata[new Error().stack]=Object.assign({},T._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const W=D({prefix:s(B(i(),O(256))),suffix:s(B(i(),O(256)))}),Oe=z({priority:n(),workflowId:i(),workflowName:i(),workflowVersionId:i(),inputs:se(i(),le())}),He=z({width:n(),height:n(),modelId:s(i()),priority:n(),i2vPro:D({mode:s(_(["basic","professional"])),model:_(["v1","v2","v2.5","v2.5-basic","v2.6"]),mediaId:i(),prompts:s(i()),duration:s(_(["5","10"])),negativePrompts:s(i()),cameraMovement:s(i())})}),Re=z({priority:s(n()),seed:s(ee([i(),n()])),width:n(),height:n(),mediaId:s(i()),modelId:s(i()),prompts:s(i()),cfgScale:s(n()),samplingSteps:s(n()),samplingMethod:s(i()),negativePrompts:s(i()),clipSkip:s(n()),batchSize:s(n()),controlNets:s(ae(z({type:i(),mediaId:i(),weight:s(n()),thresholdA:s(n()),maskMediaId:s(i())}))),qualityTag:s(W),lightning:s(q()),upscale:s(n()),upscaleDenoisingSteps:s(n()),upscaleDenoisingStrength:s(n()),enlarge:s(n()),enlargeModel:s(i()),enableADetailer:s(q()),styleMix:s(D({enabled:s(q()),seed:s(n())}))}),Pe=l=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...l,children:e.jsx("path",{fill:"currentColor",d:"m7.032 13.907l-3.471-3.905a.75.75 0 0 0-1.122.996l4 4.5a.75.75 0 0 0 1.091.032l10.5-10.5a.75.75 0 0 0-1.06-1.06z"})}),ze=l=>e.jsx("svg",{viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...l,children:e.jsx("path",{fill:"currentColor",d:"m2.397 2.554l.073-.084a.75.75 0 0 1 .976-.073l.084.073L8 6.939l4.47-4.47a.75.75 0 1 1 1.06 1.061L9.061 8l4.47 4.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L8 9.061l-4.47 4.47a.75.75 0 0 1-1.06-1.061L6.939 8l-4.47-4.47a.75.75 0 0 1-.072-.976l.073-.084z"})}),Le=(l,r)=>xe(r).with(p.Lora,p.UnknownLora,()=>l("market:model.type.lora")).with(p.SdV1Model,p.UnknownModel,()=>l("market:model.type.sdv1model")).with(p.SdxlLora,()=>l("market:model.type.sdxllora")).with(p.SdxlModel,()=>l("market:model.type.sdxlmodel")).otherwise(()=>l("market:model.type.unknown")),Ue=[p.UnknownLora,p.UnknownModel],P=te({base:"col-span-full mt-8 first:mt-0 text-base font-semibold text-black dark:text-white"});function Ge(l){var A;const{values:r,handleChange:t,isEditing:f}=l,[E,U]=j.useState(!1),[k,g]=j.useState(()=>r.media),{t:c}=V(["market","common","action","artwork"]),{title:w,extra:o,tags:N,isDownloadable:$,isPrivate:C,type:M,agreeCoverImage:b,agreeNonMinor:K}=r,X=ie(M),[m,F]=j.useState(),J=a=>{if(!(!a.prefix&&!a.suffix))try{const d=pe(W,a),h=[...(o==null?void 0:o.qualityTags)??[],d];t("extra.qualityTags")(h)}catch{fe.error(c("market:submit.notice.quality-tag-length-exceeded"))}},Y=a=>{var I;const d=((I=o==null?void 0:o.qualityTags)==null?void 0:I.filter(h=>h.prefix!==a.prefix||h.suffix!==a.suffix))??[];t("extra.qualityTags")(d)},Q=j.useRef(null);j.useEffect(()=>{var a;if(l.highlightId){const d=(a=Q.current)==null?void 0:a.querySelector(`[data-highlight-id="${l.highlightId}"]`);d&&(d.dataset.highlighted="")}},[l.highlightId]);const Z=re();return e.jsx("div",{ref:Q,className:H("@container/form","text-sm",l.className),children:e.jsxs("div",{className:"grid grid-cols-1 @[600px]/form:grid-cols-[2fr_1fr] grid-flow-dense gap-4",children:[f&&e.jsxs("div",{className:"@[800px]/form:col-start-2 flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:c("market:submit.model-cover.title")}),e.jsx(we,{value:k,onChange:a=>{a&&(g(a),t("media")(a))},onUpload:U,placeholderElement:e.jsx(Se,{}),dropzoneOptions:{accept:{"image/jpeg":[],"image/png":[],"image/webp":[]},noKeyboard:!0},preHandleImage:async a=>await Ne({file:a})??a,className:"relative",fileHandleElement:({action:a})=>e.jsx("div",{className:"absolute bottom-4 font-sans",children:e.jsx(Ce,{media:r.media,action:a})})})]}),e.jsxs("div",{className:"col-start-1 flex flex-col gap-4 mt-1",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(x,{i18nKey:"market:submit.model-form.name"})}),e.jsx(S,{size:"small",value:w,onChange:t("title"),required:!0})]}),!ne(r.type)&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(x,{i18nKey:"market:submit.model-type"})}),e.jsx(u,{required:!0,children:e.jsx(R,{size:"small",value:r.type??"",onChange:a=>{t("type")(a),L(a)||t("category")(null)},disabled:f,children:(f?[r.type]:Ue).map(a=>e.jsx(G,{value:a,children:Le(c,a)},a))})})]}),L(r.type)&&e.jsxs("div",{"data-highlight-id":"category-field",className:H("flex flex-col gap-2","p-2 -m-2 rounded-xl data-[highlighted]:bg-amber-100 dark:data-[highlighted]:bg-amber-500/15"),children:[e.jsx("span",{className:"text-primary",children:e.jsx(x,{i18nKey:"artwork:recipes.category"})}),e.jsx(u,{required:!0,children:e.jsx(R,{size:"small",value:r.category??null,onChange:a=>{t("category")(a.target.value)},children:Z.map(a=>a.value?e.jsx(G,{value:a.value,children:e.jsx(x,{i18nKey:a.label,defaults:a.label})},a.value):null)})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(x,{i18nKey:"artwork:tags"})}),e.jsx(Me,{value:N||[],onChange:t("tags"),textFieldProps:{size:"small"}})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(x,{i18nKey:"market:submit.model-form.description"})}),e.jsx(S,{size:"small",value:(o==null?void 0:o.description)||"",onChange:t("extra.description"),multiline:!0,rows:3})]})]}),!l.hidePrivateOption&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P(),children:e.jsx(x,{i18nKey:"common:visibility.label"})}),e.jsx("div",{className:"col-start-1",children:e.jsx($e,{modelType:M,handleChange:t,isPrivate:C,isEditing:f})})]}),X&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P(),children:e.jsx(x,{i18nKey:"market:submit.model-form.quality-tag.label"})}),e.jsxs("div",{className:"col-span-full flex flex-col gap-2",children:[(A=o==null?void 0:o.qualityTags)==null?void 0:A.map(a=>e.jsxs("div",{className:"flex p-2 bg-zinc-100 dark:bg-zinc-800 rounded-md",children:[e.jsxs("p",{className:"flex-1 break-all",children:[a.prefix?a.prefix+", ":null,e.jsx("span",{className:"text-neutral-400 dark:text-neutral-600",children:"user prompts"}),a.suffix?", "+a.suffix:null]}),e.jsx("button",{className:"flex-none inline-grid place-items-center size-6 text-red-500 rounded-md",onClick:()=>Y(a),children:e.jsx(ze,{className:"size-4"})})]},a.prefix)),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(S,{className:"flex-1",label:c("market:submit.model-form.quality-tag.prefix.label"),size:"small",value:m==null?void 0:m.prefix,onChange:a=>F({...m,prefix:a.target.value})}),e.jsx(S,{className:"flex-1",label:c("market:submit.model-form.quality-tag.suffix.label"),size:"small",value:m==null?void 0:m.suffix,onChange:a=>F({...m,suffix:a.target.value})}),e.jsx(oe,{size:"large",icon:e.jsx(Pe,{className:"size-5"}),className:"flex-none",onPress:()=>{m&&J(m)}})]})]})]}),e.jsxs(ve,{className:"col-span-full flex flex-col mt-8 first:mt-0",children:[e.jsx(de,{className:P(),children:e.jsxs(ce,{slot:"trigger",className:"group inline-flex items-center gap-1 outline-none",children:[e.jsx("span",{children:e.jsx(x,{i18nKey:"market:submit.permissions"})}),e.jsx(Ie,{className:"size-5 transition-transform group-aria-expanded:rotate-90"})]})}),e.jsxs(ke,{className:"flex flex-col",children:[e.jsx(u,{children:e.jsx(y,{control:e.jsx(v,{checked:$,onChange:(a,d)=>t("isDownloadable")(d)}),label:c("market:submit.allow-download")})}),Te.map(a=>{var d;return e.jsx(u,{children:e.jsx(y,{checked:((d=o==null?void 0:o.permissions)==null?void 0:d[a])??!1,onChange:(I,h)=>{t(`extra.permissions.${a}`)(h)},control:e.jsx(v,{}),label:c(`market:model.permissions.${me(a)}`)})},a)})]})]}),!f&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P(),children:e.jsx(x,{i18nKey:"market:submit.agreements.title"})}),e.jsxs("div",{className:"col-span-full flex flex-col gap-2",children:[e.jsx(u,{children:e.jsx(y,{className:"items-start",control:e.jsx(v,{checked:K,onChange:(a,d)=>t("agreeNonMinor")(d)}),label:c("market:submit.agreements.agree-non-minor")})}),e.jsx(u,{children:e.jsx(y,{className:"items-start",control:e.jsx(v,{checked:b,onChange:(a,d)=>t("agreeCoverImage")(d)}),label:c("market:submit.agreements.agree-cover-image")})})]})]}),l.appendComp]})})}function $e(l){const{t:r}=V(["market"]),{modelType:t,isPrivate:f,isEditing:E,handleChange:U}=l,{data:k}=ue(),{membership:g,id:c}=k||{},w=he(k),{data:o}=ge(w&&t?{authorId:c,type:L(t)?p.AnyNonUserLora:p.AnyModel,isPrivate:!0}:void 0),N=((g==null?void 0:g.privilege.privateModel)??1)-(o??0),$=!t||E||N<1,C={number:N},M=t?w?e.jsx("p",{children:L(t)?r("market:submit.private.how-many-lora-slots-left",C):r("market:submit.private.how-many-model-slots-left",C)}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:r("market:submit.private.join-to-upload-more")}),e.jsx(be,{href:"/membership/plans",className:"ml-3 px-1 py-0.5 text-theme-primary rounded-sm",onPress:()=>{const b="market-submit";je("enter_member_click",{location:b}),ye("member_source",b,{persistent:!0})},children:r("market:submit.private.join-member")})]}):null;return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(u,{children:e.jsx(y,{control:e.jsx(v,{checked:f,onChange:(b,K)=>U("isPrivate")(K)}),disabled:$,label:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:r("market:submit.model-form.private-model")}),e.jsx("span",{className:"ml-2 px-1.5 text-xs leading-5 uppercase tracking-wide text-white text-shadow-xs shadow-black/50 bg-gradient-purple-pink /bg-gradient-to-br /from-fuchsia-500 /to-purple-600 rounded-full",children:"Membership"})]})})}),e.jsx("div",{className:"pl-8",children:M})]})}export{Ge as M,W as Q,He as T,Oe as a,Re as b,ze as c,Pe as f};
//# sourceMappingURL=ModelInfoForm-DCsOkC3d.js.map
