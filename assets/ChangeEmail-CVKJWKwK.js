import{j as t}from"./vendor-motion-Bl2lDopP.js";import{r as v}from"./vendor-apollo-B9XqHIAo.js";import{u as x,f as j,a as E,b as C,g as I,e as _,t as M,j as T,d as f,U as k}from"./index-JhqgbpkX.js";import{A}from"./AuthLayout-D0rtJlIT.js";import{_ as F,Z as U}from"./vendor-firebase-BKQqa5bK.js";import{u as D}from"./vendor-i18next-TC5y0B3W.js";import{d as L}from"./vendor-react-router-Bm0RsDwP.js";import{v as N,q as c,t as m}from"./vendor-mui-DTp04zm4.js";import"./vendor-graphql-DeSYh9DC.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="ed7e062c-e2d4-481b-938c-8cfabf1eff3d",e._sentryDebugIdIdentifier="sentry-dbid-ed7e062c-e2d4-481b-938c-8cfabf1eff3d")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(a){for(var o=1;o<arguments.length;o++){var n=arguments[o];if(n!=null)for(var i in n)n.hasOwnProperty(i)&&(a[i]=n[i])}return a}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const P=()=>{const{t:e}=D(["auth"]),[{code:a}]=x(),[o,n]=v.useState(""),{values:{code:i,email:p},getValues:h,handleChange:s}=j(()=>({code:a})),g=L(),{data:l}=E(),[y,b]=C(async()=>{const d=await h();if(!d)return;const{email:r,code:u}=d;if(!u||!r){n("Please fill all forms.");return}r===l?.email&&n("New email cannot be the same as the old one."),n("");try{await I({input:{code:u,email:r}}),await _({input:{intent:F.VerifyEmail,approach:U.Email}}),M.success(`Change email successfully. A new verification email has been sent to ${r}.`),setTimeout(()=>{g("/verify-email")},3e3)}catch(w){n(`Failed to change email: ${w.message}`)}},[l]);return t.jsxs(A,{children:[t.jsx(T,{content:"Change email"}),o?t.jsx(N,{severity:"warning",children:o}):null,t.jsxs(c,{variant:"standard",children:[t.jsx(m,{shrink:!0,htmlFor:"code-input",children:e("auth:email-verification-code")}),t.jsx(f,{value:i,onChange:s("code"),id:"code-input",type:"text",autoComplete:"off",placeholder:e("auth:enter-email-verification-code")})]}),t.jsxs(c,{variant:"standard",children:[t.jsx(m,{shrink:!0,htmlFor:"email-input",children:e("auth:new-email")}),t.jsx(f,{value:p,onChange:s("email"),id:"email-input",type:"email",autoComplete:"off"})]}),t.jsx(k,{variant:"filled",size:"large",busy:y,onPress:b,children:e("auth:change-email")})]})},oe=P;export{oe as Component};
