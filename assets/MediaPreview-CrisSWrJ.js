import{j as i,e as t,bv as Y,$ as O,gQ as V,bx as v,be as A,c9 as F,K as y,h9 as M,di as q,dj as _,P as $}from"./index-BTMYyhc6.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="a806760d-a86c-42ec-95d8-26b7799a94aa",e._sentryDebugIdIdentifier="sentry-dbid-a806760d-a86c-42ec-95d8-26b7799a94aa")}catch{}})();{var h=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};h._sentryModuleMetadata=h._sentryModuleMetadata||{},h._sentryModuleMetadata[new Error().stack]=Object.assign({},h._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const ee=e=>i.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:i.jsx("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 6h-3v2h3c.55 0 1 .45 1 1s-.45 1-1 1h-3v2h3c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z"})}),P="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB6PVsiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIkEiLCJCIiwiQyIsIkQiLCJFIiwiRiIsIkciLCJIIiwiSSIsIkoiLCJLIiwiTCIsIk0iLCJOIiwiTyIsIlAiLCJRIiwiUiIsIlMiLCJUIiwiVSIsIlYiLCJXIiwiWCIsIlkiLCJaIiwiYSIsImIiLCJjIiwiZCIsImUiLCJmIiwiZyIsImgiLCJpIiwiaiIsImsiLCJsIiwibSIsIm4iLCJvIiwicCIsInEiLCJyIiwicyIsInQiLCJ1IiwidiIsInciLCJ4IiwieSIsInoiLCIjIiwiJCIsIiUiLCIqIiwiKyIsIiwiLCItIiwiLiIsIjoiLCI7IiwiPSIsIj8iLCJAIiwiWyIsIl0iLCJeIiwiXyIsInsiLCJ8IiwifSIsIn4iXSxvPWU9PntsZXQgdD0wO2ZvcihsZXQgbD0wO2w8ZS5sZW5ndGg7bCsrKXtsZXQgYT1lW2xdLHM9ei5pbmRleE9mKGEpO3Q9dCo4MytzfXJldHVybiB0fSxNPWU9PntsZXQgdD1lLzI1NTtyZXR1cm4gdDw9LjA0MDQ1P3QvMTIuOTI6TWF0aC5wb3coKHQrLjA1NSkvMS4wNTUsMi40KX0sZz1lPT57bGV0IHQ9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKTtyZXR1cm4gdDw9LjAwMzEzMDg/TWF0aC50cnVuYyh0KjEyLjkyKjI1NSsuNSk6TWF0aC50cnVuYygoMS4wNTUqTWF0aC5wb3codCwuNDE2NjY2NjY2NjY2NjY2NyktLjA1NSkqMjU1Ky41KX0sQT1lPT5lPDA/LTE6MSxkPShlLHQpPT5BKGUpKk1hdGgucG93KE1hdGguYWJzKGUpLHQpLHA9Y2xhc3MgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm5hbWU9IlZhbGlkYXRpb25FcnJvciIsdGhpcy5tZXNzYWdlPWV9fSxDPWU9PntpZighZXx8ZS5sZW5ndGg8Nil0aHJvdyBuZXcgcCgiVGhlIGJsdXJoYXNoIHN0cmluZyBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyIpO2xldCB0PW8oZVswXSksbD1NYXRoLmZsb29yKHQvOSkrMSxhPXQlOSsxO2lmKGUubGVuZ3RoIT09NCsyKmEqbCl0aHJvdyBuZXcgcChgYmx1cmhhc2ggbGVuZ3RoIG1pc21hdGNoOiBsZW5ndGggaXMgJHtlLmxlbmd0aH0gYnV0IGl0IHNob3VsZCBiZSAkezQrMiphKmx9YCl9LEw9ZT0+e2xldCB0PWU+PjE2LGw9ZT4+OCYyNTUsYT1lJjI1NTtyZXR1cm5bTSh0KSxNKGwpLE0oYSldfSxUPShlLHQpPT57bGV0IGw9TWF0aC5mbG9vcihlLzM2MSksYT1NYXRoLmZsb29yKGUvMTkpJTE5LHM9ZSUxOTtyZXR1cm5bZCgobC05KS85LDIpKnQsZCgoYS05KS85LDIpKnQsZCgocy05KS85LDIpKnRdfSxVPShlLHQsbCxhKT0+e0MoZSksYT1hfDE7bGV0IHM9byhlWzBdKSxFPU1hdGguZmxvb3Iocy85KSsxLG09cyU5KzEsaj0obyhlWzFdKSsxKS8xNjYsdT1uZXcgQXJyYXkobSpFKTtmb3IobGV0IHI9MDtyPHUubGVuZ3RoO3IrKylpZihyPT09MCl7bGV0IG49byhlLnN1YnN0cmluZygyLDYpKTt1W3JdPUwobil9ZWxzZXtsZXQgbj1vKGUuc3Vic3RyaW5nKDQrcioyLDYrcioyKSk7dVtyXT1UKG4saiphKX1sZXQgaD10KjQsaT1uZXcgVWludDhDbGFtcGVkQXJyYXkoaCpsKTtmb3IobGV0IHI9MDtyPGw7cisrKWZvcihsZXQgbj0wO248dDtuKyspe2xldCB5PTAsST0wLFA9MDtmb3IobGV0IGM9MDtjPEU7YysrKWZvcihsZXQgZj0wO2Y8bTtmKyspe2xldCB3PU1hdGguY29zKE1hdGguUEkqbipmL3QpKk1hdGguY29zKE1hdGguUEkqcipjL2wpLGI9dVtmK2MqbV07eSs9YlswXSp3LEkrPWJbMV0qdyxQKz1iWzJdKnd9bGV0IHE9Zyh5KSxCPWcoSSksRD1nKFApO2lbNCpuKzArcipoXT1xLGlbNCpuKzErcipoXT1CLGlbNCpuKzIrcipoXT1ELGlbNCpuKzMrcipoXT0yNTV9cmV0dXJuIGl9LFY9VTtjb25zdCB4PXNlbGYsdj0zMjtmdW5jdGlvbiAkKHtoYXNoOmV9KXtjb25zdCB0PVYoZSx2LHYpO3JldHVybiB4LnBvc3RNZXNzYWdlKHtoYXNoOmUscGl4ZWxzOnR9KX14LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCh7ZGF0YTplfSk9PiQoZSkpfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ymx1cmhhc2gud29ya2VyLUM1aHhYTlpoLmpzLm1hcAo=",se=e=>Uint8Array.from(atob(e),s=>s.charCodeAt(0)),J=typeof self<"u"&&self.Blob&&new Blob([se(P)],{type:"text/javascript;charset=utf-8"});function ie(e){let s;try{if(s=J&&(self.URL||self.webkitURL).createObjectURL(J),!s)throw"";const a=new Worker(s,{name:e==null?void 0:e.name});return a.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(s)}),a}catch{return new Worker("data:text/javascript;base64,"+P,{name:e==null?void 0:e.name})}finally{s&&(self.URL||self.webkitURL).revokeObjectURL(s)}}const C=32,x=new ie,te=({hash:e,...s})=>{const a=t.useRef(null);return t.useLayoutEffect(()=>{const g=async({data:n})=>{var I;if(n.hash!==e)return;const d=(I=a.current)==null?void 0:I.getContext("2d");if(!d)return;const r=new ImageData(n.pixels,C,C);d.putImageData(r,0,0)};return x.addEventListener("message",g),x.postMessage({hash:e}),()=>{x.removeEventListener("message",g)}},[e]),i.jsx("canvas",{ref:a,width:C,height:C,...s})},p=(e,s)=>["w-full h-full object-cover object-center",s&&"opacity-0",e&&!s&&"transition-opacity duration-200 ease-out"],ae=({media:e,mediaId:s,videoMedia:a,videoMediaId:g,blurHash:n,thumbnail:d,preferStill:r=!1,alt:I,className:R,experiments:W,...E})=>{const{data:u=e}=Y(e?void 0:s),{data:z=a}=Y(a?void 0:g),K=O(u),o=d?V(u,!0):K,l=d?V(u):K,c=v(z)??v(u),Z=c||l&&l!==o,[w,j]=t.useState(!0),S=t.useCallback(()=>{j(!1)},[]),G=t.useRef(null);t.useEffect(()=>{var L;j(!0),(L=G.current)!=null&&L.complete&&S()},[o]);const[f,X]=t.useState(!0),D=t.useRef(f);D.current=f;const N=t.useCallback(()=>{X(!1)},[]),k=t.useRef(null);t.useEffect(()=>{var L;X(!0),(L=k.current)!=null&&L.complete&&N()},[l]);const[b,T]=t.useState(!0),Q=t.useRef(b);Q.current=b;const U=t.useCallback(()=>{T(!1)},[]);t.useEffect(()=>{T(!0)},[c]);const B=!r&&f&&b,[H]=A(),m=F({experiments:{safetyBlur:!0},blurNsfw:!0,media:{flag:{shouldBlur:!0}}},{experiments:W,blurNsfw:H,media:u});return i.jsxs("div",{...E,className:y("group relative isolate bg-skeleton overflow-hidden",R||"w-full h-full"),children:[n&&i.jsx(te,{className:"z-[-1] absolute inset-0 w-full h-full",hash:n}),o&&i.jsx("img",{alt:I,loading:"lazy",decoding:"async",ref:G,src:o,className:y(...p(n,w),m&&"blur-xl"),onLoad:S}),Z&&!r&&i.jsxs(i.Fragment,{children:[l&&l!==o&&!c&&i.jsx("img",{alt:I,loading:"lazy",decoding:"async",ref:k,src:l,className:y("absolute inset-0",...p(n&&w,f),m&&"blur-xl"),onLoad:N}),c&&i.jsx(M,{autoPlay:!0,src:c,className:y("absolute inset-0",...p(n&&w,b),m&&"blur-xl"),onLoadedData:U}),i.jsx(q,{children:B&&i.jsx(_.div,{className:"absolute inset-0 bg-white/40 flex justify-center items-center",initial:{opacity:0},animate:{opacity:1,transition:{delay:.3,duration:.2,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.125,ease:"easeIn"}},children:i.jsx($,{})})})]}),Z&&r&&!o&&c&&i.jsx(M,{src:c,className:y("absolute inset-0",...p(n&&w,b),m&&"blur-xl"),onLoadedData:U}),m&&i.jsx(ee,{className:"absolute inset-0 m-auto text-3xl text-white opacity-50 group-hover:opacity-80 transition-opacity"})]})};function ce(e){return i.jsx(t.Suspense,{children:i.jsx(ae,{...e})})}export{ce as M,ee as i};
//# sourceMappingURL=MediaPreview-CrisSWrJ.js.map
