import{u as P,e as r,$ as U,h as C,j as t,K as L}from"./index-BTMYyhc6.js";import{u as R}from"./index-C-ypkS9u.js";import{u as z}from"./upload-DDvru8Za.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[o]="e22cd58d-9f28-471c-839e-771db4492ffb",s._sentryDebugIdIdentifier="sentry-dbid-e22cd58d-9f28-471c-839e-771db4492ffb")}catch{}})();{var c=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};c._sentryModuleMetadata=c._sentryModuleMetadata||{},c._sentryModuleMetadata[new Error().stack]=Object.assign({},c._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const O=({value:s,onChange:o=()=>{},onUpload:i=()=>{},onImageSelect:h=()=>{},preHandleImage:w=d=>d,className:j,disabled:p,placeholderElement:v,dropzoneOptions:k,fileHandleElement:l,...I})=>{const{t:d}=P(["action"]),[u,f]=r.useState(),b=r.useMemo(()=>{const e=U(s);if(e)return e;if(u)return URL.createObjectURL(u)},[s,u]),[a,g]=r.useState(),[y,x]=C(async e=>{i(!0);try{g(void 0);const n=await z(e);o(n.media),f(void 0)}catch(n){console.error(n),g(n)}finally{i(!1)}},[i]),_=r.useCallback(async e=>{const n=e[0];if(n){h(n);const m=await w(n);f(m),x(m)}},[]),{getRootProps:N,getInputProps:D}=R({onDrop:_,multiple:!1,disabled:p,accept:{"image/*":[]},...k}),M=r.useCallback(async e=>{e&&(f(e),x(e))},[s]);return t.jsxs("div",{className:L(`
          size-[300px] md:size-[400px]
          border-2 border-dashed rounded-2xl
          flex justify-center items-center
          transition-all hover:transition-all
          text-primary-light font-mono
          `,{"hover:bg-hover cursor-pointer":!p},j),...I,...N(),children:[b?t.jsxs("div",{className:"w-full h-full relative flex items-center overflow-hidden",children:[t.jsx("div",{className:"w-full h-full bg-center bg-contain bg-no-repeat rounded-2xl",style:{backgroundImage:`url(${b})`}}),a?t.jsxs("div",{className:"absolute inset-0 p-8 bg-black bg-opacity-70 text-white flex flex-col justify-center items-center",children:[t.jsx("span",{children:"Failed to upload image. Please try again."}),t.jsx("span",{className:"whitespace-pre-wrap break-all",children:a==null?void 0:a.message})]}):y?t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 text-white flex justify-center items-center rounded-2xl",children:"uploading..."}):null]}):v??t.jsx("div",{className:"text-center font-medium",dangerouslySetInnerHTML:{__html:d("action:drag-and-drop-hint",{br:"<br />"})}}),t.jsx("input",{...D()}),!y&&!a?l==null?void 0:l({action:M}):null]})};export{O as U};
//# sourceMappingURL=UploadImage-DewQdK81.js.map
