import{j as e}from"./vendor-motion-Bl2lDopP.js";import{r as c}from"./vendor-apollo-B9XqHIAo.js";import{z as ze,A as Z,K as Ve,e as Re,$ as Te,L as De}from"./vendor-react-aria-BW9JtD2p.js";import{km as Oe,e6 as q,kn as oe,jO as me,e0 as D,e2 as I,gq as Ee,e1 as Ke,ih as M,gO as Q,j4 as Be,p as O,ko as J,a2 as H,f2 as Ue,b7 as X,ce as Le,T as f,kp as We,m as F,c1 as Ge,jN as Ze,jd as qe,P as de,ag as Y,iD as K,l as ee,G as ge,kq as re,t as B,U as N,aD as Je,aL as ue,b8 as fe,b9 as pe,dX as He,kr as he,dW as Xe,gh as Qe,aG as Ye,im as et,gt as tt,ks as at,kt as st,gW as nt,aC as ot,gV as rt,ku as it,aZ as lt,ff as ct,kv as mt,jz as dt,bf as gt,bq as ut,bk as ie,g8 as ft,g9 as pt,ga as ht,gb as le,kw as xt,j as bt}from"./index-JhqgbpkX.js";import{C as jt}from"./GenerationModeNavigation-BeGzJJIs.js";import{W as vt}from"./vendor-jimp-CkzCxiND.js";import{b as _,a4 as wt,a as xe,h as te,P as yt,u as U,K as St,w as Pt}from"./vendor-firebase-BKQqa5bK.js";import{u as z}from"./vendor-i18next-TC5y0B3W.js";import{d as be,c as Ct}from"./vendor-react-router-Bm0RsDwP.js";import"./vendor-graphql-DeSYh9DC.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-mui-DTp04zm4.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="9f3f1f04-21d7-4e20-bb24-127dfc2e0e3d",t._sentryDebugIdIdentifier="sentry-dbid-9f3f1f04-21d7-4e20-bb24-127dfc2e0e3d")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(a){for(var o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var n in s)s.hasOwnProperty(n)&&(a[n]=s[n])}return a}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const kt=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03 0 1.42c.39.39 1.02.39 1.41 0l6.59-6.59a.996.996 0 0 0 0-1.41l-6.58-6.6a.996.996 0 1 0-1.41 1.41L16.17 11H5c-.55 0-1 .45-1 1s.45 1 1 1z"})}),je="generator::image-stitch-image",ae=void 0,L=St(),ve=_({ratioValue:8}),we=wt(()=>sessionStorage),It=xe(`${je}-left-params`,ae,we),Nt=xe(`${je}-right-params`,ae,we),At=_({leftCroppedAreaParams:It,rightCroppedAreaParams:Nt}),Mt=_({zoom:1}),$t=_({zoom:1}),Ft=_({leftCroppedPreviewParams:Mt,rightCroppedPreviewParams:$t});function ye(t){const a=te(Ft,{store:L});return t==="left"?a.leftCroppedPreviewParams:a.rightCroppedPreviewParams}const _t=t=>yt({children:t.children,store:L});function zt(){return te(ve,{store:L})}function Se(){return U(ve,{store:L})}function Vt(t){const a=te(At);return t==="left"?a.leftCroppedAreaParams:a.rightCroppedAreaParams}const Pe={model:"v2.6",mode:"basic",duration:"5"},se=_(Pe),V=c.createContext({mode:"kiss",configLoading:!1});V.displayName="ImageStitchingConfigContext";const Rt=V.Provider,$=[[3,2],[4,3],[5,4],[6,5],[1,1],[5,6],[4,5],[3,4],[2,3],[9,16],[1,2],[1,3]],C="generator::image-stitch-image",Tt=D({zoom:Ke(M()),x:M(),y:M(),width:M(),height:M()}),Dt=D({ratioValue:M()});function Ce(t,a){if("file"in t&&a){const o=new FileReader;o.onload=function(){const s=this.result;typeof s=="string"?sessionStorage.setItem(`${C}-${a}-file`,s):console.error("Cannot save to session storage")},o.readAsDataURL(t.file)}else"ratioValue"in t&&sessionStorage.setItem(`${C}-common-params`,JSON.stringify({ratioValue:t.ratioValue}))}async function Ot(t){const a=sessionStorage.getItem(`${C}-${t}-params`),o=sessionStorage.getItem(`${C}-common-params`),s=sessionStorage.getItem(`${C}-${t}-file`),n=q(Tt,oe(a)),l=q(Dt,oe(o));if(!(!n.success||typeof s!="string"))try{const i=await me(s);if(i){const r=l.success?l.output.ratioValue:8;return{...n.output,ratioValue:r,file:i}}}catch{console.error("Failed to import saved image")}}function G(t,a){sessionStorage.removeItem(`${C}-${t}-file`),a?.fileOnly||(sessionStorage.removeItem(`${C}-${t}-params`),sessionStorage.removeItem(`${C}-common-params`))}const Et=D({parameters:D({prompts:I(),negativePrompts:I()}),tags:Ee(I()),demo:D({leftImage:I(),rightImage:I(),resultVideo:I()}),sceneId:I()});function Kt(t){const{data:a,isLoading:o}=Oe("tools"),s=`stitching-${t}`,{output:n,success:l}=q(Et,a?.i2vPro?.[s]);return{stitchingConfig:l?n:void 0,isLoading:o}}async function Bt(t){const{leftFile:a,rightFile:o,jimpWorker:s}=t;return new Promise((n,l)=>{try{const i=new FileReader;i.onload=async r=>{const m=r.target?.result;if(!m||!(m instanceof ArrayBuffer))return;const g=new FileReader;g.onload=async b=>{const p=b.target?.result;if(!p||!(p instanceof ArrayBuffer))return;const u={type:"start-stitch",leftData:m,rightData:p};s.postMessage(u),n()},g.onerror=()=>{throw g.error},g.readAsArrayBuffer(o)},i.onerror=()=>{throw i.error},i.readAsArrayBuffer(a)}catch(i){l(i)}})}function Ut(t){const{t:a}=z(["generation"]),[o,s]=Q(se),{models:n}=Be(),l=c.useMemo(()=>n.find(i=>i.model===o.model),[n,o.model]);return e.jsxs(ze,{className:O("flex flex-col gap-2",t.className),onSubmit:i=>i.preventDefault(),children:[e.jsxs(J,{className:"flex mlg:flex-col gap-x-4 gap-y-1 mlg:gap-1 mb-2 flex-wrap",name:"model",value:o.model,onChange:i=>s(r=>{r.model=i}),children:[e.jsx(Z,{children:e.jsx("h3",{className:"font-semibold",children:a("generation:image-to-video.parameters.model.label")})}),n.map(i=>e.jsxs(H,{variant:"rounded-radio",value:i.model,color:"theme",size:"normal",children:[e.jsx("span",{className:"text-sm",children:a([`generation:image-to-video.parameters.model.${Ue(i.model)}.label`,"common:unknown"])}),i.isNew&&e.jsx("span",{className:"ml-2 rounded px-1 py-[2px] leading-none text-white bg-gradient-purple-pink text-[10px]",children:"New"})]},i.model))]}),l?.panelConfig&&e.jsx(Lt,{panelConfig:l.panelConfig})]})}function Lt(t){const{panelConfig:a}=t,{t:o}=z(["generation"]),[s,n]=Q(se),l=a.duration?.options??[5,10],i=a.mode?.options??["basic","professional"];return e.jsxs(e.Fragment,{children:[e.jsxs(J,{className:O("flex mlg:flex-col gap-4 mlg:gap-1 mb-2",!a.mode?.enable&&"hidden"),isDisabled:a.mode?.readonly,name:"mode",value:s.mode,onChange:r=>{n(m=>{m.mode=r})},children:[e.jsx(Z,{className:"font-semibold",children:o("generation:image-to-video.parameters.mode.label")}),i.map(r=>e.jsx(H,{variant:"rounded-radio",value:r,color:"theme",size:"normal",children:e.jsx("span",{className:"text-sm",children:o(`generation:image-to-video.parameters.mode.${r}`)})},r))]}),e.jsxs(J,{className:O("flex mlg:flex-col gap-4 mlg:gap-1 mb-2",!a.duration?.enable&&"hidden"),name:"duration",isDisabled:a.duration?.readonly,value:s.duration,onChange:r=>n(m=>{m.duration=r}),children:[e.jsx(Z,{className:"font-semibold",children:o("generation:image-to-video.parameters.duration.label")}),l.map(r=>e.jsx(H,{variant:"rounded-radio",value:r.toString(),color:"theme",size:"normal",children:e.jsx("span",{className:"text-sm",children:o(`generation:image-to-video.parameters.duration.${r}`)})},r))]})]})}const Wt=[[X.mostLiked,e.jsx(f,{i18nKey:"common:order-option.most-liked"})],[X.newest,e.jsx(f,{i18nKey:"common:order-option.newest"})]];function Gt(){const[t,a]=c.useState(X.mostLiked),{config:o}=c.useContext(V),s=o?.tags?.[0],n=Le(),[l,i]=c.useState();return c.useEffect(()=>{i(n?void 0:document.getElementById("image-stitching-scroll-container"))},[n]),e.jsxs("section",{className:"mt-8 pt-6 border-t px-6 mmd:px-0 max-w-[1200px] mx-auto",children:[e.jsxs("hgroup",{className:"mb-4 flex items-center",children:[e.jsx("h2",{className:"text-base mmd:text-xl font-bold",children:e.jsx(f,{i18nKey:"generation:image-stitching.related-artworks"})}),e.jsx(We,{className:"ml-auto",value:t,onChange:r=>{const m=r.target.value;F("image_stitching_tool_related_order_change",{tag:s,value:m}),a(m)},children:Wt.map(r=>e.jsx("option",{value:r[0],children:r[1]},r[0]))})]}),s&&e.jsx(Ge,{showSpeedDial:!1,order:t,type:Pt.AnimatedArtwork,extraArgs:{i2vPro:!0},trackingArgs:{feed:t,scene:"image-stitching"},tag:s,scrollContainer:l})]})}function Zt(t){return e.jsx(Ze,{scene:"image-stitch",headerSlot:e.jsx(jt,{value:qe.ImageStitching}),main:e.jsx("div",{className:"pt-4 mmd:p-6 max-h-[calc(100vh-80px)] mmd:overflow-y-auto",id:"image-stitching-scroll-container",children:e.jsx(qt,{mode:t.mode,children:e.jsx(Jt,{mode:t.mode})})})})}function qt(t){const{stitchingConfig:a,isLoading:o}=Kt(t.mode),s=c.useMemo(()=>({config:a,mode:t.mode,configLoading:o}),[t.mode,a,o]);return e.jsx(Rt,{value:s,children:t.children})}function Jt(t){const a=be(),o=c.useMemo(()=>e.jsxs("div",{className:"flex flex-col mmd:grid mmd:grid-cols-2 mmd:grid-rows-[1fr_auto] gap-4 max-w-[1200px] mmd:mx-auto",children:[e.jsxs("section",{className:"mmd:contents flex flex-col gap-2 px-4 mmd:px-0",children:[e.jsx(ce,{area:"left"}),e.jsx(ce,{area:"right"})]}),e.jsxs("section",{className:"bg-background mmd:bg-transparent sticky mmd:static max-mmd:bottom-0 flex flex-col gap-2 p-4 mmd:p-1 max-w-full border-t dark:border-neutral-600 mmd:border-none mmd:col-span-2 mmd:grid mmd:grid-cols-subgrid mmd:gap-4",children:[e.jsx(Yt,{}),e.jsx("div",{className:"w-full flex flex-col gap-2",children:e.jsx(Ht,{})})]})]}),[]),s=e.jsxs(ft,{children:[e.jsx(N,{size:"small",variant:"outlined",className:"px-1",children:e.jsx(pt,{className:"size-5"})}),e.jsxs(ht,{placement:"bottom",children:[e.jsx(le,{onAction:()=>{F("generator_image_stitch_mode_switch",{value:"hug"}),a("/generator/stitching/hug")},children:e.jsx(f,{i18nKey:"generation:image-stitching.preset.hug.label"})}),e.jsx(le,{onAction:()=>{F("generator_image_stitch_mode_switch",{value:"kiss"}),a("/generator/stitching/kiss")},children:e.jsx(f,{i18nKey:"generation:image-stitching.preset.kiss.label"})})]})]});return e.jsxs(_t,{children:[e.jsxs("section",{className:"flex flex-wrap gap-2 items-center relative mb-4 max-w-[1200px] mmd:mx-auto mmd:px-0 px-4",children:[s,e.jsx("h1",{className:"text-xl sm:text-3xl text-center absolute left-1/2 -translate-x-1/2 w-full max-w-[calc(100%-2rem)]",children:e.jsx(f,{i18nKey:`generation:image-stitching.preset.${t.mode}.title`})})]}),o,e.jsx(Gt,{})]})}function Ht(){const{configLoading:t,config:a}=c.useContext(V);return t||!a?e.jsx(de,{className:"!my-auto"}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{}),e.jsx(Qt,{})]})}const E=new vt;function Xt(){const{t}=z(["generation"]),{me:a}=Y(),[o,s]=c.useState(!1),[n,l]=c.useState(!1),{leftFile:i,rightFile:r,leftCropPixels:m,rightCropPixels:g,ratioValue:b}=zt(),p=K(i),u=K(r),[R,A]=ee(async()=>{if(!a)return ge(void 0,{fromPath:"image-stitching"});try{if(!p||!u)throw new Error("Please provide both files");if(!m||!g)throw new Error("Crop pixels not provided");if(!E)throw new Error("Worker not loaded");const d=await re(p,m),S=await re(u,g);if(!d||!S)throw new Error("Cropped file not found");s(!0),l(!0),await Bt({leftFile:d,rightFile:S,jimpWorker:E})}catch(d){console.error(d.message),B.error(t("generation:image-stitching.notice.stitch-error"))}},[p,u,m,g,a?.id]),[P,k]=c.useState(null),j=P?new Blob([P],{type:"image/jpeg"}):void 0;c.useEffect(()=>(E.addEventListener("message",d=>{const S=d.data;switch(S.type){case"stitch-result":k(S.result),s(!1)}}),E.onerror=d=>{k(null),B.error(d.message),s(!1)},()=>{s(!1),k(null)}),[]);const v=!p||!u,y=$[b];return e.jsxs(e.Fragment,{children:[e.jsx(N,{busy:R.loading,disabled:v,variant:"filled",color:"theme",onPress:A,children:Je(a)?t("generation:image-stitching.preview.label"):t("generation:submit.lets-go.label")}),e.jsx(sa,{loading:o,resultBlob:j,open:n,onClose:()=>l(!1),trackingArgs:{ratio:`${y[0]}:${y[1]}`}})]})}function Qt(){const{config:t,mode:a}=c.useContext(V),{t:o}=z(["generation"]),[s,n]=c.useState(!1),[l,i]=c.useState(!1),{demo:r}=t;return e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outlined",onPress:()=>{F("image_stitching_tutorial_open",{preset:a}),n(!0)},children:o("generation:image-stitching.view-tutorial.label")}),e.jsxs(ue,{dismissable:!0,open:s,onClose:()=>n(!1),children:[e.jsx(fe,{heading:"Tutorial"}),e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"h-80 min-w-40 object-contain",alt:"demo-left-image",src:r.leftImage}),e.jsx(He,{className:"size-12 text-neutral-600 dark:text-neutral-200"}),e.jsx("img",{className:"h-80 min-w-40 object-contain",alt:"demo-right-image",src:r.rightImage}),e.jsx(kt,{className:"size-12 text-neutral-600 dark:text-neutral-200"}),e.jsxs("div",{className:"relative h-80 min-w-[380px] isolate",children:[!l&&e.jsx("div",{className:"absolute inset-0 w-full h-full flex z-[1]",children:e.jsx(de,{className:"my-auto"})}),e.jsx("video",{className:"relative w-full h-full object-contain z-[2]",src:r.resultVideo,autoPlay:!0,playsInline:!0,muted:!0,loop:!0,disablePictureInPicture:!0,onCanPlay:()=>i(!0)})]})]})})]})]})}function Yt(){const[t,a]=Se(),o=c.useCallback(l=>{a(i=>({...i,ratioValue:l})),Ce({ratioValue:l})},[]),s=$[t.ratioValue][0],n=$[t.ratioValue][1];return e.jsxs("div",{className:"flex gap-3",children:[e.jsx(he,{className:"grow",variant:"half-filled",label:"Ratio",step:1,minValue:0,maxValue:$.length-1,value:t.ratioValue,onChange:o,sliderOutputProps:{children:({state:l})=>{const i=l.values[0],r=$[i];return e.jsxs("span",{children:[r[0]," : ",r[1]]})}}}),e.jsx("div",{className:"size-[78px] mmd:size-[72px] flex items-center justify-center shrink-0",children:e.jsx("div",{className:O("border-2 dark:border-zinc-300 border-zinc-500 rounded-md border-dashed",s>=n?"w-full":"h-full"),style:{aspectRatio:s/n}})})]})}function ea(t){const a=ye(t.area),[o,s]=U(a),n=c.useCallback(l=>{s({zoom:l})},[t.area]);return e.jsxs("div",{className:"my-2",children:[e.jsx("div",{children:e.jsx(he,{variant:"half-filled",label:e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(f,{i18nKey:"generation:image-stitching.parameters.zoom.label"})," ",e.jsx(xt,{className:"size-5"})]}),step:.05,minValue:1,maxValue:3,value:o.zoom,onChange:n})}),e.jsx("p",{className:"text-sm text-stone-400 hidden mmd:block",children:e.jsx(f,{i18nKey:"generation:image-stitching.parameters.zoom.tips"})})]})}const ta=1,aa=3;function ce(t){const{me:a}=Y(),[o,s]=c.useState(!1),{area:n}=t,[l,i]=c.useState({x:0,y:0}),r=n==="left"?"leftCropPreviewParams":"rightCropPreviewParams",[m,g]=Se(),b=ye(n),[p,u]=U(b),R=Vt(n),[A,P]=U(R),k=m.ratioValue,j=n==="left"?"leftFile":"rightFile",v=m[j],y=K(v),d=n==="left"?"leftCropPixels":"rightCropPixels";c.useEffect(()=>{if(!a)return;(async()=>{const x=await Ot(n);if(x){const{file:w,ratioValue:T}=x;g(_e=>({..._e,[j]:w,ratioValue:T}))}G(n,{fileOnly:!0})})()},[a?.id,n]);const S=c.useCallback(h=>{const x=h[0];g(w=>({...w,[j]:x})),G(n,{fileOnly:!0}),P(void 0),a||Ce({file:x},n)},[j,a]),{getRootProps:ke,getInputProps:Ie,open:Ne}=Xe({onDrop:S,multiple:!1,accept:{"image/jpeg":[],"image/png":[]}}),Ae=c.useCallback(h=>{u({zoom:Number(h.toFixed(2))})},[]),Me=c.useCallback((h,x)=>{isNaN(x.height)||(g(w=>({...w,[d]:x})),P(w=>({...w,...x})))},[d]),[$e,Fe]=ee(async h=>{W();const x=(await Qe({id:h})).data.media,w=Ye(x);if(w)try{const T=await me(w);S([T])}catch(T){B.error(T.message)}},[r]),W=c.useCallback(()=>{g(h=>({...h,[j]:null,[d]:void 0})),P(()=>ae),G(n,{fileOnly:!0}),u({zoom:1})},[j,d]),ne=$[k];return e.jsxs("div",{className:"flex flex-col gap-1 mmd:self-end",children:[e.jsx(et,{open:o,onClose:()=>s(!1),onSubmit:Fe,onSelectedFiles:h=>{W(),S(h),s(!1)},showFileUpload:!0}),y&&e.jsx(ea,{...t}),e.jsx("div",{className:"relative aspect-square w-full isolate",children:y?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:W,className:"absolute right-0 top-0 z-[2] bg-black border-2 border-white rounded-full p-0.5 translate-x-1/2 -translate-y-1/2 shadow",children:e.jsx(tt,{className:"size-5 text-white"})}),e.jsx(at,{classes:{containerClassName:"z-1"},image:y,crop:l,zoom:p.zoom,maxZoom:aa,minZoom:ta,aspect:ne[0]/ne[1],showGrid:!1,onCropChange:i,onCropComplete:Me,onZoomChange:Ae,initialCroppedAreaPixels:A,cropShape:"rect"})]}):e.jsxs("div",{className:O("font-medium cursor-pointer flex flex-col gap-3 items-center justify-center text-xs border rounded-lg h-full bg-stone-50 dark:bg-neutral-700 dark:border-neutral-600"),...ke(),children:[e.jsx("input",{...Ie()}),e.jsx("h3",{className:"font-semibold mb-10 text-4xl text-neutral-400",children:e.jsx(f,{i18nKey:`generation:image-stitching.${n}-image.label`})}),e.jsx(N,{variant:"outlined",onPress:()=>Ne(),children:e.jsx(f,{i18nKey:"generation:enhance-image.image-select.upload-image"})}),e.jsx("div",{className:"h-px w-60 my-2 bg-stone-200"}),e.jsx(N,{variant:"outlined",onPress:()=>{if(F("generator_tab_select_task_history_click",{scene:"image-stitching"}),!a)return ge();s(!0)},busy:$e.loading,children:e.jsx(f,{i18nKey:"generation:enhance-image.image-select.select-from-task"})}),e.jsx("div",{className:"h-[80px]"})]})})]})}function sa(t){const{t:a}=z(),{beingMember:o,me:s,membershipTier:n}=Y(),l=be(),i=K(t.resultBlob),{config:r}=c.useContext(V),[m,g]=Q(se);c.useEffect(()=>{g(()=>Pe)},[t.open]);const b=c.useMemo(()=>{const{prompts:v,negativePrompts:y}=r?.parameters??{};return{...m,prompts:v,negativePrompts:y}},[m,r?.parameters]),{activeFreeEvent:p,priceInfo:u,priceValidating:R,hasFreeEvent:A,mutateMyFreeGenerationEvents:P}=st({membershipTier:n,submissionArgs:{i2vPro:b,sceneId:r?.sceneId}}),[k,j]=ee(async()=>{if(!o)return nt({dialogBody:a("generation:image-to-video.membership-dialog.description"),trackingLocation:"image-stitching-i2v-pro-generation-kiss"});if(t.resultBlob)try{const v=await ot(t.resultBlob);if(!v.mediaId)throw new Error("Media failed to upload");F("image_stitching_submit",{preset:"kiss",...t.trackingArgs,...m});const d=(await rt({parameters:{i2vPro:it(b.model,{...b,mediaId:v.mediaId}),sceneId:r?.sceneId}})).data?.createGenerationTask;P(),d&&l(lt("/generator/image/animation",{task:ct(d)}))}catch(v){B.error(v.message)}},[t.resultBlob,o,s,t.trackingArgs,b,r?.sceneId]);return e.jsxs(ue,{...t,className:"max-w-screen-sm",children:[e.jsx(fe,{heading:e.jsx(e.Fragment,{children:e.jsx(f,{i18nKey:"generation:image-stitching.preview.dialog.title"})})}),e.jsxs(pe,{children:[t.loading?e.jsx(mt,{amount:1,children:e.jsx("span",{className:"block min-h-80 min-w-[480px] bg-black/20 dark:bg-white/20 rounded-md animate-pulse"})}):e.jsx("img",{src:i,className:"w-full",alt:"preview-img"}),e.jsxs(Ve,{defaultExpanded:!1,className:"mt-4",children:[e.jsx(Re,{children:e.jsxs(Te,{slot:"trigger",className:"group inline-flex items-center gap-1 outline-none",children:[e.jsx("span",{children:e.jsx(f,{i18nKey:"generation:advanced.label"})}),e.jsx(dt,{className:"size-5 transition-transform group-aria-expanded:rotate-90"})]})}),e.jsx(De,{className:"mt-2",children:e.jsx(Ut,{})})]})]}),e.jsxs(gt,{children:[e.jsx(N,{onPress:t.onClose,children:e.jsx(f,{i18nKey:"action:close"})}),e.jsxs(N,{busy:k.loading,onPress:j,variant:"filled",color:"theme",className:"shrink-0",labelClassName:"flex justify-center items-center gap-2",children:[e.jsx(ut,{className:"size-4"}),a("generation:image-to-video.action.submit"),s&&!A&&e.jsx(ie,{updating:R,originalValue:u?.originalPrice===u.actualPrice?void 0:u?.originalPrice,value:u?.actualPrice,iconClassName:"hidden",valueClassName:"text-xs"}),s&&A&&e.jsxs(ie,{children:[e.jsx("span",{className:"font-bold",children:p?.countRemains}),"/",e.jsx("span",{className:"text-xs",children:a("generation:submit.free-generation.remaining-times",{remaining:p?.countTotal})})]})]})]})]})}function na(){const{t}=z(["common"]),{mode:a}=Ct();return a?e.jsxs(e.Fragment,{children:[e.jsx(bt,{content:t(`common:meta.title.image-stitching-${a}`)}),e.jsx(Zt,{mode:a})]}):null}const Ia=na;export{Ia as Component};
