import{u as x,j as e,fA as _,jf as T,e as g,K as I,gs as P,gt as v,cK as D,jg as W,jh as G,F as K,I as z,de as B,a0 as h,T as S,c4 as O,fK as H,c6 as U,aB as j,aG as b}from"./index-BTMYyhc6.js";import{C}from"./CircularSpinner-nWd4HBSC.js";import{C as A,a as F}from"./ControlSection-BIQjDNv8.js";import{S as L}from"./Slider-0j-9tQ0Y.js";import{M as k}from"./MenuItem-DLax9T5L.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[t]="15531c50-606d-466e-8850-359bb45f0943",a._sentryDebugIdIdentifier="sentry-dbid-15531c50-606d-466e-8850-359bb45f0943")}catch{}})();{var f=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};f._sentryModuleMetadata=f._sentryModuleMetadata||{},f._sentryModuleMetadata[new Error().stack]=Object.assign({},f._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const N=1.1,M=15,X=.1,w=1,y=50,q=1;function R({value:a,handleChange:t,onChange:s,sliderClassName:l,lightningMode:i,disabled:o}){const{t:c}=x(["generation"]),r=g.useCallback(m=>{t?t("samplingSteps")(m):s==null||s(m)},[t,s]),p=g.useCallback(m=>{const n=Number(m.currentTarget.value);if(!isNaN(n)&&!Number.isInteger(n)){const d=Math.round(n);r(d)}},[r]);return e.jsxs(e.Fragment,{children:[i&&e.jsx(A,{className:"my-2",type:F.Warning,children:c("generation:sampling-steps.unavailable-in-lightning-mode")}),a==null?e.jsx(C,{}):e.jsxs("div",{className:"flex gap-8",children:[e.jsx(L,{disabled:o,className:I("max-w-[400px]",l),value:a,onChange:(m,n)=>r(n),min:w,max:y,step:q,valueLabelDisplay:"auto"}),e.jsx(P,{disabled:o,type:"number",className:"w-[60px]",value:a,onChange:m=>{const n=+m.target.value,d=v(n,w,y);r(d)},onBlur:p,inputProps:{min:w,max:y}})]})]})}function Y({value:a,handleChange:t,onChange:s,sliderClassName:l,lightningMode:i,disabled:o}){const{t:c}=x(["generation"]),r=e.jsx(_,{variant:"normal",TooltipProps:{placement:"start"},children:e.jsx("p",{className:"text-sm w-80 whitespace-pre-wrap",children:c("generation:sampling-steps.help")})});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("h2",{className:"font-semibold text-[14px]",children:c("generation:sampling-steps.label")}),r]}),e.jsx(R,{value:a,handleChange:t,onChange:s,sliderClassName:l,lightningMode:i,disabled:o})]})}function $({value:a=T,handleChange:t,onChange:s,selectClassName:l,disabled:i,modelType:o,hideLabel:c}){var E;const{t:r}=x(["generation"]),{data:p,isValidating:m}=D(),n=W(o),d=((E=p==null?void 0:p.samplingMethods)==null?void 0:E.filter(u=>n?G.includes(u):!0))??[];return e.jsxs(K,{fullWidth:!0,children:[!c&&e.jsx(z,{children:r("generation:sampling-method.label")}),m&&d.length<1?e.jsx(C,{}):e.jsxs(B,{disabled:i,size:"small",className:I("max-w-[500px]",l),value:a,label:c?void 0:r("generation:sampling-method.label"),onChange:t?t("samplingMethod"):s,children:[e.jsx(k,{value:"",disabled:!0,children:e.jsx("em",{className:"opacity-50",children:r("generation:vae-model.select-placeholder")})}),d.map(u=>e.jsx(k,{value:u,children:u},u))]})]})}function J({value:a=T,handleChange:t,onChange:s,selectClassName:l,disabled:i,modelType:o}){const{t:c}=x(["generation"]),r=e.jsx(_,{variant:"normal",TooltipProps:{placement:"start"},children:e.jsx("p",{className:"text-sm w-80 whitespace-pre-wrap",children:c("generation:sampling-method.help")})});return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($,{value:a,handleChange:t,onChange:s,selectClassName:l,disabled:i,modelType:o}),r]})}function Q({value:a,handleChange:t,onChange:s,sliderClassName:l,lightningMode:i,disabled:o}){const{t:c}=x(["generation"]),[r,p]=g.useState(a);g.useEffect(()=>{p(a)},[a]);function m(){const n=v(Number(r),N,M);t?t("cfgScale")(n):s==null||s(n)}return e.jsxs(e.Fragment,{children:[i&&e.jsx(A,{className:"my-2",type:F.Warning,children:c("generation:cfg-scale.unavailable-in-lightning-mode")}),a==null?e.jsx(C,{}):e.jsxs("div",{className:"flex gap-8",children:[e.jsx(L,{disabled:o,className:I("max-w-[400px]",l),value:a,onChange:(n,d)=>{t?t("cfgScale")(d):s==null||s(d)},min:N,max:M,step:X,valueLabelDisplay:"auto"}),e.jsx(P,{disabled:o,type:"number",className:"w-[60px]",value:r,onChange:n=>{p(Number(n.target.value))},onBlur:m,inputProps:{min:N,max:M}})]})]})}function Z({value:a,handleChange:t,onChange:s,sliderClassName:l,lightningMode:i,disabled:o}){const{t:c}=x(["generation"]),r=e.jsx(_,{variant:"normal",TooltipProps:{placement:"start"},children:e.jsx("p",{className:"text-sm w-80 whitespace-pre-wrap",children:c("generation:cfg-scale.help")})});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("h2",{className:"font-semibold text-[14px]",children:c("generation:cfg-scale.label")}),r]}),e.jsx(Q,{value:a,handleChange:t,onChange:s,sliderClassName:l,lightningMode:i,disabled:o})]})}const V=20,ee=6;function ce(a){const{versionValues:t,handleChange:s,loadingEditingValues:l,modelType:i}=a;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(h,{i18nKey:"market:submit.version-form.version-string"})}),e.jsx(S,{fullWidth:!0,size:"small",value:(t==null?void 0:t.name)||"",onChange:s("name"),required:!0})]}),O(i).when(H,()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(h,{i18nKey:"market:submit.version-form.negative-prompts"})}),e.jsx(S,{fullWidth:!0,size:"small",value:(t==null?void 0:t.negativePrompts)||"",onChange:s("negativePrompts"),multiline:!0,rows:3})]}),e.jsx(se,{handleChange:s,versionValues:t})]})).when(U,()=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(h,{i18nKey:"market:submit.trigger-words"})}),e.jsx(S,{fullWidth:!0,size:"small",value:(t==null?void 0:t.triggerWords)||"",onChange:s("triggerWords"),inputProps:{autoCapitalize:"none",autoCorrect:"off",spellCheck:!1}})]})).otherwise(()=>null)]})}function se(a){const{t}=x(["market"]),{versionValues:s,handleChange:l}=a,[i,o]=g.useState(()=>(s==null?void 0:s.samplingMethod)!=null),[c,r]=g.useState(()=>(s==null?void 0:s.samplingSteps)!=null),[p,m]=g.useState(()=>(s==null?void 0:s.cfgScale)!=null);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{checked:i,control:e.jsx(b,{onChange:n=>{o(n.target.checked),n.target.checked||l("samplingMethod")(null)}}),label:t("market:submit.version-form.enable-sampling-method.label")}),e.jsx(J,{value:(s==null?void 0:s.samplingMethod)||"",onChange:l("samplingMethod"),selectClassName:"!max-w-[unset]",disabled:!i})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{checked:c,control:e.jsx(b,{onChange:n=>{n.target.checked&&!(s!=null&&s.samplingSteps)&&l("samplingSteps")(V),r(n.target.checked),n.target.checked||l("samplingSteps")(null)}}),label:t("market:submit.version-form.enable-sampling-steps.label")}),e.jsx(Y,{value:(s==null?void 0:s.samplingSteps)??0,onChange:l("samplingSteps"),sliderClassName:"!max-w-[unset]",disabled:!c})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{checked:p,control:e.jsx(b,{onChange:n=>{n.target.checked&&!(s!=null&&s.cfgScale)&&l("cfgScale")(ee),m(n.target.checked),n.target.checked||l("cfgScale")(null)}}),label:t("market:submit.version-form.enable-cfg-scale.label")}),e.jsx(Z,{value:(s==null?void 0:s.cfgScale)??0,onChange:l("cfgScale"),sliderClassName:"!max-w-[unset]",disabled:!p})]})]})}export{Q as C,ce as M,R as S,$ as a};
//# sourceMappingURL=ModelVersionForm-BG9Yypwf.js.map
