import{e as D,h as Ce,i as T,aP as Ie,j as e,L as Pe,u as y,b as Te,c$ as ja,C as I,a4 as pt,k2 as Ca,a as K,f as te,bd as ue,g0 as ka,c4 as oe,bz as Z,ap as vt,P as bt,K as S,B as ee,t as P,aa as Jt,ab as jt,ac as Ct,N as wa,aB as Aa,aG as ya,bn as Xt,U as G,bm as Fa,be as Ea,k3 as Na,Q as _,J as zs,ci as Ls,o as kt,x as Ba,F as Je,I as Xe,de as Ze,fg as Zt,a1 as es,a0 as E,bQ as le,cb as z,f8 as Us,k4 as Os,g3 as Ia,g1 as Sa,k5 as Pa,ca as zt,k6 as Rs,k7 as Ta,T as Ma,c9 as _s,fd as za,b1 as q,k8 as La,k9 as Ua,c5 as Oa,ka as Ra,ec as _a,kb as $a,du as Ha,cZ as $s,by as Ka,fx as Va,bE as Wa,gA as Qa,cH as qa,gy as Ga,gC as Lt,hD as Ya,h6 as Hs,cc as Ja,dp as Xa,$ as Za,bw as en,eb as tn,cD as ts,b2 as sn,kc as an,kd as nn,ke as rn,fi as et,fY as Ks,ge as Vs,aM as Ws,kf as ln,a6 as Qs,kg as on,bS as un,E as cn,kh as dn,bu as tt,M as mn,bq as Ut,bA as Ds,fa as fn,cO as hn,a7 as gn,A as xn,H as Dn,ki as pn,b0 as vn,kj as bn,kk as jn,jJ as Cn,kl as kn,d8 as wn,f4 as qs,bj as An,km as yn,dc as Fn,ch as En,fj as Nn,kn as Bn,cM as ps,ko as In,aD as Sn,bX as Pn,d as Tn,kp as Mn}from"./index-BTMYyhc6.js";import{E as W}from"./Empty-CnG_cY_l.js";import{N as ss}from"./NotLogin-6OH84l9f.js";import{D as wt,M as zn,P as Ln,F as ke,G as He,B as as,o as Ot,k as Un,J as Gs,K as On,L as Rn,N as _n,Q as $n,R as Hn,U as Kn,V as Vn,y as Wn,z as Nt,W as Qn,X as qn}from"./ArtworkListPage-9LI_MBMs.js";import{U as Ys,g as Gn}from"./UserLink-D-ltrUye.js";import{V as Yn}from"./index-Cpf8OWOQ.js";import{U as Jn}from"./UserRecentArtworksPreviewList-3aiQ9TMK.js";import{U as Js,c as Xn}from"./AppLayout-Bx68cLmY.js";import{u as vs}from"./uniqBy-DWZdfvgJ.js";import{f as Xs,g as Zs,h as ea,i as ta,j as Rt}from"./index-COYvdw4o.js";import{M as ns,m as Zn}from"./ModelCard-CK40-i_d.js";import{g as er}from"./cursorPagingUtils-YTUXhLAt.js";import{u as rs}from"./artwork-modal-CN-oDQB1.js";import{a as is,i as tr,f as sr}from"./artwork-D9vxumxJ.js";import{d as ar,a as nr}from"./download-358Ar2ai.js";import{r as sa,p as rr,y as ir,z as lr,P as B,C as or,n as ur}from"./seo-D6wIoyVq.js";import{B as se,C as ls,u as cr}from"./BaseCursorPaging-CwwekXMf.js";import{u as ae,T as aa,f as dr,k as mr,S as fr,l as hr,n as gr,R as xr,D as Dr,o as pr,q as vr,Q as br,b as jr,U as Cr,c as kr,s as wr}from"./GeneratorStage-DJGZB2wF.js";import{U as Ar,s as yr,u as Fr,c as Er}from"./ModelAssetForm-CSHNk3Nd.js";import{M as na}from"./MediaPreview-CrisSWrJ.js";import{U as Nr}from"./UploadImage-DewQdK81.js";import{u as Br,a as Ir}from"./useCopyToClipboard-Cz48Rr7k.js";import{M as U}from"./MenuItem-DLax9T5L.js";import{W as Sr,f as Pr}from"./WorkflowCard-C9uJkztT.js";import{a as ze,f as Tr}from"./formatNum-CBDReyYg.js";import{b as ra}from"./pagination-B34yMghJ.js";import{N as Mr}from"./TrainLoraEvent-ByLNm43A.js";import{W as zr}from"./ArtworkInfoForm-BbAax4Gm.js";import{a as Lr,b as Ur}from"./utils-CORjiwlf.js";import{d as os}from"./InspectDialog-BPHcKRwz.js";import{u as Or}from"./useRaf-DDkdgkyX.js";import{U as Rr,a as _r,b as $r,c as Bt,f as Hr}from"./dismiss-circle-20-filled-ethjMDK5.js";import{$ as Kr,f as Vr,g as Wr,b as Qr}from"./Tab-BLMS8a9U.js";import{D as qr}from"./DropdownMenu-YH0VlLXg.js";import{a as Gr}from"./QuotaBalance-DP6pnxJ0.js";import{U as Yr,B as Jr}from"./index-m6nh9vV8.js";import{P as Xr,E as Zr}from"./ProfileCoverEdit-BgbxYO6s.js";import"./omitBy-8uwoqLo8.js";import"./baseline-add-XAdAsUn_.js";import"./CircularSpinner-nWd4HBSC.js";import"./contextState-BhHzyxk5.js";import"./baseline-keyboard-arrow-down-CRihOzH-.js";import"./baseline-file-upload-CCpLAcZk.js";import"./_isIterateeCall-Bz6vLv_6.js";import"./Disclosure-DgCWlw5X.js";import"./baseline-cancel-RNUwgBax.js";import"./ModelInfoForm-DCsOkC3d.js";import"./index-qPceTsh8.js";import"./imageUtil-NFh1c57i.js";import"./index-C-ypkS9u.js";import"./unFile-B3RwQvIR.js";import"./upload-DDvru8Za.js";import"./Slider-0j-9tQ0Y.js";import"./TagSelect-D6CyfPkY.js";import"./baseline-keyboard-arrow-right-BlgxAuax.js";import"./ModelSubmitFormProvider-phtQjuMT.js";import"./camelCase-2j1YSjKF.js";import"./_stringToArray-Btltjdey.js";import"./_baseSlice-CD5g_G3g.js";import"./defaults-DtvpRUtA.js";import"./_baseRest-nOujwdUV.js";import"./ControlSection-BIQjDNv8.js";import"./omit-Crs8IPcz.js";import"./last-BiHEEoNf.js";import"./SubmitForm-DI3f5b6W.js";import"./GenerationTaskSelect-BF3aji-F.js";import"./optionalControlled-BaStM4vH.js";import"./ModelEditRequest-ZSfXOuoq.js";import"./baseline-edit-CrCwmctU.js";import"./dismiss-24-filled-DmGl87MD.js";import"./TableRow-qxF9QOyo.js";import"./baseline-circle-DKv3JZ6t.js";import"./add-24-filled-BdM6xnA7.js";import"./baseline-check-Bx2631SZ.js";import"./round-plus-RCIMN6sR.js";import"./formUtil-BZLyjGym.js";import"./useEvent-D4asvikd.js";import"./useIsomorphicLayoutEffect-1Q5YRNQV.js";import"./Logo-BmlVHmIW.js";import"./SiteName-B1nS1wd2.js";import"./instagram-Bdv7Dlly.js";import"./NotificationNewsButton-BDIEeogD.js";import"./rx-DaL_68pT.js";import"./baseline-clear-lRfcqXaV.js";import"./createContainer-DXz_vXnk.js";import"./___vite-browser-external_commonjs-proxy-DtbFeITm.js";import"./MangaBaseInfoFormItems-BVy3ZBjO.js";import"./ButtonGroup-DYBxluzJ.js";import"./baseline-delete-outline-B3-PwQHh.js";import"./async-DCNJOliF.js";import"./index-D334VmL8.js";import"./outline-add-photo-alternate-BAWueb6h.js";import"./ModelVersionForm-BG9Yypwf.js";import"./isArrayLikeObject-DMsoF54N.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="38b25ace-f302-4d54-9dff-993a2c25d8a5",t._sentryDebugIdIdentifier="sentry-dbid-38b25ace-f302-4d54-9dff-993a2c25d8a5")}catch{}})();{var Qe=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Qe._sentryModuleMetadata=Qe._sentryModuleMetadata||{},Qe._sentryModuleMetadata[new Error().stack]=Object.assign({},Qe._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const ei=({user:t,type:s})=>{const[r,a]=D.useState([]),[i,n]=D.useState(),[o,u]=D.useState(!0),l=D.useRef();D.useRef();const c=10,[m,d]=Ce(async()=>{var f,v,h,g,x,j;try{if(s==="following"){const b=await T.listUserFollowings({userId:t.id,before:l.current,last:c}),C=(f=b==null?void 0:b.user)==null?void 0:f.followings,A=Ie(C);a(M=>vs([...M,...A],"id")),n(C==null?void 0:C.totalCount),u(!!((v=C==null?void 0:C.pageInfo)!=null&&v.hasPreviousPage)),l.current=(h=C==null?void 0:C.pageInfo)==null?void 0:h.startCursor}else if(s==="follower"){const b=await T.listUserFollowers({userId:t.id,before:l.current,last:c}),C=(g=b==null?void 0:b.user)==null?void 0:g.followers,A=Ie(C);a(M=>vs([...M,...A],"id")),n(C==null?void 0:C.totalCount),u(!!((x=C==null?void 0:C.pageInfo)!=null&&x.hasPreviousPage)),l.current=(j=C==null?void 0:C.pageInfo)==null?void 0:j.startCursor}}catch(b){console.error("user follow list",b)}},[s,t.id]);return D.useEffect(()=>{a([]),n(void 0),u(!0),l.current=void 0,d()},[s,t.id]),r.length===0?m?e.jsx(Pe,{}):e.jsx(W,{}):e.jsx("div",{className:"flex flex-col gap-8",children:e.jsx(Yn,{totalCount:i,data:r,className:"w-full min-h-screen",endReached:()=>{o&&d()},itemContent:(f,v)=>e.jsxs("div",{className:"w-full flex flex-col gap-4 my-4",children:[e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(Ys,{user:v}),e.jsx(Js,{userId:v.id,initialValue:v.followedByMe,initialCount:v.followerCount})]}),e.jsx(Jn,{userId:v.id})]})})})},ti=({user:t,type:s})=>{const{t:r}=y(["user"]),a=Te();return e.jsxs("div",{className:"flex flex-col gap-4 py-8",children:[e.jsx(Ys,{user:t,size:40,leftAnchor:e.jsx(ja,{className:"size-6"})}),e.jsx(wt,{size:"small",value:s,exclusive:!0,onChange:(i,n)=>{I("follow_page_type_change",{value:n}),a(`/@${t.username}/${n}`)},children:["follower","following"].map(i=>e.jsx(pt,{value:i,className:"rounded-full",children:e.jsx("span",{className:"normal-case",children:r(`user:${i}-count-label`)})},i))}),e.jsx(ei,{user:t,type:s})]})},si="$$default$$";function At(t){return t===si}async function ai(t){const{upsertBookmark:s}=await T.upsertBookmark({input:t});return s}async function ia(t,s){const{upsertBookmark:r}=await T.upsertBookmark({id:t,input:s});return r}async function ni(t){await T.deleteBookmark({id:t})}const ri=20;function us({userId:t,username:s,before:r,after:a,pageSize:i=ri}){const{data:n,isLoading:o,mutate:u}=Ca({userId:t,username:s,...er({before:r,after:a,pageSize:i})});return{collections:Ie(n).reverse(),pageInfo:n==null?void 0:n.pageInfo,loading:o,reload:u}}async function yt(t,s){await T.updateBookmarkItem({input:{bookmarkId:t,...s}})}async function ii(t,s){await T.updateBookmarkItem({input:{bookmarkId:t,...s,remove:!0}})}const la=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 2.5a.5.5 0 0 0-1 0V9H2.5a.5.5 0 0 0 0 1H9v6.5a.5.5 0 0 0 1 0V10h6.5a.5.5 0 0 0 0-1H10z"})});function oa(t){const{t:s}=y(["market"]),[{before:r,after:a},i]=K(),n=D.useRef(null),[o,u]=D.useState(!1),[l,c]=D.useState(),{data:m,isValidating:d}=te(),[f]=ue();function v(x){var j;t.editing||(c(x),u(!0)),(j=t.onClickModel)==null||j.call(t,x)}const h=(m==null?void 0:m.id)===t.userId,g=e.jsx(se,{useSWR:ka,getConnection:x=>x,extraArgs:{authorId:t.userId,isNsfw:h||f?void 0:!1,orderBy:oe(t.filters).with({sort:Z.oldest},()=>"createdAt").with({sort:Z.mostLiked},()=>"-markInfo.likedCount").with({sort:Z.mostUsed},()=>"-markInfo.refCount").otherwise(()=>"-createdAt")},isPosSeq:!0,pageSize:20,pagingRef:n,renderItem:x=>{var j,b;return e.jsx(ns,{model:x,link:!0,selected:t.editing?(j=t.selectedItems)==null?void 0:j.includes(x.id):void 0,onClick:(C,A)=>{C.preventDefault(),v(A)},onUpdate:(b=n==null?void 0:n.current)==null?void 0:b.mutate},x.id)},empty:e.jsx(W,{description:s("market:user-models.no-content")}),before:r,after:a,onCursorChange:i});return e.jsxs(e.Fragment,{children:[g,e.jsx(vt,{open:o,onClose:()=>u(!1),dialogProps:{style:{zIndex:20}},children:l?e.jsx(zn,{model:l}):e.jsx(bt,{})})]})}const li=Array.from({length:3},()=>Math.random()*5+6),oi=D.forwardRef(function({userId:s,username:r,currentBookmarkId:a},i){const[{before:n,after:o},u]=D.useState({}),{collections:l,pageInfo:c,loading:m,reload:d}=us({userId:s,before:n,after:o}),f=D.useRef(null),v=D.useRef(null),h=Te(),g=D.useCallback(j=>{I("collection_click",{collectionId:j.id}),a===j.id?h(`/@${r}/artworks`):h(`/@${r}/collection/${j.id}`)},[a,r,h]);if(D.useImperativeHandle(i,()=>({reload:(j=!1)=>{j&&u({}),d()}})),m&&l.length===0)return e.jsx("div",{className:S("flex","gap-4"),children:li.map(j=>e.jsx("div",{className:S("bg-skeleton animate-pulse rounded-md","w-36 h-36")},j))});const x=(c==null?void 0:c.hasNextPage)||(c==null?void 0:c.hasPreviousPage);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 grid-cols-2 msm:grid-cols-3 mmd:grid-cols-4 mlg:grid-cols-6",children:l.map(j=>e.jsx(ci,{bookmark:j,href:`/@${r}/collection/${j.id}`,isSelected:j.id===a,onClick:g,onClickEdit:b=>{var C;return(C=f.current)==null?void 0:C.open(b)},onClickDelete:b=>{var C;return(C=v.current)==null?void 0:C.open(b.id)}},j.id))}),x&&e.jsx(ls,{className:"my-0",pageInfo:c,onChange:u,isPosSeq:!1}),e.jsx(ua,{ref:f,onSubmit:()=>d()}),e.jsx(mi,{ref:v,onRemove:()=>d()})]})});function ui({bookmark:t,href:s,isSelected:r,onClick:a,onClickEdit:i,onClickDelete:n}){const{t:o}=y(["artwork","user"]),[u]=Ea(),[l,c]=D.useState(),m=o("user:collection.cover.placeholder-image"),d=At(t.name),f=d?o("user:collection.default.name"):t.name,h=Na(t.coverMedia)&&u,{isMyProfile:g}=ae();return e.jsxs("div",{className:S("aspect-square relative rounded-lg",r&&"outline outline-theme-primary outline-2 outline-offset-1"),children:[e.jsxs(_,{to:s,className:"size-full grid grid-rows-2 grid-cols-1 place-items-stretch rounded-lg relative overflow-hidden",onClick:x=>{x.preventDefault(),a(t)},children:[t.coverMedia?e.jsxs(e.Fragment,{children:[e.jsx(na,{className:S("row-span-full col-span-full bg-cover bg-top",h&&"blur-xl"),media:t.coverMedia,thumbnail:!0}),e.jsx(Ln,{nsfwBlur:h,showExplicitIcon:h})]}):e.jsx("img",{src:m,alt:"Image",className:"row-span-full col-span-full bg-cover bg-top"}),e.jsx("div",{className:"row-start-2 col-span-full relative p-2 flex flex-col justify-end items-center bg-gradient-to-t from-black/70 text-white text-shadow shadow-black text-balance",children:e.jsx("p",{className:"text-sm font-semibold line-clamp-1",children:f})})]}),g&&e.jsxs("div",{className:"absolute top-1 right-1 bg-gray-200 rounded-md shadow ring-1 ring-black/10",children:[e.jsx(zs,{size:"small",onClick:x=>c(x.currentTarget),children:e.jsx(sa,{className:"text-black"})}),e.jsxs(Ls,{anchorEl:l,open:!!l,onClose:()=>c(void 0),onClick:()=>{I("collection_add_cover_click")},children:[e.jsx(U,{onClick:()=>{i(t),c(void 0),I("collection_edit_click")},children:e.jsx("span",{className:"text-primary",children:o("artwork:action.edit")})}),d?null:e.jsx(U,{onClick:()=>{n(t),c(void 0),I("collection_delete_click")},children:e.jsx("span",{className:"text-red-600",children:o("artwork:action.delete")})})]})]})]})}const ci=D.memo(ui);function di(t){const s=D.useRef(null),{t:r}=y(["user"]);return e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"contained",size:"small",startIcon:e.jsx(la,{className:"size-5"}),className:"h-8 rounded-md shadow-none",onClick:()=>{var a;I("collection_create_click"),(a=s.current)==null||a.open()},children:r("user:collection.create.title")}),e.jsx(ua,{ref:s,onSubmit:t.onSubmit})]})}function cs(t){const{t:s}=y(["user"]),[r,a]=D.useState(),{collections:i}=us({userId:t.userId});return e.jsxs(e.Fragment,{children:[e.jsx(G,{busy:t.loading,variant:"filled",size:"large",onPress:n=>a(n.target),disabled:(t.selectedItems??[]).length===0,children:s("user:collection.add.to")}),e.jsx(Ls,{anchorEl:r,open:!!r,onClose:()=>a(void 0),children:i.map(n=>e.jsx(U,{onClick:()=>{a(void 0),t.addItemsToCollection(n)},children:At(n.name)?s("user:collection.default.name"):n.name},n.id))})]})}function bs(){return{id:"",name:"",coverMedia:void 0,isPublic:!0}}const ua=D.forwardRef(function(s,r){const[a,i]=D.useState(!1),[n,o]=Br(bs()),u=At(n.name);D.useImperativeHandle(r,()=>({open:(d=bs())=>{o(d),i(!0)},close:()=>i(!1)}));const{t:l}=y(["user","action"]),[c,m]=Ce(async({name:d,coverMediaId:f,isPublic:v})=>{var h;try{const g=n.id?await ia(n.id,{coverMediaId:f,isPublic:v,...u?{}:{name:d}}):await ai({name:d,coverMediaId:f,isPublic:v});if(!g)return;(h=s.onSubmit)==null||h.call(s,g),P.success(n.id?l("user:collection.notice.update.success"):l("user:collection.notice.add.success")),i(!1)}catch{P.error(n.id?l("user:collection.notice.update.failed"):l("user:collection.notice.add.failed"))}},[n.id,u,s,l]);return e.jsxs(Jt,{open:a,onClose:(d,f)=>{f!=="backdropClick"&&i(!1)},PaperProps:{sx:{minWidth:400}},children:[e.jsx(jt,{children:n.id?l("user:collection.edit.title"):l("user:collection.create.title")}),e.jsxs(Ct,{className:"flex flex-col gap-4",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:l("user:collection.cover.title")}),e.jsx(Nr,{value:n.coverMedia,onChange:d=>{d&&o({coverMedia:d})},placeholderElement:e.jsx(Ar,{})}),e.jsx("label",{className:"text-sm font-medium opacity-70",children:l("user:collection.name")}),e.jsx(wa,{id:"code-input",type:"text",value:u?l("user:collection.default.name"):n.name,onChange:d=>o({name:d.target.value}),disabled:u,autoComplete:"off",placeholder:l("user:collection.create.placeholder"),className:"w-full mt-0"}),e.jsx(Aa,{control:e.jsx(ya,{checked:n.isPublic,onChange:(d,f)=>{o({isPublic:f})}}),label:l("common:visibility.public")})]}),e.jsxs(Xt,{children:[e.jsx(G,{onPress:()=>i(!1),children:l("action:cancel")}),e.jsx(G,{disabled:!n.name,busy:c,onPress:()=>{var d;m({name:n.name,coverMediaId:(d=n.coverMedia)==null?void 0:d.id,isPublic:n.isPublic}),I("collection_create",{type:n.id?"edit":"create"})},variant:"filled",children:n.id?l("action:update"):l("action:create")})]})]})}),mi=D.forwardRef(function(s,r){const[a,i]=D.useState(s.collectionId);s.collectionId&&a!==s.collectionId&&i(s.collectionId);const[n,o]=D.useState(!1),{t:u}=y(["user","action"]),[l,c]=Ce(async()=>{var m;if(a)try{await ni(a),(m=s.onRemove)==null||m.call(s),o(!1),P.success(u("user:collection.notice.delete.success"))}catch{P.error(u("user:collection.notice.delete.failed"))}},[a]);return D.useImperativeHandle(r,()=>({open:m=>{m&&i(m),o(!0)},close:()=>o(!1)})),e.jsxs(Jt,{open:n,onClose:()=>o(!1),children:[e.jsx(jt,{children:u("user:collection.remove.title")}),e.jsx(Ct,{children:e.jsx(Fa,{children:u("user:collection.remove.content")})}),e.jsxs(Xt,{children:[e.jsx(G,{variant:"outlined",onPress:()=>o(!1),children:u("action:cancel")}),e.jsx(G,{variant:"filled",busy:l,onPress:c,children:u("action:confirm")})]})]})}),fi=[["artwork","user:profile-sub-tab.artwork"],["manga","user:profile-sub-tab.comic"],["animation","common:animation.label_other"],["model","user:profile-sub-tab.model"],["workflow","common:workflow.label_other"]];function ca(t){const{t:s}=y(["user","workflow"]),r=D.useMemo(()=>fi.filter(([a])=>!t.accept||t.accept.includes(a)),[t.accept]);return e.jsx(wt,{value:t.value,onChange:(a,i)=>{t.onChange(i??"")},size:"small",exclusive:!0,className:t.className,style:t.style,children:r.map(([a,i])=>e.jsx(pt,{value:a,children:e.jsx("span",{className:"normal-case inline-flex items-center",children:s(i)})},a))})}function hi(t){const{collectionId:s}=kt();return s?e.jsx(xi,{isMe:t.isMe,bookmarkId:s,userId:t.userId,username:t.username,type:t.type,collectionListRef:t.collectionListRef}):e.jsx(gi,{...t})}const gi=({userId:t,username:s,isTheme:r,showFilters:a=!0,isMe:i=!1,isAdmin:n=!1,type:o})=>{const{t:u}=y(["artwork","common","user","action"]),l=Ba(),[{after:c,before:m,visibility:d,sort:f},v]=K(),[h,g]=rs();D.useEffect(()=>g(void 0),[l]);const x=D.useRef(null),[j]=ue(),b=w=>v({before:null,after:null,...w}),C=({after:w,before:O})=>{v(Q=>({...Q,before:O,after:w}))},A=[["all",u("common:visibility.all")],["private",u("common:visibility.private")],["public",u("common:visibility.public")]],M=[[Z.newest,u("common:order-option.newest")],[Z.oldest,u("common:order-option.oldest")],[Z.mostLiked,u("common:order-option.most-liked")]],F=e.jsxs(Je,{className:"w-[200px]",size:"small",children:[e.jsx(Xe,{children:u("common:visibility.label")}),e.jsx(Ze,{label:u("common:visibility.label"),value:d||A[0][0],onChange:w=>{b({visibility:w.target.value})},children:A.map(([w,O])=>e.jsx(U,{value:w,children:O},w))})]}),$=e.jsxs(Je,{className:"w-[200px]",size:"small",children:[e.jsx(Xe,{children:u("common:order-option.sort")}),e.jsx(Ze,{label:u("common:order-option.sort"),value:f||M[0][0],onChange:w=>{b({sort:w.target.value})},children:M.map(([w,O])=>e.jsx(U,{value:w,children:O},w))})]}),N=ke({actionButtonName:u("action:manage"),deleteItem:w=>T.deleteArtwork({id:w}),afterDelete:()=>{var w;(w=x.current)==null||w.mutate()},dialogTitle:u("artwork:delete-artwork.confirm.title"),dialogContent:u("artwork:delete-artwork.confirm.content")}),he=D.useRef(new Map),Me=w=>{N.editing?(N.selectedItems.includes(w.id)?he.current.delete(w.id):he.current.set(w.id,w),N.toggleSelected(w.id)):i&&w.type===z.AnimatedComic?g(w.manga):g(w)},[ge,we]=Ce(async(w,O)=>{if(N.selectedItems.length!==0)try{await Promise.all(N.selectedItems.map(Q=>O?ii(w.id,{artworkId:Q}):yt(w.id,{artworkId:Q}))),N.cancelSelected(),P.success(u("user:collection.notice.add.success"))}catch{P.error(u("user:collection.notice.add.failed"))}},[N]),[ce,xe]=D.useState({progress:0,total:0}),[{loading:Y},ne]=Zt(async()=>{try{await ar(es(N.selectedItems.map(w=>he.current.get(w))),xe)}catch(w){P.error(w instanceof Error?w.message:String(w)),xe({progress:0,total:0})}},[N]);return e.jsxs("div",{className:"w-full flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-col gap-6",children:i||n?e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a&&e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[F,$]}),e.jsx("div",{className:"flex-1"}),N.editItemsAction,N.editing&&e.jsxs(e.Fragment,{children:[e.jsx(cs,{userId:t,loading:ge,selectedItems:N.selectedItems,addItemsToCollection:w=>we(w,!1)}),e.jsx(G,{size:"large",variant:"filled",busy:Y&&ce.progress===0,disabled:N.selectedItems.length===0||Y,className:"capitalize",onPress:ne,children:Y?`${ce.progress} / ${ce.total}`:e.jsx(E,{i18nKey:"action:download"})})]}),n&&N.editing&&e.jsx(ee,{color:"error",variant:"outlined",disabled:N.selectedItems.length===0,onClick:()=>{rr({refIds:N.selectedItems,refType:le.Artwork,mutate:()=>{var w;(w=x.current)==null||w.mutate()}})},children:"Batch Moderating"})]}):a&&e.jsx("div",{className:"flex gap-4 flex-wrap",children:$})}),e.jsx(da,{userId:t,isTheme:r,isMe:i,types:oe(o).with("","artwork",()=>[z.Default,z.Album]).with("manga",()=>[z.Manga]).with("animation",()=>[z.AnimatedArtwork]).otherwise(()=>{}),showNsfw:i?!0:j,editing:N.editing,selectedItems:N.selectedItems,pagingRef:x,tapArtwork:Me,cursorState:{before:m,after:c},filterState:{visibility:d,sort:f},onCursorChange:C,showContentSafetyLabel:!0}),e.jsx(He,{artwork:h,open:!!h,onClose:()=>{var w;g(void 0),(w=x.current)==null||w.mutate()}})]})},xi=t=>{const{t:s}=y(["artwork","common","user"]),[r]=ue(),[a,i]=rs(),n=D.useRef(null),{isMyProfile:o}=ae(),[u,l]=D.useState(!1),c=D.useRef(new Map),m=(x,j)=>T.updateBookmarkItem({input:{bookmarkId:j,...c.current.get(x)==="model"?{modelId:x}:{artworkId:x},remove:!0}}),d=ke({actionButtonName:s("user:collection.manage.title"),primaryButtonName:s("user:collection.manage.remove"),primaryButtonAfterClick:()=>{I("prinmaryButtonEvent")},beforeDelete:()=>{I("collection_image_remove_confirm",{imageCount:d.selectedItems.length,collectionId:d.selectedItems})},deleteItem:x=>m(x,t.bookmarkId),afterDelete:()=>{var x;(x=n.current)==null||x.mutate()},dialogTitle:s("user:collection.delete.confirm.title"),dialogContent:s("user:collection.delete.confirm.content")});d.deleteItemAction=x=>m(x,t.bookmarkId);const[f,v]=Ce(async x=>{var j;try{if(x.length===0)return;await Promise.all(x.map(b=>yt(t.bookmarkId,b.type==="model"?{modelId:b.id}:{artworkId:b.id}))),(j=n.current)==null||j.mutate(),P.success(s("user:collection.notice.add.success")),l(!1)}catch{P.error(s("user:collection.notice.add.failed"))}},[n,t.bookmarkId]);function h(x){c.current.set(x.id,"artwork"),d.editing?d.toggleSelected(x.id):i(x)}function g(x){c.current.set(x.id,"model"),d.editing&&d.toggleSelected(x.id)}return e.jsxs("div",{className:"w-full flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-col  gap-6",children:o&&e.jsxs("div",{className:"flex gap-4 flex-wrap h-10",children:[e.jsx("div",{className:"flex-1"}),d.editItemsAction,e.jsx(ee,{variant:"contained",startIcon:e.jsx(la,{className:"size-5"}),className:"px-3 rounded-lg h-10 py-0",onClick:()=>{l(!0),I("collection_image_add_click")},children:e.jsx("p",{className:"text-sm font-medium text-center",children:s("user:collection.action.add")})})]})}),e.jsx(Di,{isMe:t.isMe??!1,bookmarkId:t.bookmarkId,type:t.type,editing:d.editing,selectedItems:d.selectedItems,showNsfw:r,pagingRef:n,tapArtwork:h,tapModel:g,showContentSafetyLabel:o,collectionListRef:t.collectionListRef}),e.jsx(He,{artwork:a,open:!!a,onClose:()=>i(void 0)}),e.jsx(pi,{userId:t.userId,open:u,loading:f,confirmSelected:v,onClose:()=>{l(!1)}})]})},da=({userId:t,isTheme:s,isMe:r,showNsfw:a,types:i,editing:n,selectedItems:o,pagingRef:u,tapArtwork:l,filterState:c,cursorState:m,onCursorChange:d,showContentSafetyLabel:f})=>{const{t:v}=y(["artwork"]),{visibility:h,sort:g}=c??{},{before:x,after:j}=m;return e.jsx(D.Suspense,{fallback:e.jsx(bt,{}),children:e.jsx(se,{pagingRef:u,useSWR:Us,getConnection:b=>b,pageSize:20,renderItem:b=>e.jsx(as,{isEdit:n,selected:o.includes(b.id),artwork:b,to:is(b),onClick:C=>C.preventDefault(),onArtworkClick:l,hideShare:tr(b),contentSafetyLabelType:f?Os(b):void 0},b.id),empty:e.jsx(W,{description:v("artwork:no-content")}),extraArgs:{isTheme:s,authorId:t,types:i,isNsfw:a?void 0:!1,isPrivate:h==="private"?!0:h==="public"?!1:void 0,orderBy:Ia(g)},before:x,after:j,isPosSeq:Sa(g),onCursorChange:d})})};function Di({isMe:t,bookmarkId:s,type:r,editing:a,selectedItems:i,pagingRef:n,collectionListRef:o,tapArtwork:u,tapModel:l,showContentSafetyLabel:c}){const{t:m}=y(["artwork"]),[{before:d,after:f},v]=K();return e.jsx(D.Suspense,{fallback:e.jsx(bt,{}),children:e.jsx(se,{useSWR:Pa,extraArgs:{bookmarkId:s,orderBy:"refId",...oe(r).with("",void 0,()=>({types:[le.Artwork,le.Model]})).with("artwork",()=>({types:[le.Artwork],artworkTypes:[z.Default,z.Album]})).with("manga",()=>({types:[le.Artwork],artworkTypes:[z.Comic,z.AnimatedComic]})).with("animation",()=>({types:[le.Artwork],artworkTypes:[z.AnimatedArtwork]})).with("model",()=>({types:[le.Model]})).with("workflow",()=>null).exhaustive()},getConnection:h=>h,pagingRef:n,pageSize:20,before:d,after:f,onCursorChange:v,renderItem:h=>oe(h).with({artwork:zt.select({})},g=>e.jsx(ji,{isMe:t,bookmarkId:s,artwork:g,isEdit:a,selected:i.includes(g.id),tapArtwork:u,showContentSafetyLabel:c,collectionListRef:o},g.id)).with({model:zt.select({})},g=>e.jsx(ns,{model:g,link:!0,selected:a?i.includes(g.id):void 0,onClick:(x,j)=>{l(j)}},g.id)).otherwise(()=>null),empty:e.jsx(W,{description:m("artwork:no-content")})})})}const pi=({open:t,userId:s,isTheme:r,loading:a,confirmSelected:i,onClose:n})=>e.jsx(Jt,{open:t,maxWidth:"md",fullWidth:!0,PaperProps:{style:{maxHeight:"min(calc(100vh - 64px), 800px)"}},children:e.jsx(bi,{userId:s,isTheme:r,loading:a,confirmSelected:i,onClose:n})});function vi(t){switch(t){case"artwork":return[z.Default,z.Album];case"manga":return[z.Comic];case"animation":return[z.AnimatedArtwork]}}const bi=({userId:t,isTheme:s,loading:r,confirmSelected:a,onClose:i})=>{const[n,o]=D.useState({}),[u,l]=D.useState([]),c=D.useMemo(()=>u.map(g=>g.id),[u]),{t:m}=y(["artwork","common"]),[d]=ue(),[f,v]=D.useState("artwork"),h=(g,x)=>{const j=u.some(b=>b.id===g)?u.filter(b=>b.id!==g):[...u,{id:g,type:x}];l(j)};return e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"font-semibold relative",children:m("artwork:choose-artwork")}),e.jsxs(Ct,{className:"grow-0 flex flex-col",children:[e.jsx(ca,{accept:["artwork","model","manga","animation"],value:f,onChange:g=>v(g||"artwork"),className:"mb-4"}),oe(f).with("artwork","manga","animation",g=>e.jsx(da,{userId:t,isTheme:s,isMe:!0,showNsfw:d,types:vi(g),editing:!0,selectedItems:c,pagingRef:void 0,tapArtwork:x=>{h(x.id,"artwork")},cursorState:n,onCursorChange:o})).with("model",()=>e.jsx(oa,{userId:t,editing:!0,selectedItems:c,onClickModel:g=>h(g.id,"model")})).with("workflow",()=>null).exhaustive()]}),e.jsxs(Xt,{className:"px-6",children:[e.jsxs("span",{className:"text-bold",children:[u.length," ","selected"]}),e.jsx("div",{className:"flex-1"}),e.jsx(G,{onPress:i,variant:"outlined",className:"capitalize",children:m("action:cancel")}),e.jsx(G,{busy:r,onPress:()=>{a(u),I("collection_image_add_confirm")},variant:"filled",children:m("action:confirm")})]})]})};function ji({bookmarkId:t,isMe:s,isEdit:r,selected:a,artwork:i,tapArtwork:n,showContentSafetyLabel:o,collectionListRef:u}){return e.jsxs("div",{className:"relative",children:[e.jsx(as,{artwork:i,to:is(i),isEdit:r,selected:a,onClick:l=>l.preventDefault(),onArtworkClick:n,contentSafetyLabelType:o?Os(i):void 0},i.id),s&&!r&&e.jsx("div",{className:"absolute top-0 right-0 overflow-visible size-0",children:e.jsx(Ci,{collectionListRef:u,artwork:i,bookmarkId:t})})]})}function Ci(t){const{t:s}=y(["artwork"]),r=es([[{key:"set-cover",label:s("artwork:action.use-as-collection-cover"),onClick:async()=>{var a,i;try{await ia(t.bookmarkId,{coverMediaId:(a=t.artwork.media)==null?void 0:a.id}),(i=t.collectionListRef.current)==null||i.reload(!0),P.success(s("user:collection.notice.update.success"))}catch{P.error(s("user:collection.notice.update.failed"))}}}],...t.menu??[]].flat());return r.length===0?null:e.jsxs(Xs,{modal:!1,children:[e.jsx(Zs,{asChild:!0,onClick:a=>{a.preventDefault(),a.stopPropagation()},children:e.jsx("button",{className:"absolute top-1.5 right-1.5 flex justify-center items-center size-7 text-white bg-black/50 ring-1 ring-white/30 backdrop-blur rounded-full",children:e.jsx(Zn,{className:"size-5"})})}),e.jsx(ea,{children:e.jsx(ta,{align:"end",className:S("mt-1 overflow-hidden py-2 text-sm bg-white/80 dark:bg-black/80 backdrop-blur ring-1 ring-black/10 dark:ring-white/30 rounded-[12px] rounded-tr shadow-lg origin-top-right !duration-75","data-[state=open]:animate-in","data-[state=open]:fade-in","data-[state=open]:zoom-in-95","data-[state=open]:ease-out","data-[state=closed]:animate-out","data-[state=closed]:fade-out","data-[state=closed]:zoom-out-95","data-[state=closed]:ease-in"),onClick:a=>{a.preventDefault(),a.stopPropagation()},children:r.map(a=>e.jsx(Rt,{className:S("min-w-[140px] px-4 py-2 hover:bg-black/10 dark:hover:bg-white/10 hover:ring-1 ring-black/10 dark:ring-white/20 outline-none select-none",a.className),style:a.style,onClick:()=>{var i;return(i=a.onClick)==null?void 0:i.call(a,t.artwork)},children:a.label},a.key))})})]})}const ki=({userId:t,isMe:s})=>{const{t:r}=y(["artwork"]),[{before:a,after:i},n]=K(),[o,u]=rs(),[l]=ue();return e.jsxs(e.Fragment,{children:[e.jsx(se,{useSWR:Rs,getConnection:c=>c,pageSize:20,renderItem:c=>e.jsx(as,{artwork:c,onArtworkClick:u,showAuthor:!0},c.id),empty:e.jsx(W,{description:r("artwork:no-content")}),extraArgs:{userId:t,isNsfw:l?void 0:!1,types:[z.Default,z.AnimatedArtwork]},before:a,after:i,onCursorChange:n}),e.jsx(He,{artwork:o,open:!!o,onClose:()=>u(void 0)})]})};function wi(t){const[{before:s,after:r},a]=K(),[i]=ue();return e.jsx(e.Fragment,{children:e.jsx(se,{useSWR:Rs,getConnection:n=>n,pageSize:20,renderContainer:({children:n})=>e.jsx("div",{className:"grid grid-cols-1 msm:grid-cols-2 mmd:grid-cols-3 gap-3",children:n}),renderItem:n=>n.type==="COMFY_FLOW"?e.jsx(Sr,{data:n,onClick:o=>window.open(Ot(o.id),"_blank")},n.id):null,empty:e.jsx(W,{description:e.jsx(E,{i18nKey:"artwork:no-content"})}),extraArgs:{userId:t.userId,isNsfw:i?void 0:!1,types:[z.Workflow]},before:s,after:r,onCursorChange:a})})}const Ai=t=>e.jsx("svg",{viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032"})}),yi=t=>e.jsx("svg",{viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M8 5.25a1.25 1.25 0 1 1 0-2.5a1.25 1.25 0 0 1 0 2.5m0 4a1.25 1.25 0 1 1 0-2.5a1.25 1.25 0 0 1 0 2.5M6.75 12a1.25 1.25 0 1 0 2.5 0a1.25 1.25 0 0 0-2.5 0"})}),js=[["all","common:visibility.all"],["private","common:visibility.private"],["public","common:visibility.public"]];function Fi(){const{user:t,isMyProfile:s}=ae(),[r,a]=D.useState("all"),[i,n]=D.useState(""),{pageArgs:o,setPageInfo:u,hasPrevPage:l,hasNextPage:c,nextPage:m,prevPage:d}=ra({pageSize:10,dataOrder:"desc"}),{data:f,isLoading:v,mutate:h}=Ta({authorId:t.id,isPrivate:!s||r==="all"?void 0:r==="private",q:i||void 0,...o});u(f==null?void 0:f.pageInfo);const g=D.useMemo(()=>Ie(f).reverse(),[f]),x=D.useRef(10);v||(x.current=g.length);const{t:j}=y(["action"]),b=ke({actionButtonName:j("action:manage")});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsxs(Je,{size:"small",className:"w-[200px]",children:[e.jsx(Xe,{children:e.jsx(E,{i18nKey:"common:visibility.label"})}),e.jsx(Ze,{label:e.jsx(E,{i18nKey:"common:visibility.label"}),value:r||js[0][0],onChange:C=>{a(C.target.value)},children:js.map(([C,A])=>e.jsx(U,{value:C,className:"capitalize",children:e.jsx(E,{i18nKey:A})},C))})]}),e.jsx(Ma,{variant:"outlined",size:"small",label:e.jsx(E,{i18nKey:"common:home.search.label"}),type:"search",defaultValue:i,className:"w-full max-w-[200px]",onChange:C=>{C.target.value.trim()||n("")},onKeyDown:C=>{C.key==="Enter"&&n(C.target.value.trim())}}),e.jsx("span",{className:"ml-auto"}),s&&b.editItemsAction]}),e.jsxs("ul",{className:"grid grid-cols-[1fr_1fr_auto] text-sm border-t border-b border-black/15 dark:border-white/15 divide-y divide-black/15 dark:divide-white/15",children:[v&&Array.from({length:x.current}).map((C,A)=>e.jsx(Ni,{style:{opacity:1-A*(1/x.current)}},A)),g.map(C=>_s({workflow:{}},C)&&e.jsx(Ei,{artwork:C,selected:b.editing?b.selectedItems.includes(C.id):void 0,onClick:A=>{b.editing&&(A.preventDefault(),b.toggleSelected(C.id))},onUpdate:h},C.id)),e.jsx("li",{className:"col-span-full hidden first:block py-3 text-center text-neutral-600 dark:text-neutral-400",children:e.jsx(E,{i18nKey:"workflow:workflow.counter_zero"})})]}),e.jsx("div",{className:"my-4 flex justify-center items-center",children:e.jsx(ls,{isPosSeq:!0,pageInfo:{hasPreviousPage:l(),hasNextPage:c()},onClickPrev:d,onClickNext:m})})]})}function Ei(t){var o;const{isMyProfile:s}=ae(),{workflow:r}=t.artwork,a=typeof t.selected=="boolean",i=Te(),n={menuItem:"min-w-[140px] px-4 py-2 hover:bg-black/10 dark:hover:bg-white/10 hover:ring-1 ring-black/10 dark:ring-white/20 outline-none select-none"};return e.jsx("li",{className:"col-span-full grid grid-cols-subgrid py-1",children:e.jsxs("a",{href:s?Un(r.id,!0):Ot(t.artwork.id),className:"col-span-full grid grid-cols-subgrid gap-3 px-3 py-1 no-underline hover:bg-black/5 dark:hover:bg-white/5 rounded-lg",onClick:t.onClick,children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:S("-ml-2 relative inline-block size-6 bg-white has-[:checked]:bg-purple-600 border-2 has-[:checked]:border-0 border-black/80 has-[:checked]:ring-1 ring-black/80 has-[:checked]:ring-black/10 rounded-full",!a&&"hidden"),children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:za,className:"peer absolute size-0 invisible"}),e.jsx(Ai,{className:"absolute inset-0 m-auto size-4 text-transparent peer-checked:text-white"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:r.name||e.jsx(E,{i18nKey:"workflow:workflow.name.default"})}),e.jsx("span",{className:"text-neutral-500",children:_s({draftVersion:{data:{workflow:{nodes:{length:zt.number.gt(0)}}}}},r)&&e.jsx(E,{i18nKey:"workflow:node-counter",values:{count:r.draftVersion.data.workflow.nodes.length}})})]})]}),e.jsx("div",{className:"flex flex-col gap-1 py-0.5",children:r.published&&e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"px-1.5 text-xs uppercase tracking-wide text-white bg-purple-700 rounded-full",children:e.jsx(E,{i18nKey:"common:publish.success"})})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[e.jsx(Pr,{className:"size-5 text-neutral-400"}),ze((o=t.artwork)==null?void 0:o.likedCount)]})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[e.jsxs("span",{className:"flex justify-between gap-[0.25em]",children:[e.jsx("span",{className:"text-neutral-500",children:e.jsx(E,{i18nKey:"common:created-at"})})," ",e.jsx("time",{dateTime:q(r.createdAt).toISOString(),children:q(r.createdAt).format("lll")})]}),e.jsxs("span",{className:"flex justify-between gap-[0.25em]",children:[e.jsx("span",{className:"text-neutral-500",children:e.jsx(E,{i18nKey:"common:updated-at"})})," ",e.jsx("time",{dateTime:q(r.updatedAt).toISOString(),children:q(r.updatedAt).format("lll")})]})]}),s&&e.jsxs(Xs,{children:[e.jsx(Zs,{asChild:!0,children:e.jsx("button",{className:S("flex-none -mr-2 inline-grid place-content-center size-6 hover:bg-black/10 dark:hover:bg-white/10 rounded-full",a&&"hidden"),onClick:u=>{u.preventDefault(),u.stopPropagation()},children:e.jsx(yi,{className:"size-5"})})}),e.jsx(ea,{children:e.jsxs(ta,{align:"end",className:S("mt-1 overflow-hidden py-2 text-sm bg-white/80 dark:bg-black/80 backdrop-blur ring-1 ring-black/10 dark:ring-white/30 rounded-[12px] rounded-tr shadow-lg origin-top-right !duration-75","data-[state=open]:animate-in","data-[state=open]:fade-in","data-[state=open]:zoom-in-95","data-[state=open]:ease-out","data-[state=closed]:animate-out","data-[state=closed]:fade-out","data-[state=closed]:zoom-out-95","data-[state=closed]:ease-in"),onClick:u=>{u.preventDefault(),u.stopPropagation()},children:[r.published&&e.jsx(Rt,{className:n.menuItem,onClick:()=>{i(Ot(t.artwork.id))},children:e.jsx(E,{i18nKey:"workflow:market.open-in-market"})}),e.jsx(Rt,{className:S(n.menuItem,"text-red-500"),onClick:async()=>{var u;await La(r.id),(u=t.onUpdate)==null||u.call(t)},children:e.jsx(E,{i18nKey:"action:delete.label"})})]})})]})]})]})})}function Ni(t){return e.jsxs("li",{...t,className:S("flex flex-col gap-1 py-2 px-3",t.className),children:[e.jsx("div",{className:"flex items-center prepend-zws",children:e.jsx("span",{className:"inline-block h-[1em] bg-zinc-300 rounded animate-pulse",style:{width:"10em"}})}),e.jsx("div",{className:"flex items-center prepend-zws",children:e.jsx("span",{className:"inline-block h-[1em] bg-zinc-300 rounded animate-pulse",style:{width:"3em"}})})]})}const Bi=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M12.353 15.854a.5.5 0 0 1-.707.001L6.162 10.39a.55.55 0 0 1 0-.78l5.484-5.464a.5.5 0 1 1 .706.708L7.188 10l5.164 5.147a.5.5 0 0 1 .001.707"})});function Cs(t){const{userId:s,modelType:r}=t,{t:a}=y(["artwork"]),[{before:i,after:n},o]=K(),[u]=ue();return e.jsx(se,{useSWR:Ua,getConnection:l=>l,pageSize:20,empty:e.jsx(W,{description:a("artwork:no-content")}),renderItem:l=>e.jsx(ns,{model:l,link:!0},l.id),extraArgs:{userId:s,isNsfw:u?void 0:!1,types:[r]},before:i,after:n,onCursorChange:o})}const Ii=({userId:t,isMe:s,isAdmin:r})=>{const{t:a}=y(["manga","action","user"]),[{before:i,after:n},o]=K(),[u,l]=D.useState(),[c]=ue(),m=ke({actionButtonName:a("action:manage")}),[d,f]=Ce(async v=>{if(m.selectedItems.length!==0)try{await Promise.all(m.selectedItems.map(h=>yt(v.id,{artworkId:h}))),m.cancelSelected(),P.success(a("user:collection.notice.add.success"))}catch{P.error(a("user:collection.notice.add.failed"))}},[m]);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-4 flex gap-4 justify-end items-center",children:[(s||r)&&m.editItemsAction,m.editing&&e.jsx(cs,{userId:t,loading:d,selectedItems:m.selectedItems,addItemsToCollection:f})]}),e.jsx(se,{useSWR:Us,getConnection:v=>v,pageSize:20,renderItem:v=>{const{manga:h}=v;return h?e.jsx(Gs,{manga:h,to:is(h),shouldBlur:sr(v),artworkModFlags:{isWarned:Oa(v)},onClick:g=>g.preventDefault(),onMangaClick:g=>m.editing?m.toggleSelected(g.artworkId):l(g),artwork:v},h.id):null},empty:e.jsx(W,{description:a("manga:no-content")}),extraArgs:{types:[z.Comic,z.AnimatedComic],isNsfw:s||c?void 0:!1,authorId:t},before:i,after:n,onCursorChange:o}),e.jsx(He,{artwork:u,open:!!u,onClose:()=>l(void 0)})]})},Si=({userId:t})=>{const{t:s}=y(["artwork"]),[{before:r,after:a},i]=K(),[n,o]=D.useState(),[u]=ue();return e.jsxs(e.Fragment,{children:[e.jsx(se,{useSWR:Ra,getConnection:l=>l,pageSize:20,renderItem:l=>e.jsx(Gs,{manga:l,onMangaClick:o,artwork:l.artwork},l.id),empty:e.jsx(W,{description:s("artwork:no-content")}),extraArgs:{userId:t,isNsfw:u?void 0:!1},before:r,after:a,onCursorChange:i}),e.jsx(He,{artwork:n,open:!!n,onClose:()=>o(void 0)})]})},Pi=({tabs:t,currentTab:s,onChange:r})=>{var a;return e.jsxs("div",{children:[e.jsx("div",{className:"pb-4",children:e.jsx(wt,{exclusive:!0,size:"small",value:s,onChange:(i,n)=>{n!=null&&r(n)},children:t.map(([i,n])=>e.jsx(pt,{value:i,children:e.jsx("span",{className:"normal-case inline-flex items-center",children:n})},i))})}),e.jsx(D.Suspense,{fallback:e.jsx(Pe,{}),children:(a=t.find(([i])=>i===s))==null?void 0:a[2]})]})},Ti=({task:t,onTaskClick:s,...r})=>{const{id:a,status:i,media:n,parameters:{prompts:o=""}={},createdAt:u}=t||{};return e.jsx(On,{id:a,media:n,mediaFallback:e.jsx(aa,{className:"w-full h-full",id:a,status:i}),animated:_a(t),label:o,time:u,border:"plain",...r,onClick:(...l)=>{var c;(c=r.onClick)==null||c.call(r,...l),s==null||s(t)}})},_t=D.memo(Ti),Mi=({artworkId:t})=>e.jsxs("div",{className:"flex gap-1 items-center text-[#999] text-[12px]",children:[e.jsx($a,{content:Ha(t)}),e.jsxs(_,{to:`/artwork/${t}`,target:"_blank",className:"underline flex items-center truncate",children:[location.origin+`/artwork/${t}`,e.jsx(zi,{})]})]}),zi=({artworkId:t})=>e.jsx(zr,{cond:!!t,wrap:s=>e.jsx(_,{to:`/artwork/${t}`,target:"_blank",className:"underline flex items-center truncate",children:s}),children:e.jsx(zs,{size:"small",children:e.jsx($s,{})})}),Li=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"})}),Ui=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),Oi=({artwork:t,showViewCount:s=!0,showLikedCount:r=!0,showCommentCount:a=!0,artworkId:i})=>{const{data:n=t}=Ka(i);return e.jsxs("div",{className:"flex gap-4 text-primary tabular-nums",children:[s&&(n==null?void 0:n.views)!=null&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(Li,{className:"text-icon size-6"}),e.jsx("span",{children:ze(n==null?void 0:n.views)})]}),r&&(n==null?void 0:n.likedCount)!=null&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(Rn,{className:"text-icon size-6"}),e.jsx("span",{children:ze(n==null?void 0:n.likedCount)})]}),a&&(n==null?void 0:n.commentCount)!=null&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(Ui,{className:"text-icon size-6"}),e.jsx("span",{children:ze(n.commentCount)})]})]})},Ri=({startTime:t,endTime:s,precision:r})=>{Or(s?0:1e11);const a=q.duration(q(s===null?void 0:s).diff(q(t))),i=a.asHours()<<0,n=a.minutes(),o=a.seconds()+(r?a.milliseconds()/1e3:0),u=[];return i>0&&u.push(`${i}h`),n>0&&u.push(`${n}m`),o>0&&u.push(`${o.toPrecision(r)}s`),e.jsx("span",{children:u.join(" ")})},ks=D.memo(Ri),_i=({parsedParams:t,summaryExtra:s})=>{const{t:r}=y(["generation"]),a=oe(t).with({type:"i2vPro"},i=>[{key:"mode",label:r("generation:image-to-video.parameters.mode.label"),value:i.mode},{key:"duration",label:r("generation:image-to-video.parameters.duration.label"),value:i.duration},{key:"camera",label:r("generation:image-to-video.parameters.camera.label"),value:i.cameraMovement}]).with({type:"generator"},i=>[{key:"magic-prompts",label:r("generation:original-prompts.label"),value:i.magicPrompts},{key:"neg-prompts",label:r("generation:negative-prompts.label"),value:i.negativePrompts},{key:"sampling-steps",label:r("generation:sampling-steps.label"),value:i.samplingSteps},{key:"sampling-methods",label:r("generation:sampling-method.label"),value:i.samplingMethod},{key:"cfgscale",label:r("generation:cfg-scale.label"),value:i.cfgScale},{key:"seed",label:r("generation:seed.label"),value:i.seed},{key:"base-image",label:r("generation:base-image.label"),value:i.mediaId?e.jsx(na,{mediaId:i.mediaId,className:"w-[200px] h-[200px] bg-no-repeat bg-contain"}):void 0}]).otherwise(()=>[]).filter(i=>!!i.value);return a.length<1?null:e.jsxs("details",{children:[e.jsxs("summary",{className:"bg-neutral-100 dark:bg-stone-700 rounded-full px-2 py-1 mt-2 mb-1 w-fit  select-none cursor-pointer",children:[r("generation:detail-params.show.label"),s]}),e.jsx(ma,{className:"ml-2",items:a})]})},$i=({task:t})=>{var b;const{t:s}=y(["artwork","generation","common"]),{detailParameters:r={}}=t.outputs??{},{width:a,height:i}=r,n=_n({id:t.id,outputs:t.outputs,parameters:t.parameters}),o=(n==null?void 0:n.type)==="generator"?n==null?void 0:n.modelId:void 0,u=(n==null?void 0:n.type)==="i2vPro"?Va(n.model):void 0,{data:{model:l}={}}=Wa(o),c=D.useMemo(()=>l!=null&&l.title?e.jsxs("span",{className:"inline-flex gap-2 items-center",children:[l.title,e.jsx(_,{to:`/model/${l.id}`,target:"_blank",children:e.jsx($s,{})})]}):s([`generation:image-to-video.parameters.model.${u}.label`,"common:unknown"]),[l,u]);if(!(n!=null&&n.type)||!t)return null;const{id:m,createdAt:d,startedAt:f,endAt:v,status:h}=t,g=n.type==="generator"&&((b=n.styleMix)!=null&&b.enabled)&&Number(n.styleMix.seed)?n.styleMix.seed:void 0,x=n.type==="generator"&&n.qualityTag?Qa(n.qualityTag):void 0,j=[{key:"ID",label:"ID",value:e.jsx("pre",{children:m},"id")},{key:"created-at",label:s("artwork:generation.submit-time"),value:q(d).format("lll")},{key:"started-at",label:s("artwork:generation.start-time"),value:f?q(f).format("lll"):"not started"},{key:"waiting-time",label:s("artwork:generation.waiting-time"),value:e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-w-[100px]",children:h==="cancelled"?"(N/A)":e.jsx(ks,{startTime:d,endTime:f})})})},{key:"elapsed",label:s("artwork:generation.generating-time"),value:f?e.jsx(ks,{startTime:f,endTime:v}):"not started"},{key:"size",label:s("artwork:generation.size"),value:a&&i?e.jsxs(e.Fragment,{children:[a,"x",i]}):null},{key:"model",label:s("artwork:generation.model-used"),value:c},{key:"style-seed",label:e.jsx($n,{},"style-seed"),value:g?e.jsx(Hn,{seed:g}):void 0},{key:"quality-tag",label:s("generation:quality-tag.label"),value:x}];return e.jsxs(e.Fragment,{children:[e.jsx(ma,{items:j,omitEmptyValue:!0}),e.jsx(_i,{parsedParams:n})]})};function ma(t){const s=t.omitEmptyValue?t.items.filter(r=>!!r.value):t.items;return e.jsx("table",{className:S("table-auto border-separate border-spacing-x-3",t.className),children:e.jsx("tbody",{children:s.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap font-medium text-sm text-neutral-500 dark:text-neutral-400",children:r.label}),e.jsx("td",{className:"w-full",children:r.value})]},r.key))})})}const Hi=D.memo($i),ws=qa({base:"inline-flex items-center gap-1 px-2 text-sm leading-6 uppercase tracking-wide text-white rounded [box-shadow:inset_0_1px_1px_#fff3]",variants:{color:{blue:"bg-blue-600",purple:"bg-purple-600"},hasIcon:{true:"pl-1"}}});function $t(t){return e.jsxs(e.Fragment,{children:[e.jsx(Ki,{...t}),e.jsx(Vi,{...t})]})}function Ki(t){const{task:s}=t;return s!=null&&s.parameters?Ga(s)?e.jsx("span",{className:ws({className:"absolute top-1 left-1",color:"blue"}),children:e.jsx(E,{i18nKey:"common:workflow.label_one"})}):Lt(s)?e.jsxs("span",{className:ws({className:"absolute top-1 left-1",color:"purple",hasIcon:!0}),children:[e.jsx(dr,{}),e.jsx(E,{i18nKey:"artwork:type.animated",context:"short"})]}):null:null}function Vi(t){const{task:s}=t;if(!(s!=null&&s.parameters))return null;const r=Ya(t.task)??0;return r>0?e.jsxs(Kn,{corner:"top-right",className:"flex items-center gap-1 shadow-none rounded-tr-lg",children:[e.jsx(mr,{className:"text-white/70 size-5"}),e.jsx("span",{className:"text-white/90",children:r})]}):null}const ds=({task:t,onClose:s=()=>{}})=>{var h;const{t:r}=y(["artwork","user"]),{data:a=t,mutate:i}=Hs(t==null?void 0:t.id),{id:n,media:o,parameters:u={},status:l,artworkId:c}=a||{},m=Ja(a)?(h=u==null?void 0:u.i2vPro)==null?void 0:h.prompts:u.prompts,{mutate:d}=cr(),{data:f}=te(),v=D.useMemo(()=>(a==null?void 0:a.status)!=="completed"||(a==null?void 0:a.parameters.batchSize)<2?"#":Xa("/generator/image",{task:Vn(a),showOnStage:"1"}),[a==null?void 0:a.status,a==null?void 0:a.parameters]);return e.jsxs("div",{className:"flex flex-col p-8 gap-4",children:[e.jsxs("div",{className:"w-full flex justify-center relative rounded-2xl overflow-hidden",children:[o?e.jsx(fr,{scene:"task-detail",imgClassName:S("w-full max-h-[500px]"),id:o.id,mediaId:o.id,fileName:Lr({task:a})+"."+Ur({task:a}),originalUrl:Za(o),thumbnailUrl:en(o),videoMediaId:tn(a),width:o==null?void 0:o.width,height:o==null?void 0:o.height,pswpOptions:{showHideAnimationType:"fade"},skipDownloadConversion:Lt(a),mediaType:Lt(a)?"video":"image",preferVideo:!0}):e.jsx(aa,{className:"w-full h-[500px]",id:n,status:l}),e.jsx($t,{task:a})]}),e.jsxs("div",{className:"w-full flex gap-2 flex-wrap items-start",children:[c?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(Mi,{artworkId:c}),e.jsx(Oi,{artworkId:c})]}):(a==null?void 0:a.status)==="completed"?((a==null?void 0:a.parameters.batchSize)??0)<=1&&e.jsx(hr,{className:"rounded-lg",style:{height:"36.5px"},task:a,scene:"profile"}):null,(a==null?void 0:a.status)==="completed"&&e.jsx(ee,{component:_,to:v,variant:"contained",onClick:()=>{I("go_to_task_click",{taskId:a.id}),ts("generate_source")},children:r("user:task.go-to-task")}),(a==null?void 0:a.status)==="waiting"&&e.jsx(gr,{task:a}),(a==null?void 0:a.status)==="failed"&&e.jsx(xr,{task:a,onSuccess:()=>i()}),a&&e.jsx(Dr,{task:a,onSuccess:()=>{s(),d()},color:"danger",variant:"filled",className:"rounded-lg",style:{height:"36.5px"},children:r("artwork:delete-task.label")}),e.jsx("div",{className:"flex-1"}),(f==null?void 0:f.isAdmin)&&e.jsx(sn,{title:"admin only",children:e.jsx(ee,{variant:"outlined",color:"warning",onClick:()=>{os(a)},children:"Inspect"})})]}),e.jsx("div",{className:"text-lg font-medium",children:r("artwork:prompts.prompts")}),e.jsx("div",{className:"text-sm",children:m}),a&&e.jsx("div",{className:"flex flex-col",children:e.jsx(Hi,{task:a})})]})};function Wi(){const t=D.useRef(null),{t:s}=y(["artwork","user"]),r=ke({actionButtonName:s("user:profile-sub-tab.tasks.manage.bookmark-action"),deleteItem:a=>{const i=a.split("-");return T.updateBookmarkItem({input:{taskId:i[0],mediaId:i[1],remove:!0}})},afterDelete:()=>{var a;(a=t.current)==null||a.mutate()},dialogTitle:"Confirm to remove these from favorites?",dialogContent:""});return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1"}),r.editItemsAction]}),e.jsx(Qi,{pagingRef:t,editing:r.editing,selectedItems:r.selectedItems,toggleSelected:r.toggleSelected})]})}function Qi(t){const{editing:s,selectedItems:r,toggleSelected:a,pagingRef:i}=t,{t:n}=y(["artwork","user"]),[{before:o,after:u},l]=K(),{data:c,isValidating:m}=te(),[d,f]=D.useState(!1),[v,h]=D.useState(),g=D.useCallback(j=>{h(j),f(!0)},[]);if(!c)return m?e.jsx(Pe,{}):e.jsx(ss,{});const x=j=>{var b;s?a(`${((b=j.task)==null?void 0:b.id)??""}-${j.mediaId??""}`):g(j.task)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{useSWR:an,getConnection:j=>j,pageSize:20,pagingRef:i,renderItem:j=>{var b;return e.jsx(qi,{item:j,onItemClick:x,selected:r.includes(`${((b=j.task)==null?void 0:b.id)??""}-${j.mediaId??""}`),isEdit:s},j.id)},empty:e.jsx(W,{description:n("user:favorite-list.placeholder")}),before:o,after:u,onCursorChange:l,extraArgs:{types:[le.Task]}}),e.jsx(vt,{open:d,onClose:()=>f(!1),children:e.jsx(ds,{task:v,onClose:()=>f(!1)})})]})}function qi(t){var o,u;const{item:s,onItemClick:r,selected:a,isEdit:i}=t,n=D.useCallback(()=>{r(s)},[s,r]);return e.jsx(_t,{isEdit:i,selected:a,task:s.task,onClick:n,media:(((o=s.task)==null?void 0:o.parameters.batchSize)??0)>1?s.media:(u=s.task)==null?void 0:u.media})}const Gi=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 2a8 8 0 1 1 0 16a8 8 0 0 1 0-16m0 1a7 7 0 1 0 0 14a7 7 0 0 0 0-14m-.5 2a.5.5 0 0 1 .492.41L10 5.5V10h2.5a.5.5 0 0 1 .09.992L12.5 11h-3a.5.5 0 0 1-.492-.41L9 10.5v-5a.5.5 0 0 1 .5-.5"})}),Yi=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 2c2.817 0 4.415 1.923 4.647 4.246h.07C16.532 6.246 18 7.758 18 9.623q0 .143-.011.283a5.8 5.8 0 0 0-1.114-1.062c-.31-.933-1.163-1.598-2.157-1.598h-.071a1 1 0 0 1-.995-.9C13.45 4.325 12.109 3 10 3C7.886 3 6.551 4.316 6.348 6.345a1 1 0 0 1-.995.901h-.07C4.027 7.246 3 8.304 3 9.623C3 10.943 4.028 12 5.282 12h2.666a5.7 5.7 0 0 0-.177 1H5.282C3.469 13 2 11.488 2 9.623C2 7.82 3.373 6.347 5.102 6.251l.251-.005C5.587 3.908 7.183 2 10 2m3.5 7a4.5 4.5 0 1 1 0 9a4.5 4.5 0 0 1 0-9m1.602 4.898a.562.562 0 1 0 .796-.796l-2-2a.56.56 0 0 0-.796 0l-2 2a.562.562 0 1 0 .796.796L13 12.796V15.5a.5.5 0 0 0 1 0v-2.704z"})}),Ji=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 2a8 8 0 1 1 0 16a8 8 0 0 1 0-16m0 1a7 7 0 1 0 0 14a7 7 0 0 0 0-14M7.81 7.114l.069.058L10 9.292l2.121-2.12a.5.5 0 0 1 .638-.058l.07.058a.5.5 0 0 1 .057.637l-.058.07L10.708 10l2.12 2.121a.5.5 0 0 1 .058.638l-.058.07a.5.5 0 0 1-.637.057l-.07-.058L10 10.708l-2.121 2.12a.5.5 0 0 1-.638.058l-.07-.058a.5.5 0 0 1-.057-.637l.058-.07L9.292 10l-2.12-2.121a.5.5 0 0 1-.058-.638l.058-.07a.5.5 0 0 1 .637-.057"})}),Xi=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414a1.5 1.5 0 0 0-.44-1.06l-3.914-3.915A1.5 1.5 0 0 0 10.586 2zM5 4a1 1 0 0 1 1-1h4v3.5A1.5 1.5 0 0 0 11.5 8H15v8a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1zm9.793 3H11.5a.5.5 0 0 1-.5-.5V3.207z"})}),Zi=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M6 2a2 2 0 0 0-2 2v5.207a5.5 5.5 0 0 1 1-.185V4a1 1 0 0 1 1-1h4v3.5A1.5 1.5 0 0 0 11.5 8H15v8a1 1 0 0 1-1 1h-3.6a5.5 5.5 0 0 1-.657 1H14a2 2 0 0 0 2-2V7.414a1.5 1.5 0 0 0-.44-1.06l-3.914-3.915A1.5 1.5 0 0 0 10.586 2zm8.793 5H11.5a.5.5 0 0 1-.5-.5V3.207zM10 14.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0M5.5 12a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2a.5.5 0 0 0-.5-.5m0 5.125a.625.625 0 1 0 0-1.25a.625.625 0 0 0 0 1.25"})}),el=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 6a1.25 1.25 0 1 1 0-2.5A1.25 1.25 0 0 1 10 6m0 5.25a1.25 1.25 0 1 1 0-2.5a1.25 1.25 0 0 1 0 2.5m-1.25 4a1.25 1.25 0 1 0 2.5 0a1.25 1.25 0 0 0-2.5 0"})}),tl=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M8.5 3a5.5 5.5 0 0 1 4.227 9.02l4.127 4.126a.5.5 0 0 1-.638.765l-.07-.057l-4.126-4.127A5.5 5.5 0 1 1 8.5 3m0 1a4.5 4.5 0 1 0 0 9a4.5 4.5 0 0 0 0-9"})}),It=30;function sl(){const{user:t,isMyProfile:s}=ae(),[r,a]=D.useState(""),[i,n]=D.useState({last:It}),{data:o,isValidating:u,mutate:l}=nn(t?{userId:t.id,q:r||void 0,...i}:void 0),c=Ie(o).reverse(),m=o==null?void 0:o.pageInfo,d=!!(m!=null&&m.hasPreviousPage),f=!!(m!=null&&m.hasNextPage),v=()=>d&&n({before:m==null?void 0:m.startCursor,last:It}),h=()=>f&&n({after:m==null?void 0:m.endCursor,first:It}),{data:g}=rn(t?{userId:t.id}:void 0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 grid grid-cols-[1fr_auto] msm:grid-cols-[1fr_auto_1fr] items-center gap-4 text-sm",children:[e.jsx(al,{className:"justify-self-start",onChange:a}),e.jsxs("p",{className:"max-msm:row-start-2 justify-self-start relative flex items-center text-sm text-neutral-600 dark:text-neutral-500",children:[!!(g!=null&&g.count)&&e.jsxs(e.Fragment,{children:[e.jsx(E,{i18nKey:"common:file.counter",values:{count:g.count}})," ","(",Tr(g.size),")"]}),e.jsx("span",{className:"absolute left-full top-0 translate-x-1 flex items-center w-0 h-full",children:e.jsx(et,{className:S("flex-none size-5 text-black dark:text-white animate-spin",!u&&"invisible")})})]}),s&&e.jsx(nl,{onUpload:l})]}),e.jsx("div",{className:"grid grid-cols-[1fr_auto] msm:grid-cols-[1fr_auto_auto_auto] mmd:grid-cols-[1fr_auto_auto_auto] border-t border-b border-black/15 dark:border-white/15 divide-y divide-black/15 dark:divide-white/15",children:c.length?c.map(x=>e.jsx(rl,{file:x,onUpdate:l},x.id)):e.jsx("p",{className:"col-span-full p-3 text-sm text-center",children:e.jsx(E,{i18nKey:"common:file.label",values:{count:0}})})}),e.jsx("div",{className:"mt-4 max-mmd:mb-4 flex justify-center",children:e.jsx(ls,{isPosSeq:!0,pageInfo:{hasPreviousPage:f,hasNextPage:d},onClickPrev:h,onClickNext:v})})]})}function al(t){const{t:s}=y(["common"]),[r,a]=D.useState("");return Ks(()=>{var i;(i=t.onChange)==null||i.call(t,r.trim())},200,[t.onChange,r]),e.jsxs("label",{"data-empty":r?null:"",className:S("group inline-grid grid-cols-[32px_1fr_32px] h-8 bg-white dark:bg-zinc-800 rounded-md ring-1 focus-within:ring-2 ring-black/10 dark:ring-black/20 focus-within:ring-black dark:focus-within:ring-white/80 shadow",t.className),style:t.style,children:[e.jsx(tl,{className:"place-self-center size-5"}),e.jsx("input",{type:"text",value:r,placeholder:s("common:file.actions.search.placeholder"),className:"py-1 bg-transparent outline-none",onChange:i=>{a(i.target.value)}}),e.jsx("button",{className:"inline-grid place-items-center size-full group-data-[empty]:invisible",onClick:()=>a(""),children:e.jsx(Ji,{className:"size-5"})})]})}function nl(t){const s=D.useRef(null),[r,a]=D.useState();return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:s,type:"file",hidden:!0,onChange:async i=>{var o,u;const n=(o=i.target.files)==null?void 0:o[0];if(n)try{a(0);const l=await yr(n);await Fr(n,l,{scope:"custom",onProgress:a}),(u=t.onUpload)==null||u.call(t)}catch(l){console.error(l),P.error(String(l))}finally{a(void 0),i.target.value=""}}}),e.jsx(Vs,{variant:"normal",disabled:r!=null,"data-state":r==null?"idle":"uploading",icon:r==null?e.jsx(Yi,{className:"size-5"}):e.jsx(et,{className:"size-5 animate-spin"}),className:"group justify-self-end",onClick:()=>{var i;(i=s.current)==null||i.click()},children:e.jsxs("div",{className:"grid grid-rows-1 grid-cols-1",children:[e.jsx("span",{className:"row-start-1 col-start-1 group-data-[state=uploading]:invisible",children:e.jsx(E,{i18nKey:"market:train-lora.add-image.upload-file.label"})}),e.jsx("span",{className:"row-start-1 col-start-1 group-data-[state=idle]:invisible",children:r==null?e.jsx(E,{i18nKey:"market:train-lora.add-image.upload-file.label"}):e.jsxs(e.Fragment,{children:[e.jsx(E,{i18nKey:"market:submit.notice.uploading-file"}),"` ($",Math.round(r*100),"%)`"]})})]})})]})}function rl(t){const{beingAdmin:s}=Ws(),r=t.file.sha256,a=r==null?void 0:r.slice(0,8);return e.jsxs("div",{className:"col-span-full grid grid-cols-subgrid items-center gap-x-3 py-3 text-sm",children:[e.jsxs("span",{className:S("inline-flex items-center",!t.file.isFinished&&"text-red-600 dark:text-red-500"),children:[t.file.isFinished?e.jsx(Xi,{className:"flex-none mr-1 size-5"}):e.jsx(Zi,{className:"flex-none mr-1 size-5"}),t.file.filename]}),e.jsxs("p",{className:"row-start-2 col-span-full flex msm:contents items-center gap-4 pl-6 text-neutral-500",children:[s&&e.jsx("code",{className:"text-xs",onClick:()=>window.prompt("Full hash",r),children:a}),e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(Gi,{className:"flex-none mr-1 size-5"}),e.jsx("time",{dateTime:q(t.file.createdAt).toISOString(),className:"max-msm:text-neutral-500",children:q(t.file.createdAt).format("lll")})]})]}),e.jsx(il,{file:t.file,onAction:i=>{var n;switch(i){case"delete":(n=t.onUpdate)==null||n.call(t);break}}})]})}function il(t){const{beingAdmin:s}=Ws(),[,r]=Ir();return e.jsxs(Rr,{children:[e.jsx(_r,{children:e.jsx("button",{className:S("inline-grid place-content-center w-full aspect-square p-1.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full","data-[state=open]:text-white dark:data-[state=open]:text-black","data-[state=open]:bg-black dark:data-[state=open]:bg-white"),children:e.jsx(el,{className:"size-5"})})}),e.jsxs($r,{align:"center",children:[s&&e.jsx(Bt,{onClick:()=>os(t.file),children:"Inspect"}),e.jsx(Bt,{onClick:async()=>{r(t.file.id),P.success(e.jsx(E,{i18nKey:"file.actions.copy-file-id.messages.success"}))},children:e.jsx(E,{i18nKey:"file.actions.copy-file-id.label"})}),e.jsx(Bt,{className:"text-red-600 dark:text-red-500",onClick:async()=>{var a;await ln(t.file.id),(a=t.onAction)==null||a.call(t,"delete")},children:e.jsx(E,{i18nKey:"action:delete.label"})})]})]})}const ll=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M5 10a5 5 0 1 1 10 0a5 5 0 0 1-10 0m5-7a7 7 0 1 0 4.192 12.606l5.1 5.101a1 1 0 0 0 1.415-1.414l-5.1-5.1A7 7 0 0 0 10 3"})}),ol=({userId:t,editing:s,selectedItems:r,toggleSelected:a,pagingRef:i,onDataChange:n})=>{const{t:o}=y(["artwork","workflow"]),[{before:u,after:l,keyword:c},m]=K(),d=Qs(),[f,v]=D.useState(!1),[h,g]=D.useState(),{data:x,isValidating:j}=te(),b=D.useCallback(A=>{A&&(g(A),v(!0))},[]);if(!x)return j?e.jsx(Pe,{}):e.jsx(ss,{});const C=A=>{A&&(s?a(A.id,A):b(A))};return e.jsxs(e.Fragment,{children:[x.id===t||x.isAdmin?e.jsx(se,{useSWR:on,getConnection:A=>A,pageSize:20,renderItem:A=>x.id===t?e.jsx(_t,{isEdit:s,selected:r.includes(A.id),task:A,onTaskClick:C,contentExtra:e.jsx($t,{task:A})},A.id):e.jsx(_t,{task:A,onTaskClick:b,contentExtra:e.jsx($t,{task:A})},A.id),extraArgs:{keyword:c,userId:t},empty:e.jsx(W,{description:o("artwork:generation.no-task")}),before:u,after:l,onCursorChange:m,pagingRef:i,onDataChange:A=>{const M=Ie(A);n&&M.length>0&&n(M)}}):null,e.jsx(un,{open:f,onClose:()=>v(!1),type:d?"drawer":"dialog",dismissable:!0,className:"mlg:w-[1200px] max-w-full",children:e.jsx(ds,{task:h,onClose:()=>v(!1)})})]})},ul=({userId:t})=>{const{t:s}=y(["action","user"]),[,r]=K(),[a,i]=D.useState([]),n=ke({actionButtonName:s("action:manage"),deleteItem:h=>T.deleteGenerationTask({taskId:h}),afterDelete:()=>{var h;(h=o.current)==null||h.mutate()},dialogTitle:s("user:profile-sub-tab.tasks.manage.confirm.title"),dialogContent:s("user:profile-sub-tab.tasks.manage.confirm.content")}),o=D.useRef(null),u=h=>{r({keyword:h||null,before:null,after:null}),I("task_search_commit",{scene:"profile"})},l=D.useRef(new Map),[c,m]=D.useState({progress:0,total:0}),[{loading:d},f]=Zt(async()=>{try{await nr(es(n.selectedItems.map(h=>l.current.get(h))),m)}catch(h){P.error(h instanceof Error?h.message:String(h)),m({progress:0,total:0})}},[n]),v=()=>{a.forEach(g=>{l.current.set(g.id,g)});const h=Array.from(new Set([...n.selectedItems,...a.map(g=>g.id)]));n.setSelectedItems(h)};return e.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(cn,{className:"w-full max-w-72",size:"small",placeholder:s("common:search"),startAdornment:e.jsx(ll,{className:"mr-2 size-6 text-neutral-500"}),onKeyDown:h=>{h.key==="Enter"&&u(h.currentTarget.value)},onBlur:h=>{u(h.currentTarget.value)}}),e.jsx("span",{className:"ml-auto"}),n.editItemsAction,n.editing&&e.jsxs(e.Fragment,{children:[e.jsx(G,{variant:"filled",onPress:v,size:"large",children:e.jsx(E,{i18nKey:"action:select-all"})}),e.jsx(G,{variant:"filled",busy:d&&c.progress===0,disabled:n.selectedItems.length===0||d,className:"capitalize",onPress:f,size:"large",children:d?`${c.progress} / ${c.total}`:e.jsx(E,{i18nKey:"action:download"})})]})]}),e.jsx(ol,{pagingRef:o,userId:t,editing:n.editing,selectedItems:n.selectedItems,toggleSelected:(h,g)=>{n.selectedItems.includes(h)?l.current.delete(h):g.media&&l.current.set(h,g),n.toggleSelected(h)},onDataChange:h=>{i(h??[])}})]})};function cl(t){const{tabs:s,currentTab:r,onChange:a}=t,[{openTask:i}]=K(),{data:n}=Hs(i||void 0,{revalidateOnFocus:!1}),[o,u]=D.useState(!1);D.useEffect(()=>{n&&u(!0)},[n]);const l=D.useMemo(()=>e.jsx(wt,{exclusive:!0,onChange:(c,m)=>{m!=null&&a(m)},value:r,children:s.map(({value:c,label:m})=>e.jsx(pt,{value:c,className:"normal-case",children:m},c))}),[r,a,s]);return e.jsxs(e.Fragment,{children:[e.jsxs(Kr,{selectedKey:r,onSelectionChange:c=>a(c),children:[e.jsx(Vr,{className:"hidden",children:s.map(({value:c})=>e.jsx(Wr,{id:c},c))}),e.jsx(D.Suspense,{fallback:e.jsx(Pe,{}),children:s.map(({value:c,children:m})=>e.jsxs(Qr,{id:c,children:[l,m]},c))})]}),e.jsx(vt,{open:o,onClose:()=>u(!1),children:e.jsx(ds,{task:n,onClose:()=>u(!1)})})]})}const dl={[B.models]:"artworks/models",[B.manga]:"artworks/manga",[B.likedManga]:"likes/liked-manga"},Le=Symbol("private"),As=Symbol("admin only"),ys=[[B.artworks,e.jsx(E,{i18nKey:"user:works.works.label"},B.artworks)],[B.likes,e.jsx(E,{i18nKey:"user:likes"},B.likes)],[B.tasks,e.jsx(E,{i18nKey:"user:generation-tasks"},B.tasks),Le],[B.credits,e.jsx(E,{i18nKey:"user:membership-and-credits"},B.credits),Le],[B.files,e.jsx(E,{i18nKey:"common:file.label",values:{count:2}},B.files),Le]];function ml(){const{user:t,profile:s,isMyProfile:r}=ae(),{collections:a,loading:i}=us({userId:t.id}),{t:n}=y(["common","user"]),{tab:o=B.artworks,subTab:u="",collectionId:l}=kt(),c=D.useMemo(()=>ys.find(([x])=>x===o),[o]),{data:m}=dn(l),d=D.useRef(null),{data:f,isLoading:v}=te(),h=Te(),g=dl[o];return g?e.jsx(tt,{to:`/@${t.username}/${g}`,replace:!0}):!(f!=null&&f.isAdmin)&&((c==null?void 0:c[2])===As||(c==null?void 0:c[2])===Le&&!r)?e.jsx(tt,{to:`/@${t.username}`,replace:!0}):e.jsxs(e.Fragment,{children:[e.jsx(mn,{title:ir(n,t),description:lr(n,t,o),ogUrlPathname:`/@${t.username}`,canonicalURL:Ut(`/@${t.username}/${o}/${u}`)}),e.jsxs("div",{className:"w-full",children:[(i||(a==null?void 0:a.length)>0||r)&&e.jsxs("section",{className:"pb-8",children:[e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx("h2",{className:"font-bold",children:n("user:collection.section.title")}),e.jsx("div",{className:"contents first:*:ml-auto",children:r&&e.jsx(di,{onSubmit:x=>{var j;(j=d.current)==null||j.reload(!0),h(`/@${t.username}/collection/${x.id}`)}})})]}),e.jsx(oi,{ref:d,userId:t.id,username:t.username,currentBookmarkId:l})]}),e.jsx(Wn,{value:o,className:"border-b",variant:"scrollable",allowScrollButtonsMobile:!0,scrollButtons:"auto",children:l?[e.jsx(Nt,{component:_,to:`/@${t.username}/${B.artworks}`,value:"none",label:e.jsxs("span",{className:"flex gap-2 items-center normal-case",children:[e.jsx(Bi,{className:"size-5"}),n("user:works.works.label",{context:"back"})]}),className:"px-4 py-2 font-medium text-lg relative no-underline hover:bg-tab-hover active:bg-tab-hover rounded-t-lg whitespace-nowrap"},"back"),e.jsx(Nt,{value:o,label:e.jsx("span",{className:"normal-case",children:At(m==null?void 0:m.name)?n("user:collection.default.name"):m==null?void 0:m.name}),className:"px-4 py-2 font-medium text-lg relative no-underline hover:bg-tab-hover active:bg-tab-hover rounded-t-lg whitespace-nowrap"},"collection")]:ys.map(([x,j,b])=>!(f!=null&&f.isAdmin)&&(b===Le&&!r||b===As)?null:e.jsx(Nt,{component:_,to:`/@${t.username}/${x}`,value:x,label:e.jsx("span",{className:"normal-case",children:j}),className:"px-4 py-2 font-medium text-lg relative no-underline hover:bg-tab-hover active:bg-tab-hover rounded-t-lg whitespace-nowrap",onClick:()=>{I("user_profile_tab_click",{tab:x})}},x))}),e.jsx("div",{className:"mt-4 -mb-8",children:e.jsx(D.Suspense,{fallback:e.jsx(bt,{}),children:oe(o).with(B.artworks,()=>e.jsx(fl,{collectionListRef:d})).with(B.likes,()=>e.jsx(Pi,{currentTab:u,tabs:[["",n("user:profile-sub-tab.artwork"),e.jsx(ki,{userId:t.id,isMe:r},"artworks")],[B.likedManga,n("user:profile-sub-tab.manga"),e.jsx(Si,{userId:t.id,isMe:r},"mangas")],[B.likedSdv1Model,n("user:model-sub-tab.sdv1model"),e.jsx(Cs,{modelType:Ds.AnyModel,userId:t.id},"models")],[B.likedLoraModel,n("user:model-sub-tab.lora"),e.jsx(Cs,{modelType:Ds.AnyLora,userId:t.id},"loras")],[B.workflows,n("common:workflow.label_other"),e.jsx(wi,{userId:t.id},"workflows")]],onChange:x=>h(`/@${t.username}/${B.likes}/${x}`)})).with(B.tasks,()=>e.jsx(cl,{currentTab:u,onChange:x=>h(`/@${t.username}/${B.tasks}/${x}`),tabs:[{value:"",label:n("user:profile-sub-tab.all"),children:e.jsx(ul,{userId:t.id})},...r?[{value:B.bookmarks,label:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(pr,{className:"size-4"}),n("user:profile-sub-tab.favorites.label")]},"favorites"),children:e.jsx(Wi,{})}]:[]]})).with(B.credits,()=>e.jsx(vr,{userId:t.id})).with(B.files,()=>e.jsx(sl,{})).otherwise(()=>null)})})]})]})}function fl(t){const{subTab:s,collectionId:r}=kt(),a=hl(s??""),[i,n]=D.useState("");!r&&i!==""&&n("");const{user:o,isMyProfile:u}=ae(),l=Te(),{data:c}=te(),m=c==null?void 0:c.isAdmin;return e.jsxs(e.Fragment,{children:[e.jsx(ca,{value:r?i:a,accept:r?["artwork","model","manga"]:void 0,onChange:d=>{r?n(d===i?"":d):d&&(I("my_work_tab_click",{tab:d}),l(`/@${o.username}/${B.artworks}/${gl(d)}`))},className:"pb-4"}),oe(a).with("artwork","animation",()=>e.jsx(hi,{userId:o.id,username:o.username,isMe:u,isAdmin:m,type:r?i:a,collectionListRef:t.collectionListRef})).with("model",()=>e.jsx(xl,{isAdmin:m})).with("manga",()=>e.jsx(Ii,{userId:o.id,isAdmin:m})).with("workflow",()=>e.jsx(Fi,{})).exhaustive()]})}function hl(t){switch(t){case"":return"artwork";case"manga":return"manga";case"animations":return"animation";case"models":return"model";case"workflows":return"workflow";default:fn()}}function gl(t){switch(t){case"artwork":return"";case"manga":return"manga";case"animation":return"animations";case"model":return"models";case"workflow":return"workflows"}}function xl(t){const{t:s}=y(["common","action","user"]),{user:r,isMyProfile:a}=ae(),i=[[Z.newest,s("common:order-option.newest")],[Z.oldest,s("common:order-option.oldest")],[Z.mostLiked,s("common:order-option.most-liked")],[Z.mostUsed,s("common:order-option.most-used")]],[{sort:n},o]=K(),u=d=>o({before:null,after:null,...d}),l=ke({actionButtonName:s("action:manage")}),[c,m]=Ce(async d=>{if(l.selectedItems.length!==0)try{await Promise.all(l.selectedItems.map(f=>yt(d.id,{modelId:f}))),l.cancelSelected(),P.success(s("user:collection.notice.add.success"))}catch{P.error(s("user:collection.notice.add.failed"))}},[l]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 items-center",children:[e.jsxs(Je,{className:"w-[200px]",size:"small",children:[e.jsx(Xe,{children:s("common:order-option.sort")}),e.jsx(Ze,{label:s("common:order-option.sort"),value:n||i[0][0],onChange:d=>{u({sort:d.target.value})},children:i.map(([d,f])=>e.jsx(U,{value:d,children:f},d))})]}),e.jsx("span",{className:"ml-auto"}),a&&!l.editing&&e.jsx(Dl,{}),(a||t.isAdmin)&&l.editItemsAction,l.editing&&e.jsx(cs,{userId:r.id,loading:c,selectedItems:l.selectedItems,addItemsToCollection:m})]}),e.jsx(oa,{userId:r.id,filters:{sort:n},editing:l.editing,selectedItems:l.selectedItems,onClickModel:d=>l.toggleSelected(d.id)})]})}function Dl(){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{from:"user-profile"}),e.jsx(hn,{variant:"outlined",href:"/market/submit",className:"rounded-lg font-medium h-[36.5px]",onPress:()=>{I("upload_lora_model_click",{location:"user-profile"})},children:e.jsx(E,{i18nKey:"artwork:upload-local-image"})})]})}var Fs="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kids kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum music mutual mv mw mx my mz na nab nagoya name natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest racing radio re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign vermögensberater vermögensberatung versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw".split(" "),Es="ελ ευ бг бел дети ею католик ком мкд мон москва онлайн орг рус рф сайт срб укр қаз հայ ישראל קום ابوظبي اتصالات ارامكو الاردن البحرين الجزائر السعودية العليان المغرب امارات ایران بارت بازار بيتك بھارت تونس سودان سورية شبكة عراق عرب عمان فلسطين قطر كاثوليك كوم مصر مليسيا موريتانيا موقع همراه پاکستان ڀارت कॉम नेट भारत भारतम् भारोत संगठन বাংলা ভারত ভাৰত ਭਾਰਤ ભારત ଭାରତ இந்தியா இலங்கை சிங்கப்பூர் భారత్ ಭಾರತ ഭാരതം ලංකා คอม ไทย ລາວ გე みんな アマゾン クラウド グーグル コム ストア セール ファッション ポイント 世界 中信 中国 中國 中文网 亚马逊 企业 佛山 信息 健康 八卦 公司 公益 台湾 台灣 商城 商店 商标 嘉里 嘉里大酒店 在线 大拿 天主教 娱乐 家電 广东 微博 慈善 我爱你 手机 招聘 政务 政府 新加坡 新闻 时尚 書籍 机构 淡马锡 游戏 澳門 点看 移动 组织机构 网址 网店 网站 网络 联通 诺基亚 谷歌 购物 通販 集团 電訊盈科 飞利浦 食品 餐厅 香格里拉 香港 닷넷 닷컴 삼성 한국".split(" "),je=function(s,r){for(var a in r)s[a]=r[a];return s},Ht="numeric",Kt="ascii",Vt="alpha",Ge="asciinumeric",qe="alphanumeric",Wt="domain",fa="emoji",pl="scheme",vl="slashscheme",Ns="whitespace";function bl(t,s){return t in s||(s[t]=[]),s[t]}function be(t,s,r){s[Ht]&&(s[Ge]=!0,s[qe]=!0),s[Kt]&&(s[Ge]=!0,s[Vt]=!0),s[Ge]&&(s[qe]=!0),s[Vt]&&(s[qe]=!0),s[qe]&&(s[Wt]=!0),s[fa]&&(s[Wt]=!0);for(var a in s){var i=bl(a,r);i.indexOf(t)<0&&i.push(t)}}function jl(t,s){var r={};for(var a in s)s[a].indexOf(t)>=0&&(r[a]=!0);return r}function H(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}H.groups={};H.prototype={accepts:function(){return!!this.t},go:function(s){var r=this,a=r.j[s];if(a)return a;for(var i=0;i<r.jr.length;i++){var n=r.jr[i][0],o=r.jr[i][1];if(o&&n.test(s))return o}return r.jd},has:function(s,r){return r===void 0&&(r=!1),r?s in this.j:!!this.go(s)},ta:function(s,r,a,i){for(var n=0;n<s.length;n++)this.tt(s[n],r,a,i)},tr:function(s,r,a,i){i=i||H.groups;var n;return r&&r.j?n=r:(n=new H(r),a&&i&&be(r,a,i)),this.jr.push([s,n]),n},ts:function(s,r,a,i){var n=this,o=s.length;if(!o)return n;for(var u=0;u<o-1;u++)n=n.tt(s[u]);return n.tt(s[o-1],r,a,i)},tt:function(s,r,a,i){i=i||H.groups;var n=this;if(r&&r.j)return n.j[s]=r,r;var o=r,u,l=n.go(s);if(l?(u=new H,je(u.j,l.j),u.jr.push.apply(u.jr,l.jr),u.jd=l.jd,u.t=l.t):u=new H,o){if(i)if(u.t&&typeof u.t=="string"){var c=je(jl(u.t,i),a);be(o,c,i)}else a&&be(o,a,i);u.t=o}return n.j[s]=u,u}};var k=function(s,r,a,i,n){return s.ta(r,a,i,n)},V=function(s,r,a,i,n){return s.tr(r,a,i,n)},Bs=function(s,r,a,i,n){return s.ts(r,a,i,n)},p=function(s,r,a,i,n){return s.tt(r,a,i,n)},re="WORD",Qt="UWORD",$e="LOCALHOST",qt="TLD",Gt="UTLD",Ye="SCHEME",ye="SLASH_SCHEME",st="NUM",ha="WS",ms="NL",Fe="OPENBRACE",Ue="OPENBRACKET",Oe="OPENANGLEBRACKET",Re="OPENPAREN",pe="CLOSEBRACE",Ee="CLOSEBRACKET",Ne="CLOSEANGLEBRACKET",ve="CLOSEPAREN",at="AMPERSAND",nt="APOSTROPHE",rt="ASTERISK",Be="AT",it="BACKSLASH",lt="BACKTICK",ot="CARET",fe="COLON",fs="COMMA",ut="DOLLAR",J="DOT",ct="EQUALS",hs="EXCLAMATION",X="HYPHEN",dt="PERCENT",mt="PIPE",ft="PLUS",ht="POUND",gt="QUERY",gs="QUOTE",xs="SEMI",ie="SLASH",_e="TILDE",xt="UNDERSCORE",ga="EMOJI",Dt="SYM",xa=Object.freeze({__proto__:null,WORD:re,UWORD:Qt,LOCALHOST:$e,TLD:qt,UTLD:Gt,SCHEME:Ye,SLASH_SCHEME:ye,NUM:st,WS:ha,NL:ms,OPENBRACE:Fe,OPENBRACKET:Ue,OPENANGLEBRACKET:Oe,OPENPAREN:Re,CLOSEBRACE:pe,CLOSEBRACKET:Ee,CLOSEANGLEBRACKET:Ne,CLOSEPAREN:ve,AMPERSAND:at,APOSTROPHE:nt,ASTERISK:rt,AT:Be,BACKSLASH:it,BACKTICK:lt,CARET:ot,COLON:fe,COMMA:fs,DOLLAR:ut,DOT:J,EQUALS:ct,EXCLAMATION:hs,HYPHEN:X,PERCENT:dt,PIPE:mt,PLUS:ft,POUND:ht,QUERY:gt,QUOTE:gs,SEMI:xs,SLASH:ie,TILDE:_e,UNDERSCORE:xt,EMOJI:ga,SYM:Dt}),Ae=/[a-z]/,St=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Pt=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Tt=/\d/,Is=/\s/,Ss=`
`,Cl="️",kl="‍";function wl(t){var s,r,a,i,n,o;t===void 0&&(t=[]);var u={};H.groups=u;var l=new H;p(l,"'",nt),p(l,"{",Fe),p(l,"[",Ue),p(l,"<",Oe),p(l,"(",Re),p(l,"}",pe),p(l,"]",Ee),p(l,">",Ne),p(l,")",ve),p(l,"&",at),p(l,"*",rt),p(l,"@",Be),p(l,"`",lt),p(l,"^",ot),p(l,":",fe),p(l,",",fs),p(l,"$",ut),p(l,".",J),p(l,"=",ct),p(l,"!",hs),p(l,"-",X),p(l,"%",dt),p(l,"|",mt),p(l,"+",ft),p(l,"#",ht),p(l,"?",gt),p(l,'"',gs),p(l,"/",ie),p(l,";",xs),p(l,"~",_e),p(l,"_",xt),p(l,"\\",it);var c=V(l,Tt,st,(s={},s[Ht]=!0,s));V(c,Tt,c);var m=V(l,Ae,re,(r={},r[Kt]=!0,r));V(m,Ae,m);var d=V(l,St,Qt,(a={},a[Vt]=!0,a));V(d,Ae),V(d,St,d);var f=V(l,Is,ha,(i={},i[Ns]=!0,i));p(l,Ss,ms,(n={},n[Ns]=!0,n)),p(f,Ss),V(f,Is,f);var v=V(l,Pt,ga,(o={},o[fa]=!0,o));V(v,Pt,v),p(v,Cl,v);var h=p(v,kl);V(h,Pt,v);for(var g=[[Ae,m]],x=[[Ae,null],[St,d]],j=0;j<Fs.length;j++)de(l,Fs[j],qt,re,g);for(var b=0;b<Es.length;b++)de(l,Es[b],Gt,Qt,x);be(qt,{tld:!0,ascii:!0},u),be(Gt,{utld:!0,alpha:!0},u),de(l,"file",Ye,re,g),de(l,"mailto",Ye,re,g),de(l,"http",ye,re,g),de(l,"https",ye,re,g),de(l,"ftp",ye,re,g),de(l,"ftps",ye,re,g),be(Ye,{scheme:!0,ascii:!0},u),be(ye,{slashscheme:!0,ascii:!0},u),t=t.sort(function(he,Me){return he[0]>Me[0]?1:-1});for(var C=0;C<t.length;C++){var A,M,F=t[C][0],$=t[C][1],N=$?(A={},A[pl]=!0,A):(M={},M[vl]=!0,M);F.indexOf("-")>=0?N[Wt]=!0:Ae.test(F)?Tt.test(F)?N[Ge]=!0:N[Kt]=!0:N[Ht]=!0,Bs(l,F,F,N)}return Bs(l,"localhost",$e,{ascii:!0}),l.jd=new H(Dt),{start:l,tokens:je({groups:u},xa)}}function Al(t,s){for(var r=yl(s.replace(/[A-Z]/g,function(v){return v.toLowerCase()})),a=r.length,i=[],n=0,o=0;o<a;){for(var u=t,l=null,c=0,m=null,d=-1,f=-1;o<a&&(l=u.go(r[o]));)u=l,u.accepts()?(d=0,f=0,m=u):d>=0&&(d+=r[o].length,f++),c+=r[o].length,n+=r[o].length,o++;n-=d,o-=f,c-=d,i.push({t:m.t,v:s.slice(n-c,n),s:n-c,e:n})}return i}function yl(t){for(var s=[],r=t.length,a=0;a<r;){var i=t.charCodeAt(a),n=void 0,o=i<55296||i>56319||a+1===r||(n=t.charCodeAt(a+1))<56320||n>57343?t[a]:t.slice(a,a+2);s.push(o),a+=o.length}return s}function de(t,s,r,a,i){for(var n,o=s.length,u=0;u<o-1;u++){var l=s[u];t.j[l]?n=t.j[l]:(n=new H(a),n.jr=i.slice(),t.j[l]=n),t=n}return n=new H(r),n.jr=i.slice(),t.j[s[o-1]]=n,n}function Fl(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,Yt(t,s)}function Yt(t,s){return Yt=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},Yt(t,s)}var Se={defaultProtocol:"http",events:null,format:Ps,formatHref:Ps,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ft(t,s){s===void 0&&(s=null);var r=je({},Se);t&&(r=je(r,t instanceof Ft?t.o:t));for(var a=r.ignoreTags,i=[],n=0;n<a.length;n++)i.push(a[n].toUpperCase());this.o=r,s&&(this.defaultRender=s),this.ignoreTags=i}Ft.prototype={o:Se,ignoreTags:[],defaultRender:function(s){return s},check:function(s){return this.get("validate",s.toString(),s)},get:function(s,r,a){var i=r!=null,n=this.o[s];return n&&(typeof n=="object"?(n=a.t in n?n[a.t]:Se[s],typeof n=="function"&&i&&(n=n(r,a))):typeof n=="function"&&i&&(n=n(r,a.t,a)),n)},getObj:function(s,r,a){var i=this.o[s];return typeof i=="function"&&r!=null&&(i=i(r,a.t,a)),i},render:function(s){var r=s.render(this),a=this.get("render",null,s)||this.defaultRender;return a(r,s.t,s)}};function Ps(t){return t}var Da=Object.freeze({__proto__:null,defaults:Se,Options:Ft,assign:je});function pa(t,s){this.t="token",this.v=t,this.tk=s}pa.prototype={isLink:!1,toString:function(){return this.v},toHref:function(s){return this.toString()},toFormattedString:function(s){var r=this.toString(),a=s.get("truncate",r,this),i=s.get("format",r,this);return a&&i.length>a?i.substring(0,a)+"…":i},toFormattedHref:function(s){return s.get("formatHref",this.toHref(s.get("defaultProtocol")),this)},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(s){return s===void 0&&(s=Se.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(s),start:this.startIndex(),end:this.endIndex()}},toFormattedObject:function(s){return{type:this.t,value:this.toFormattedString(s),isLink:this.isLink,href:this.toFormattedHref(s),start:this.startIndex(),end:this.endIndex()}},validate:function(s){return s.get("validate",this.toString(),this)},render:function(s){var r=this,a=this.toFormattedHref(s),i=s.get("tagName",a,r),n=this.toFormattedString(s),o={},u=s.get("className",a,r),l=s.get("target",a,r),c=s.get("rel",a,r),m=s.getObj("attributes",a,r),d=s.getObj("events",a,r);return o.href=a,u&&(o.class=u),l&&(o.target=l),c&&(o.rel=c),m&&je(o,m),{tagName:i,attributes:o,content:n,eventListeners:d}}};function Et(t,s){var r=function(i){Fl(n,i);function n(o,u){var l;return l=i.call(this,o,u)||this,l.t=t,l}return n}(pa);for(var a in s)r.prototype[a]=s[a];return r.t=t,r}var Ts=Et("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Ms=Et("text"),El=Et("nl"),De=Et("url",{isLink:!0,toHref:function(s){return s===void 0&&(s=Se.defaultProtocol),this.hasProtocol()?this.v:s+"://"+this.v},hasProtocol:function(){var s=this.tk;return s.length>=2&&s[0].t!==$e&&s[1].t===fe}}),L=function(s){return new H(s)};function Nl(t){var s=t.groups,r=s.domain.concat([at,rt,Be,it,lt,ot,ut,ct,X,st,dt,mt,ft,ht,ie,Dt,_e,xt]),a=[nt,Ne,pe,Ee,ve,fe,fs,J,hs,Oe,Fe,Ue,Re,gt,gs,xs],i=[at,nt,rt,it,lt,ot,pe,ut,ct,X,st,Fe,dt,mt,ft,ht,gt,ie,Dt,_e,xt],n=L(),o=p(n,_e);k(o,i,o),k(o,s.domain,o);var u=L(),l=L(),c=L();k(n,s.domain,u),k(n,s.scheme,l),k(n,s.slashscheme,c),k(u,i,o),k(u,s.domain,u);var m=p(u,Be);p(o,Be,m);var d=p(o,J);k(d,i,o),k(d,s.domain,o);var f=L();k(m,s.domain,f),k(f,s.domain,f);var v=p(f,J);k(v,s.domain,f);var h=L(Ts);k(v,s.tld,h),k(v,s.utld,h),p(m,$e,h);var g=p(f,X);k(g,s.domain,f),k(h,s.domain,f),p(h,J,v),p(h,X,g);var x=p(h,fe);k(x,s.numeric,Ts);var j=p(u,X),b=p(u,J);k(j,s.domain,u),k(b,i,o),k(b,s.domain,u);var C=L(De);k(b,s.tld,C),k(b,s.utld,C),k(C,s.domain,u),k(C,i,o),p(C,J,b),p(C,X,j),p(C,Be,m);var A=p(C,fe),M=L(De);k(A,s.numeric,M);var F=L(De),$=L();k(F,r,F),k(F,a,$),k($,r,F),k($,a,$),p(C,ie,F),p(M,ie,F);var N=p(l,fe),he=p(c,fe),Me=p(he,ie);p(Me,ie,N),k(l,s.domain,u),p(l,J,b),p(l,X,j),k(c,s.domain,u),p(c,J,b),p(c,X,j),k(N,s.domain,F),p(N,ie,F);var ge=p(F,Fe),we=p(F,Ue),ce=p(F,Oe),xe=p(F,Re);p($,Fe,ge),p($,Ue,we),p($,Oe,ce),p($,Re,xe),p(ge,pe,F),p(we,Ee,F),p(ce,Ne,F),p(xe,ve,F),p(ge,pe,F);var Y=L(De),ne=L(De),w=L(De),O=L(De);k(ge,r,Y),k(we,r,ne),k(ce,r,w),k(xe,r,O);var Q=L(),Ke=L(),Ve=L(),We=L();return k(ge,a),k(we,a),k(ce,a),k(xe,a),k(Y,r,Y),k(ne,r,ne),k(w,r,w),k(O,r,O),k(Y,a,Y),k(ne,a,ne),k(w,a,w),k(O,a,O),k(Q,r,Q),k(Ke,r,ne),k(Ve,r,w),k(We,r,O),k(Q,a,Q),k(Ke,a,Ke),k(Ve,a,Ve),k(We,a,We),p(ne,Ee,F),p(w,Ne,F),p(O,ve,F),p(Y,pe,F),p(Ke,Ee,F),p(Ve,Ne,F),p(We,ve,F),p(Q,ve,F),p(n,$e,C),p(n,ms,El),{start:n,tokens:xa}}function Bl(t,s,r){for(var a=r.length,i=0,n=[],o=[];i<a;){for(var u=t,l=null,c=null,m=0,d=null,f=-1;i<a&&!(l=u.go(r[i].t));)o.push(r[i++]);for(;i<a&&(c=l||u.go(r[i].t));)l=null,u=c,u.accepts()?(f=0,d=u):f>=0&&f++,i++,m++;if(f<0)i-=m,i<a&&(o.push(r[i]),i++);else{o.length>0&&(n.push(Mt(Ms,s,o)),o=[]),i-=f,m-=f;var v=d.t,h=r.slice(i-m,i);n.push(Mt(v,s,h))}}return o.length>0&&n.push(Mt(Ms,s,o)),n}function Mt(t,s,r){var a=r[0].s,i=r[r.length-1].e,n=s.slice(a,i);return new t(n,r)}var R={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Il(){R.scanner=wl(R.customSchemes);for(var t=0;t<R.tokenQueue.length;t++)R.tokenQueue[t][1]({scanner:R.scanner});R.parser=Nl(R.scanner.tokens);for(var s=0;s<R.pluginQueue.length;s++)R.pluginQueue[s][1]({scanner:R.scanner,parser:R.parser});R.initialized=!0}function Sl(t){return R.initialized||Il(),Bl(R.parser.start,t,Al(R.scanner.start,t))}function Pl(t,s,r){for(var a=Sl(t),i=[],n=0;n<a.length;n++){var o=a[n];if(o.t==="nl"&&s.get("nl2br")){var u="__linkify-el-"+r.elementId++;i.push(D.createElement("br",{key:u}))}else if(!o.isLink||!s.check(o))i.push(o.toString());else{var l=s.render(o);if(!("key"in l.props)){var c="__linkify-el-"+r.elementId++,m=Da.assign({key:c},l.props);l=D.cloneElement(l,m)}i.push(l)}}return i}function va(t,s,r){if(D.Children.count(t.props.children)===0)return t;var a=[];D.Children.forEach(t.props.children,function(o){typeof o=="string"?a.push.apply(a,Pl(o,s,r)):D.isValidElement(o)?typeof o.type=="string"&&s.ignoreTags.indexOf(o.type.toUpperCase())>=0?a.push(o):a.push(va(o,s,r)):a.push(o)});var i="__linkify-el-"+r.elementId++,n=Da.assign({key:i},t.props);return D.cloneElement(t,n,a)}var Tl=function(s){var r=0,a=function(d){var f=d.tagName,v=d.attributes,h=d.content;return v.key="__linkify-lnk-"+r++,v.class&&(v.className=v.class,delete v.class),D.createElement(f,v,h)},i={key:"__linkify-wrapper"};for(var n in s)n!=="options"&&n!=="as"&&n!=="tagName"&&n!=="children"&&(i[n]=s[n]);var o=new Ft(s.options,a),u=s.as||s.tagName||D.Fragment||"span",l=s.children,c=D.createElement(u,i,l);return va(c,o,{elementId:0})};const Ml=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M18 10a8 8 0 1 1-16 0a8 8 0 0 1 16 0M6 10a.5.5 0 0 0 .5.5h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0-.5.5"})}),zl=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 2a4 4 0 1 0 0 8a4 4 0 0 0 0-8m-4.991 9A2 2 0 0 0 3 13c0 1.691.833 2.966 2.135 3.797C6.417 17.614 8.145 18 10 18s3.583-.386 4.865-1.203C16.167 15.967 17 14.69 17 13a2 2 0 0 0-2-2z"})}),Ll=t=>e.jsx("svg",{viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M8.5 3a5.5 5.5 0 0 1 4.383 8.823l4.147 4.147a.75.75 0 0 1-.976 1.133l-.084-.073l-4.147-4.147A5.5 5.5 0 1 1 8.5 3m0 1.5a4 4 0 1 0 0 8a4 4 0 0 0 0-8"})}),Ul=t=>e.jsxs("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:[e.jsx("path",{fill:"currentColor",d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3L3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82c.55-.13 1.08-.32 1.6-.55c-.69-.98-1.1-2.17-1.1-3.45c0-3.31 2.69-6 6-6z"}),e.jsx("path",{fill:"currentColor",d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4s4-1.79 4-4s-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12s-1.12-.51-1.12-1.12s.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17c.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"})]}),Ol=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8c1.85 0 3.55.63 4.9 1.69L5.69 16.9A7.902 7.902 0 0 1 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1A7.902 7.902 0 0 1 20 12c0 4.42-3.58 8-8 8z"})}),me=async(t,s)=>{try{await gn({title:e.jsx("div",{className:"font-semibold text-red-500",children:"Are you sure about this?"}),description:e.jsxs("div",{children:[e.jsxs(xn,{color:"error",icon:e.jsx(Er,{className:"size-6"}),className:"text-sm",children:["This operation is possible only because you are a designated admin. Proceed of the operation is"," ",e.jsx("strong",{children:"permanent and cannot be undone"}),". Please proceed with caution."]}),s]}),ConfirmButtonProps:{className:"bg-red-600 text-white",variant:"contained"}}),await t(),P.success("success")}catch(r){if(r===Dn)return;P.error(r==null?void 0:r.message)}},Rl=t=>{const{data:s}=te(),{data:r}=pn(s!=null&&s.isAdmin?t.user.id:void 0),a=Te(),[i,n]=D.useState(!1);if(!(s!=null&&s.isAdmin))return null;const o=r??t.user,u=o.username.startsWith("banned-user"),l=e.jsxs("div",{children:[e.jsxs("div",{children:["user id: ",o.id]}),e.jsxs("div",{children:["username: ",o.username]}),e.jsxs("div",{children:["nickname: ",o.displayName]}),e.jsxs("div",{children:["email: ",o.email]})]}),c=()=>me(async()=>{await T.opBanUser({id:o.id}),a(`/@banned-user-${o.id}`)},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to ban this user?"}),l]})),m=()=>me(async()=>{await T.opUnBanUser({id:o.id}),a(`/@user-${o.id}`)},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to unban this user?"}),l]})),d=()=>me(async()=>{await T.opShadowBanUser({id:o.id})},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to shadow ban this user?"}),l]})),f=()=>me(async()=>{await T.opDeleteAllArtworksOfUser({userId:o.id})},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to delete all artworks of this user?"}),l]})),v=()=>me(async()=>{await T.opDeleteAllModelsOfUser({userId:o.id})},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to delete all models of this user?"}),l]})),h=()=>me(async()=>{await T.opDeleteAllMessagesOfUser({userId:o.id})},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to delete all message of this user?"}),l]})),g=()=>me(async()=>{await T.opResetUserAvatar({userId:o.id})},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to reset the avatar of this user? A notification will be sent to the user."}),l]})),x=()=>me(async()=>{await T.opResetUserCover({userId:o.id})},e.jsxs("div",{children:[e.jsx("div",{className:"py-4",children:"Are you sure to reset the cover of this user? A notification will be sent to the user."}),l]})),j=()=>os(o);return e.jsxs(e.Fragment,{children:[u&&e.jsx(vn,{icon:e.jsx(Ol,{}),color:"error",label:"Banned",variant:"outlined"}),e.jsxs(qr,{anchor:e.jsx(ee,{startIcon:e.jsx(Ul,{}),variant:"outlined",color:"warning",className:"rounded-md",children:"Admin"}),children:[e.jsx(U,{onClick:j,children:e.jsx("span",{className:"normal-case",children:"inspect"})}),e.jsx(U,{onClick:()=>n(!0),children:e.jsx("span",{children:"User roles"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:c,disabled:u,children:e.jsx("span",{className:"normal-case",children:"ban this user"})}),e.jsx(U,{className:"bg-green-100 text-green-500 hover:bg-green-200 transition duration-75",onClick:m,disabled:!u,children:e.jsx("span",{className:"normal-case",children:"unban this user"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:d,children:e.jsx("span",{className:"normal-case",children:"shadow ban this user"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:f,children:e.jsx("span",{className:"normal-case",children:"delete all artworks of this user"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:v,children:e.jsx("span",{className:"normal-case",children:"delete all models of this user"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:h,children:e.jsx("span",{className:"normal-case",children:"delete all messages of this user"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:g,children:e.jsx("span",{className:"normal-case",children:"reset user avatar"})}),e.jsx(U,{className:"bg-red-100 text-red-500 hover:bg-red-200 transition duration-75",onClick:x,children:e.jsx("span",{className:"normal-case",children:"reset user cover"})})]}),e.jsx(_l,{open:i,onClose:()=>n(!1),user:o})]})};function _l(t){var j;const[s,r]=D.useState(""),[a,i]=D.useState("");Ks(()=>{const b=a.trim();b!==s&&r(b)},500,[s,a]);const{pageArgs:n,prevPage:o,nextPage:u,setPageInfo:l,hasPrevPage:c,hasNextPage:m}=ra({pageSize:20}),{data:d,isValidating:f,mutate:v}=bn(t.open&&n?{userId:t.user.id,names:s?[s]:void 0,...n}:void 0);l(d==null?void 0:d.pageInfo);async function h(b,C){await T.opSetUserRole({userId:t.user.id,roleName:b,toggle:C})}const[{loading:g},x]=Zt(async()=>{try{await h(s,!0),i(""),r(""),v()}catch(b){console.error(b),P.error(String(b))}},[s]);return e.jsxs(vt,{open:t.open,onClose:t.onClose,dialogProps:{maxWidth:"xs"},children:[e.jsxs(jt,{children:[e.jsxs("p",{className:"flex items-center text-sm text-neutral-600 dark:text-neutral-400",children:[e.jsx(zl,{className:"-ml-1 mr-1 size-5"}),Gn(t.user)]}),e.jsx("p",{children:"User roles"})]}),e.jsxs(Ct,{children:[e.jsxs("div",{className:"mb-2 flex h-8 border border-zinc-300 dark:border-zinc-600 rounded-md focus-within:outline outline-2 outline-black dark:outline-white/80",children:[f?e.jsx(et,{className:"flex-none self-center mx-1.5 size-5 animate-spin"}):e.jsx(Ll,{className:"flex-none self-center mx-1.5 size-5"}),e.jsx("input",{type:"text",value:a,placeholder:"Search full role name",className:"flex-1 bg-transparent outline-none",onChange:b=>i(b.target.value)}),e.jsx("button",{className:S("inline-flex items-center px-1.5",!s&&"invisible"),onClick:x,children:g?e.jsx(et,{className:"size-5 animate-spin"}):e.jsx(Ml,{className:"size-5"})})]}),e.jsxs("div",{className:"border border-zinc-300 dark:border-zinc-600 rounded-md divide-y divide-zinc-300 dark:divide-zinc-600",children:[(j=d==null?void 0:d.roles)!=null&&j.length?d.roles.map(b=>e.jsxs("div",{className:"flex justify-between items-center pl-2 pr-1.5 py-1",children:[e.jsx("code",{className:"flex-none",children:b.name}),e.jsx("button",{className:"flex-none h-full aspect-square hover:text-red-600 dark:hover:text-red-500",onClick:async()=>{await h(b.name,!1),v()},children:e.jsx(Hr,{className:"size-5"})})]},b.id)):e.jsx("div",{className:"flex justify-center px-2 py-1",children:"No roles"}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx("button",{disabled:!c(),className:"p-1.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full disabled:opacity-50 disabled:pointer-events-none",onClick:o,children:e.jsx(Qn,{className:"size-5"})}),e.jsx("button",{disabled:!m(),className:"p-1.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full disabled:opacity-50 disabled:pointer-events-none",onClick:u,children:e.jsx(qn,{className:"size-5"})})]})]})]})]})}const $l=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2c0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2c0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2c0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})}),Hl=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5z"})}),Kl=t=>e.jsxs("svg",{viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t,children:[e.jsx("path",{fill:"#1877F2",d:"M256 128C256 57.308 198.692 0 128 0C57.308 0 0 57.308 0 128c0 63.888 46.808 116.843 108 126.445V165H75.5v-37H108V99.8c0-32.08 19.11-49.8 48.348-49.8C170.352 50 185 52.5 185 52.5V84h-16.14C152.959 84 148 93.867 148 103.99V128h35.5l-5.675 37H148v89.445c61.192-9.602 108-62.556 108-126.445"}),e.jsx("path",{fill:"#FFF",d:"m177.825 165l5.675-37H148v-24.01C148 93.866 152.959 84 168.86 84H185V52.5S170.352 50 156.347 50C127.11 50 108 67.72 108 99.8V128H75.5v37H108v89.445A128.959 128.959 0 0 0 128 256a128.9 128.9 0 0 0 20-1.555V165z"})]}),Vl=t=>e.jsxs("svg",{viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t,children:[e.jsx("circle",{cx:128,cy:128,r:128,fill:"#FF4500"}),e.jsx("path",{fill:"#FFF",d:"M213.15 129.22c0-10.376-8.391-18.617-18.617-18.617a18.74 18.74 0 0 0-12.97 5.189c-12.818-9.157-30.368-15.107-49.9-15.87l8.544-39.981l27.773 5.95c.307 7.02 6.104 12.667 13.278 12.667c7.324 0 13.275-5.95 13.275-13.278c0-7.324-5.95-13.275-13.275-13.275c-5.188 0-9.768 3.052-11.904 7.478l-30.976-6.562c-.916-.154-1.832 0-2.443.458c-.763.458-1.22 1.22-1.371 2.136l-9.464 44.558c-19.837.612-37.692 6.562-50.662 15.872a18.74 18.74 0 0 0-12.971-5.188c-10.377 0-18.617 8.391-18.617 18.617c0 7.629 4.577 14.037 10.988 16.939a33.598 33.598 0 0 0-.458 5.646c0 28.686 33.42 52.036 74.621 52.036c41.202 0 74.622-23.196 74.622-52.036a35.29 35.29 0 0 0-.458-5.646c6.408-2.902 10.985-9.464 10.985-17.093M85.272 142.495c0-7.324 5.95-13.275 13.278-13.275c7.324 0 13.275 5.95 13.275 13.275s-5.95 13.278-13.275 13.278c-7.327.15-13.278-5.953-13.278-13.278m74.317 35.251c-9.156 9.157-26.553 9.768-31.588 9.768c-5.188 0-22.584-.765-31.59-9.768c-1.371-1.373-1.371-3.51 0-4.883c1.374-1.371 3.51-1.371 4.884 0c5.8 5.8 18.008 7.782 26.706 7.782c8.699 0 21.058-1.983 26.704-7.782c1.374-1.371 3.51-1.371 4.884 0c1.22 1.373 1.22 3.51 0 4.883m-2.443-21.822c-7.325 0-13.275-5.95-13.275-13.275s5.95-13.275 13.275-13.275c7.327 0 13.277 5.95 13.277 13.275c0 7.17-5.95 13.275-13.277 13.275"})]}),Wl=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"m17.687 3.063l-4.996 5.711l-4.32-5.711H2.112l7.477 9.776l-7.086 8.099h3.034l5.469-6.25l4.78 6.25h6.102l-7.794-10.304l6.625-7.571zm-1.064 16.06L5.654 4.782h1.803l10.846 14.34z"})}),Ql=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M4.935 0A4.924 4.924 0 0 0 0 4.935v14.13A4.924 4.924 0 0 0 4.935 24h14.13A4.924 4.924 0 0 0 24 19.065V4.935A4.924 4.924 0 0 0 19.065 0zm7.81 4.547c2.181 0 4.058.676 5.399 1.847a6.12 6.12 0 0 1 2.116 4.66c.005 1.854-.88 3.476-2.257 4.563c-1.375 1.092-3.225 1.697-5.258 1.697c-2.314 0-4.46-.842-4.46-.842v2.718c.397.116 1.048.365.635.779H5.79c-.41-.41.19-.65.644-.779V7.666c-1.053.81-1.593 1.51-1.868 2.031c.32 1.02-.284.969-.284.969l-1.09-1.73s3.868-4.39 9.553-4.39zm-.19.971c-1.423-.003-3.184.473-4.27 1.244v8.646c.988.487 2.484.832 4.26.832h.01c1.596 0 2.98-.593 3.93-1.533c.952-.948 1.486-2.183 1.492-3.683c-.005-1.54-.504-2.864-1.42-3.86c-.918-.992-2.274-1.645-4.002-1.646"})}),ql=t=>e.jsx("svg",{viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",children:[e.jsx("rect",{width:256,height:256,fill:"url(#skillIconsInstagram0)",rx:60}),e.jsx("rect",{width:256,height:256,fill:"url(#skillIconsInstagram1)",rx:60}),e.jsx("path",{fill:"#fff",d:"M128.009 28c-27.158 0-30.567.119-41.233.604c-10.646.488-17.913 2.173-24.271 4.646c-6.578 2.554-12.157 5.971-17.715 11.531c-5.563 5.559-8.98 11.138-11.542 17.713c-2.48 6.36-4.167 13.63-4.646 24.271c-.477 10.667-.602 14.077-.602 41.236s.12 30.557.604 41.223c.49 10.646 2.175 17.913 4.646 24.271c2.556 6.578 5.973 12.157 11.533 17.715c5.557 5.563 11.136 8.988 17.709 11.542c6.363 2.473 13.631 4.158 24.275 4.646c10.667.485 14.073.604 41.23.604c27.161 0 30.559-.119 41.225-.604c10.646-.488 17.921-2.173 24.284-4.646c6.575-2.554 12.146-5.979 17.702-11.542c5.563-5.558 8.979-11.137 11.542-17.712c2.458-6.361 4.146-13.63 4.646-24.272c.479-10.666.604-14.066.604-41.225s-.125-30.567-.604-41.234c-.5-10.646-2.188-17.912-4.646-24.27c-2.563-6.578-5.979-12.157-11.542-17.716c-5.562-5.562-11.125-8.979-17.708-11.53c-6.375-2.474-13.646-4.16-24.292-4.647c-10.667-.485-14.063-.604-41.23-.604zm-8.971 18.021c2.663-.004 5.634 0 8.971 0c26.701 0 29.865.096 40.409.575c9.75.446 15.042 2.075 18.567 3.444c4.667 1.812 7.994 3.979 11.492 7.48c3.5 3.5 5.666 6.833 7.483 11.5c1.369 3.52 3 8.812 3.444 18.562c.479 10.542.583 13.708.583 40.396c0 26.688-.104 29.855-.583 40.396c-.446 9.75-2.075 15.042-3.444 18.563c-1.812 4.667-3.983 7.99-7.483 11.488c-3.5 3.5-6.823 5.666-11.492 7.479c-3.521 1.375-8.817 3-18.567 3.446c-10.542.479-13.708.583-40.409.583c-26.702 0-29.867-.104-40.408-.583c-9.75-.45-15.042-2.079-18.57-3.448c-4.666-1.813-8-3.979-11.5-7.479s-5.666-6.825-7.483-11.494c-1.369-3.521-3-8.813-3.444-18.563c-.479-10.542-.575-13.708-.575-40.413c0-26.704.096-29.854.575-40.396c.446-9.75 2.075-15.042 3.444-18.567c1.813-4.667 3.983-8 7.484-11.5c3.5-3.5 6.833-5.667 11.5-7.483c3.525-1.375 8.819-3 18.569-3.448c9.225-.417 12.8-.542 31.437-.563zm62.351 16.604c-6.625 0-12 5.37-12 11.996c0 6.625 5.375 12 12 12s12-5.375 12-12s-5.375-12-12-12zm-53.38 14.021c-28.36 0-51.354 22.994-51.354 51.355c0 28.361 22.994 51.344 51.354 51.344c28.361 0 51.347-22.983 51.347-51.344c0-28.36-22.988-51.355-51.349-51.355zm0 18.021c18.409 0 33.334 14.923 33.334 33.334c0 18.409-14.925 33.334-33.334 33.334c-18.41 0-33.333-14.925-33.333-33.334c0-18.411 14.923-33.334 33.333-33.334"}),e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"skillIconsInstagram0",cx:0,cy:0,r:1,gradientTransform:"matrix(0 -253.715 235.975 0 68 275.717)",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#FD5"}),e.jsx("stop",{offset:.1,stopColor:"#FD5"}),e.jsx("stop",{offset:.5,stopColor:"#FF543E"}),e.jsx("stop",{offset:1,stopColor:"#C837AB"})]}),e.jsxs("radialGradient",{id:"skillIconsInstagram1",cx:0,cy:0,r:1,gradientTransform:"matrix(22.25952 111.2061 -458.39518 91.75449 -42.881 18.441)",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#3771C8"}),e.jsx("stop",{offset:.128,stopColor:"#3771C8"}),e.jsx("stop",{offset:1,stopColor:"#60F",stopOpacity:0})]})]})]})});function Gl(t){const[s,r]=D.useState(!0),{data:a,isValidating:i,mutate:n}=jn({first:20,...t},{refreshInterval:s?1e4:0});return{quests:a==null?void 0:a.nodes,loading:i,reload:n,setAutoReload:r}}async function Yl(t){return Cn(await T.claimQuestReward({id:t}),"rewardQuest.count")??0}function Jl(t,s){var u,l,c,m;const r=((u=s.info)==null?void 0:u.rewardableTimes)??0,a=((l=s.info)==null?void 0:l.rewardedTimes)??0,i=((c=s.info)==null?void 0:c.completedTimes)??0,n=s.periodTimes,o=!!(s.surveyLink&&!s.info);return{label:t("user:quest.claim-button.label",{context:s.canStack?a===0||r>0?"available":"progress":r<1?"claimed":void 0,progress:i,total:n}),surveyLink:o?s.surveyLink:void 0,disabled:!((m=s.info)!=null&&m.rewardableTimes)}}function Xl(){const{t}=y(["user"]),{available:s,amount:r,claim:a}=kn();return{reward:r,onClaim:a,label:s?t("user:quest.claim-button.label"):t("user:quest.claim-button.label",{context:"claimed"}),disabled:!s}}function Zl(t){const{t:s}=y(["user"]);return e.jsx("a",{className:t.className,style:t.style,href:t.surveyLink,target:"_blank",rel:"noreferrer",onClick:()=>{I("open_survey_click",t.trackingProps),P.info(s("user:quest.notice.survey-claim-delay"),{autoClose:!1})},children:s("user:quest.survey.open-survey-label")})}function eo(){const{mutate:t}=wn(),{quests:s,reload:r}=Gl({tag:"profile"}),{t:a}=y(["user"]),i={location:"profile"};return e.jsxs(e.Fragment,{children:[e.jsx(to,{className:"col-start-1"}),s==null?void 0:s.map(n=>{const{disabled:o,label:u,surveyLink:l}=Jl(a,n);return n.surveyLink&&!l&&o?null:e.jsx(ba,{title:a(`user:quest.types.${n.type}.name`,{defaultValue:n.name}),reward:n.rewardAmount,disabled:o,buttonLabel:u,onClickClaim:async()=>{I("claim_credit_click",{quest:n.type,...i}),await Yl(n.id),await r(),t()},surveyLink:l,trackingProps:i},n.id)})]})}function ba(t){const{t:s}=y(["user"]),r=t.buttonLabel||s("user:quest.claim-button.label"),a=t.surveyLink?e.jsx(Zl,{className:S("flex items-center justify-center relative whitespace-nowrap w-full h-8 font-medium bg-black dark:bg-white text-white dark:text-black rounded-md"),surveyLink:t.surveyLink,trackingProps:t.trackingProps}):t.onClickClaim?e.jsx(Vs,{disabled:t.disabled,busy:"auto",className:S("w-full h-8 font-medium bg-black dark:bg-white text-white dark:text-black rounded-md","disabled:bg-zinc-300 dark:disabled:bg-zinc-600 disabled:text-neutral-600 dark:disabled:text-neutral-300"),onClick:t.onClickClaim,children:r}):e.jsx("span",{className:S("w-full h-8 flex justify-center items-center border border-zinc-500 dark:border-zinc-400 rounded cursor-default",t.disabled&&"bg-zinc-300 dark:bg-zinc-600 text-neutral-600 dark:text-neutral-300 !border-none font-medium"),children:t.buttonLabel});return e.jsxs("div",{className:S("py-3 flex items-center gap-3 text-sm border border-zinc-500/50 rounded-lg",t.className),style:t.style,children:[e.jsxs("div",{className:"flex-1 pl-5 flex gap-3 justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:t.title}),!!t.reward&&e.jsx("span",{className:"text-sm text-theme-primary tabular-nums",children:t.reward.toLocaleString()})]}),e.jsx("div",{className:"flex-none w-[155px] px-3 border-l border-zinc-500/50",children:a})]})}function to(t){const{t:s}=y(["user"]),{label:r,onClaim:a,disabled:i,reward:n}=Xl();return e.jsx(ba,{title:s("user:quest.types.daily_reward.name"),reward:n,buttonLabel:r,disabled:i,onClickClaim:()=>{I("claim_credit_click",{quest:"daily_reward",...t.trackingProps}),a()},...t})}function so(t){const{subscription:s}=t,{invoice:r,lastPaymentError:a}=s,i=r.hostedInvoiceUrl,{t:n}=y(["user"]);return e.jsxs("div",{className:"w-full px-4 py-2 flex justify-center items-center gap-2 bg-amber-400 text-black",children:[n("user:profile.payment-failed.content")," ",a.message,i&&e.jsx("a",{className:"underline font-bold",href:i,children:n("user:profile.payment-failed.open-stripe")})]})}function ao(){const{user:t,isMyProfile:s}=ae(),r=qs(t),{data:{subscription:a}={}}=An(!r),i=a==null?void 0:a.lastPaymentError;return e.jsxs("div",{className:"flex flex-col gap-8",children:[i&&e.jsx(so,{subscription:a}),e.jsx(no,{}),s&&e.jsx(ro,{})]})}function no(){const{user:t,profile:{bio:s,location:r,website:a,twitterId:i,instagramId:n,facebookId:o,redditId:u,pixivId:l},isMyProfile:c}=ae(),m=[{icon:e.jsx(Wl,{className:"size-full text-black dark:text-white"}),url:i&&`https://twitter.com/@${i}`},{icon:e.jsx(ql,{className:"size-full"}),url:n&&`https://instagram.com/${n}`},{icon:e.jsx(Kl,{className:"size-full"}),url:o&&`https://www.facebook.com/${o}`},{icon:e.jsx(Vl,{className:"size-full"}),url:u&&`https://www.reddit.com/user/${u}`},{icon:e.jsx(Ql,{className:"size-full text-[#0099FA]"}),url:l&&`https://www.pixiv.net/users/${l}`}],{data:d}=te(),{t:f}=y(["user","membership","common"]),[v]=Xn(t.id,t.followerCount||0),{data:h}=yn(t.id,{revalidateOnFocus:!1,revalidateOnReconnect:!1}),g=Qs(),x=qs(t),[j,b]=Fn("user-profile-btn",d),C=In();return e.jsxs(e.Fragment,{children:[e.jsx(Xr,{user:t,isMe:c,allowEdit:!0,hoverToEdit:!!(t!=null&&t.coverMedia),className:"-mx-4 msm:-mx-6 mmd:-mx-12 mmd:-mt-12 mmd:rounded-t-lg"}),e.jsxs("div",{className:"-mt-8 first:mt-0 pt-4 msm:pt-6 mmd:pt-12 mmd:first:pt-0 grid grid-cols-[auto_1fr] grid-rows-[auto_auto] gap-x-3 msm:gap-x-4 gap-y-2 msm:gap-y-3",children:[e.jsx("div",{className:"row-span-full col-start-1 self-center",children:c&&x?e.jsx(Zr,{avatarHeight:g?80:120,avatarWidth:g?80:120}):e.jsx(Yr,{user:t,style:{width:g?80:120,height:g?80:120}})}),e.jsxs("h1",{className:"row-start-1 col-start-2 self-end flex gap-3 items-center",children:[e.jsx("span",{className:"text-xl msm:text-2xl font-semibold",children:t.displayName||t.username}),x&&e.jsxs(_,{className:"inline-flex gap-1 items-center text-theme-primary",to:"/membership/plans",onClick:()=>{const A="subscription-user-profile";I("enter_member_click",{location:A}),ts("member_source",A,{persistent:!0})},children:[e.jsx(En,{className:"size-[1.2em]"}),e.jsx("span",{className:"text-sm msm:text-base font-black",children:f("membership:membership.badge.label")})]})]}),e.jsxs("div",{className:"row-start-2 col-start-2 self-start flex flex-wrap gap-3 items-center",children:[c?e.jsxs(e.Fragment,{children:[e.jsx(ee,{component:_,to:"/profile/edit",variant:"contained",onClick:()=>{I("edit_profile_click")},className:"px-8 rounded-md shadow-none",children:e.jsx("span",{className:"normal-case",children:f("user:edit-profile")})}),!x&&e.jsx(ee,{component:_,to:"/profile/edit",variant:"outlined",onClick:A=>{I("banner_change_click"),x||(A.preventDefault(),Nn({trackingLocation:"banner_change"}))},className:"px-8 rounded-md",children:e.jsx("span",{className:"normal-case",children:f("user:edit-banner")})}),Bn(d)&&e.jsx(Jr,{classes:{badge:"top-0.5 right-0.5"},variant:"dot",color:"error",invisible:!j,children:e.jsx(ee,{variant:"outlined",component:_,to:"/profile/edit/accounts",onClick:()=>b(),children:f("user:email.verify-for-credit-discount")})})]}):e.jsx(Js,{userId:t.id,initialValue:t.followedByMe,initialCount:t.followerCount,scene:"profile"}),(!C.isProd||(d==null?void 0:d.isAdmin))&&t&&e.jsx(Rl,{user:t}),!c&&d&&e.jsx(io,{userId:t.id})]})]}),s&&e.jsx("h2",{className:"whitespace-pre-wrap",children:e.jsx(Tl,{children:s})}),(r||a||m.some(A=>A.url))&&e.jsxs("div",{className:"flex flex-col gap-1",children:[r&&e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("span",{className:"text-primary-light",children:e.jsx(Hl,{className:"size-5"})}),r]}),a&&e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("span",{className:"text-primary-light",children:e.jsx($l,{className:"size-5"})}),e.jsx(ps,{href:a,children:a})]}),e.jsx("div",{className:"flex gap-4 items-center",children:m.map(({icon:A,url:M})=>M?e.jsx(ps,{href:M,className:"flex-none size-9 mt-2",onClick:()=>{I("contact_click")},children:A},M):null)})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(_,{to:`/@${t.username}/following`,className:"flex gap-1 items-center",onClick:()=>{I("following_count_click")},children:[e.jsx("span",{className:"font-bold",children:(t.followingCount||0).toLocaleString()}),e.jsx("span",{className:"text-sm text-primary-light",children:f("user:following-count-label")})]}),e.jsxs(_,{to:`/@${t.username}/follower`,className:"flex gap-1 items-center",onClick:()=>{I("follower_count_click")},children:[e.jsx("span",{className:"font-bold",children:v.toLocaleString()}),e.jsx("span",{className:"text-sm text-primary-light",children:f("user:follower-count-label")})]}),h!=null&&e.jsxs("span",{className:"flex gap-1 items-center",children:[e.jsx("span",{className:"font-bold text-theme-primary",children:ze(h)}),e.jsx("span",{className:"text-sm text-primary-light",children:f("user:artwork-liked-count-label")})]})]})]})}function ro(){const{t}=y(["membership","user"]);return e.jsxs("section",{children:[e.jsx("h2",{className:"font-bold",children:t("user:quest.section.title")}),e.jsxs("div",{className:"grid gap-3 grid-cols-1 mmd:grid-cols-2 mlg:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"flex-1 flex gap-2 items-center",children:[e.jsx(Gr,{trackingLocation:"profile-plan"}),e.jsx(br,{})]}),e.jsx(ee,{component:_,to:"/membership/plans",variant:"contained",className:"flex-none w-[155px] bg-purple-600 px-4 text-white rounded-md",onClick:()=>{const s="edit-membership";I("enter_member_click",{location:s}),ts("member_source",s,{persistent:!0})},children:t("membership:membership.label",{context:"long"})})]}),e.jsx(eo,{})]})]})}function io(t){const{userId:s,className:r}=t,a=async()=>{ur(le.User,s)},i=[{id:"report",icon:e.jsx(or,{className:"size-5"}),children:e.jsx(E,{i18nKey:"user:profile.action.report"}),onAction:a}];return e.jsx(e.Fragment,{children:e.jsxs(jr,{children:[e.jsx(G,{variant:"outlined",className:S(r,"h-[36.5px]"),children:e.jsx(sa,{className:"size-5"})}),e.jsx(Cr,{items:i,placement:"bottom",children:n=>e.jsx(kr,{...n})})]})})}function lo(t){var n,o;const{data:s}=te(),{data:r}=Sn((n=t.user)==null?void 0:n.id),{profiles:a}=r||{},i={user:t.user,profile:Pn(a,["bio","location","website","twitterId","instagramId","facebookId","redditId","pixivId"]),isMyProfile:!!(s&&s.id===((o=t.user)==null?void 0:o.id))};return e.jsx(wr.Provider,{value:i,children:t.children})}function Gu(){const{t}=y(["common"]),s=Tn(),{usernameRaw:r,tab:a}=kt(),i=r==null?void 0:r.slice(1),{data:n,isValidating:o,error:u}=Mn(i),{data:l,isValidating:c}=te();if(Ut(s.pathname)==="/me"){if(l){const m=new URL(window.location.href);return m.pathname=`/@${l.username}`,e.jsx(tt,{to:m.toString().slice(m.origin.length),replace:!0})}else if(!c)return e.jsx(ss,{})}else{if(Ut(s.pathname)===`/@${i}`)return e.jsx(tt,{to:"artworks",relative:"path",replace:!0});if(n)return e.jsx(lo,{user:n,children:e.jsx("div",{className:"mmd:mt-12 mmd:mb-5 mmd:p-12 mmd:bg-white/90 dark:mmd:bg-black/50 mmd:ring-1 dark:ring-0 ring-black/5 rounded-lg mmd:shadow-lg dark:mmd:![box-shadow:0_-1px_1px_#fff2]",children:oe(a).with("follower","following",m=>e.jsx(ti,{user:n,type:m})).otherwise(()=>e.jsxs("div",{className:"flex flex-col gap-8 relative",children:[e.jsx(ao,{}),e.jsx(ml,{})]}))})});if(!o)return e.jsx(W,{description:(u==null?void 0:u.toString())||t("common:hint.user-not-found")})}return e.jsx(Pe,{})}export{Gu as Component};
//# sourceMappingURL=UserProfilePage-DulPHY1k.js.map
