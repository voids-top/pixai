import{j as n}from"./vendor-motion-Bl2lDopP.js";import{c as u}from"./confetti.module-84Rp1PKD.js";import{r as l,s as h}from"./vendor-apollo-B9XqHIAo.js";import{L as x,P as k,a as w}from"./PixchanImages-CHScxbbG.js";import{u as _,ex as j,m as c,P as T}from"./index-JhqgbpkX.js";import{$ as I}from"./vendor-firebase-BKQqa5bK.js";import{N as f,d as P}from"./vendor-react-router-Bm0RsDwP.js";import{u as g,T as v}from"./vendor-i18next-TC5y0B3W.js";import"./vendor-graphql-DeSYh9DC.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-mui-DTp04zm4.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="eb74a702-60e4-46e6-8d9a-aedd53f340fb",t._sentryDebugIdIdentifier="sentry-dbid-eb74a702-60e4-46e6-8d9a-aedd53f340fb")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r!=null)for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])}return e}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const X=function(){const[{type:e,order:i,merchantTxnId:r}]=_(),s=i??r,o=l.useRef(!1),{data:a,loading:d}=j(s||h),y=a?.status==="paid"||a?.status==="unpaid",p=a?.status==="completed",b=a?.status==="failed",m=l.useCallback(()=>{c("order_payment_success",{type:"purchase",cate:"refuel",currency:a?.currency,price:a?.amount,extraPackageId:a?.itemId})},[a?.currency]);return l.useEffect(()=>{p&&!o.current&&(u({particleCount:100,scalar:1.5,angle:60,spread:60,origin:{x:0,y:.8},startVelocity:100}),u({particleCount:100,scalar:1.5,angle:120,spread:60,origin:{x:1,y:.8},startVelocity:100}),m())},[p,m]),e==="cancel"||a?.status==="cancelled"?n.jsx(f,{to:"/membership/plans",replace:!0}):!a&&s?d?n.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:n.jsx(T,{})}):n.jsx(f,{to:"/membership/plans",replace:!0}):n.jsx("div",{className:"mt-8 relative py-32 flex flex-col items-center",children:n.jsxs("section",{className:"flex flex-wrap items-center justify-center gap-4",children:[n.jsx(x,{status:y?"loading":p?"success":b?"failed":void 0}),n.jsxs("div",{className:"flex flex-col items-start gap-2 ml-4 flex-1",children:[n.jsx(E,{order:a}),n.jsx(M,{order:a})]})]})})};function E(t){const{t:e}=g(["membership"]),{itemId:i,status:r}=t.order??{},{title:s,content:o}=I(null).returnType().when(()=>i?.startsWith("extra-package"),()=>({title:e(`membership:landing-page.extra-pack.${r}.title`),content:e(`membership:landing-page.extra-pack.${r}.content`)})).when(()=>r==="failed",()=>({title:e("membership:landing-page.unknown-payment.title"),content:n.jsx(n.Fragment,{children:n.jsx("p",{children:n.jsx(v,{t:e,i18nKey:e("membership:landing-page.extra-pack.failed.ask-help-in-channel"),components:{a:n.jsx("a",{className:"underline font-bold",href:e("membership:landing-page.extra-pack.failed.member-support-channel-url"),target:"_blank",rel:"noreferrer"})}})})})})).otherwise(()=>({title:e("membership:landing-page.unknown-payment.title"),content:e("membership:landing-page.unknown-payment.content")}));return n.jsx(k,{title:s,content:o})}function M(t){const{t:e}=g(["membership"]),i=P(),{itemId:r,status:s}=t.order??{},o=s,a=l.useMemo(()=>{if(o==="completed")return{label:e("membership:landing-page.action.gen-image"),linkTo:"/generator",action:()=>{c("generate_image_click",{scene:"refuel"})}}},[r,o]),d=l.useMemo(()=>o==="completed"?{label:e("membership:landing-page.action.back-to-home"),linkTo:"/",action:()=>{c("back_home_click",{scene:"refuel"})}}:{label:e("membership:landing-page.action.go-back"),action:()=>{c("payment_go_back_click"),i(-1)}},[r,o]);return n.jsx(w,{primaryBtnProps:a,secondaryBtnProps:d})}export{X as Component};
