import{j as e,A as ns,m as rs}from"./vendor-motion-Bl2lDopP.js";import{r as o,s as os}from"./vendor-apollo-B9XqHIAo.js";import{aT as is,lH as ls,lI as cs,lx as ds,a_ as us,lJ as hs,lE as ms,lC as Pe,lD as Le,kj as ps,lK as gs,aj as J,lG as xs,gT as fs,ag as X,cS as bs,t as Re,fd as vs,fk as Ye,eS as P,b0 as lt,b8 as ct,T as k,b9 as dt,ap as ut,lL as ht,lM as mt,lN as pt,lO as ws,dG as gt,lP as xt,lQ as ft,e6 as Ae,lR as ys,e0 as bt,lS as vt,e1 as wt,e3 as js,lT as Cs,e2 as we,gr as ks,ly as Ns,l as De,p as de,lU as Ss,ee as _s,q as yt,lV as Ts,eq as Is,bk as Fs,G as ne,lz as jt,cA as M,b5 as Es,ba as Bs,lW as Ms,gq as Ps,lX as Ls,aV as ke,lY as Ne,aL as Ct,U as re,lu as Rs,gv as As,cm as Ds,hW as kt,lv as Ks,ce as zs,dg as Hs,lq as Gs,lc as $s,bL as Os,fa as Nt,cy as Ws,w as Us,eK as Vs,$ as qs,lb as Xs,m as je,lZ as Ys,l1 as Qs,l2 as Zs,l_ as St,ko as Js,a2 as ea,fh as ta,fi as sa,lt as aa,hK as na,gu as ra,by as oa,bO as ia,l9 as la,h4 as ca,jD as da,P as ua,Q as ha,l4 as ma,l5 as pa,ea as ga,eb as xa,u as fa}from"./index-JhqgbpkX.js";import{u as Ke,J as ba}from"./JsBridgeContext-D4_0X_im.js";import{c as va,e as _t,N as Tt,b as he,O as be,$ as Y,a5 as V,k as ze,h as ee,u as me,x as wa}from"./vendor-firebase-BKQqa5bK.js";import{b as ya,m as ja,c as Ca,g as Qe,u as ka,h as Ze,f as It,a as Na,e as Sa,d as _a}from"./time-line-DqQiT1u4.js";import{E as Ta}from"./EventCountdown-BuJnrndN.js";import{be as Ia,bf as Fa,N as Ea,bg as Ba,bh as Ma,g as He}from"./vendor-graphql-DeSYh9DC.js";import{g as Ft,d as Pa,j as Et,f as Bt,q as La,G as Ra}from"./vendor-lodash-992l3ZN7.js";import{u as L,T as Je}from"./vendor-i18next-TC5y0B3W.js";import{Q as Se,P as Ge,O as _e,a6 as Aa,$ as Te,A as Da,R as Ka}from"./vendor-react-aria-BW9JtD2p.js";import{M as za,i as Ha,u as Mt,P as Ga,a as $a,b as Oa,L as Wa,m as z}from"./proxy-NoNVjFTQ.js";import{i as Ua}from"./outline-info-C4eOIxV8.js";import{u as Va,d as qa,b as Xa}from"./CollectionCardSetModal-BMT3xbWe.js";import{L as Ya}from"./vendor-react-router-Bm0RsDwP.js";import{a1 as Qa,a2 as Za,a3 as Ja,a4 as ye,a5 as $,a6 as en,d as tn,a7 as sn,a8 as Ee}from"./vendor-mui-DTp04zm4.js";import{H as ae}from"./vendor-hls-cbDBXQj9.js";import{f as an}from"./checkmark-circle-20-filled-Cc07OaOz.js";import{T as nn}from"./TaskPublishDialog-C6g-yNPm.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="2d4abf8f-671b-4c84-9616-18c116f6c8be",t._sentryDebugIdIdentifier="sentry-dbid-2d4abf8f-671b-4c84-9616-18c116f6c8be")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(s){for(var a=1;a<arguments.length;a++){var n=arguments[a];if(n!=null)for(var r in n)n.hasOwnProperty(r)&&(s[r]=n[r])}return s}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();function rn(t,s,a){const n=o.useRef(null),r=o.useRef(null);return o.useEffect(()=>(r.current&&(n.current=new MutationObserver(t),n.current.observe(r.current,s)),()=>{n.current?.disconnect()}),[t,s]),r}const on="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/title-cn-DiKFMxrm.webp",ln="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/title-en-yJI54U1u.webp",cn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/title-jp-BPCVDs5K.webp",dn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/title-kr-BClkSZQ8.webp",Pt=o.createContext({});function un(t){const{children:s,mobileProductIds:a,purchasableItemsConfig:n}=t,{data:{membership:r}={}}=is(),l=ls(r?.tier),{appProducts:i}=Ke(),[h]=cs(),c=o.useMemo(()=>(l??[]).filter(d=>d.id in n).map(d=>{const g=n[d.id],x=d.values.find(w=>w.tier===0),f=d.values.find(w=>w.tier===(r?.tier??0));return{id:i?a[d.id]:d.id,currency:h,price:i?.find(w=>w.id===a[d.id])?.price||d.prices[h],tokens:g.tokens,baseCredits:x.value,finalCredits:f.creditsAfterBoosts,boosts:f.boosts??[]}}),[l,r?.tier,i]),{purchaseExtraPackage:p}=ds(),u=o.useCallback(d=>p(d,l.find(g=>g.id===d).prices,us(window.location.origin,"event/august-2025")),[l,p]);return e.jsx(Pt.Provider,{value:{purchasableItems:c,purchaseItem:u},children:s})}const hn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-1-DN2I453z.webp",mn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-2-B-xm_8Xe.webp",pn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-3-CCsyy5JC.webp",gn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-4-B0Y7dWWi.webp",xn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-5-CaEBGbP-.webp",fn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-6-BPDw1kKe.webp",bn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-7-DLK3KTwH.webp",vn="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/share-frame-8-Dx6IsCDX.webp",wn={"extra-package":"consumable.extra.package","extra-package-2":"consumable.extra.package.2","extra-package-3":"consumable.extra.package.3","extra-package-5":"consumable.extra.package.5"},yn={"extra-package":"iap_credits_pack","extra-package-2":"iap_credits_pack_2","extra-package-3":"iap_credits_pack_3","extra-package-5":"iap_credits_pack_5"},jn=3e3,Cn=(t,s)=>`Keep the main subject unchanged, replace the background with ${t}. ${s}`,kn=hs()?wn:yn,Nn={"extra-package":{tokens:2},"extra-package-2":{tokens:5},"extra-package-3":{tokens:20},"extra-package-5":{tokens:70}},$e=[{id:"no-frame",url:void 0,canvas:{width:800,height:600},transparentArea:{x:0,y:0,width:800,height:600}},{id:"share-frame-1",url:hn,canvas:{width:1080,height:1348},transparentArea:{x:60,y:57,width:960,height:1025}},{id:"share-frame-2",url:mn,canvas:{width:1080,height:1348},transparentArea:{x:50,y:57,width:970,height:1025}},{id:"share-frame-3",url:pn,canvas:{width:1080,height:1348},transparentArea:{x:60,y:57,width:960,height:1025}},{id:"share-frame-4",url:gn,canvas:{width:1080,height:1348},transparentArea:{x:72,y:57,width:950,height:1025}},{id:"share-frame-5",url:xn,canvas:{width:1080,height:1348},transparentArea:{x:50,y:57,width:980,height:1025}},{id:"share-frame-6",url:fn,canvas:{width:1080,height:1348},transparentArea:{x:50,y:57,width:980,height:1025}},{id:"share-frame-7",url:bn,canvas:{width:1080,height:1348},transparentArea:{x:50,y:57,width:980,height:1025}},{id:"share-frame-8",url:vn,canvas:{width:1080,height:1348},transparentArea:{x:50,y:57,width:980,height:1025}}],Sn=()=>$e[0],et=t=>$e.find(s=>s.id===t)||Sn();function _n({children:t}){return e.jsx(un,{mobileProductIds:kn,purchasableItemsConfig:Nn,children:t})}function Lt(){return o.useContext(Pt)}const[mi,Tn]=ms(Ba),In=Pe(Le(Ia),{reduce:t=>t?.me?.augustEvent2025Status}),Rt=t=>gs(Ma)({cardCodes:t}),Fn=Pe(Le(Fa),{reduce:t=>t?.lotteries}),En="august2025_nekomimi_collection",Bn=Pe(Le(Ea),{reduce:t=>t?.user?.collectionCardSetProgress});async function Mn(t){const s=new URL("/v1/media/upload",va()),a=await t.arrayBuffer(),n=await ps.post(s.toString(),a,{headers:{"Content-Type":`image/${t.type}`}});if(n.status!==200)throw new Error(`Failed to upload image: ${n.statusText}`);return n.data.id}const Oe=o.createContext({});function Pn({children:t}){const{data:s,refetch:a}=In({});return e.jsx(Oe.Provider,{value:{refetchEventState:a,data:{...s}},children:t})}const We="3e0429b3-d690-4033-b181-848903bf2e44",Ln=async(t,s,a)=>(await J.createGrowthEventTask({sceneId:We,args:{prompts:t,mediaId:s}}).catch(r=>{xs(a,r)}))?.createLotteryGenerationTask?.id,Rn=()=>{const{data:t,mutate:s}=fs();return[t?.filter(n=>n.sceneIds?.some(r=>r===We)).reduce((n,r)=>n+(r.countRemains??0),0)??0,s]};function An(){const{me:t}=X(),s=t?.id;return bs({fetcher:a=>a?J.listUserTasks(a):void 0,getArgs:a=>s?{userId:s,sceneIds:[We],last:10,before:a?.tasks.pageInfo.startCursor}:void 0,getItems:a=>Ft(He(a?.tasks)).reverse(),getHasMore:a=>a?.tasks.pageInfo.hasPreviousPage})}const At={createTask:Ln,useFreeGenCount:Rn,useEventTasks:An},Ue=o.createContext({}),Dn=({children:t})=>{const[s,a]=o.useState(),{t:n}=L(["common","generation"]),r=o.useCallback(async(p,u)=>{const d=await At.createTask(p,u,n);d?a(d):Re.error("Failed to create task")},[n]),{data:l,loading:i}=vs(s??os),h=o.useCallback(()=>{a(void 0)},[]),c=o.useRef(!1);return e.jsx(Ue.Provider,{value:{createTask:r,taskId:s,task:l,loading:i,running:_t({status:Tt.union(Ye.waiting,Ye.running)},l),reset:h,isBasedImageRef:c},children:t})},Kn=()=>{const t=o.useContext(Ue);if(!t)throw new Error("useGeneratorContext must be used within a GeneratorContextProvider");return t},zn="_container_1pytb_11",Hn="_generate_button_1pytb_19",Gn="_main_frame_1pytb_26",$n="_animate_flipping_1pytb_48",On="_flipping_1pytb_1",Wn="_example_images_1_1pytb_52",Un="_example_images_2_1pytb_63",Vn="_example_images_3_1pytb_74",qn="_example_images_4_1pytb_85",Z={container:zn,generate_button:Hn,main_frame:Gn,animate_flipping:$n,flipping:On,example_images_1:Wn,example_images_2:Un,example_images_3:Vn,example_images_4:qn};class Xn extends o.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const n=a.offsetParent,r=Ha(n)&&n.offsetWidth||0,l=this.props.sizeRef.current;l.height=a.offsetHeight||0,l.width=a.offsetWidth||0,l.top=a.offsetTop,l.left=a.offsetLeft,l.right=r-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Yn({children:t,isPresent:s,anchorX:a}){const n=o.useId(),r=o.useRef(null),l=o.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=o.useContext(za);return o.useInsertionEffect(()=>{const{width:h,height:c,top:p,left:u,right:d}=l.current;if(s||!r.current||!h||!c)return;const g=a==="left"?`left: ${u}`:`right: ${d}`;r.current.dataset.motionPopId=n;const x=document.createElement("style");return i&&(x.nonce=i),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[s]),e.jsx(Xn,{isPresent:s,childRef:r,sizeRef:l,children:o.cloneElement(t,{ref:r})})}const Qn=({children:t,initial:s,isPresent:a,onExitComplete:n,custom:r,presenceAffectsLayout:l,mode:i,anchorX:h})=>{const c=Mt(Zn),p=o.useId();let u=!0,d=o.useMemo(()=>(u=!1,{id:p,initial:s,isPresent:a,custom:r,onExitComplete:g=>{c.set(g,!0);for(const x of c.values())if(!x)return;n&&n()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[a,c,n]);return l&&u&&(d={...d}),o.useMemo(()=>{c.forEach((g,x)=>c.set(x,!1))},[a]),o.useEffect(()=>{!a&&!c.size&&n&&n()},[a]),i==="popLayout"&&(t=e.jsx(Yn,{isPresent:a,anchorX:h,children:t})),e.jsx(Ga.Provider,{value:d,children:t})};function Zn(){return new Map}const ve=t=>t.key||"";function tt(t){const s=[];return o.Children.forEach(t,a=>{o.isValidElement(a)&&s.push(a)}),s}const ue=({children:t,custom:s,initial:a=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:l="sync",propagate:i=!1,anchorX:h="left"})=>{const[c,p]=$a(i),u=o.useMemo(()=>tt(t),[t]),d=i&&!c?[]:u.map(ve),g=o.useRef(!0),x=o.useRef(u),f=Mt(()=>new Map),[w,j]=o.useState(u),[N,v]=o.useState(u);Oa(()=>{g.current=!1,x.current=u;for(let T=0;T<N.length;T++){const S=ve(N[T]);d.includes(S)?f.delete(S):f.get(S)!==!0&&f.set(S,!1)}},[N,d.length,d.join("-")]);const I=[];if(u!==w){let T=[...u];for(let S=0;S<N.length;S++){const D=N[S],H=ve(D);d.includes(H)||(T.splice(S,0,D),I.push(D))}return l==="wait"&&I.length&&(T=I),v(tt(T)),j(u),null}const{forceRender:R}=o.useContext(Wa);return e.jsx(e.Fragment,{children:N.map(T=>{const S=ve(T),D=i&&!c?!1:u===N||d.includes(S),H=()=>{if(f.has(S))f.set(S,!0);else return;let Q=!0;f.forEach(te=>{te||(Q=!1)}),Q&&(R?.(),v(x.current),i&&p?.(),n&&n())};return e.jsx(Qn,{isPresent:D,initial:!g.current||a?void 0:!1,custom:s,presenceAffectsLayout:r,mode:l,onExitComplete:D?void 0:H,anchorX:h,children:T},S)})})},q={Snapshot:"snapshot",Gacha:"gacha"},Ve=he(q.Snapshot),A={Artworks:"artworks",History:"history"},oe=he(A.Artworks),Ie=he({cardCodes:[]}),Dt=he(async t=>{const s=t(Ie);if(s.cardCodes.length===0)return[];const a=await Rt(s.cardCodes),n=[];for(const r of s.cardCodes){const l=a?.data?.collectionCardsByCodes?.find(i=>i.code===r);l&&n.push(l)}return n??[]}),Jn=he("idle"),st=P({base:"",variants:{level:{sm:"!border-b-2 !border-b-[color:color-mix(in_srgb,var(--shape-color),#000_20%)]",md:"!border-b-4 !border-b-[color:color-mix(in_srgb,var(--shape-color),#000_20%)]"}}}),Fe=P({base:["[--shape-color:var(--event-color-primary)]","[--hover-color:color-mix(in_srgb,var(--shape-color),#fff_10%)]","rounded-lg"],variants:{filled:{true:"text-white bg-[color:--shape-color] hover:bg-[color:--hover-color] group-hover/hover:bg-[color:--hover-color]",false:"bg-background ring-1 ring-inset ring-[color:--shape-color]"},elevation:{none:"",sm:st({level:"sm",className:"active:[&:not(:disabled)]:!border-b-0 group-active/active:[&:not(:disabled)]:!border-b-0 transition-all duration-75"}),md:st({level:"md",className:"active:[&:not(:disabled)]:!border-b-0 group-active/active:[&:not(:disabled)]:!border-b-0 transition-all duration-75"})}},defaultVariants:{filled:!1,elevation:"none"}}),er=P({base:["flex p-0.5 text-white bg-black/50 rounded-xl","relative z-10 mb-4"]}),tr=P({slots:{root:["flex-1 lg:px-4 px-2 py-2 flex items-center gap-1 text-base whitespace-nowrap capitalize selected:font-bold selected:bg-white rounded-[10px] outline-none cursor-default","group/tab"],icon:["size-6 -ml-1 -my-1 bg-[radial-gradient(closest-side,var(--tw-shadow-color),transparent)] group-selected/tab:-rotate-12 transition-transform duration-200"]}});function sr(t){const{t:s}=L(["growth"]);return e.jsxs(lt,{className:"max-w-[800px] w-screen",dismissable:!0,open:t.open,onClose:t.onClose,children:[e.jsx(ct,{heading:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-rule-dialog.heading"})}),e.jsx(dt,{className:"overflow-y-auto h-[calc(70vh-68px)]",children:e.jsx(ut,{className:"prose prose-sm prose-neutral dark:prose-invert",renderer:ht,children:s("growth:august-event-2025.gacha-rule-dialog.content")})})]})}function ar(t){const{tabs:s,currentTab:a,setCurrentTab:n,tabListClassName:r}=t,[l,i]=o.useState(!1);return s.length===0?null:e.jsxs(ue,{children:[e.jsxs(Se,{className:"flex items-center justify-center",selectedKey:a,onSelectionChange:n,children:[e.jsx("div",{className:"w-12"}),e.jsx(Ge,{className:er({className:`${r}`}),children:s.map((h,c)=>e.jsxs(_e,{id:h.id,className:tr().root({className:h.className}),children:[h.icon,e.jsx(k,{i18nKey:h.content})]}))}),e.jsx("div",{className:"w-12",children:a===q.Gacha&&e.jsx("div",{className:"relative top-[-8px] left-2 rounded-full hover:scale-110 duration-200 translate-y-2 w-8 h-8 hover:cursor-pointer",onClick:()=>i(!0),children:e.jsx(ya,{className:"scale-[1.75] text-[var(--event-color-primary)] font-bold"})})})]}),e.jsx(sr,{open:l,onClose:()=>i(!1)})]})}const nr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/gacha-slogan-cn-SrqHgyfb.webp",rr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/gacha-slogan-en-DoCwk0Vr.webp",or="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/gacha-slogan-jp-CaPxnJt9.webp",ir="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/gacha-slogan-kr-CzAvsUdy.webp",lr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/one-spin-cn-DSFIfJmn.webp",cr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/one-spin-en-DYqACNfL.webp",dr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/one-spin-jp-CgbwUyFN.webp",ur="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/one-spin-kr-yIk0JZrr.webp",hr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/sr-B0Fpod_T.webp",mr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/ssr-bjqkWx8C.webp",pr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/ten-spin-cn-BKXq9-1H.webp",gr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/ten-spin-en-CIbo1ULS.webp",xr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/ten-spin-jp-f9QoGHAu.webp",fr="https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/ten-spin-kr-BczSMBOt.webp",br=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.4 22.4 0 0 1-4 2"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0m1 7v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]})}),vr=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsx("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e.jsx("path",{fill:"currentColor",d:"M13.232 1.36c.632-.758 1.863-.24 1.763.742L14.289 9H20a1 1 0 0 1 .768 1.64l-10 12c-.632.758-1.863.24-1.763-.742L9.711 15H4a1 1 0 0 1-.768-1.64l10-12ZM6.135 13h5.348a.4.4 0 0 1 .398.44l-.553 5.405L17.865 11h-5.348a.4.4 0 0 1-.398-.44l.553-5.404L6.135 13Z"})]})}),Kt=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("circle",{cx:8.5,cy:8.5,r:.5,fill:"currentColor"}),e.jsx("circle",{cx:15.5,cy:15.5,r:.5,fill:"currentColor"}),e.jsx("circle",{cx:12,cy:12,r:.5,fill:"currentColor"})]})}),wr=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 1 0-6 0"}),e.jsx("path",{d:"M12 2a3 3 0 0 1 3 3q0 .843-.776 2.64L13.5 9l1.76-1.893q.748-.899 1.27-1.205a2.97 2.97 0 0 1 4.07 1.099a3.01 3.01 0 0 1-1.09 4.098q-.561.326-1.846.535L15 12l2.4.326c1 .145 1.698.337 2.11.576A3.01 3.01 0 0 1 20.6 17a2.97 2.97 0 0 1-4.07 1.098q-.522-.303-1.27-1.205L13.5 15l.724 1.36q.775 1.799.776 2.64a3 3 0 0 1-6 0q0-.843.776-2.64L10.5 15l-1.76 1.893q-.748.9-1.27 1.205A2.97 2.97 0 0 1 3.4 17a3.01 3.01 0 0 1 1.09-4.098q.561-.326 1.846-.536L9 12l-2.4-.325c-1-.145-1.698-.337-2.11-.576A3.01 3.01 0 0 1 3.4 7a2.97 2.97 0 0 1 4.07-1.099q.522.304 1.27 1.205L10.5 9Q9 5.562 9 5a3 3 0 0 1 3-3"})]})}),yr=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{d:"M8 13V4.5a1.5 1.5 0 0 1 3 0V12m0-.5v-2a1.5 1.5 0 0 1 3 0V12m0-1.5a1.5 1.5 0 0 1 3 0V12"}),e.jsx("path",{d:"M17 11.5a1.5 1.5 0 0 1 3 0V16a6 6 0 0 1-6 6h-2h.208a6 6 0 0 1-5.012-2.7L7 19q-.468-.718-3.286-5.728a1.5 1.5 0 0 1 .536-2.022a1.87 1.87 0 0 1 2.28.28L8 13M5 3L4 2m0 5H3m11-4l1-1m0 4h1"})]})}),jr=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 6h9m-9 6h9m-8 6h8M4 16a2 2 0 1 1 4 0c0 .591-.5 1-1 1.5L4 20h4M6 10V4L4 6"})}),Me=9;Pa(ws,t=>mt[pt.SpringEvent2025].includes(t));const Cr={},kr=ys(ks(mt[pt.SpringEvent2025]),bt({enabled:vt(),obtainedAt:wt(js(we(),Cs()))})),[Nr,ie]=gt("getSpringEventState",{transform:()=>xt({}),reduce:t=>{const s=Et(t,["me","springEventPuzzleStatus"]);return s&&(s.puzzlePieces=Lr(s.puzzlePieces),Cr.finalBoost&&(s.rollCount=30)),s}});function Sr(){return{rollCount:0,eventTokenCount:0,puzzlePieces:new Array(Me).fill(0),pointerPowerGauge:0,pointerPowerBounty:[!1,!1,!1],pointerPowerCount:0}}const[_r,Tr]=gt("getSpringEventBadges",{transform:()=>xt({}),reduce:t=>Et(t,["me","profile"])});function Ir(t){const{data:s,...a}=_r({},t),{success:n,output:r}=Ae(kr,s);return{data:n?r:{},...a}}async function Fr(t){await J.buySpringTokenWithCredits({quantity:t}),ie(),ft()}async function Er(){await J.useSpringEventToken(),ie()}async function Br(t){await J.useSpringEventPointerPower({pieceIndex:t}),ie()}async function Mr(){await J.useSpringEventFinalBoost(),ie()}async function Pr(){await J.resetSpringEventProgress(),ie(),Tr()}function Lr(t){const s=t.slice(0,Me);for(let a=0;a<Me;a++)s[a]??=0;return s}const Rr={useEventState:Nr,mutateEventState:ie,defaultEventState:Sr,useEventBadges:Ir,buyTokensWithCredits:Fr,makeOneRoll:Er,pointerUnlockAPiece:Br,finalBoost:Mr,reset:Pr};P({slots:{root:"flex items-center text-lg",icon:"size-7 mr-[0.25em]"}});const at=P({base:"",variants:{level:{sm:"!border-b-2 !border-b-[color:color-mix(in_srgb,var(--shape-color),#000_20%)]",md:"!border-b-4 !border-b-[color:color-mix(in_srgb,var(--shape-color),#000_20%)]"}}}),Ar=P({base:["[--shape-color:var(--event-color-primary)]","[--hover-color:color-mix(in_srgb,var(--shape-color),#fff_10%)]","rounded-lg"],variants:{filled:{true:"text-white bg-[color:--shape-color] hover:bg-[color:--hover-color] group-hover/hover:bg-[color:--hover-color]",false:"bg-background ring-1 ring-inset ring-[color:--shape-color]"},elevation:{none:"",sm:at({level:"sm",className:"active:[&:not(:disabled)]:!border-b-0 group-active/active:[&:not(:disabled)]:!border-b-0 transition-all duration-75"}),md:at({level:"md",className:"active:[&:not(:disabled)]:!border-b-0 group-active/active:[&:not(:disabled)]:!border-b-0 transition-all duration-75"})}},defaultVariants:{filled:!1,elevation:"none"}}),nt={Credit:jt,Token:({className:t,...s})=>e.jsx(Kt,{className:de("rotate-12",t),...s}),Pointer:yr,Power:vr,Boost:br,Rules:jr,Flower:wr},Dr=P({base:"inline-flex items-center *:flex-none",variants:{primary:{true:"px-2 text-white bg-[--event-color-primary] rounded-full"}},defaultVariants:{primary:!1}});function zt(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-[#F8D2B3] h-2 w-full"}),e.jsx("div",{className:"bg-[#F8D2B3] h-2 w-full mt-0.5"})]})}const Ht="CreditPacks";function Gt(){const{purchasableItems:t}=Lt();return e.jsx("div",{id:Ht,className:"mt-8 lg:mt-4 flex flex-wrap justify-center lg:gap-6 gap-1",children:t.map(s=>e.jsx(Kr,{data:s},s.id))})}function Kr({data:t,className:s,style:a}){const{id:n,price:r,tokens:l,currency:i,baseCredits:h,finalCredits:c,boosts:p}=t,{t:u}=L(["membership"]),d=!!X().me,{appVersion:g,loadingMobileVersion:x}=Ke(),f=location.pathname.includes("/embedded"),w=!!g,{refetchEventState:j}=o.useContext(Oe),{purchaseItem:N}=Lt(),v=o.useMemo(()=>Bt(async()=>{if(!d){zr();return}(w?await Ns(n):await N(n))&&(Rr.mutateEventState(),ft(),await j(),Re.success(u("membership:extra-pack.notice.purchase-success")))},250,{leading:!0,trailing:!1}),[d,w,N,n]),[{loading:I},R]=De(v,[v]),T=I||x;return e.jsxs("button",{disabled:T||f&&!w,className:de("group/hover group/active","flex flex-col items-stretch lg:w-[180px] w-[120px] min-w-[120px]",s),style:a,onClick:R,children:[e.jsxs("div",{className:"flex-1 px-3 py-2 text-left flex flex-col *:flex-none gap-2 border border-b-0 border-[--event-color-primary] rounded-t-xl",children:[e.jsx("div",{className:"-mx-1 flex flex-wrap *:flex-none gap-1",children:e.jsxs("span",{className:Dr({primary:!0}),children:[e.jsx(nt.Token,{className:"size-4 -ml-0.5 mr-[0.25em]"}),"×",l]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ss(p)?.map(S=>e.jsxs("span",{className:de("self-start -ml-1 p-0.5 pr-2 uppercase tracking-wide rounded-full inline-flex items-center",S.type!==be.Campaign?"hidden lg:inline-flex":"","bg-[--event-color-lighter] dark:text-[--event-color-light] dark:bg-[--event-color-darker]"),children:[Y(S.type).with(be.Membership,()=>e.jsx(_s,{className:"size-5 ml-0.5 mr-[0.25em]"})).with(be.Campaign,()=>e.jsx(ja,{className:"size-5 mr-[0.25em]"})).with(be.Tier,()=>e.jsx(Ca,{className:"size-5 mr-[0.25em]"})).otherwise(()=>S.type),S.percentage>=0?"+":"-",S.percentage,"%"]},S.name))}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("div",{className:"flex *:flex-none items-center",children:[e.jsx(nt.Credit,{className:"flex-none size-4 mr-[0.25em]"}),e.jsx("span",{className:"line-through opacity-50",children:h.toLocaleString()})]}),e.jsx("span",{className:"text-xl",children:e.jsx(yt,{value:c})})]})]}),e.jsx("div",{className:Ar({filled:!0,elevation:"md",className:"min-h-11 flex flex-col justify-center px-4 py-2 relative text-white rounded-t-none rounded-b-xl"}),style:{perspective:80},children:e.jsx("span",{className:de("contents",T&&"invisible"),children:f&&!w?e.jsx("span",{className:"text-xs text-center text-balance",children:e.jsx(k,{i18nKey:"growth:spring-event-2025.event-page.purchase-section.purchase-button.label_mobile"})}):e.jsx("span",{className:"text-base",children:typeof r=="number"?`${Ts(i,r)}`:r})})})]})}function $t(){const{data:t}=Is();return t==null?null:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(k,{i18nKey:"growth:august-event-2025.event-page.sections.generator.your-balance.label"}),e.jsx("div",{className:"flex items-center px-4 h-8 rounded-full bg-[#FFEEE080]",children:e.jsx(Fs,{value:t})})]})}function zr(){ne(null,{fromPath:"spring-event-2025"})}function rt(t){return e.jsx(z.button,{onTap:t.onPress,className:M("rounded-full bg-[#B2865A] h-[56px] scale-90 lg:scale-100  w-full text-[#B2865A] p-2 focus:outline-none pressed:ring-0",Z.generate_button,t.className),whileHover:{scale:1.01,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},whileTap:{scale:.98,onClick:t.onPress},transition:{type:"spring",stiffness:300,damping:20},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center justify-around gap-1 bg-white rounded-full py-1 px-3 w-[76px]",children:t.leftContent}),e.jsx("div",{className:"flex items-center text-2xl text-white pr-6",children:t.rightContent})]})})}function Hr(){return e.jsxs(ye,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx($,{component:"th",scope:"row",children:e.jsx(Ee,{})}),e.jsx($,{align:"right",children:e.jsx(Ee,{})}),e.jsx($,{align:"right",children:e.jsx(Ee,{})})]})}function Gr(t){const{t:s}=L(["user","artwork"]),{me:a}=X(),[{before:n,after:r},l]=o.useState({}),{data:i,loading:h,previousData:c}=Fn({userId:a?.id??"",...Es({before:n,after:r,pageSize:10,isPosSeq:!0})}),p=o.useMemo(()=>He(i??c),[i,c]),u=o.useMemo(()=>p.flatMap(d=>{const g=Ae(Ot,d.extra?.augustEvent2025),x=g.success?g.output.cardCodes??[]:[];return x.length<=1?[d]:x.map((f,w)=>({...d,id:d.id,extra:{...d.extra,augustEvent2025:{...d.extra?.augustEvent2025??{},cardCodes:[f]}}}))}),[p]);return e.jsxs(lt,{className:"max-w-[800px] w-screen",dismissable:!0,open:t.open,onClose:t.onClose,children:[e.jsx(ct,{heading:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-detail-dialog.heading"}),a?e.jsx(Ya,{className:"text-blue-600 dark:text-blue-300 hover:underline p-1 rounded-md text-sm flex items-center",to:`/@${a.username}/decorations/collection-card`,target:"_blank",children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-detail-dialog.go-to-profile"})}):null]})}),e.jsx(dt,{className:"overflow-y-auto h-[calc(70vh-68px)]",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx(Qa,{children:e.jsxs(Za,{size:"small",children:[e.jsx(Ja,{children:e.jsxs(ye,{children:[e.jsx($,{width:200,children:"ID"}),e.jsx($,{width:"50%",children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-detail-dialog.table.head.info"})}),e.jsx($,{align:"right",children:s("user:quota-log.head.date")})]})}),e.jsxs(en,{children:[u.length<1&&h&&e.jsx(Hr,{}),u.map((d,g)=>e.jsxs(ye,{children:[e.jsx($,{component:"th",scope:"row",children:d.id}),e.jsx($,{sx:{wordWrap:"break-word",whiteSpace:"nowrap"},children:e.jsx(Or,{extra:d.extra?.augustEvent2025})}),e.jsx($,{sx:{wordWrap:"normal",whiteSpace:"nowrap"},align:"right",children:tn(d.createdAt).format("MM-DD HH:mm")})]},`${d.id}-${g}`))]}),e.jsx(sn,{children:e.jsx(ye,{children:e.jsx($,{colSpan:100,align:"right",sx:{borderBottom:0},children:e.jsx(Bs,{pageInfo:i?.pageInfo,onCursorChange:l,isPosSeq:!0})})})})]})})})})]})}const Ot=Ms(bt({rollMethod:we(),cardCodes:Ps(we()),isGuarantee:vt(),guaranteeType:wt(we())})),$r=P({variants:{rarity:{[V.N]:"",[V.Sr]:"text-[#7b6bb0]",[V.Ssr]:"text-[#FDAC01]"}}});function Or(t){const s=Ae(Ot,t.extra),[a,n]=o.useState([]),r=Va();return o.useEffect(()=>{s.success&&s.output.cardCodes&&Rt(s.output.cardCodes).then(l=>{const i=[];for(const h of s.output.cardCodes??[]){const c=l?.data?.collectionCardsByCodes?.find(p=>p.code===h);c&&i.push(c)}n(i)})},[t.extra]),a.length===0?null:s.success?e.jsx("span",{children:(()=>{const l=a[0],i=h=>{switch(h){case V.N:return"N";case V.Sr:return"SR";case V.Ssr:return"SSR";default:return""}};return e.jsx("span",{className:$r({rarity:l.rarity}),children:`${r(l.data.name)} (${i(l.rarity)})`})})()}):e.jsx("span",{children:"Unknown"})}const Wr="_shadow_base_1cm1j_1",Ur="_glow_1cm1j_1",Vr="_sr_shadow_1cm1j_15",qr="_ssr_shadow_1cm1j_19",Xr="_card_back_1cm1j_40",Ce={shadow_base:Wr,glow:Ur,sr_shadow:Vr,ssr_shadow:qr,card_back:Xr};function Yr(t){return Y(t.rarity).with(V.Sr,()=>Ce.sr_shadow).with(V.Ssr,()=>Ce.ssr_shadow).otherwise(()=>"")}const Wt=({card:t,isFlipped:s,isFlipping:a,onClick:n,className:r,disableAnimation:l})=>e.jsxs(z.div,{className:M("relative aspect-[3/5] cursor-pointer",r),whileHover:{scale:1.05,z:10,transition:{duration:.2}},whileTap:{scale:.95},onClick:n,style:{perspective:1e3},children:[e.jsxs("div",{className:"relative w-full h-full",style:{transformStyle:"preserve-3d"},children:[l?null:e.jsx(z.div,{className:M("absolute inset-0 w-full h-full rounded-lg border-2 flex items-center justify-center text-white font-bold text-lg",Ce.card_back),style:{backfaceVisibility:"hidden"},animate:{rotateY:s?180:0},transition:{duration:.6,ease:"easeInOut"}}),e.jsx(z.div,{className:`
            absolute inset-0 rounded-lg p-4 flex flex-col items-center justify-between
          `,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},animate:{rotateY:s?0:180},transition:{duration:.6,ease:"easeInOut"},children:e.jsx("div",{className:M("flex flex-1 h-[max(60vh,calc(100vh-300px))]",Ce.shadow_base,Yr(t)),children:e.jsx(qa,{collectionCard:t,showOverlay:!1,owned:!0})})})]}),e.jsx(ue,{children:a&&e.jsx(z.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1.5,0]},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:e.jsx("div",{className:"text-6xl",children:"✨"})})})]}),ot=150,Qr=800,Zr=P({variants:{isTenRoll:{true:"grid grid-rows-2 grid-cols-5 gap-x-[32px] gap-y-[64px] auto-cols-min justify-around h-[max(60vh,calc(100vh-300px))]",false:"flex h-[max(60vh,calc(100vh-300px))]"}}}),Jr=({isVisible:t,onAllCardsFlipped:s})=>{const[a,n]=o.useState(-1),[r,l]=o.useState(new Set),[i,h]=o.useState(!1),c=ze(Ie),p=ee(Dt);function u(){c({cardCodes:[]}),s()}o.useEffect(()=>{if(t){n(-1),l(new Set),h(!1);const x=(p.length-1)*ot+Qr,f=setTimeout(()=>{h(!0)},x);return()=>{clearTimeout(f)}}else n(-1),l(new Set),h(!1)},[t,p.length]);const d=x=>{!i||a>=0||(h(!1),g(0))},g=x=>{x>=p.length||(n(x),setTimeout(()=>{l(f=>new Set([...f,x])),n(-1),setTimeout(()=>{g(x+1)},ot)},300))};return t?e.jsx(ue,{children:t&&e.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 z-100 bg-neutral-800 bg-dot-pattern bg-[length:25px_25px] text-white flex flex-col items-center",children:[e.jsx("h1",{className:"my-12 [-webkit-text-stroke:2px_var(--event-color-light)] text-5xl",children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-result.title"})}),e.jsx(z.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.6,delay:.2},className:Zr({isTenRoll:p.length===10}),children:p.map((x,f)=>e.jsx(z.div,{initial:{y:100,opacity:0,rotateY:180},animate:{y:0,opacity:1,rotateY:0},transition:{duration:.8,delay:.4+f*.1,type:"spring",stiffness:100},children:e.jsx(Wt,{className:p.length===10?"w-[150px]":"w-[calc(((100vh-300px)*3)/5)]",card:x,isFlipped:r.has(f),isFlipping:a===f,onClick:()=>d()})},x.id))}),e.jsx(ue,{children:i&&e.jsx(z.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:.5},className:M("absolute top-[5.5em] text-white text-xl font-bold"),children:e.jsx(z.span,{animate:{opacity:[.7,1,.7],scale:[.95,1.05,.95]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-result.click-to-flip"})})})}),e.jsx("button",{className:Fe({elevation:"sm",filled:!0,className:["h-12 min-w-24 w-fit px-4 rounded-full text-[#FBFBFB] text-lg fixed bottom-[64px]"]}),onClick:u,children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-result.ok"})})]})}):null},eo=({onClose:t,isVisible:s})=>{const[a,n]=o.useState(0),[r,l]=o.useState(0),[i,h]=o.useState(!1),[c,p]=o.useState(0),[u,d]=o.useState(0),g=o.useRef(null),x=ze(Ie),f=ee(Dt),w=f.length===1;o.useLayoutEffect(()=>{const y=()=>l(window.innerWidth);return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),o.useLayoutEffect(()=>{if(s){const y=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=y}}},[s]);const j=o.useMemo(()=>r===0?0:Math.round(r*.75),[r,w]),N=document.body.clientWidth*.7,v=(document.body.clientWidth-N)/2,I=o.useMemo(()=>r===0||j===0?0:Math.round((r-j)/2),[r,j,w]),R=(y,F=0)=>w?I+F:-y*(j+v)+I+F,T=(y,F=0,G=!0)=>{if(g.current){const O=R(y,F);g.current.style.transform=`translateX(${O}px)`,g.current.style.transition=G?"transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)":"none"}};o.useLayoutEffect(()=>{i||T(a)},[a,j,I,w,i]),o.useLayoutEffect(()=>{if(i){const y=G=>{d(G.clientX);const O=G.clientX-c;T(a,O,!1)},F=()=>{h(!1),g.current&&(g.current.style.cursor="grab");const G=u-c,O=(j+v)*.2;G<-O&&a<f.length-1?n(a+1):G>O&&a>0?n(a-1):T(a)};return document.addEventListener("pointermove",y),document.addEventListener("pointerup",F),document.addEventListener("pointercancel",F),()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",F),document.removeEventListener("pointercancel",F)}}},[i,c,u,a,j,v]);const S=y=>{w||(y.preventDefault(),h(!0),p(y.clientX),d(y.clientX),g.current&&(g.current.style.cursor="grabbing",g.current.setPointerCapture(y.pointerId)))},D=y=>{w||(h(!0),p(y.touches[0].clientX),d(y.touches[0].clientX))},H=y=>{if(!i||w)return;d(y.touches[0].clientX);const F=y.touches[0].clientX-c;T(a,F,!1)},Q=()=>{if(!i||w)return;h(!1);const y=u-c,F=(j+v)*.2;y<-F&&a<f.length-1?n(a+1):y>F&&a>0?n(a-1):T(a)};function te(){x({cardCodes:[]}),t()}return s?e.jsxs("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-80 flex flex-col",style:{touchAction:"none"},children:[e.jsx("h1",{className:"flex justify-center mt-8 text-[var(--event-color-light)] text-5xl",children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-result.title"})}),e.jsxs("div",{className:"relative flex-1 overflow-hidden",style:{touchAction:"pan-x"},children:[e.jsx("div",{ref:g,className:"absolute left-0",style:{cursor:w?"default":"grab",userSelect:"none",willChange:"transform"},onPointerDown:S,onTouchStart:D,onTouchMove:H,onTouchEnd:Q,children:e.jsx("div",{className:"flex items-center",style:{gap:v},children:f.map((y,F)=>e.jsx(Wt,{className:"w-[75vw] mb-6",card:y,disableAnimation:!0,isFlipped:!0,isFlipping:!1},y.id))})}),!w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-10 bg-gradient-to-r from-black/60 to-transparent"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-10 bg-gradient-to-l from-black/60 to-transparent"})]})]}),!w&&e.jsx("div",{className:"py-4 flex items-center justify-center gap-2",children:f.map((y,F)=>e.jsx("div",{className:`h-2 rounded-full transition-all duration-200 ${F===a?"w-6 bg-white":"w-2 bg-white/50"}`},F))}),e.jsx("button",{className:Fe({elevation:"sm",filled:!0,className:["h-12 w-24 px-4 rounded-full text-[#FBFBFB] text-lg my-6 mx-auto"]}),onClick:te,children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha-result.ok"})})]}):null},to={Token:({className:t,...s})=>e.jsx(Kt,{className:de("rotate-12",t),...s})},so=[{opacity:1},{opacity:0}];function ao(){const t=document.getElementById(Ht);t&&(t.scrollIntoView({behavior:"smooth"}),t.querySelector("[data-name=highlighter]").animate(so,{duration:2e3,easing:"ease-in",iterations:1}))}function no({className:t,style:s,tokenCount:a}){return!!!X().me||a==null?null:e.jsxs("button",{className:Fe({elevation:"sm",className:["px-4 py-1.5 rounded-full text-md h-12",t]}),style:s,onClick:ao,children:[e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx("span",{className:"mr-2",children:e.jsx(k,{i18nKey:"growth:spring-event-2025.event-page.puzzle-section.get-more-token-button.owned-label"})}),e.jsx(to.Token,{className:"size-4 mr-[0.25em]"}),"×",e.jsx(yt,{value:a,className:"ml-px"})]}),e.jsx("span",{className:"ml-2 pl-2 border-l border-[--event-color-primary] uppercase",children:e.jsx(k,{i18nKey:"growth:spring-event-2025.event-page.puzzle-section.get-more-token-button.label"})})]})}const ro=({isVisible:t,onVideoEnd:s,videoSrc:a})=>{const n=o.useRef(null),r=o.useRef(null),l=o.useRef(null);o.useEffect(()=>{const c=n.current;if(c){if(c.canPlayType("application/vnd.apple.mpegurl")){c.src=a;return}return ae.isSupported()&&(r.current=new ae({enableWorker:!0,lowLatencyMode:!0,backBufferLength:0}),r.current.loadSource(a),r.current.attachMedia(c),r.current.on(ae.Events.MANIFEST_PARSED,()=>{c.play()}),r.current.on(ae.Events.ERROR,(p,u)=>{if(u.fatal)switch(u.type){case ae.ErrorTypes.NETWORK_ERROR:r.current?.startLoad();break;case ae.ErrorTypes.MEDIA_ERROR:r.current?.recoverMediaError();break;default:r.current?.destroy();break}})),()=>{r.current&&(r.current.destroy(),r.current=null)}}},[a]),o.useEffect(()=>{let c=null;return t&&(a&&n.current?n.current.play().catch(()=>{l.current=setTimeout(s,3e3),c=l.current}):(l.current=setTimeout(s,3e3),c=l.current)),()=>{c&&clearTimeout(c)}},[t,a,s]),o.useEffect(()=>()=>{l.current&&clearTimeout(l.current)},[]);const i=()=>{s()},h=()=>{l.current=setTimeout(s,3e3)};return e.jsx(ue,{children:t&&e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 bg-black flex items-center justify-center",children:a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:Fe({filled:!0,elevation:"sm",className:"px-4 py-1.5 rounded-full text-lg h-10 fixed right-10 top-10"}),onClick:s,children:"Skip >>"}),e.jsx(Ls,{ref:n,style:{outline:"none"},className:"w-[75%] h-[75%] object-cover pointer-events-none rounded-xl border-8 border-double border-[var(--event-color-lighter)] lg:p-20",src:a,controls:!1,playsInline:!0,muted:!0,onEnded:i,onError:h})]})})})},oo=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M10.5 4.5V1.5L3 5.25V15.75L7.5 13.5",stroke:"white","stroke-width":"1.5","stroke-linejoin":"round"}),e.jsx("path",{d:"M7.5 6L15 2.25V12.75L7.5 16.5V6Z",stroke:"white","stroke-width":"1.5","stroke-linejoin":"round"})]}),io=()=>{const{i18n:t}=L(),s=Y(t.resolvedLanguage).with("zh",()=>nr).with("kr",()=>ir).with("ja",()=>or).otherwise(()=>rr);return e.jsx("img",{src:s})},lo=()=>{const{i18n:t}=L(),s=Y(t.resolvedLanguage).with("zh",()=>pr).with("kr",()=>fr).with("ja",()=>xr).otherwise(()=>gr);return e.jsx("img",{width:100,src:s})},co=()=>{const{i18n:t}=L(),s=Y(t.resolvedLanguage).with("zh",()=>lr).with("kr",()=>ur).with("ja",()=>dr).otherwise(()=>cr);return e.jsx("img",{width:90,src:s})};function uo(){const{data:t,refetchEventState:s}=o.useContext(Oe),a=ze(Ie),[n,r]=me(Jn),[l,i]=o.useState(!1),[h,c]=o.useState(!1),p=ke("lg"),{t:u}=L(["growth"]),{me:d}=X(),g=Ne("gatcha_click"),{data:x}=Bn({userId:d?.id??"",collectionCardSetCode:En}),f=o.useCallback(async N=>{if(!d){ne(null,{fromPath:"august-event-2025"});return}const v=N?10:1;if(t?.eventTokenCount<v){Ct.alert({heading:u("growth:august-event-2025.gacha.insufficient-pull-notice.title"),content:u("growth:august-event-2025.gacha.insufficient-pull-notice.content")}),g({type:N?"10":"1",scene:"event",section:"august-2025",status:"fail"});return}const{data:I}=await Tn({isTenRoll:N});g({type:N?"10":"1",scene:"event",section:"august-2025",status:"success"}),a({cardCodes:I?.rollLottery.cardCodes??[]}),r(p?"cards":"video"),await s()},[d,a,r,s]),w=o.useCallback(()=>f(!1),[f]),j=o.useCallback(()=>f(!0),[f]);return e.jsxs(e.Fragment,{children:[n==="idle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"GachaTab",children:[e.jsxs("div",{className:M("relative lg:w-[950px] mx-auto bg-white rounded-xl [box-shadow:0_0_0_12px_var(--event-color-light),0_48px_0_12px_var(--event-color-lighter)] p-2 lg:min-h-[480px] translate-x-0",Z.main_frame),children:[e.jsx("div",{className:"relative w-full",children:e.jsx(no,{className:"absolute right-0 bg-[var(--event-color-light)] text-[#FBFBFB]",tokenCount:t?.eventTokenCount})}),e.jsxs("div",{className:"w-[340px] absolute lg:bottom-[50px] lg:left-[60px] bottom-[calc(50%-25vh)] left-[calc(50%-200px)] md:left-[calc(50%-300px)] flex flex-col scale-[0.8] md:scale-100",children:[e.jsx(io,{}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsx(re,{icon:e.jsx(oo,{}),className:"inline-flex items-center justify-center rounded-xl bg-[var(--event-color-primary)] dark:hover:bg-[var(--event-color-primary)] text-white dark:text-white hover:bg-[var(--event-color-primary)] translate-x-10 shadow-xl hover:scale-105  transition-all duration-300",onPress:()=>{d?c(!0):ne(null,{fromPath:"august-event-2025"})},children:e.jsx("span",{className:"mx-3",children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha.card-list"})})}),e.jsx(re,{icon:e.jsx(Ua,{}),className:"inline-flex items-center justify-center rounded-xl bg-[var(--event-color-primary)] dark:hover:bg-[var(--event-color-primary)] text-white dark:text-white  hover:bg-[var(--event-color-primary)] translate-x-10 shadow-xl hover:scale-105  transition-all duration-300",onPress:()=>{d?i(!0):ne(null,{fromPath:"august-event-2025"})},children:e.jsx("span",{className:"mx-3",children:e.jsx(k,{i18nKey:"growth:august-event-2025.gacha.gacha-detail"})})})]}),e.jsxs("div",{className:"ml-[40px] pt-[20px]",children:[e.jsx("div",{className:"flex items-center gap-1 text-[var(--event-color-primary)]",children:t?.srPityRemaining&&e.jsx(Je,{t:u,i18nKey:"growth:august-event-2025.gacha.sr-guarantee",values:{count:t.srPityRemaining},components:{1:e.jsx("img",{className:"h-4",src:hr}),2:e.jsx("span",{className:"pr-[4px] w-auto text-[var(--event-color-primary)] bg-gradient-to-r from-purple-500 via-fuchsia-500 to-rose-500 rounded-xl"}),3:e.jsx("span",{className:"relative min-w-[75px] left-[2px] bg-white pl-[12px] pr-[14px] rounded-xl"})}})}),e.jsx("div",{className:"flex items-center gap-1 text-[var(--event-color-primary)] mt-2",children:t?.ssrPityRemaining&&e.jsx(Je,{t:u,i18nKey:"growth:august-event-2025.gacha.ssr-guarantee",values:{count:t.ssrPityRemaining},components:{1:e.jsx("img",{className:"h-4",src:mr}),2:e.jsx("span",{className:"pr-[4px] w-auto text-[var(--event-color-primary)] bg-gradient-to-r from-purple-500 via-fuchsia-500 to-rose-500 rounded-xl"}),3:e.jsx("span",{className:"relative min-w-[75px] left-[2px] bg-white pl-[12px] pr-[14px] rounded-xl"})}})})]})]})]}),e.jsxs("div",{className:M("max-w-[280px] mx-auto translate-x-10 translate-y-[-40px]","lg:flex lg:flex-row-reverse lg:items-center lg:max-w-[600px] lg:translate-x-40 lg:translate-y-6"),children:[e.jsx(rt,{className:"lg:ml-8",leftContent:e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"size-6"}),e.jsx("div",{children:"x10"})]}),rightContent:e.jsx(lo,{}),onPress:j}),e.jsx(rt,{className:"mt-4 lg:mt-0",leftContent:e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"size-6"}),e.jsx("div",{children:"x1"})]}),rightContent:e.jsx(co,{}),onPress:w})]})]}),e.jsxs("div",{className:"mt-[-88px] lg:mt-[-16px] w-[70vw] lg:w-[50vw] bg-[#FBFBFB] mx-auto pt-[32px] lg:pt-[48px]",children:[!p&&e.jsx(zt,{}),e.jsxs("div",{className:"text-[var(--event-color-primary)] py-6 lg:py-3",children:[e.jsx($t,{}),e.jsx(Gt,{})]})]})]}),e.jsx(ro,{isVisible:n==="video",onVideoEnd:()=>r("cards"),videoSrc:"https://customer-s3s0pe0rq746gxnm.cloudflarestream.com/6792e7415f81484fa6ff67d8fce077e0/manifest/video.m3u8"}),e.jsx(Jr,{isVisible:!p&&n==="cards",onAllCardsFlipped:()=>r("idle")}),!!p&&n==="cards"&&e.jsx(eo,{isVisible:!!p&&n==="cards",onClose:()=>r("idle")}),e.jsx(Gr,{open:l,onClose:()=>i(!1)}),x&&e.jsx(Xa,{open:h,onClose:()=>c(!1),collectionCardSetProgress:x,collectionCardSetData:x?.collectionCardSet.data})]})}const ho=t=>e.jsx("svg",{viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M928 224H780.816L704 96H320l-76.8 128H96c-32 0-96 32-96 95.008V832c0 53.008 48 96 89.328 96H930c42 0 94-44.992 94-94.992V320c0-32-32-96-96-96m32 609.008c0 12.624-20.463 30.288-29.999 31.008H89.521c-7.408-.609-25.52-15.04-25.52-32.016V319.008c0-20.272 27.232-30.496 32-31.008h183.44l76.8-128h313.647l57.12 96.945l17.6 31.055H928c22.56 0 31.68 29.472 32 32zM512.001 320c-123.712 0-224 100.288-224 224s100.288 224 224 224s224-100.288 224-224s-100.288-224-224-224m0 384c-88.224 0-160-71.776-160-160s71.776-160 160-160s160 71.776 160 160s-71.776 160-160 160"})}),qe=o.createContext({});function mo({children:t}){const{data:s,fetchMore:a,refetch:n,loading:r,loadingMore:l}=Rs({feed:"trending1",tag:"pixai_august_2025",isNsfw:!1,isSafeSearch:!0,orderBy:"-createdAt",first:20}),i=o.useMemo(()=>La(Ft(He(s)??[]),"id"),[s]),h=o.useCallback(()=>{a({variables:{after:s?.pageInfo?.endCursor}})},[a]);return e.jsx(qe.Provider,{value:{data:i,loadMore:h,reload:n,loading:r||l},children:t})}const Xe=o.createContext({});function po({children:t}){const s=At.useEventTasks(),{items:a,hasMore:n,loading:r,loadMore:l}=s,i=ee(oe);return!a.length&&n&&!r&&i===A.History&&l(),e.jsx(Xe.Provider,{value:{...s,loading:a.length===0&&r},children:t})}function Ut({mediaId:t,videoMediaId:s,onClick:a,className:n,style:r,children:l}){const{ref:i,inViewport:h}=ka(),c=As(),{hoverProps:p,isHovered:u}=Aa({}),d=c?!u:!h;return e.jsxs("div",{ref:i,...p,className:n,style:{aspectRatio:`${Ze.WIDTH} / ${Ze.HEIGHT}`,...r},children:[e.jsx(Ds,{mediaId:t,videoMediaId:s,thumbnail:!0,preferStill:d,className:"size-full rounded-xl ring-1 ring-black/20",onClick:a}),l]})}function go(){const{data:t,loadMore:s}=o.useContext(qe),a=ee(oe);return e.jsx("div",{className:M("w-full max-w-screen-mlg p-4",a!==A.Artworks&&"hidden"),children:e.jsx(kt,{data:t,overscan:10,useWindowScroll:!0,listClassName:"grid grid-cols-2 msm:grid-cols-3 mmd:grid-cols-4 mlg:grid-cols-5 gap-2",itemContent:(n,r)=>e.jsx(xo,{artwork:r}),endReached:s})})}function xo({artwork:t}){const{me:s}=X(),[{count:a,liked:n},r]=Ks(t.id,wa.Artwork,t),l=zs(),{value:i}=Hs(()=>Gs("3.18"),[]),[h,c]=o.useState(!1),p=o.useCallback(()=>{l?i&&$s({route:`pixai://artwork/${t.id}`}):c(!0)},[l,i,t.id]);return e.jsxs(e.Fragment,{children:[e.jsxs(Ut,{mediaId:t.mediaId,videoMediaId:t.videoMediaId,className:"w-full relative hover:cursor-pointer",onClick:p,children:[Os(t)&&e.jsx("span",{className:"absolute top-1 left-1 flex p-0.5 text-white bg-purple-500 rounded-lg ring-1 ring-black/20",children:e.jsx(Nt,{className:"size-5"})}),s&&e.jsxs(Te,{className:"absolute right-1 bottom-1 flex items-center px-1.5 py-0.5 text-white bg-black/50 backdrop-blur rounded-lg",onPress:()=>r(),children:[e.jsx(Ws,{liked:n,className:"mr-0.5 -ml-0.5"}),Us(a)]})]}),h&&e.jsx(Vs,{artwork:t,open:!0,onClose:()=>c(!1)})]})}function fo(){const{reload:t,loading:s}=o.useContext(qe),[a,n]=me(oe),r=Ne("refresh_community_artworks");return e.jsx(_e,{id:A.Artworks,className:M("rounded-xl outline-none","text-white selected:text-sky-500 selected:[text-shadow:none] selected:bg-white"),children:e.jsxs(Te,{className:"px-4 py-2 flex items-center outline-none",onPress:()=>{r({scene:"event",section:"august-2025"}),a===A.Artworks?t():n(A.Artworks)},children:[e.jsx("span",{className:"text-base font-bold uppercase",children:e.jsx(k,{i18nKey:"growth:summer-event-2025.event-page.sections.artwork.heading"})}),e.jsx(It,{className:M("size-5 ml-1 -mr-1",s&&"animate-spin",a!==A.Artworks&&"hidden")})]})})}const bo=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6l1.41-1.41z"})}),vo=t=>{const{value:s,onChange:a,placeholder:n}=t,r=l=>{a?.(l.target.value)};return e.jsxs("div",{className:"lg:flex lg:flex-col gap-2 mt-1 relative hidden ",children:[e.jsx(qs,{className:"rounded-lg py-1 pl-2 pr-20",value:s,onChange:r,placeholder:n,maxLength:400}),e.jsxs(Da,{className:"absolute right-2 top-[5px] text-neutral-400",children:[s?.length||0," / 400"]})]})},wo=o.forwardRef((t,s)=>{const{value:a,onChange:n}=t,r=o.useRef(null),{isBasedImageRef:l}=o.useContext(Ue),i=Ys();return o.useImperativeHandle(s,()=>({click:()=>{r.current?.click()}}),[]),e.jsx("div",{className:"flex flex-col gap-4 hover:cursor-pointer mb-2",children:e.jsx(Xs,{ref:r,value:a,onChange:n,size:"custom",className:"h-[140px] border-none",buttonProps:{variant:i==="dark"?"filled":"outlined"},onImageSelect:()=>{je("snapshot_image_drag"),l.current=!0},onTaskMediaPicked:()=>{je("snapshot_task_select"),l.current=!1},features:{taskPicker:!0,uploadButton:!1}})})}),yo=t=>{const{value:s,onChange:a,presetGroups:n}=t,r=ke("lg"),{t:l}=L(["growth"]),[i,h]=o.useState(n[0].groupName),c=u=>{const d=n.find(g=>g.groupName===u);d&&(h(u.toString()),a?.(d.presets[0].name))},p=P({base:"lg:w-[160px] lg:pl-4 px-2 h-[1.75rem] text-nowrap flex items-center justify-between mt-1 hover:cursor-pointer",variants:{state:{selected:"bg-[var(--event-color-primary)] text-[#FBFBFB]",unselected:"bg-[var(--event-color-lighter)] text-[var(--event-color-darker)]"},isMobile:{true:"rounded-tl-lg rounded-tr-lg",false:"rounded-tl-lg rounded-bl-lg"}}});return e.jsxs(Se,{selectedKey:i,onSelectionChange:c,orientation:r?"horizontal":"vertical",className:"flex flex-col lg:flex-row lg:mt-2",children:[e.jsx(Qs,{className:"lg:border-r lg:border-r-[var(--event-color-lighter)] py-1 max-lg:overflow-x-auto",children:n.map(u=>e.jsxs(Zs,{className:p({state:i===u.groupName?"selected":"unselected",isMobile:r}),id:u.groupName,children:[l(u.groupI18nKey),!r&&e.jsx(St,{className:"h-[16px] text-[#FBFBFB] font-bold"})]},u.groupName))}),n.map(u=>e.jsx(Ka,{className:"pl-4 overflow-y-scroll pt-2 lg:pt-0 flex items-center",id:u.groupName,children:e.jsx(Js,{value:s,onChange:a,"aria-label":u.groupName,className:"flex flex-wrap items-center justify-start gap-1",children:u.presets.map(d=>e.jsx(ea,{variant:"rounded-label-only",value:d.name,className:"hover:cursor-pointer rounded-full text-xs bg-[#FBFBFB] ring-2 ring-[var(--event-color-lighter)] selected:ring-0 selected:bg-[var(--event-color-darker)] selected:text-[#FBFBFB] px-2 py-1 mb-1 mr-1",children:l(d.i18nKey)},d.name))})},u.groupName))]})},Vt=[{groupName:"Landmarks",groupI18nKey:"growth:august-event-2025.preset.landmarks.group-name",presets:[{name:"Statue of Liberty",i18nKey:"growth:august-event-2025.preset.landmarks.locations.statue-of-liberty"},{name:"Times Square",i18nKey:"growth:august-event-2025.preset.landmarks.locations.times-square"},{name:"Tokyo Tower",i18nKey:"growth:august-event-2025.preset.landmarks.locations.tokyo-tower"},{name:"Fushimi Inari Shrine",i18nKey:"growth:august-event-2025.preset.landmarks.locations.fushimi-inari-shrine"},{name:"Gyeongbokgung Palace",i18nKey:"growth:august-event-2025.preset.landmarks.locations.gyeongbokgung-palace"},{name:"Forbidden City",i18nKey:"growth:august-event-2025.preset.landmarks.locations.forbidden-city"},{name:"Eiffel Tower",i18nKey:"growth:august-event-2025.preset.landmarks.locations.eiffel-tower"},{name:"Big Ben",i18nKey:"growth:august-event-2025.preset.landmarks.locations.big-ben"},{name:"Santorini Cliffs",i18nKey:"growth:august-event-2025.preset.landmarks.locations.santorini-cliffs"},{name:"Sydney Opera House",i18nKey:"growth:august-event-2025.preset.landmarks.locations.sydney-opera-house"}]},{groupName:"Nature",groupI18nKey:"growth:august-event-2025.preset.natural-landscapes.group-name",presets:[{name:"Forest Path",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.forest-path"},{name:"Snowy Mountains",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.snowy-mountains"},{name:"Cherry Blossom Park",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.cherry-blossom-park"},{name:"Golden Autumn Forest",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.golden-autumn-forest"},{name:"Green Tea Field",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.green-tea-field"},{name:"Desert Dunes",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.desert-dunes"},{name:"Coastal Cliffs",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.coastal-cliffs"},{name:"Lavender Field",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.lavender-field"},{name:"Northern Lights",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.northern-lights"},{name:"Countryside Hills",i18nKey:"growth:august-event-2025.preset.natural-landscapes.locations.countryside-hills"}]},{groupName:"Everyday Scenes",groupI18nKey:"growth:august-event-2025.preset.daily-life.group-name",presets:[{name:"Dessert Café",i18nKey:"growth:august-event-2025.preset.daily-life.locations.dessert-cafe"},{name:"City Street at Night",i18nKey:"growth:august-event-2025.preset.daily-life.locations.city-street-at-night"},{name:"Bookstore Corner",i18nKey:"growth:august-event-2025.preset.daily-life.locations.bookstore-corner"},{name:"Flower Shop",i18nKey:"growth:august-event-2025.preset.daily-life.locations.flower-shop"},{name:"Morning Bakery",i18nKey:"growth:august-event-2025.preset.daily-life.locations.morning-bakery"},{name:"Cafe Window",i18nKey:"growth:august-event-2025.preset.daily-life.locations.cafe-window"},{name:"Urban Graffiti Wall",i18nKey:"growth:august-event-2025.preset.daily-life.locations.urban-graffiti-wall"},{name:"Sunset Street View",i18nKey:"growth:august-event-2025.preset.daily-life.locations.sunset-street-view"},{name:"Camping Tent",i18nKey:"growth:august-event-2025.preset.daily-life.locations.camping-tent"},{name:"Cozy Fireplace Room",i18nKey:"growth:august-event-2025.preset.daily-life.locations.cozy-fireplace-room"}]}],jo=o.forwardRef(({form:t},s)=>{const[a,n]=o.useState(!1),{t:r}=L(["growth"]);return e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"lg:flex lg:pl-[80px] mb-2 hidden",children:[e.jsx("div",{className:"rounded-full w-[188px] h-[20px] bg-[var(--event-color-lighter)]"}),e.jsx("div",{className:"rounded-full w-[32px] h-[20px] ml-4 bg-[var(--event-color-lighter)]"})]}),e.jsxs("div",{className:"bg-[#FBFBFB] rounded-[32px] flex-1 ",children:[e.jsx(wo,{ref:s,...t.getInputProps("sourceMedia")}),e.jsxs("div",{className:"w-full border-t-[var(--event-color-lighter)] border-t-2",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:justify-between mt-2",children:e.jsx("div",{className:"text-[var(--event-color-primary)] mt-2 lg:mt-0",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.change-travel-background"})})}),e.jsx(yo,{presetGroups:Vt,...t.getInputProps("selection")}),e.jsx("div",{className:"lg:flex lg:flex-row lg:justify-between mt-2 hidden",children:e.jsxs("div",{className:"text-[var(--event-color-primary)] mt-2 lg:mt-[-8px] py-1 flex items-center gap-1 rounded-lg hover:bg-neutral-200 hover:cursor-pointer",onClick:()=>n(!0),children:[e.jsx("span",{className:"px-2",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.extra-prompt"})}),a?null:e.jsx(bo,{})]})}),a?e.jsx(vo,{...t.getInputProps("extraDetail")}):null]})]})]}),e.jsxs("div",{className:"lg:w-[280px] hidden lg:block",children:[e.jsx("div",{className:"inline-flex items-center bg-[var(--event-color-primary)] text-[#FBFBFB] h-[1.5rem] rounded-full px-4 mb-2 max-lg:my-6",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.example-images"})}),e.jsxs("div",{className:"bg-[#FBFBFB] px-2",children:[e.jsx(ut,{as:"article",renderer:ht,className:"text-[var(--event-color-primary)]",children:r("growth:august-event-2025.generator.example-images-content")}),e.jsxs("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 mt-1",children:[e.jsx("div",{className:Z.example_images_1}),e.jsx("div",{className:Z.example_images_2}),e.jsx("div",{className:Z.example_images_3}),e.jsx("div",{className:Z.example_images_4})]})]})]})]})});function Co(){const{items:t,setItems:s,loadMore:a}=o.useContext(Xe),n=o.useRef(null),r=o.useRef(null),l=o.useCallback(h=>{n.current=h,r.current?.open(h)},[]),i=ee(oe);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M("w-full max-w-screen-mlg p-4",i!==A.History&&"hidden"),children:e.jsx(kt,{data:t,overscan:10,useWindowScroll:!0,listClassName:"grid grid-cols-2 msm:grid-cols-3 mmd:grid-cols-4 mlg:grid-cols-5 gap-2",itemContent:(h,c)=>e.jsxs(Ut,{mediaId:ta(c)[0],videoMediaId:sa(c),className:"w-full relative",children:[aa(c)&&e.jsx("span",{className:"absolute top-1 left-1 p-0.5 text-white bg-purple-500 rounded-lg ring-1 ring-black/20",children:e.jsx(Nt,{className:"size-5"})}),e.jsx("div",{className:"absolute inset-x-1 bottom-1 flex justify-center",children:_t({artworkIds:{length:Tt.number.gt(0)}},c)?e.jsxs("span",{className:"flex items-center gap-0.5 p-0.5 text-white",style:{textShadow:"0 0 4px #000"},children:[e.jsx(an,{className:"size-5",style:{filter:"drop-shadow(0 0 4px #000c)"}}),e.jsx("span",{className:"text-xs uppercase tracking-wider relative",children:e.jsx(k,{i18nKey:"common:publish.success"})})]}):e.jsxs(Te,{className:"flex items-center gap-0.5 px-1 pr-1.5 py-0.5 text-black bg-white rounded-lg ring-1 ring-black/20",onPress:()=>l(c),children:[e.jsx(Na,{className:"size-5"}),e.jsx("span",{className:"text-xs uppercase tracking-wider relative",children:e.jsx(k,{i18nKey:"action:publish"})})]})})]}),endReached:()=>a()})}),e.jsx(nn,{ref:r,formInit:{title:"PixAI August 2025",tags:["pixai_august_2025"]},scene:"august-2025",afterPublish:()=>s(na(h=>{if(!n.current)return;const c=n.current.id,p=h.find(u=>u.id===c);p&&(p.artworkIds??=[],p.artworkIds.push(c)),n.current=null}))})]})}function ko(){const{loading:t,reset:s}=o.useContext(Xe),[a,n]=me(oe),r=Ne("refresh_my_result");return e.jsx(_e,{id:A.History,className:M("rounded-xl outline-none","text-white selected:text-sky-500 selected:[text-shadow:none] selected:bg-white"),children:e.jsxs(Te,{className:"px-4 py-2 flex items-center outline-none",onPress:()=>{r({scene:"event",section:"august-2025"}),a===A.History?s():n(A.History)},children:[e.jsx("span",{className:"text-base font-bold uppercase",children:e.jsx(k,{i18nKey:"workflow:runner.my-results-tab.label"})}),e.jsx(It,{className:M("size-5 ml-1 -mr-1",t&&"animate-spin",a!==A.History&&"hidden")})]})})}const No=t=>e.jsx("svg",{viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M752.145 0c8.685 0 17.572 3.434 24.237 10.099c13.33 13.33 13.33 35.143 0 48.473L320.126 515.03l449.591 449.591c13.33 13.33 13.33 35.144 0 48.474s-35.142 13.33-48.472 0L247.418 539.268c-13.33-13.33-13.33-35.144 0-48.474L727.91 10.1C734.575 3.435 743.46.002 752.146.002z"})}),So=t=>e.jsx("svg",{viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512c282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0M64 512c0-112.272 41.615-214.959 110.096-293.663l631.856 631.856C727.216 919.073 624.416 961.008 512 961.008c-247.024 0-448-201.984-448-449.009zm787.023 292.786L219.408 173.17C297.984 105.235 400.24 64.002 512 64.002c247.024 0 448 200.976 448 448c0 111.664-41.152 214.032-108.977 292.784"})}),_o={maxRetries:10,retryDelay:2e3,timeout:3e4},it=async(t,s={})=>{const a={..._o,...s};return new Promise((n,r)=>{let l=0;const i=()=>{const c=new Image,p=setTimeout(()=>{c.src="",h("load image timeout")},a.timeout);c.onload=()=>{clearTimeout(p),n(c)},c.onerror=()=>{clearTimeout(p),h("load image failed")},c.crossOrigin="anonymous",c.src=t},h=c=>{l++,l<=a.maxRetries?setTimeout(()=>{i()},a.retryDelay):r(new Error(`load image failed: ${c}, retry ${a.maxRetries} times`))};i()})},qt=o.forwardRef(({imageUrl:t,config:s,loadingComp:a},n)=>{const[r,l]=o.useState(null),[i,h]=o.useState(null),[c,p]=o.useState(1),[u,d]=o.useState({x:0,y:0}),[g,x]=o.useState(!1),[f,w]=o.useState({x:0,y:0}),[j,N]=o.useState(!1),[v,I]=o.useState({width:0,height:0}),R=o.useRef(null),T=rn(m=>{m.forEach(b=>{if(b.type==="attributes"&&b.target instanceof HTMLDivElement){const{width:C,height:_}=b.target.getBoundingClientRect();I({width:C,height:_})}})},{attributes:!0});o.useEffect(()=>{if(!T.current)return;const m=()=>{if(T.current){const{width:b,height:C}=T.current.getBoundingClientRect();I({width:b,height:C})}};return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[]),o.useEffect(()=>{(async()=>{if(s.url)try{const b=await it(s.url);l(b)}catch{console.error("Failed to load frame image:",s.url),l(null)}else l(null)})()},[s]),o.useEffect(()=>{const m=requestAnimationFrame(()=>{d({x:0,y:0}),p(1)});return()=>cancelAnimationFrame(m)},[s.id]),o.useEffect(()=>{(async()=>{N(!0);try{const b=await it(t,{maxRetries:15,retryDelay:3e3,timeout:45e3});h(b),d({x:0,y:0}),p(1)}catch{console.error("Failed to load content image:",t)}finally{N(!1)}})()},[t]);const S=o.useCallback(()=>{if(!i||!v.width||!v.height)return{width:800,height:600};const m=2048,b=i.naturalWidth/i.naturalHeight;let C,_;return i.naturalWidth<=m&&i.naturalHeight<=m?(C=i.naturalWidth,_=i.naturalHeight):b>1?(C=m,_=m/b):(_=m,C=m*b),{width:Math.round(C),height:Math.round(_)}},[i,v]),D=o.useCallback(()=>{if(!i||!v.width||!v.height)return{width:400,height:300};const m=i.naturalWidth/i.naturalHeight,b=v.width/v.height;let C,_;return m>b?(C=Math.min(v.width-32,i.naturalWidth),_=C/m):(_=Math.min(v.height-32,i.naturalHeight),C=_*m),{width:Math.round(C),height:Math.round(_)}},[i,v]),H=o.useCallback(()=>s.id==="no-frame"&&i?S():s.canvas,[s,i,S]),Q=o.useCallback(()=>{if(s.id==="no-frame"&&i&&v.width>0)return D();{const{width:m,height:b}=s.canvas,C=v.width/v.height,_=m/b;let E,B;return _>C?(E=Math.min(v.width-32,m),B=E/_):(B=Math.min(v.height-32,b),E=B*_),{width:Math.round(E),height:Math.round(B)}}},[s,i,v,D]),te=(m,b,C)=>{m.width=b,m.height=C;const _=m.getContext("2d");_&&_.clearRect(0,0,b,C)},y=o.useCallback(()=>{const m=R.current;if(!m||!s)return;const{canvas:b,transparentArea:C}=s,_=H();te(m,_.width,_.height);const E=m.getContext("2d");if(E){if(E.clearRect(0,0,m.width,m.height),i)if(r){E.save();const{x:B,y:K,width:se,height:ge}=C;E.beginPath(),E.rect(B,K,se,ge),E.clip();const W=i.width*c,U=i.height*c,le=B+se/2,ce=K+ge/2,xe=le-W/2+u.x,fe=ce-U/2+u.y;E.drawImage(i,xe,fe,W,U),E.restore()}else{const{width:B,height:K}=_,se=i.naturalWidth/i.naturalHeight,ge=B/K;let W,U,le,ce;se>ge?(W=B,U=B/se,le=0,ce=(K-U)/2):(U=K,W=K*se,le=(B-W)/2,ce=0);const xe=W*c,fe=U*c,ss=le+(W-xe)/2+u.x,as=ce+(U-fe)/2+u.y;E.drawImage(i,ss,as,xe,fe)}r&&E.drawImage(r,0,0,b.width,b.height)}},[r,i,c,u,s,v,H,te]);o.useEffect(()=>{y()},[y]);const F=m=>{const b=R.current;if(!b)return{x:0,y:0};const C=b.getBoundingClientRect(),_=b.width/C.width,E=b.height/C.height,B="touches"in m?m.touches[0].clientX:m.clientX,K="touches"in m?m.touches[0].clientY:m.clientY;return{x:(B-C.left)*_,y:(K-C.top)*E}},G=m=>{if(!i||!s)return;m.preventDefault();const{x:b,y:C}=F(m);if(r){const{x:_,y:E,width:B,height:K}=s.transparentArea;b>=_&&b<=_+B&&C>=E&&C<=E+K&&(x(!0),w({x:b-u.x,y:C-u.y}))}else x(!0),w({x:b-u.x,y:C-u.y})},O=o.useCallback(m=>{if(!g)return;m.preventDefault();const{x:b,y:C}=F(m);d({x:b-f.x,y:C-f.y})},[g,f]),pe=m=>{m&&m.preventDefault(),x(!1)},Xt=m=>(m.preventDefault(),!1),Yt=m=>{p(parseFloat(m.target.value))},Qt=()=>{p(m=>m*1.1)},Zt=()=>{p(m=>m*.9)},Jt=()=>{d({x:0,y:0}),p(1)},es=()=>{const m=R.current;return m?m.toDataURL("image/png"):""};o.useImperativeHandle(n,()=>({snapshot:es}));const ts=()=>j?a||e.jsx("div",{className:"absolute inset-0 bg-white/90 flex flex-col items-center justify-center rounded z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Loading remote image..."})]})}):null;return e.jsxs("div",{ref:T,className:"relative flex justify-center items-center border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 w-full h-full",children:[e.jsx("canvas",{ref:R,width:H().width,height:H().height,onMouseDown:G,onMouseMove:O,onMouseUp:pe,onMouseLeave:pe,onTouchStart:G,onTouchMove:O,onTouchEnd:pe,onTouchCancel:pe,onContextMenu:Xt,className:`max-w-full max-h-full rounded shadow-lg transition-all duration-300 ease-in-out hover:shadow-xl ${g?"cursor-grabbing":"cursor-grab"}`,style:{touchAction:"none",width:`${Q().width}px`,height:`${Q().height}px`}}),ts(),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute bottom-6 left-[42%] lg:left-1/2 transform -translate-x-1/2 w-1/2 min-w-[180px] max-w-[320px] bg-black/50 backdrop-blur-xl px-2 py-1.5 rounded-full shadow-2xl border border-white/10  transition-all duration-500 ease-out",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-7 h-7 text-white/70 cursor-pointer hover:text-white transition-colors rounded-full hover:bg-white/10",onClick:Zt,children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"}),e.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),e.jsx("div",{className:"flex-1 flex items-center",children:e.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.01",value:c,onChange:Yt,className:`w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer
                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5
                        [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-r
                        [&::-webkit-slider-thumb]:from-blue-400 [&::-webkit-slider-thumb]:to-purple-400
                        [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-lg
                        [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white/30
                        [&::-webkit-slider-thumb]:hover:from-blue-300 [&::-webkit-slider-thumb]:hover:to-purple-300
                        [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200
                        [&::-webkit-slider-thumb]:hover:w-4 [&::-webkit-slider-thumb]:hover:h-4
                        [&::-moz-range-thumb]:w-3.5 [&::-moz-range-thumb]:h-3.5 [&::-moz-range-thumb]:rounded-full
                        [&::-moz-range-thumb]:bg-gradient-to-r [&::-moz-range-thumb]:from-blue-400
                        [&::-moz-range-thumb]:to-purple-400 [&::-moz-range-thumb]:border-none
                        [&::-moz-range-thumb]:cursor-pointer`})}),e.jsx("div",{className:"flex items-center justify-center w-7 h-7 text-white/70 cursor-pointer hover:text-white transition-colors rounded-full hover:bg-white/10",onClick:Qt,children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),e.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})})]})}),e.jsx("div",{className:"absolute bottom-6 right-6 lg:right-4 transition-all duration-500 ease-out delay-100",children:e.jsx("button",{onClick:Jt,className:"flex items-center justify-center w-10 h-10 bg-black/50 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl hover:shadow-2xl text-white/50  transition-all duration-300 transform hover:scale-105 hover:-translate-y-0.5",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),e.jsx("path",{d:"M3 21v-5h5"})]})})})]})]})});qt.displayName="ImageCompositor";const Be="PixAI August Event 2025.png",To=P({slots:{root:"flex flex-col items-center gap-2 outline-none group",image:"h-[80px] aspect-auto",icon:"py-6 h-[90px] rounded group-data-[selected]:outline outline-2 outline-offset-2 outline-theme-primary",label:"-mb-1 text-center"},variants:{skeleton:{true:{image:"bg-black dark:bg-white animate-pulse"},false:{image:"rounded group-data-[selected]:outline outline-2 outline-offset-2 outline-theme-primary"}}},defaultVariants:{skeleton:!1}});function Io(){return e.jsx(ns,{children:e.jsx(rs.div,{className:"absolute inset-0 bg-white/40 flex justify-center items-center",initial:{opacity:0},animate:{opacity:1,transition:{delay:.2,duration:.5,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.5,ease:"easeIn"}},children:e.jsx(ua,{})})})}function Fo({task:t}){const s=To(),{appVersion:a}=Ke(),n=t?.outputs?.mediaId,r=ra(n),[l,i]=o.useState(!1),[h,c]=o.useState(et("no-frame")),p=Ne("share_image_dl_click"),u=o.useRef(),d=o.useCallback(j=>{oa(j,{displayMedia:!0,trackingArgs:{scene:"august-2025"}})},[t]);async function g(j,N){const I=await(await fetch(j)).blob();return new File([I],N,{type:I.type})}const x=async()=>u.current?u.current.snapshot():"",[{loading:f},w]=De(async()=>{p({scene:"event",section:"august-2025"});const j=await x();if(a){const N=await g(j,Be),v=await Mn(N),I=ia(v,"orig");la({url:I,fileName:Be})}else ca(j,Be,{skipConversion:!0})},[p]);return e.jsxs("div",{className:"relative flex flex-col lg:flex-row lg:absolute lg:top-[10px] lg:left-[16px] lg:w-[920px] lg:mx-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"hidden lg:inline-block lg:w-[150px] lg:rounded-full lg:h-[24px] lg:bg-[var(--event-color-light)] lg:ml-12"}),e.jsx("span",{className:"hidden lg:inline-block lg:w-[50px] lg:rounded-full lg:h-[24px] lg:bg-[var(--event-color-light)] lg:ml-4"}),e.jsx("div",{id:"snapshot",className:"lg:w-[400px] h-[380px] bg-[#FBFBFB] flex justify-center items-center rounded-[32px]",children:e.jsx(qt,{ref:u,config:h,imageUrl:r,loadingComp:e.jsx(Io,{})})})]}),e.jsxs("div",{className:"bg-[#FBFBFB] text-[var(--event-color-primary)] lg:w-[460px] lg:h-[410px] rounded-[32px] mx-auto",children:[e.jsx("div",{className:"hidden lg:h-[24px] lg:pl-4 lg:bg-[var(--event-color-primary)] text-[#FBFBFB] lg:flex lg:items-center lg:w-[210px] lg:rounded-full lg:mb-4",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.share-to-social-networks"})}),e.jsxs("div",{className:"flex max-lg:flex-col max-lg:w-[70vw] lg:px-4",children:[e.jsx("div",{className:"min-w-[110px] max-lg:mt-8 max-lg:mb-2",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.change-border"})}),e.jsx(Se,{selectedKey:h.id,onSelectionChange:j=>{c(et(j))},className:"flex flex-wrap w-full gap-2",children:e.jsx(Ge,{className:"contents",items:$e,children:j=>e.jsx(_e,{className:s.root({className:"relative bg-[#EDEDED] rounded-2xl h-[100px] p-2 flex items-center justify-center"}),children:j.id==="no-frame"?e.jsx(So,{width:24,className:s.icon({className:"text-neutral-900 w-[64px] text-[24px]"})}):e.jsx("img",{src:j.url,className:s.image()})},j.id)})})]}),e.jsxs("div",{className:"flex gap-4 mt-4 items-center justify-center w-full",children:[e.jsx(re,{variant:"filled",className:"bg-[var(--event-color-primary)]",onPress:()=>i(!0),children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.publish-and-share"})}),e.jsx(re,{variant:"filled",className:"bg-[var(--event-color-primary)]",busy:f,onPress:w,children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.download-image"})})]})]}),e.jsx(Ct,{open:l,onClose:()=>i(!1),dismissable:!0,className:"mlg:w-[600px] max-w-full",children:t&&e.jsx(da,{scene:"event",section:"august-2025",task:t,initialValues:{title:"PixAI August 2025",tags:["pixai_august_2025"]},onSuccess:()=>{i(!1)},afterPublish:d})})]})}const Eo=P({base:"rounded-full bg-[var(--event-color-primary)] text-[var(--event-color-primary)] p-2 focus:outline-none pressed:ring-0 hover:bg-[var(--event-color-darker)] translate-y-[-24px]",variants:{disabled:{true:"cursor-not-allowed disabled:bg-[var(--event-color-primary)]"},isMobile:{true:"h-[48px] w-[270px] mt-12",false:"h-[56px] w-[340px]"}}});function Bo({onPress:t}){const s=ke("lg");return e.jsx(re,{variant:"filled",onPress:t,className:Eo({isMobile:s}),children:e.jsxs("div",{className:"flex justify-around items-center",children:[e.jsx(No,{className:"w-[64px] text-[#FBFBFB] text-[16px] font-bold"}),e.jsx("div",{className:"text-[#FBFBFB] text-lg",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.back-to-generate"})}),e.jsx("div",{className:"w-[32px]"})]})})}function Mo(){const[t,s]=me(oe),a=o.useRef(null),r=ee(Ve)===q.Snapshot,l=ha({initialValues:{sourceMedia:void 0,selection:Vt[0].presets[0].name,extraDetail:""}}),i=o.useMemo(()=>Cn(l.values.selection,l.values.extraDetail),[l.values.selection,l.values.extraDetail]),h=l.values.sourceMedia?.id??"",{me:c}=X(),{task:p,taskId:u,loading:d,running:g,createTask:x,reset:f,isBasedImageRef:w}=Kn(),[{loading:j},N]=De(async()=>{if(je("generate_button_click",{scene:"august-event-2025"}),!c){ne(null,{fromPath:"august-event-2025"});return}!d&&!g&&(await x(i,h),je("event_take_snap",{selection:l.values.selection,isPrompts:!!l.values.extraDetail,isBasedImageRef:w.current}))},[c,x,i,h]),v=o.useMemo(()=>Bt(N,200,{leading:!0,trailing:!1}),[N]),I=Y({creatingTask:j,loading:d,running:g}).with({creatingTask:!0},{loading:!0},()=>"loading").with({running:!0},()=>"running").otherwise(()=>"idle");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"GeneratorTab",className:"flex flex-col items-center",children:[e.jsx("div",{className:"lg:w-[950px] w-[75vw] mx-auto bg-white rounded-xl [box-shadow:0_0_0_12px_var(--event-color-light),0_48px_0_12px_var(--event-color-lighter)] p-2 lg:min-h-[480px] translate-x-0",children:u?e.jsx(Fo,{task:p}):e.jsx(jo,{ref:a,form:l})}),u?e.jsx(Bo,{onPress:f}):e.jsx(Po,{uiState:I,onPress:v,imageSelectorRef:a,hasSourceMedia:!!l.values.sourceMedia}),e.jsxs("div",{className:"w-full lg:w-[50vw] bg-[#FBFBFB] pt-[24px] mt-[-44px] ",children:[e.jsx(zt,{}),e.jsxs("div",{className:"text-[var(--event-color-primary)] lg:py-6 py-2",children:[e.jsx($t,{}),e.jsx(Gt,{})]})]}),e.jsx("section",{className:M("row-start-3 flex flex-col items-center mt-10 w-[80vw] rounded-3xl","bg-[var(--event-color-light)]",!r&&"hidden"),style:{"--bg-height":"400px"},children:e.jsx(mo,{children:e.jsxs(po,{children:[e.jsx(Se,{selectedKey:t,onSelectionChange:R=>s(R),children:e.jsxs(Ge,{className:"mt-16 mb-8 flex justify-center items-center shadow-sky-600 cursor-default",style:{textShadow:"2px 2px var(--tw-shadow-color)"},children:[e.jsx(fo,{}),c&&e.jsx(ko,{})]})}),e.jsx(go,{}),c&&e.jsx(Co,{})]})})})]}),e.jsx("div",{className:"h-[340px]"})]})}function Po({uiState:t,onPress:s,imageSelectorRef:a,hasSourceMedia:n}){const r=ke("lg"),{me:l}=X(),i=o.useCallback(()=>{if(!l){ne(null,{fromPath:"august-event-2025"});return}if(!n){a.current?.click();return}s()},[l,s,n,a]),h=P({base:"rounded-full bg-[var(--event-color-primary)] text-[var(--event-color-primary)] p-2 focus:outline-none pressed:ring-0 hover:bg-[var(--event-color-darker)] dark:hover:bg-[var(--event-color-darker)] translate-y-[-24px]",variants:{isMobile:{true:"h-[48px] w-[270px] mt-12",false:"h-[56px] w-[340px]"}}});return e.jsx(re,{busy:t==="loading"||t==="running",onPress:i,className:h({isMobile:r,className:"shadow-md"}),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ho,{className:"w-[64px] pl-4 text-[#FBFBFB] text-[22px] max-lg:text-[16px] font-bold"}),e.jsx("div",{className:"text-[#FBFBFB] text-lg max-lg:text-sm",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.cta.snap-the-picture"})}),e.jsxs("div",{className:"flex items-center text-xl max-lg:text-sm text-white pr-3",children:[e.jsx(jt,{className:"text-[14px] mr-2"}),jn]})]})})}function pi(){const t=ee(Ve);return Do(),e.jsx(Pn,{children:e.jsx(ba,{children:e.jsx(_n,{children:e.jsx(Dn,{children:e.jsxs("div",{"data-id":"event-page-root",className:M("w-screen text-sm font-quicksand font-semibold text-black overflow-hidden",Z.container),children:[e.jsx(Ro,{}),e.jsx(Ao,{}),e.jsxs("main",{className:"lg:mx-8 mx-2",children:[t===q.Snapshot&&e.jsx(Lo,{}),Y(t).with(q.Snapshot,()=>e.jsx(Mo,{})).with(q.Gacha,()=>e.jsx(uo,{})).exhaustive()]})]})})})})})}function Lo(){const t=ma();return e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto mt-[-16px] mb-6 pl-3 bg-[var(--event-color-primary)] rounded-full h-[1.5rem] inline-flex items-center hover:cursor-pointer",onClick:()=>t(pa.chatEditing()),children:[e.jsx("svg",{className:"mr-2",width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8.27268 1.22227C8.27268 1.54616 8.14158 1.84071 7.92711 2.05949L9.59702 4.06392C9.61971 4.09128 9.65149 4.11033 9.68705 4.11789C9.72261 4.12545 9.7598 4.12107 9.7924 4.10548L11.4788 3.29515C11.4424 3.11785 11.4473 2.93501 11.4931 2.75973C11.539 2.58446 11.6246 2.4211 11.744 2.28137C11.8633 2.14165 12.0134 2.02902 12.1835 1.95156C12.3535 1.87411 12.5393 1.83375 12.7275 1.83338C13.0404 1.83344 13.3423 1.94418 13.5755 2.14445C13.8088 2.34472 13.9571 2.62048 13.992 2.91907C14.027 3.21766 13.9462 3.51815 13.765 3.76315C13.5839 4.00815 13.3151 4.18049 13.01 4.24726L11.862 10.1279C11.814 10.3731 11.6784 10.5944 11.4785 10.7536C11.2786 10.9129 11.0271 11 10.7674 11H3.23241C2.97269 11 2.72114 10.9129 2.52126 10.7536C2.32138 10.5944 2.18574 10.3731 2.1378 10.1279L0.989742 4.24726C0.745739 4.19381 0.523559 4.07248 0.350986 3.89842C0.178412 3.72437 0.0631053 3.50532 0.0194836 3.26868C-0.0241382 3.03203 0.00586143 2.78829 0.105731 2.56793C0.205601 2.34756 0.370907 2.16037 0.58098 2.02974C0.791053 1.89911 1.03657 1.83086 1.28682 1.83351C1.53708 1.83615 1.78097 1.90959 1.98799 2.04463C2.19501 2.17967 2.35598 2.37032 2.45077 2.59274C2.54556 2.81517 2.56996 3.05949 2.52091 3.29515L4.20737 4.10548C4.23997 4.12107 4.27715 4.12545 4.31271 4.11789C4.34827 4.11033 4.38005 4.09128 4.40274 4.06392L6.07265 2.05949C5.93039 1.91422 5.82731 1.73773 5.7724 1.54543C5.71748 1.35312 5.7124 1.15082 5.7576 0.956197C5.8028 0.761569 5.8969 0.580517 6.0317 0.428832C6.1665 0.277148 6.3379 0.159439 6.53096 0.0859724C6.72401 0.0125061 6.93285 -0.014486 7.13926 0.00735075C7.34567 0.0291875 7.54339 0.0991897 7.71516 0.211251C7.88692 0.323313 8.02753 0.47403 8.12471 0.650256C8.22189 0.826482 8.27269 1.02286 8.27268 1.22227ZM6.99988 8.55557C7.33745 8.55557 7.66119 8.4268 7.89988 8.19759C8.13858 7.96838 8.27268 7.6575 8.27268 7.33335C8.27268 7.0092 8.13858 6.69833 7.89988 6.46912C7.66119 6.23991 7.33745 6.11114 6.99988 6.11114C6.66232 6.11114 6.33858 6.23991 6.09988 6.46912C5.86118 6.69833 5.72709 7.0092 5.72709 7.33335C5.72709 7.6575 5.86118 7.96838 6.09988 8.19759C6.33858 8.4268 6.66232 8.55557 6.99988 8.55557Z",fill:"#FEDA1F"})}),e.jsx("span",{className:"text-[#FBFBFB]",children:e.jsx(k,{i18nKey:"growth:august-event-2025.generator.go-to-chat-editing"})}),e.jsx(St,{className:"h-[16px] text-[#FBFBFB] font-bold mr-2"})]})})}function Ro(){const{i18n:t}=L(),s=Y(t.resolvedLanguage).with("zh",()=>on).with("kr",()=>dn).with("ja",()=>cn).otherwise(()=>ln),{countdown:a}=ga(xa.AugustEvent2025);return e.jsxs("div",{id:"august-title",className:"flex flex-col items-center",children:[e.jsx("img",{className:"w-[180px] lg:w-[360px]",src:s}),e.jsxs("div",{className:"flex flex-col items-center gap-3 mb-3",children:[e.jsx("p",{className:"w-full max-w-prose text-base font-bold text-center text-balance text-[--event-color-dark] dark:text-[--event-color-light] shadow-white dark:shadow-black/50",style:{textShadow:Ra(1,6).map(n=>`0 0 ${2*n}px var(--tw-shadow-color)`).join(", ")},children:e.jsx(k,{i18nKey:"growth:spring-event-2025.event-page.subheading",context:a?"countdown":void 0})}),e.jsx(Ta,{})]})]})}function Ao(){const[t,s]=me(Ve),{t:a}=L(["growth"]),n=[{id:q.Snapshot,content:a("growth:august-event-2025.snapshot-generator"),icon:e.jsx(Sa,{className:"size-6 -ml-1 -my-1 bg-[radial-gradient(closest-side,var(--tw-shadow-color),transparent)] group-selected/tab:-rotate-12 transition-transform duration-200"}),className:"selected:text-[#B2865A] selected:shadow-[#B2865A] h-full"},{id:q.Gacha,content:a("growth:august-event-2025.love-quest"),icon:e.jsx(_a,{className:"size-6 -ml-1 -my-1 bg-[radial-gradient(closest-side,var(--tw-shadow-color),transparent)] group-selected/tab:-rotate-12 transition-transform duration-200"}),className:"selected:text-[#B2865A] selected:shadow-[#B2865A] h-full"}];return e.jsx("div",{className:"flex justify-center m-w-[360px] mb-4",children:e.jsx(ar,{tabs:n,currentTab:t,setCurrentTab:r=>s(r),tabListClassName:"bg-[#B2865A] flex items-center lg:h-[56px] h-[40px] p-1"})})}function Do(){const[{reason:t},s]=fa(),{t:a}=L(["membership"]);o.useEffect(()=>{t==="Payment successful"&&(Re.success(a("membership:extra-pack.notice.purchase-success")),s({}))},[t,s])}export{pi as default};
