import{j as t}from"./vendor-motion-Bl2lDopP.js";import{r as I}from"./vendor-apollo-B9XqHIAo.js";import{u as M,f as k,a as P,b as A,i as R,g as U,t as y,j as D,d as l,U as F}from"./index-JhqgbpkX.js";import{A as L}from"./AuthLayout-D0rtJlIT.js";import{u as S}from"./vendor-i18next-TC5y0B3W.js";import{d as N}from"./vendor-react-router-Bm0RsDwP.js";import{v as B,q as u,t as c}from"./vendor-mui-DTp04zm4.js";import"./vendor-graphql-DeSYh9DC.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-firebase-BKQqa5bK.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="2cb41a85-e1dd-40ed-817f-1a64cdcf1ca0",e._sentryDebugIdIdentifier="sentry-dbid-2cb41a85-e1dd-40ed-817f-1a64cdcf1ca0")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(a){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s!=null)for(var o in s)s.hasOwnProperty(o)&&(a[o]=s[o])}return a}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const q=({isForgetPassword:e})=>{const{t:a}=S(["auth"]),[{code:r,email:s}]=M(),[o,n]=I.useState(""),{values:{email:g,code:b,password:v,confirmPassword:x},getValues:j,handleChange:i}=k(()=>({code:r,email:s})),p=N(),{data:m}=P(),[C,T]=A(async()=>{if(!e&&!m)return;const h=await j();if(!h)return;const{email:_,code:f,password:d,confirmPassword:w}=h;if(!f||!d||!w){n("Please fill all forms.");return}if(d!==w){n("Two password are not match.");return}n("");try{e?await R({input:{email:_,code:f,password:d}}):await U({input:{code:f,password:d}}),e?(y.success("Password changed successfully."),setTimeout(()=>{p("/login")},3e3)):(y.success("Email verified successfully."),setTimeout(()=>{p("/profile/edit")},3e3))}catch(E){n(`Failed to verify email: ${E?.message}`)}},[m,e]);return t.jsxs(L,{children:[t.jsx(D,{content:"Reset Password"}),o?t.jsx(B,{severity:"warning",children:o}):null,e&&t.jsxs(u,{variant:"standard",children:[t.jsx(c,{shrink:!0,htmlFor:"email-input",children:a("auth:email")}),t.jsx(l,{value:g,onChange:i("email"),id:"email-input",type:"text",autoComplete:"off"})]}),t.jsxs(u,{variant:"standard",children:[t.jsx(c,{shrink:!0,htmlFor:"code-input",children:a("auth:email-verification-code")}),t.jsx(l,{value:b,onChange:i("code"),id:"code-input",type:"text",autoComplete:"off",placeholder:a("auth:enter-email-verification-code")})]}),t.jsxs(u,{variant:"standard",children:[t.jsx(c,{shrink:!0,htmlFor:"password-input",children:a("auth:password")}),t.jsx(l,{value:v,onChange:i("password"),type:"password",id:"password-input",autoComplete:"new-password"})]}),t.jsxs(u,{variant:"standard",children:[t.jsx(c,{shrink:!0,htmlFor:"confirm-password-input",children:a("auth:confirm-password")}),t.jsx(l,{value:x,onChange:i("confirmPassword"),type:"password",id:"confirm-password-input",autoComplete:"new-password"})]}),t.jsx(F,{variant:"filled",size:"large",busy:C,onPress:T,children:a("auth:change-password")})]})},de=q;export{de as Component};
