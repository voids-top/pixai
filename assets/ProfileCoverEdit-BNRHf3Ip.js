const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/index-JhqgbpkX.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-motion-Bl2lDopP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-apollo-B9XqHIAo.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-graphql-DeSYh9DC.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-amplitude-core-CQMkGYFj.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-mui-DTp04zm4.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-i18next-TC5y0B3W.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-react-router-Bm0RsDwP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-firebase-BKQqa5bK.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-axios-CFwfAwt2.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-lodash-992l3ZN7.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-sentry-BZZLy1DV.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-react-aria-BW9JtD2p.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-markdown-1uD3znr6.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/i18n-resources-43uzMSBc.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-hls-cbDBXQj9.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-tldraw-CaaMemrL.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-fabric-Bg02ktlP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-radix-ui-DX5JiNHB.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-tldraw-DkB09obf.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-photoswipe-UqzIRFho.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-photoswipe-Nx4y_V0V.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/index-Cxs7Cmj3.css"])))=>i.map(i=>d[i]);
import{_ as k}from"./vendor-amplitude-core-CQMkGYFj.js";import{j as e}from"./vendor-motion-Bl2lDopP.js";import{r as l}from"./vendor-apollo-B9XqHIAo.js";import{a as P,b as I,aC as N,V as C,t as p,m as h,aD as E,p as v,v as S,aE as L,L as M,aF as R,U as T,aG as U,aH as A}from"./index-JhqgbpkX.js";import{u as y}from"./vendor-i18next-TC5y0B3W.js";import{D,B as F}from"./vendor-mui-DTp04zm4.js";import{L as z}from"./vendor-react-router-Bm0RsDwP.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};a.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new a.Error().stack;t&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[t]="60b959fe-8ac3-4c7e-8c22-720009e6a32b",a._sentryDebugIdIdentifier="sentry-dbid-60b959fe-8ac3-4c7e-8c22-720009e6a32b")})()}catch{}(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};a._sentryModuleMetadata=a._sentryModuleMetadata||{},a._sentryModuleMetadata[new a.Error().stack]=function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s!=null)for(var i in s)s.hasOwnProperty(i)&&(t[i]=s[i])}return t}({},a._sentryModuleMetadata[new a.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const W=l.lazy(()=>k(()=>import("./index-JhqgbpkX.js").then(a=>a.mh),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url)),J=a=>{const{avatarHeight:t=160,avatarWidth:r=160}=a,{t:s}=y(["user"]),{data:i}=P(),[u,o]=l.useState(!1),n=l.useRef(null),[b,m]=I(async()=>{if(!n.current)return;const g=await n.current.getImage();if(g)try{const d=await N(g,{preserveFileType:!0});if(!d)return;await C({input:{avatarMediaId:d.mediaId}}),p.success("Success"),o(!1),h("edit_avatar_success")}catch(d){p.error(`Failed to upload image: ${d?.message}`)}},[]),c=E(i),f=["image/jpeg","image/png",...c?["image/gif"]:[]].join(",");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:v("flex flex-col gap-4 items-center",a.className),children:e.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{o(!0),h("click_edit_avatar")},children:[e.jsx(S,{user:i,style:{width:r,height:t,fontSize:24}}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-70 group-hover:opacity-100 transition opacity-0 flex justify-center items-center text-white",children:e.jsx(L,{className:"size-6"})})]})}),e.jsx(D,{open:u,fullWidth:!0,maxWidth:"md",onClose:()=>o(!1),children:e.jsx(l.Suspense,{fallback:e.jsx(M,{}),children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"prose dark:prose-invert",children:e.jsx("h2",{children:s("user:change-profile-image")})}),e.jsx(W,{ref:n,allowedFileTypes:f,cropShape:"round"}),e.jsxs("div",{className:"w-full flex mt-2",children:[!c&&e.jsx("button",{className:"text-blue-600 text-sm self-end",onClick:()=>{R({trackingLocation:"avatar-gifs"})},children:s("user:profile.membership-supports-gif-image")}),e.jsx(T,{className:"ml-auto",variant:"filled",busy:b,onPress:m,children:s("user:submit-avatar")})]})]})})})]})},B=l.lazy(()=>k(()=>import("./index-JhqgbpkX.js").then(a=>a.mh),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url));function Q(a){const{t,i18n:r}=y(["user","membership"]),{user:s,isMe:i,allowEdit:u,hoverToEdit:o,...n}=a,[b,m]=l.useState(!1),c=U(s?.coverMedia),f=E(s),{data:g}=A({lang:r.language,category:"profilePromotionalBanner"}),d=g?.[0],j=d?.media;if(!f||!c&&!i){if(i&&!f&&j){const w=d?.targetUrl??"/membership/plans",x=t("membership:profile-page.promotion-banner.text");return e.jsxs(_,{image:j,...n,children:[x&&e.jsx("div",{className:"absolute w-full h-full bg-[#c7c7c7]/50 dark:bg-background/40"}),x&&e.jsx("span",{className:"absolute right-2 bottom-2 text-sm md:text-base mlg:text-xl text-white",style:{textShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",WebkitTextStroke:"1",WebkitTextStrokeColor:"white"},children:x}),w&&e.jsx(z,{to:w,className:"absolute w-full h-full cursor-pointer"})]})}return null}return e.jsx(_,{image:c,...n,children:i&&u&&e.jsxs(e.Fragment,{children:[e.jsx(F,{variant:c?"contained":"outlined",className:v("rounded-md",c?"text-black bg-white":"text-white border-white",o&&"invisible group-hover:visible"),onClick:()=>{h("banner_change_click"),m(!0)},children:t("user:profile-edit.change-banner.label")}),e.jsx(O,{open:b,onClose:()=>{m(!1)}})]})})}function O(a){const{t}=y(["user"]),r=l.useRef(null),[s,i]=I(async()=>{if(!r.current)return;h("banner_submit_click",{size:r.current.zoom});const o=await r.current.getImage();if(o)try{const n=await N(o,{preserveFileType:!0});if(!n)return;await C({input:{coverMediaId:n.mediaId}}),p.success("Success"),a.onClose?.()}catch(n){p.error(`Failed to upload image: ${n?.message}`)}},[]),u=["image/jpeg","image/png"].join(",");return e.jsx(D,{open:a.open,fullWidth:!0,maxWidth:"md",onClose:a.onClose,children:e.jsx(l.Suspense,{fallback:e.jsx(M,{}),children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"prose dark:prose-invert",children:e.jsx("h2",{children:t("user:profile-edit.change-banner.label")})}),e.jsx(B,{ref:r,allowedFileTypes:u,maxWidth:1500,maxHeight:500}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx(T,{variant:"filled",busy:s,onPress:i,children:t("user:submit-avatar")})})]})})})}function _(a){return e.jsxs("div",{className:v("flex items-center justify-center relative group",!a.image&&"bg-zinc-700",a.className),style:{aspectRatio:1311/232,...a.style},children:[a.image&&e.jsx("img",{className:"absolute object-cover w-full h-full mmd:rounded-t-lg",src:a.image,alt:"cover image",loading:"lazy",decoding:"async"}),a.children]})}export{J as E,Q as P};
