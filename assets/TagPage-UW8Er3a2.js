import{j as t}from"./vendor-motion-Bl2lDopP.js";import{r as w}from"./vendor-apollo-B9XqHIAo.js";import{u as T,bX as C,bY as N,x as I,bZ as O,b_ as R,b$ as E,M as B,I as D,c0 as G,c1 as L,b7 as m,c2 as f,m as p,P as q,c3 as F,p as K,c4 as U,c5 as z,bW as V}from"./index-JhqgbpkX.js";import{B as W,M as x}from"./ModelGrid-pbezVJd1.js";import{G as v}from"./vendor-firebase-BKQqa5bK.js";import{useModelFilterState as M}from"./MarketPage-pZFadfWN.js";import{c as _}from"./vendor-react-router-Bm0RsDwP.js";import{u as b}from"./vendor-i18next-TC5y0B3W.js";import{O as H,y as j,I as Q}from"./vendor-mui-DTp04zm4.js";import"./vendor-graphql-DeSYh9DC.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";import"./ModelCard-BbPEsrCH.js";import"./TrainLoraEvent-YJOi9HOY.js";import"./SearchForm-BZr1F1ci.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="1af1cc77-278d-4af7-bac2-21539464134c",e._sentryDebugIdIdentifier="sentry-dbid-1af1cc77-278d-4af7-bac2-21539464134c")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(a){for(var c=1;c<arguments.length;c++){var n=arguments[c];if(n!=null)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s])}return a}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const Y={artwork:"/",model:"/market"},$=e=>{const[{q:a,challenge:c,aid:n}]=T(),[s]=C(),{tag:o}=_(),r=+c,{t:l}=b(["common","artwork"]),d=typeof a=="string"?N(a):void 0,{data:g}=I({tag:o,q:d,first:1}),{data:y}=O({tag:o,keyword:d,first:1}),h=e.type==="artwork"?g?.totalCount:y?.totalCount,i=R(l,e.type,o,a),S=E(l,e.type,o,a,h),k=w.useMemo(()=>JSON.stringify({tag:o,q:a,aid:n,order:s,challenge:r}),[o,a,n,s,r]),P=Y[e.type],A=u=>u===o?P:V(e.type,u);return t.jsxs("div",{className:"justify-center items-center flex flex-col md:px-6 gap-4",children:[t.jsx(B,{title:i,description:S}),t.jsx(D,{className:"gap-1",title:e.type==="artwork"?l("common:tags.artwork.hero.title",{tag:o}):l("common:tags.model.hero.title",{tag:o}),description:e.type==="artwork"?l("common:tags.artwork.hero.description",{tag:o}):l("common:tags.model.hero.description",{tag:o})}),t.jsx(Z,{type:e.type}),t.jsx(G,{currentTag:o,navigateToTag:A,navigateToContest:({id:u})=>`/contest/${u}`,listTagVariables:{category:e.type==="model"?"market":void 0},displayUnknownTag:!0}),t.jsx(J,{type:e.type}),e.type==="artwork"?t.jsx(L,{tag:o,q:a,order:s,challenge:r,trackingArgs:{feed:s,scene:"tags"}},k):t.jsx(X,{keyAsProp:k,tag:o,keyword:a},k)]})},Ce=$;function J(e){const[a,c]=C(),[n,s]=M(),{type:o}=e,{t:r}=b(["common","artwork","market"]),l=[{value:m.mostLiked,label:r("common:order-option.most-liked")},{value:m.newest,label:r("common:order-option.newest")}],d=[{value:m.random,label:r("common:order-option.random")},{label:r("common:order-option.daily-ranking"),value:m.dailyRanking},...l],g=[{value:m.trending,label:r("common:order-option.trending")},{value:m.mostUsed,label:r("common:order-option.most-used")},...l],y=[{value:"all",label:r("market:search.all-categories")},{value:v.Lora,label:r("market:model.type.lora")},{value:v.SdV1Model,label:r("market:model.type.sdv1model")}],h=[{value:"all",label:r("market:search.all-time")},{value:"today",label:r("market:search.today")},{value:"this-week",label:r("market:search.this-week")},{value:"this-month",label:r("market:search.this-month")}];return o==="artwork"?t.jsx("div",{className:"self-start",children:t.jsx(f,{choices:d,value:a,onChange:i=>(p("order_click",{value:i,scene:"tags"}),c(i))})}):t.jsxs("div",{className:"relative mt-2 flex gap-2 overflow-auto w-full self-start",children:[t.jsx(f,{choices:g,onChange:i=>{p("order_click",{value:i,scene:"tags"}),s({order:i})},value:n.order,alwaysCollapse:!0}),t.jsx(f,{choices:y,onChange:i=>{p("cate_click",{cate:i,scene:"tags"}),s({type:[i]})},value:n.type||"all",alwaysCollapse:!0}),t.jsx(f,{choices:h,onChange:i=>{p("time_select",{time:i,scene:"tags"}),s({timeRange:i})},value:n.timeRange||"all",alwaysCollapse:!0})]})}function X(e){const{keyAsProp:a,keyword:c,tag:n}=e,[{type:s,timeRange:o,order:r}]=M();return t.jsx(w.Suspense,{fallback:t.jsx(q,{}),children:t.jsx(W,{order:r,keyword:c,tag:n,type:s==="all"?void 0:s,timeRange:F(o),renderContent:l=>t.jsx(x,{scene:"tags",...l}),renderLoading:()=>t.jsx(x,{loading:!0})},a)})}function Z(e){const{tag:a}=_(),{t:c}=b(["common","market"]),[{q:n},s]=T(),[o,r]=w.useState(n||""),l=d=>{d.preventDefault(),s({q:o,sort:"random"}),d.currentTarget.querySelector("input")?.blur(),p("search",{scene:"tags",value:o,tag:a})};return t.jsxs("form",{noValidate:!0,action:"",onSubmit:l,className:K("flex w-full justify-center items-center gap-4",e.className),children:[t.jsx(H,{className:"grow rounded-2xl",startAdornment:t.jsx(j,{position:"start",children:t.jsx(U,{className:"size-6"})}),endAdornment:o&&t.jsx(j,{position:"end",children:t.jsx(Q,{onClick:()=>{r("")},children:t.jsx(z,{className:"size-6"})})}),value:o,onChange:d=>r(d.target.value),inputProps:{enterKeyHint:"search"},placeholder:e.type==="artwork"?c("common:tags.artwork.search-placeholder",{tag:a}):c("common:tags.model.search-placeholder",{tag:a})}),t.jsx("input",{type:"submit",className:"hidden"})]})}export{Ce as Component};
