const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/CreateAccessTokenForm-CNWmuhf6.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-motion-Bl2lDopP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-apollo-B9XqHIAo.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-graphql-DeSYh9DC.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-amplitude-core-CQMkGYFj.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/index-JhqgbpkX.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-mui-DTp04zm4.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-i18next-TC5y0B3W.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-react-router-Bm0RsDwP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-firebase-BKQqa5bK.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-axios-CFwfAwt2.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-lodash-992l3ZN7.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-sentry-BZZLy1DV.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-react-aria-BW9JtD2p.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-markdown-1uD3znr6.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/i18n-resources-43uzMSBc.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-hls-cbDBXQj9.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-tldraw-CaaMemrL.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-fabric-Bg02ktlP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-radix-ui-DX5JiNHB.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-tldraw-DkB09obf.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-photoswipe-UqzIRFho.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-photoswipe-Nx4y_V0V.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/index-Cxs7Cmj3.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/useCopyToClipboard-BBBtjKLj.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/CreateWebhookForm-CqxWcqEd.js"])))=>i.map(i=>d[i]);
import{j as e}from"./vendor-motion-Bl2lDopP.js";import{L as P}from"./vendor-react-router-Bm0RsDwP.js";import{af as N,ag as R,ah as C,ai as S,y as m,aj as x,t as f,ak as h,U as j,al as b,L as g,am as D,an as I,ao as z,P as B,T as c,ap as L}from"./index-JhqgbpkX.js";import{r as l}from"./vendor-apollo-B9XqHIAo.js";import{g as y}from"./vendor-graphql-DeSYh9DC.js";import{i as k}from"./baseline-delete-Dbq3-3Bm.js";import{u as d}from"./vendor-i18next-TC5y0B3W.js";import{a2 as T,a3 as w,a4 as p,a5 as n,a6 as _,I as M}from"./vendor-mui-DTp04zm4.js";import{_ as E}from"./vendor-amplitude-core-CQMkGYFj.js";import{f as A}from"./add-20-filled-BLwBa5AZ.js";import{P as u}from"./ProfileEditSection-DYLqWFBC.js";import"./vendor-firebase-BKQqa5bK.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="79ab3c56-4d07-4dbe-8df9-66107535a5b3",s._sentryDebugIdIdentifier="sentry-dbid-79ab3c56-4d07-4dbe-8df9-66107535a5b3")})()}catch{}(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s._sentryModuleMetadata=s._sentryModuleMetadata||{},s._sentryModuleMetadata[new s.Error().stack]=function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var t in o)o.hasOwnProperty(t)&&(r[t]=o[t])}return r}({},s._sentryModuleMetadata[new s.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const K="api";function O(){const s=!!N(),{beingAdmin:r,beingMember:a,loading:o}=R(),{data:t,isValidating:i}=C({last:1,names:[K]}),v=(t?.length??0)>0;return{value:s&&(r||a||v),loading:o||i}}const F=()=>{const{t:s}=d(["user"]),{data:r,mutate:a}=S({first:10}),o=l.useMemo(()=>y(r),[r]);return e.jsx("div",{children:o.length>0?e.jsxs(T,{size:"small",children:[e.jsx(w,{children:e.jsxs(p,{children:[e.jsx(n,{children:s("user:profile.platform.token.table.name.title")}),e.jsx(n,{children:s("user:profile.platform.token.table.secret.title")}),e.jsx(n,{children:s("user:profile.platform.token.table.create-time.title")}),e.jsx(n,{children:s("user:profile.platform.token.table.expire-time.title")}),e.jsx(n,{children:s("user:profile.platform.token.table.last-used-time.title")}),e.jsx(n,{})]})}),e.jsx(_,{children:o.map(t=>e.jsxs(p,{children:[e.jsx(n,{children:t.name}),e.jsx(n,{children:t.secret.replace(/\*+/,"...")}),e.jsx(n,{children:m(t.createdAt)}),e.jsx(n,{children:m(t.expireTime)}),e.jsx(n,{children:m(t.lastUsedAt)}),e.jsx(n,{children:e.jsx(M,{size:"small",onClick:async()=>{try{await x.revokeAccessToken({id:t.id}),f.success(s("user:profile.platform.token.revoke.success")),a()}catch(i){i instanceof Error&&f.warning(i.message)}},children:e.jsx(k,{className:"size-6"})})})]},t.id))})]}):e.jsx(h,{})})},W=l.lazy(()=>E(()=>import("./CreateAccessTokenForm-CNWmuhf6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),U=()=>{const{t:s}=d(["user"]),[r,a]=l.useState(!1),[o,t]=l.useState(0);return e.jsxs("div",{children:[e.jsx(j,{onPress:()=>a(!0),icon:e.jsx(A,{className:"size-5"}),children:s("user:profile.platform.token.create-btn")}),e.jsx(b,{dialogProps:{maxWidth:"sm"},open:r,onClose:()=>a(!1),children:e.jsx(l.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(W,{onSuccess:()=>{a(!1),D(),t(Date.now())},onCancel:()=>{a(!1)}},o)})})]})},V=l.lazy(()=>E(()=>import("./CreateWebhookForm-CqxWcqEd.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),H=()=>{const{t:s}=d(["user"]),[r,a]=l.useState(!1),[o,t]=l.useState(0);return e.jsxs("div",{children:[e.jsx(j,{onPress:()=>a(!0),icon:e.jsx(A,{className:"size-5"}),children:s("user:profile.platform.webhook.create-btn")}),e.jsx(b,{dialogProps:{maxWidth:"sm"},open:r,onClose:()=>a(!1),children:e.jsx(l.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(V,{onSuccess:()=>{a(!1),I(),t(Date.now())},onCancel:()=>{a(!1)}},o)})})]})},Y=()=>{const{t:s}=d(["user"]),{data:r,mutate:a}=z({first:10}),o=l.useMemo(()=>y(r),[r]);return e.jsx("div",{children:o.length>0?e.jsxs(T,{size:"small",children:[e.jsx(w,{children:e.jsxs(p,{children:[e.jsx(n,{children:s("user:profile.platform.webhook.table.name.title")}),e.jsx(n,{children:"URL"}),e.jsx(n,{children:s("user:profile.platform.webhook.table.create-time.title")}),e.jsx(n,{})]})}),e.jsx(_,{children:o.map(t=>e.jsxs(p,{children:[e.jsx(n,{children:t.name}),e.jsx(n,{children:t.url}),e.jsx(n,{children:m(t.createdAt)}),e.jsx(n,{children:e.jsx(M,{size:"small",onClick:async()=>{try{await x.deleteWebhook({id:t.id}),f.success(s("user:profile.platform.webhook.delete.success")),a()}catch(i){i instanceof Error&&f.warning(i.message)}},children:e.jsx(k,{className:"size-6"})})})]},t.id))})]}):e.jsx(h,{})})};function he(){const{t:s}=d(["platform"]),{value:r,loading:a}=O();return a?e.jsx(B,{}):r?e.jsxs(e.Fragment,{children:[e.jsx(u,{heading:e.jsx(c,{i18nKey:"user:profile.api-token"}),headerSlot:e.jsx(U,{}),children:e.jsx(F,{})}),e.jsx(u,{heading:e.jsx(c,{i18nKey:"user:profile.webhooks"}),headerSlot:e.jsx(H,{}),className:"mt-8",children:e.jsx(Y,{})})]}):e.jsxs("div",{className:"mx-auto max-w-sm p-6 border border-black/20 dark:border-white/20 rounded-xl",children:[e.jsxs("h2",{className:"mt-0 text-2xl",children:[e.jsx(c,{i18nKey:"platform:feature.label",context:"full"}),e.jsx("span",{className:"ml-2 px-1.5 py-0.5 align-top text-xs text-white bg-purple-600 rounded",children:"BETA"})]}),e.jsx(L,{className:"prose dark:prose-invert",children:s("platform:beta-dialog.content")}),e.jsx("p",{className:"mb-0",children:e.jsx(P,{to:"/membership/plans",className:"no-underline text-purple-600",children:e.jsx(c,{i18nKey:"membership:promotion.check-membership.label"})})})]})}export{he as Component};
