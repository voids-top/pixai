(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};n.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new n.Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="21040278-89a0-44d6-8e27-c446b84f12f8",n._sentryDebugIdIdentifier="sentry-dbid-21040278-89a0-44d6-8e27-c446b84f12f8")})()}catch{}(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};n._sentryModuleMetadata=n._sentryModuleMetadata||{},n._sentryModuleMetadata[new n.Error().stack]=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r!=null)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}({},n._sentryModuleMetadata[new n.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();var jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function PM(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}const Ww="modulepreload",Gw=function(n,e){return new URL(n,e).href},Rf={},Vw=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),a=l?.nonce||l?.getAttribute("nonce");i=Promise.allSettled(t.map(u=>{if(u=Gw(u,r),u in Rf)return;Rf[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!r)for(let m=o.length-1;m>=0;m--){const v=o[m];if(v.href===u&&(!c||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":Ww,c||(g.as="script"),g.crossOrigin="",g.href=u,a&&g.setAttribute("nonce",a),document.head.appendChild(g),c)return new Promise((m,v)=>{g.addEventListener("load",m),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},nr=globalThis||void 0||self;var xp={},Xo={};Xo.byteLength=Yw;Xo.toByteArray=Zw;Xo.fromByteArray=Qw;var Kt=[],Et=[],Hw=typeof Uint8Array<"u"?Uint8Array:Array,Ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Fr=0,qw=Ra.length;Fr<qw;++Fr)Kt[Fr]=Ra[Fr],Et[Ra.charCodeAt(Fr)]=Fr;Et[45]=62;Et[95]=63;function Ap(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Yw(n){var e=Ap(n),t=e[0],r=e[1];return(t+r)*3/4-r}function Kw(n,e,t){return(e+t)*3/4-t}function Zw(n){var e,t=Ap(n),r=t[0],i=t[1],s=new Hw(Kw(n,r,i)),o=0,l=i>0?r-4:r,a;for(a=0;a<l;a+=4)e=Et[n.charCodeAt(a)]<<18|Et[n.charCodeAt(a+1)]<<12|Et[n.charCodeAt(a+2)]<<6|Et[n.charCodeAt(a+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Et[n.charCodeAt(a)]<<2|Et[n.charCodeAt(a+1)]>>4,s[o++]=e&255),i===1&&(e=Et[n.charCodeAt(a)]<<10|Et[n.charCodeAt(a+1)]<<4|Et[n.charCodeAt(a+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Xw(n){return Kt[n>>18&63]+Kt[n>>12&63]+Kt[n>>6&63]+Kt[n&63]}function Jw(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(Xw(r));return i.join("")}function Qw(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,l=t-r;o<l;o+=s)i.push(Jw(n,o,o+s>l?l:o+s));return r===1?(e=n[t-1],i.push(Kt[e>>2]+Kt[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Kt[e>>10]+Kt[e>>4&63]+Kt[e<<2&63]+"=")),i.join("")}var oc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */oc.read=function(n,e,t,r,i){var s,o,l=i*8-r-1,a=(1<<l)-1,u=a>>1,c=-7,d=t?i-1:0,h=t?-1:1,g=n[e+d];for(d+=h,s=g&(1<<-c)-1,g>>=-c,c+=l;c>0;s=s*256+n[e+d],d+=h,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+n[e+d],d+=h,c-=8);if(s===0)s=1-u;else{if(s===a)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(g?-1:1)*o*Math.pow(2,s-r)};oc.write=function(n,e,t,r,i,s){var o,l,a,u=s*8-i-1,c=(1<<u)-1,d=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,m=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+d>=1?e+=h/a:e+=h*Math.pow(2,1-d),e*a>=2&&(o++,a/=2),o+d>=c?(l=0,o=c):o+d>=1?(l=(e*a-1)*Math.pow(2,i),o=o+d):(l=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;n[t+g]=l&255,g+=m,l/=256,i-=8);for(o=o<<i|l,u+=i;u>0;n[t+g]=o&255,g+=m,o/=256,u-=8);n[t+g-m]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Xo,t=oc,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=_,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:l}=globalThis;c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const w=new s(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,s.prototype),Object.setPrototypeOf(w,f),w.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(w){if(w>i)throw new RangeError('The value "'+w+'" is invalid for option "size"');const f=new s(w);return Object.setPrototypeOf(f,c.prototype),f}function c(w,f,p){if(typeof w=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(w)}return d(w,f,p)}c.poolSize=8192;function d(w,f,p){if(typeof w=="string")return v(w,f);if(o.isView(w))return C(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(W(w,o)||w&&W(w.buffer,o)||typeof l<"u"&&(W(w,l)||w&&W(w.buffer,l)))return E(w,f,p);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=w.valueOf&&w.valueOf();if(S!=null&&S!==w)return c.from(S,f,p);const x=b(w);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return c.from(w[Symbol.toPrimitive]("string"),f,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}c.from=function(w,f,p){return d(w,f,p)},Object.setPrototypeOf(c.prototype,s.prototype),Object.setPrototypeOf(c,s);function h(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function g(w,f,p){return h(w),w<=0?u(w):f!==void 0?typeof p=="string"?u(w).fill(f,p):u(w).fill(f):u(w)}c.alloc=function(w,f,p){return g(w,f,p)};function m(w){return h(w),u(w<0?0:I(w)|0)}c.allocUnsafe=function(w){return m(w)},c.allocUnsafeSlow=function(w){return m(w)};function v(w,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const p=$(w,f)|0;let S=u(p);const x=S.write(w,f);return x!==p&&(S=S.slice(0,x)),S}function y(w){const f=w.length<0?0:I(w.length)|0,p=u(f);for(let S=0;S<f;S+=1)p[S]=w[S]&255;return p}function C(w){if(W(w,s)){const f=new s(w);return E(f.buffer,f.byteOffset,f.byteLength)}return y(w)}function E(w,f,p){if(f<0||w.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<f+(p||0))throw new RangeError('"length" is outside of buffer bounds');let S;return f===void 0&&p===void 0?S=new s(w):p===void 0?S=new s(w,f):S=new s(w,f,p),Object.setPrototypeOf(S,c.prototype),S}function b(w){if(c.isBuffer(w)){const f=I(w.length)|0,p=u(f);return p.length===0||w.copy(p,0,0,f),p}if(w.length!==void 0)return typeof w.length!="number"||xe(w.length)?u(0):y(w);if(w.type==="Buffer"&&Array.isArray(w.data))return y(w.data)}function I(w){if(w>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return w|0}function _(w){return+w!=w&&(w=0),c.alloc(+w)}c.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==c.prototype},c.compare=function(f,p){if(W(f,s)&&(f=c.from(f,f.offset,f.byteLength)),W(p,s)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(f)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===p)return 0;let S=f.length,x=p.length;for(let R=0,T=Math.min(S,x);R<T;++R)if(f[R]!==p[R]){S=f[R],x=p[R];break}return S<x?-1:x<S?1:0},c.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(f,p){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return c.alloc(0);let S;if(p===void 0)for(p=0,S=0;S<f.length;++S)p+=f[S].length;const x=c.allocUnsafe(p);let R=0;for(S=0;S<f.length;++S){let T=f[S];if(W(T,s))R+T.length>x.length?(c.isBuffer(T)||(T=c.from(T)),T.copy(x,R)):s.prototype.set.call(x,T,R);else if(c.isBuffer(T))T.copy(x,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=T.length}return x};function $(w,f){if(c.isBuffer(w))return w.length;if(o.isView(w)||W(w,o))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const p=w.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&p===0)return 0;let x=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return lt(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Z(w).length;default:if(x)return S?-1:lt(w).length;f=(""+f).toLowerCase(),x=!0}}c.byteLength=$;function O(w,f,p){let S=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,f>>>=0,p<=f))return"";for(w||(w="utf8");;)switch(w){case"hex":return Te(this,f,p);case"utf8":case"utf-8":return z(this,f,p);case"ascii":return L(this,f,p);case"latin1":case"binary":return de(this,f,p);case"base64":return B(this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,f,p);default:if(S)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),S=!0}}c.prototype._isBuffer=!0;function A(w,f,p){const S=w[f];w[f]=w[p],w[p]=S}c.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<f;p+=2)A(this,p,p+1);return this},c.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<f;p+=4)A(this,p,p+3),A(this,p+1,p+2);return this},c.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<f;p+=8)A(this,p,p+7),A(this,p+1,p+6),A(this,p+2,p+5),A(this,p+3,p+4);return this},c.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?z(this,0,f):O.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(f){if(!c.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:c.compare(this,f)===0},c.prototype.inspect=function(){let f="";const p=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(f+=" ... "),"<Buffer "+f+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(f,p,S,x,R){if(W(f,s)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(p===void 0&&(p=0),S===void 0&&(S=f?f.length:0),x===void 0&&(x=0),R===void 0&&(R=this.length),p<0||S>f.length||x<0||R>this.length)throw new RangeError("out of range index");if(x>=R&&p>=S)return 0;if(x>=R)return-1;if(p>=S)return 1;if(p>>>=0,S>>>=0,x>>>=0,R>>>=0,this===f)return 0;let T=R-x,X=S-p;const Be=Math.min(T,X),ke=this.slice(x,R),ze=f.slice(p,S);for(let ve=0;ve<Be;++ve)if(ke[ve]!==ze[ve]){T=ke[ve],X=ze[ve];break}return T<X?-1:X<T?1:0};function P(w,f,p,S,x){if(w.length===0)return-1;if(typeof p=="string"?(S=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,xe(p)&&(p=x?0:w.length-1),p<0&&(p=w.length+p),p>=w.length){if(x)return-1;p=w.length-1}else if(p<0)if(x)p=0;else return-1;if(typeof f=="string"&&(f=c.from(f,S)),c.isBuffer(f))return f.length===0?-1:N(w,f,p,S,x);if(typeof f=="number")return f=f&255,typeof s.prototype.indexOf=="function"?x?s.prototype.indexOf.call(w,f,p):s.prototype.lastIndexOf.call(w,f,p):N(w,[f],p,S,x);throw new TypeError("val must be string, number or Buffer")}function N(w,f,p,S,x){let R=1,T=w.length,X=f.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(w.length<2||f.length<2)return-1;R=2,T/=2,X/=2,p/=2}function Be(ze,ve){return R===1?ze[ve]:ze.readUInt16BE(ve*R)}let ke;if(x){let ze=-1;for(ke=p;ke<T;ke++)if(Be(w,ke)===Be(f,ze===-1?0:ke-ze)){if(ze===-1&&(ze=ke),ke-ze+1===X)return ze*R}else ze!==-1&&(ke-=ke-ze),ze=-1}else for(p+X>T&&(p=T-X),ke=p;ke>=0;ke--){let ze=!0;for(let ve=0;ve<X;ve++)if(Be(w,ke+ve)!==Be(f,ve)){ze=!1;break}if(ze)return ke}return-1}c.prototype.includes=function(f,p,S){return this.indexOf(f,p,S)!==-1},c.prototype.indexOf=function(f,p,S){return P(this,f,p,S,!0)},c.prototype.lastIndexOf=function(f,p,S){return P(this,f,p,S,!1)};function U(w,f,p,S){p=Number(p)||0;const x=w.length-p;S?(S=Number(S),S>x&&(S=x)):S=x;const R=f.length;S>R/2&&(S=R/2);let T;for(T=0;T<S;++T){const X=parseInt(f.substr(T*2,2),16);if(xe(X))return T;w[p+T]=X}return T}function F(w,f,p,S){return ne(lt(f,w.length-p),w,p,S)}function M(w,f,p,S){return ne(ur(f),w,p,S)}function Y(w,f,p,S){return ne(Z(f),w,p,S)}function oe(w,f,p,S){return ne(Ur(f,w.length-p),w,p,S)}c.prototype.write=function(f,p,S,x){if(p===void 0)x="utf8",S=this.length,p=0;else if(S===void 0&&typeof p=="string")x=p,S=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(S)?(S=S>>>0,x===void 0&&(x="utf8")):(x=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const R=this.length-p;if((S===void 0||S>R)&&(S=R),f.length>0&&(S<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let T=!1;for(;;)switch(x){case"hex":return U(this,f,p,S);case"utf8":case"utf-8":return F(this,f,p,S);case"ascii":case"latin1":case"binary":return M(this,f,p,S);case"base64":return Y(this,f,p,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,f,p,S);default:if(T)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),T=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(w,f,p){return f===0&&p===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(f,p))}function z(w,f,p){p=Math.min(w.length,p);const S=[];let x=f;for(;x<p;){const R=w[x];let T=null,X=R>239?4:R>223?3:R>191?2:1;if(x+X<=p){let Be,ke,ze,ve;switch(X){case 1:R<128&&(T=R);break;case 2:Be=w[x+1],(Be&192)===128&&(ve=(R&31)<<6|Be&63,ve>127&&(T=ve));break;case 3:Be=w[x+1],ke=w[x+2],(Be&192)===128&&(ke&192)===128&&(ve=(R&15)<<12|(Be&63)<<6|ke&63,ve>2047&&(ve<55296||ve>57343)&&(T=ve));break;case 4:Be=w[x+1],ke=w[x+2],ze=w[x+3],(Be&192)===128&&(ke&192)===128&&(ze&192)===128&&(ve=(R&15)<<18|(Be&63)<<12|(ke&63)<<6|ze&63,ve>65535&&ve<1114112&&(T=ve))}}T===null?(T=65533,X=1):T>65535&&(T-=65536,S.push(T>>>10&1023|55296),T=56320|T&1023),S.push(T),x+=X}return J(S)}const te=4096;function J(w){const f=w.length;if(f<=te)return String.fromCharCode.apply(String,w);let p="",S=0;for(;S<f;)p+=String.fromCharCode.apply(String,w.slice(S,S+=te));return p}function L(w,f,p){let S="";p=Math.min(w.length,p);for(let x=f;x<p;++x)S+=String.fromCharCode(w[x]&127);return S}function de(w,f,p){let S="";p=Math.min(w.length,p);for(let x=f;x<p;++x)S+=String.fromCharCode(w[x]);return S}function Te(w,f,p){const S=w.length;(!f||f<0)&&(f=0),(!p||p<0||p>S)&&(p=S);let x="";for(let R=f;R<p;++R)x+=Q[w[R]];return x}function pe(w,f,p){const S=w.slice(f,p);let x="";for(let R=0;R<S.length-1;R+=2)x+=String.fromCharCode(S[R]+S[R+1]*256);return x}c.prototype.slice=function(f,p){const S=this.length;f=~~f,p=p===void 0?S:~~p,f<0?(f+=S,f<0&&(f=0)):f>S&&(f=S),p<0?(p+=S,p<0&&(p=0)):p>S&&(p=S),p<f&&(p=f);const x=this.subarray(f,p);return Object.setPrototypeOf(x,c.prototype),x};function G(w,f,p){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+f>p)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(f,p,S){f=f>>>0,p=p>>>0,S||G(f,p,this.length);let x=this[f],R=1,T=0;for(;++T<p&&(R*=256);)x+=this[f+T]*R;return x},c.prototype.readUintBE=c.prototype.readUIntBE=function(f,p,S){f=f>>>0,p=p>>>0,S||G(f,p,this.length);let x=this[f+--p],R=1;for(;p>0&&(R*=256);)x+=this[f+--p]*R;return x},c.prototype.readUint8=c.prototype.readUInt8=function(f,p){return f=f>>>0,p||G(f,1,this.length),this[f]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(f,p){return f=f>>>0,p||G(f,2,this.length),this[f]|this[f+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(f,p){return f=f>>>0,p||G(f,2,this.length),this[f]<<8|this[f+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(f,p){return f=f>>>0,p||G(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(f,p){return f=f>>>0,p||G(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},c.prototype.readBigUInt64LE=mt(function(f){f=f>>>0,K(f,"offset");const p=this[f],S=this[f+7];(p===void 0||S===void 0)&&Ot(f,this.length-8);const x=p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,R=this[++f]+this[++f]*2**8+this[++f]*2**16+S*2**24;return BigInt(x)+(BigInt(R)<<BigInt(32))}),c.prototype.readBigUInt64BE=mt(function(f){f=f>>>0,K(f,"offset");const p=this[f],S=this[f+7];(p===void 0||S===void 0)&&Ot(f,this.length-8);const x=p*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],R=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+S;return(BigInt(x)<<BigInt(32))+BigInt(R)}),c.prototype.readIntLE=function(f,p,S){f=f>>>0,p=p>>>0,S||G(f,p,this.length);let x=this[f],R=1,T=0;for(;++T<p&&(R*=256);)x+=this[f+T]*R;return R*=128,x>=R&&(x-=Math.pow(2,8*p)),x},c.prototype.readIntBE=function(f,p,S){f=f>>>0,p=p>>>0,S||G(f,p,this.length);let x=p,R=1,T=this[f+--x];for(;x>0&&(R*=256);)T+=this[f+--x]*R;return R*=128,T>=R&&(T-=Math.pow(2,8*p)),T},c.prototype.readInt8=function(f,p){return f=f>>>0,p||G(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},c.prototype.readInt16LE=function(f,p){f=f>>>0,p||G(f,2,this.length);const S=this[f]|this[f+1]<<8;return S&32768?S|4294901760:S},c.prototype.readInt16BE=function(f,p){f=f>>>0,p||G(f,2,this.length);const S=this[f+1]|this[f]<<8;return S&32768?S|4294901760:S},c.prototype.readInt32LE=function(f,p){return f=f>>>0,p||G(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},c.prototype.readInt32BE=function(f,p){return f=f>>>0,p||G(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},c.prototype.readBigInt64LE=mt(function(f){f=f>>>0,K(f,"offset");const p=this[f],S=this[f+7];(p===void 0||S===void 0)&&Ot(f,this.length-8);const x=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(S<<24);return(BigInt(x)<<BigInt(32))+BigInt(p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),c.prototype.readBigInt64BE=mt(function(f){f=f>>>0,K(f,"offset");const p=this[f],S=this[f+7];(p===void 0||S===void 0)&&Ot(f,this.length-8);const x=(p<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(x)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+S)}),c.prototype.readFloatLE=function(f,p){return f=f>>>0,p||G(f,4,this.length),t.read(this,f,!0,23,4)},c.prototype.readFloatBE=function(f,p){return f=f>>>0,p||G(f,4,this.length),t.read(this,f,!1,23,4)},c.prototype.readDoubleLE=function(f,p){return f=f>>>0,p||G(f,8,this.length),t.read(this,f,!0,52,8)},c.prototype.readDoubleBE=function(f,p){return f=f>>>0,p||G(f,8,this.length),t.read(this,f,!1,52,8)};function V(w,f,p,S,x,R){if(!c.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>x||f<R)throw new RangeError('"value" argument is out of bounds');if(p+S>w.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(f,p,S,x){if(f=+f,p=p>>>0,S=S>>>0,!x){const X=Math.pow(2,8*S)-1;V(this,f,p,S,X,0)}let R=1,T=0;for(this[p]=f&255;++T<S&&(R*=256);)this[p+T]=f/R&255;return p+S},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(f,p,S,x){if(f=+f,p=p>>>0,S=S>>>0,!x){const X=Math.pow(2,8*S)-1;V(this,f,p,S,X,0)}let R=S-1,T=1;for(this[p+R]=f&255;--R>=0&&(T*=256);)this[p+R]=f/T&255;return p+S},c.prototype.writeUint8=c.prototype.writeUInt8=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,1,255,0),this[p]=f&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,2,65535,0),this[p]=f&255,this[p+1]=f>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,2,65535,0),this[p]=f>>>8,this[p+1]=f&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,4,4294967295,0),this[p+3]=f>>>24,this[p+2]=f>>>16,this[p+1]=f>>>8,this[p]=f&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,4,4294967295,0),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4};function Ge(w,f,p,S,x){Ze(f,S,x,w,p,7);let R=Number(f&BigInt(4294967295));w[p++]=R,R=R>>8,w[p++]=R,R=R>>8,w[p++]=R,R=R>>8,w[p++]=R;let T=Number(f>>BigInt(32)&BigInt(4294967295));return w[p++]=T,T=T>>8,w[p++]=T,T=T>>8,w[p++]=T,T=T>>8,w[p++]=T,p}function be(w,f,p,S,x){Ze(f,S,x,w,p,7);let R=Number(f&BigInt(4294967295));w[p+7]=R,R=R>>8,w[p+6]=R,R=R>>8,w[p+5]=R,R=R>>8,w[p+4]=R;let T=Number(f>>BigInt(32)&BigInt(4294967295));return w[p+3]=T,T=T>>8,w[p+2]=T,T=T>>8,w[p+1]=T,T=T>>8,w[p]=T,p+8}c.prototype.writeBigUInt64LE=mt(function(f,p=0){return Ge(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=mt(function(f,p=0){return be(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(f,p,S,x){if(f=+f,p=p>>>0,!x){const Be=Math.pow(2,8*S-1);V(this,f,p,S,Be-1,-Be)}let R=0,T=1,X=0;for(this[p]=f&255;++R<S&&(T*=256);)f<0&&X===0&&this[p+R-1]!==0&&(X=1),this[p+R]=(f/T>>0)-X&255;return p+S},c.prototype.writeIntBE=function(f,p,S,x){if(f=+f,p=p>>>0,!x){const Be=Math.pow(2,8*S-1);V(this,f,p,S,Be-1,-Be)}let R=S-1,T=1,X=0;for(this[p+R]=f&255;--R>=0&&(T*=256);)f<0&&X===0&&this[p+R+1]!==0&&(X=1),this[p+R]=(f/T>>0)-X&255;return p+S},c.prototype.writeInt8=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,1,127,-128),f<0&&(f=255+f+1),this[p]=f&255,p+1},c.prototype.writeInt16LE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,2,32767,-32768),this[p]=f&255,this[p+1]=f>>>8,p+2},c.prototype.writeInt16BE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,2,32767,-32768),this[p]=f>>>8,this[p+1]=f&255,p+2},c.prototype.writeInt32LE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,4,2147483647,-2147483648),this[p]=f&255,this[p+1]=f>>>8,this[p+2]=f>>>16,this[p+3]=f>>>24,p+4},c.prototype.writeInt32BE=function(f,p,S){return f=+f,p=p>>>0,S||V(this,f,p,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4},c.prototype.writeBigInt64LE=mt(function(f,p=0){return Ge(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=mt(function(f,p=0){return be(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(w,f,p,S,x,R){if(p+S>w.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function Ve(w,f,p,S,x){return f=+f,p=p>>>0,x||ge(w,f,p,4),t.write(w,f,p,S,23,4),p+4}c.prototype.writeFloatLE=function(f,p,S){return Ve(this,f,p,!0,S)},c.prototype.writeFloatBE=function(f,p,S){return Ve(this,f,p,!1,S)};function Ue(w,f,p,S,x){return f=+f,p=p>>>0,x||ge(w,f,p,8),t.write(w,f,p,S,52,8),p+8}c.prototype.writeDoubleLE=function(f,p,S){return Ue(this,f,p,!0,S)},c.prototype.writeDoubleBE=function(f,p,S){return Ue(this,f,p,!1,S)},c.prototype.copy=function(f,p,S,x){if(!c.isBuffer(f))throw new TypeError("argument should be a Buffer");if(S||(S=0),!x&&x!==0&&(x=this.length),p>=f.length&&(p=f.length),p||(p=0),x>0&&x<S&&(x=S),x===S||f.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),f.length-p<x-S&&(x=f.length-p+S);const R=x-S;return this===f&&typeof s.prototype.copyWithin=="function"?this.copyWithin(p,S,x):s.prototype.set.call(f,this.subarray(S,x),p),R},c.prototype.fill=function(f,p,S,x){if(typeof f=="string"){if(typeof p=="string"?(x=p,p=0,S=this.length):typeof S=="string"&&(x=S,S=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!c.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(f.length===1){const T=f.charCodeAt(0);(x==="utf8"&&T<128||x==="latin1")&&(f=T)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(p<0||this.length<p||this.length<S)throw new RangeError("Out of range index");if(S<=p)return this;p=p>>>0,S=S===void 0?this.length:S>>>0,f||(f=0);let R;if(typeof f=="number")for(R=p;R<S;++R)this[R]=f;else{const T=c.isBuffer(f)?f:c.from(f,x),X=T.length;if(X===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(R=0;R<S-p;++R)this[R+p]=T[R%X]}return this};const q={};function Pe(w,f,p){q[w]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(w,f){return`The "${w}" argument must be of type number. Received type ${typeof f}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(w,f,p){let S=`The value of "${w}" is out of range.`,x=p;return Number.isInteger(p)&&Math.abs(p)>2**32?x=me(String(p)):typeof p=="bigint"&&(x=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(x=me(x)),x+="n"),S+=` It must be ${f}. Received ${x}`,S},RangeError);function me(w){let f="",p=w.length;const S=w[0]==="-"?1:0;for(;p>=S+4;p-=3)f=`_${w.slice(p-3,p)}${f}`;return`${w.slice(0,p)}${f}`}function ae(w,f,p){K(f,"offset"),(w[f]===void 0||w[f+p]===void 0)&&Ot(f,w.length-(p+1))}function Ze(w,f,p,S,x,R){if(w>p||w<f){const T=typeof f=="bigint"?"n":"";let X;throw f===0||f===BigInt(0)?X=`>= 0${T} and < 2${T} ** ${(R+1)*8}${T}`:X=`>= -(2${T} ** ${(R+1)*8-1}${T}) and < 2 ** ${(R+1)*8-1}${T}`,new q.ERR_OUT_OF_RANGE("value",X,w)}ae(S,x,R)}function K(w,f){if(typeof w!="number")throw new q.ERR_INVALID_ARG_TYPE(f,"number",w)}function Ot(w,f,p){throw Math.floor(w)!==w?(K(w,p),new q.ERR_OUT_OF_RANGE("offset","an integer",w)):f<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,w)}const Fi=/[^+/0-9A-Za-z-_]/g;function Bi(w){if(w=w.split("=")[0],w=w.trim().replace(Fi,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function lt(w,f){f=f||1/0;let p;const S=w.length;let x=null;const R=[];for(let T=0;T<S;++T){if(p=w.charCodeAt(T),p>55295&&p<57344){if(!x){if(p>56319){(f-=3)>-1&&R.push(239,191,189);continue}else if(T+1===S){(f-=3)>-1&&R.push(239,191,189);continue}x=p;continue}if(p<56320){(f-=3)>-1&&R.push(239,191,189),x=p;continue}p=(x-55296<<10|p-56320)+65536}else x&&(f-=3)>-1&&R.push(239,191,189);if(x=null,p<128){if((f-=1)<0)break;R.push(p)}else if(p<2048){if((f-=2)<0)break;R.push(p>>6|192,p&63|128)}else if(p<65536){if((f-=3)<0)break;R.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((f-=4)<0)break;R.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return R}function ur(w){const f=[];for(let p=0;p<w.length;++p)f.push(w.charCodeAt(p)&255);return f}function Ur(w,f){let p,S,x;const R=[];for(let T=0;T<w.length&&!((f-=2)<0);++T)p=w.charCodeAt(T),S=p>>8,x=p%256,R.push(x),R.push(S);return R}function Z(w){return e.toByteArray(Bi(w))}function ne(w,f,p,S){let x;for(x=0;x<S&&!(x+p>=f.length||x>=w.length);++x)f[x+p]=w[x];return x}function W(w,f){return w instanceof f||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===f.name}function xe(w){return w!==w}const Q=function(){const w="0123456789abcdef",f=new Array(256);for(let p=0;p<16;++p){const S=p*16;for(let x=0;x<16;++x)f[S+x]=w[p]+w[x]}return f}();function mt(w){return typeof BigInt>"u"?ye:w}function ye(){throw new Error("BigInt not supported")}})(xp);const Fe=xp.Buffer;var Qe=function(){return Qe=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Qe.apply(this,arguments)};function eb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function rt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function nt(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function un(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function zi(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var tb="Event tracked successfully",rb="Unexpected error occurred",nb="Event rejected due to exceeded retry count",ib="Event skipped due to optOut config",sb="Event rejected due to missing API key",ob="Invalid API key",ab="Client not initialized",et;(function(n){n.SET="$set",n.SET_ONCE="$setOnce",n.ADD="$add",n.APPEND="$append",n.PREPEND="$prepend",n.REMOVE="$remove",n.PREINSERT="$preInsert",n.POSTINSERT="$postInsert",n.UNSET="$unset",n.CLEAR_ALL="$clearAll"})(et||(et={}));var Cr;(function(n){n.REVENUE_PRODUCT_ID="$productId",n.REVENUE_QUANTITY="$quantity",n.REVENUE_PRICE="$price",n.REVENUE_TYPE="$revenueType",n.REVENUE="$revenue"})(Cr||(Cr={}));var ln;(function(n){n.IDENTIFY="$identify",n.GROUP_IDENTIFY="$groupidentify",n.REVENUE="revenue_amount"})(ln||(ln={}));var yt;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Verbose=3]="Verbose",n[n.Debug=4]="Debug"})(yt||(yt={}));var go;(function(n){n.US="US",n.EU="EU"})(go||(go={}));var We;(function(n){n.Unknown="unknown",n.Skipped="skipped",n.Success="success",n.RateLimit="rate_limit",n.PayloadTooLarge="payload_too_large",n.Invalid="invalid",n.Failed="failed",n.Timeout="Timeout",n.SystemError="SystemError"})(We||(We={}));var ub=null,lb=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],cb="data-amp-track-",fb=["div","span","h1","h2","h3","h4","h5","h6"],sn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=We.Unknown),{event:n,code:e,message:t}},Rn=function(n){return n?(n^Math.random()*16>>n/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Rn)},db=function(){function n(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return n.prototype.register=function(e,t){var r,i;return rt(this,void 0,void 0,function(){return nt(this,function(s){switch(s.label){case 0:return this.plugins.some(function(o){return o.name===e.name})?(t.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=Rn(),t.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(r=e.type)!==null&&r!==void 0?r:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,t,this.client)]);case 1:return s.sent(),this.plugins.push(e),[2]}})})},n.prototype.deregister=function(e){var t;return rt(this,void 0,void 0,function(){var r,i;return nt(this,function(s){switch(s.label){case 0:return r=this.plugins.findIndex(function(o){return o.name===e}),i=this.plugins[r],this.plugins.splice(r,1),[4,(t=i.teardown)===null||t===void 0?void 0:t.call(i)];case 1:return s.sent(),[2]}})})},n.prototype.reset=function(e){this.applying=!1;var t=this.plugins;t.map(function(r){var i;return(i=r.teardown)===null||i===void 0?void 0:i.call(r)}),this.plugins=[],this.client=e},n.prototype.push=function(e){var t=this;return new Promise(function(r){t.queue.push([e,r]),t.scheduleApply(0)})},n.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout(function(){t.apply(t.queue.shift()).then(function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)})},e))},n.prototype.apply=function(e){return rt(this,void 0,void 0,function(){var t,r,i,s,o,l,a,g,m,u,c,d,h,g,m,v,y,C,E,b,I,_;return nt(this,function($){switch($.label){case 0:if(!e)return[2];t=xr(e,1),r=t[0],i=xr(e,2),s=i[1],o=this.plugins.filter(function(O){return O.type==="before"}),$.label=1;case 1:$.trys.push([1,6,7,8]),l=un(o),a=l.next(),$.label=2;case 2:return a.done?[3,5]:(g=a.value,g.execute?[4,g.execute(Qe({},r))]:[3,4]);case 3:if(m=$.sent(),m===null)return s({event:r,code:0,message:""}),[2];r=m,$.label=4;case 4:return a=l.next(),[3,2];case 5:return[3,8];case 6:return u=$.sent(),E={error:u},[3,8];case 7:try{a&&!a.done&&(b=l.return)&&b.call(l)}finally{if(E)throw E.error}return[7];case 8:c=this.plugins.filter(function(O){return O.type==="enrichment"||O.type===void 0}),$.label=9;case 9:$.trys.push([9,14,15,16]),d=un(c),h=d.next(),$.label=10;case 10:return h.done?[3,13]:(g=h.value,g.execute?[4,g.execute(Qe({},r))]:[3,12]);case 11:if(m=$.sent(),m===null)return s({event:r,code:0,message:""}),[2];r=m,$.label=12;case 12:return h=d.next(),[3,10];case 13:return[3,16];case 14:return v=$.sent(),I={error:v},[3,16];case 15:try{h&&!h.done&&(_=d.return)&&_.call(d)}finally{if(I)throw I.error}return[7];case 16:return y=this.plugins.filter(function(O){return O.type==="destination"}),C=y.map(function(O){var A=Qe({},r);return O.execute(A).catch(function(P){return sn(A,0,String(P))})}),Promise.all(C).then(function(O){var A=xr(O,1),P=A[0],N=P||sn(r,100,"Event not tracked, no destination plugins on the instance");s(N)}),[2]}})})},n.prototype.flush=function(){return rt(this,void 0,void 0,function(){var e,t,r,i=this;return nt(this,function(s){switch(s.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(o){return i.apply(o)}))];case 1:return s.sent(),t=this.plugins.filter(function(o){return o.type==="destination"}),r=t.map(function(o){return o.flush&&o.flush()}),[4,Promise.all(r)];case 2:return s.sent(),[2]}})})},n}(),$f="-",Jo="AMP",hb="".concat(Jo,"_unsent"),_p="https://api2.amplitude.com/2/httpapi",pb="https://api.eu.amplitude.com/2/httpapi",gb="https://api2.amplitude.com/batch",mb="https://api.eu.amplitude.com/batch",yb=1e3,wu=function(n){if(Object.keys(n).length>yb)return!1;for(var e in n){var t=n[e];if(!Rp(e,t))return!1}return!0},Rp=function(n,e){var t,r;if(typeof n!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var s=un(e),o=s.next();!o.done;o=s.next()){var l=o.value;if(Array.isArray(l))return!1;if(typeof l=="object")i=i&&wu(l);else if(!["number","string"].includes(typeof l))return!1;if(!i)return!1}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}else{if(e==null)return!1;if(typeof e=="object")return wu(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},mo=function(){function n(){this._propertySet=new Set,this._properties={}}return n.prototype.getUserProperties=function(){return Qe({},this._properties)},n.prototype.set=function(e,t){return this._safeSet(et.SET,e,t),this},n.prototype.setOnce=function(e,t){return this._safeSet(et.SET_ONCE,e,t),this},n.prototype.append=function(e,t){return this._safeSet(et.APPEND,e,t),this},n.prototype.prepend=function(e,t){return this._safeSet(et.PREPEND,e,t),this},n.prototype.postInsert=function(e,t){return this._safeSet(et.POSTINSERT,e,t),this},n.prototype.preInsert=function(e,t){return this._safeSet(et.PREINSERT,e,t),this},n.prototype.remove=function(e,t){return this._safeSet(et.REMOVE,e,t),this},n.prototype.add=function(e,t){return this._safeSet(et.ADD,e,t),this},n.prototype.unset=function(e){return this._safeSet(et.UNSET,e,$f),this},n.prototype.clearAll=function(){return this._properties={},this._properties[et.CLEAR_ALL]=$f,this},n.prototype._safeSet=function(e,t,r){if(this._validate(e,t,r)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[t]=r,this._propertySet.add(t),!0}return!1},n.prototype._validate=function(e,t,r){return this._properties[et.CLEAR_ALL]!==void 0||this._propertySet.has(t)?!1:e===et.ADD?typeof r=="number":e!==et.UNSET&&e!==et.REMOVE?Rp(t,r):!0},n}(),vb=function(n,e,t){var r=typeof n=="string"?{event_type:n}:n;return Qe(Qe(Qe({},r),t),e&&{event_properties:e})},$p=function(n,e){var t=Qe(Qe({},e),{event_type:ln.IDENTIFY,user_properties:n.getUserProperties()});return t},wb=function(n,e,t,r){var i,s=Qe(Qe({},r),{event_type:ln.GROUP_IDENTIFY,group_properties:t.getUserProperties(),groups:(i={},i[n]=e,i)});return s},bb=function(n,e,t){var r,i=new mo;i.set(n,e);var s=Qe(Qe({},t),{event_type:ln.IDENTIFY,user_properties:i.getUserProperties(),groups:(r={},r[n]=e,r)});return s},Sb=function(n,e){return Qe(Qe({},e),{event_type:ln.REVENUE,event_properties:n.getEventProperties()})},gt=function(n){return{promise:n||Promise.resolve()}},Eb=function(){function n(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new db(this),this.name=e}return n.prototype._init=function(e){return rt(this,void 0,void 0,function(){return nt(this,function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),this.isReady=!0,[2]}})})},n.prototype.runQueuedFunctions=function(e){return rt(this,void 0,void 0,function(){var t,r,i,s,o,l,a,u;return nt(this,function(c){switch(c.label){case 0:t=this[e],this[e]=[],c.label=1;case 1:c.trys.push([1,8,9,10]),r=un(t),i=r.next(),c.label=2;case 2:return i.done?[3,7]:(s=i.value,o=s(),o&&"promise"in o?[4,o.promise]:[3,4]);case 3:return c.sent(),[3,6];case 4:return[4,o];case 5:c.sent(),c.label=6;case 6:return i=r.next(),[3,2];case 7:return[3,10];case 8:return l=c.sent(),a={error:l},[3,10];case 9:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:c.sent(),c.label=12;case 12:return[2]}})})},n.prototype.track=function(e,t,r){var i=vb(e,t,r);return gt(this.dispatch(i))},n.prototype.identify=function(e,t){var r=$p(e,t);return gt(this.dispatch(r))},n.prototype.groupIdentify=function(e,t,r,i){var s=wb(e,t,r,i);return gt(this.dispatch(s))},n.prototype.setGroup=function(e,t,r){var i=bb(e,t,r);return gt(this.dispatch(i))},n.prototype.revenue=function(e,t){var r=Sb(e,t);return gt(this.dispatch(r))},n.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),gt())},n.prototype._addPlugin=function(e){return gt(this.timeline.register(e,this.config))},n.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),gt())},n.prototype._removePlugin=function(e){return gt(this.timeline.deregister(e))},n.prototype.dispatchWithCallback=function(e,t){if(!this.isReady)return t(sn(e,0,ab));this.process(e).then(t)},n.prototype.dispatch=function(e){return rt(this,void 0,void 0,function(){var t=this;return nt(this,function(r){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,i))})]})})},n.prototype.process=function(e){return rt(this,void 0,void 0,function(){var i,t,r,i;return nt(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.config.optOut?[2,sn(e,0,ib)]:[4,this.timeline.push(e)];case 1:return i=s.sent(),i.code===200?this.config.loggerProvider.log(i.message):i.code===100?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return t=s.sent(),r=String(t),this.config.loggerProvider.error(r),i=sn(e,0,r),[2,i];case 3:return[2]}})})},n.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},n.prototype._setOptOut=function(e){this.config.optOut=!!e},n.prototype.flush=function(){return gt(this.timeline.flush())},n}(),Cb=function(){function n(){this.productId="",this.quantity=1,this.price=0}return n.prototype.setProductId=function(e){return this.productId=e,this},n.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},n.prototype.setPrice=function(e){return this.price=e,this},n.prototype.setRevenueType=function(e){return this.revenueType=e,this},n.prototype.setRevenue=function(e){return this.revenue=e,this},n.prototype.setEventProperties=function(e){return wu(e)&&(this.properties=e),this},n.prototype.getEventProperties=function(){var e=this.properties?Qe({},this.properties):{};return e[Cr.REVENUE_PRODUCT_ID]=this.productId,e[Cr.REVENUE_QUANTITY]=this.quantity,e[Cr.REVENUE_PRICE]=this.price,e[Cr.REVENUE_TYPE]=this.revenueType,e[Cr.REVENUE]=this.revenue,e},n}(),Ib=function(n,e){var t=Math.max(e,1);return n.reduce(function(r,i,s){var o=Math.floor(s/t);return r[o]||(r[o]=[]),r[o].push(i),r},[])},ji="Amplitude Logger ",Op=function(){function n(){this.logLevel=yt.None}return n.prototype.disable=function(){this.logLevel=yt.None},n.prototype.enable=function(e){e===void 0&&(e=yt.Warn),this.logLevel=e},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<yt.Verbose||console.log("".concat(ji,"[Log]: ").concat(e.join(" ")))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<yt.Warn||console.warn("".concat(ji,"[Warn]: ").concat(e.join(" ")))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<yt.Error||console.error("".concat(ji,"[Error]: ").concat(e.join(" ")))},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<yt.Debug||console.log("".concat(ji,"[Debug]: ").concat(e.join(" ")))},n}(),Hs=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:yt.Warn,loggerProvider:new Op,offline:!1,optOut:!1,serverUrl:_p,serverZone:"US",useBatch:!1}},xb=function(){function n(e){var t,r,i,s;this._optOut=!1;var o=Hs();this.apiKey=e.apiKey,this.flushIntervalMillis=(t=e.flushIntervalMillis)!==null&&t!==void 0?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:o.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:o.useBatch,this.loggerProvider.enable(this.logLevel);var l=Tp(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=l.serverZone,this.serverUrl=l.serverUrl}return Object.defineProperty(n.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),n}(),Ab=function(n,e){return n==="EU"?e?mb:pb:e?gb:_p},Tp=function(n,e,t){if(n===void 0&&(n=""),e===void 0&&(e=Hs().serverZone),t===void 0&&(t=Hs().useBatch),n)return{serverUrl:n,serverZone:void 0};var r=["US","EU"].includes(e)?e:Hs().serverZone;return{serverZone:r,serverUrl:Ab(r,t)}},Pp=function(){function n(){this.sdk={metrics:{histogram:{}}}}return n.prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t},n}();function _b(n){return n instanceof Error?n.message:String(n)}function Wi(n){var e="";try{"body"in n&&(e=JSON.stringify(n.body,null,2))}catch{}return e}var Rb=function(){function n(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return n.prototype.setup=function(e){var t;return rt(this,void 0,void 0,function(){var r,i=this;return nt(this,function(s){switch(s.label){case 0:return this.config=e,this.storageKey="".concat(hb,"_").concat(this.config.apiKey.substring(0,10)),[4,(t=this.config.storageProvider)===null||t===void 0?void 0:t.get(this.storageKey)];case 1:return r=s.sent(),r&&r.length>0&&Promise.all(r.map(function(o){return i.execute(o)})).catch(),[2,Promise.resolve(void 0)]}})})},n.prototype.execute=function(e){var t=this;return e.insert_id||(e.insert_id=Rn()),new Promise(function(r){var i={event:e,attempts:0,callback:function(s){return r(s)},timeout:0};t.addToQueue(i)})},n.prototype.getTryableList=function(e){var t=this;return e.filter(function(r){return r.attempts<t.config.flushMaxRetries?(r.attempts+=1,!0):(t.fulfillRequest([r],500,nb),!1)})},n.prototype.scheduleTryable=function(e,t){var r=this;t===void 0&&(t=!1),e.forEach(function(i){if(t&&(r.queue=r.queue.concat(i)),i.timeout===0){r.schedule(r.config.flushIntervalMillis);return}setTimeout(function(){i.timeout=0,r.schedule(0)},i.timeout)})},n.prototype.addToQueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getTryableList(e);this.scheduleTryable(r,!0),this.saveEvents()},n.prototype.schedule=function(e){var t=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},n.prototype.flush=function(e){return e===void 0&&(e=!1),rt(this,void 0,void 0,function(){var t,r,i,s=this;return nt(this,function(o){switch(o.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(t=[],r=[],this.queue.forEach(function(l){return l.timeout===0?t.push(l):r.push(l)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),i=Ib(t,this.config.flushQueueSize),[4,Promise.all(i.map(function(l){return s.send(l,e)}))]);case 1:return o.sent(),this.scheduleTryable(r),[2]}})})},n.prototype.send=function(e,t){return t===void 0&&(t=!0),rt(this,void 0,void 0,function(){var r,i,s,o,l;return nt(this,function(a){switch(a.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,sb)];r={api_key:this.config.apiKey,events:e.map(function(u){var c=u.event;c.extra;var d=eb(c,["extra"]);return d}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new Pp,a.label=1;case 1:return a.trys.push([1,3,,4]),i=Tp(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,r)];case 2:return s=a.sent(),s===null?(this.fulfillRequest(e,0,rb),[2]):t?(this.handleResponse(s,e),[3,4]):("body"in s?this.fulfillRequest(e,s.statusCode,"".concat(s.status,": ").concat(Wi(s))):this.fulfillRequest(e,s.statusCode,s.status),[2]);case 3:return o=a.sent(),l=_b(o),this.config.loggerProvider.error(l),this.handleResponse({status:We.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},n.prototype.handleResponse=function(e,t){var r=e.status;switch(r){case We.Success:{this.handleSuccessResponse(e,t);break}case We.Invalid:{this.handleInvalidResponse(e,t);break}case We.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,t);break}case We.RateLimit:{this.handleRateLimitResponse(e,t);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(r,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t);break}}},n.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,tb)},n.prototype.handleInvalidResponse=function(e,t){var r=this;if(e.body.missingField||e.body.error.startsWith(ob)){this.fulfillRequest(t,e.statusCode,e.body.error);return}var i=zi(zi(zi(zi([],xr(Object.values(e.body.eventsWithInvalidFields)),!1),xr(Object.values(e.body.eventsWithMissingFields)),!1),xr(Object.values(e.body.eventsWithInvalidIdLengths)),!1),xr(e.body.silencedEvents),!1).flat(),s=new Set(i),o=t.filter(function(a,u){if(s.has(u)){r.fulfillRequest([a],e.statusCode,e.body.error);return}return!0});o.length>0&&this.config.loggerProvider.warn(Wi(e));var l=this.getTryableList(o);this.scheduleTryable(l)},n.prototype.handlePayloadTooLargeResponse=function(e,t){if(t.length===1){this.fulfillRequest(t,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Wi(e)),this.config.flushQueueSize/=2;var r=this.getTryableList(t);this.scheduleTryable(r)},n.prototype.handleRateLimitResponse=function(e,t){var r=this,i=Object.keys(e.body.exceededDailyQuotaUsers),s=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,l=new Set(i),a=new Set(s),u=new Set(o),c=t.filter(function(h,g){if(h.event.user_id&&l.has(h.event.user_id)||h.event.device_id&&a.has(h.event.device_id)){r.fulfillRequest([h],e.statusCode,e.body.error);return}return u.has(g)&&(h.timeout=r.throttleTimeout),!0});c.length>0&&this.config.loggerProvider.warn(Wi(e));var d=this.getTryableList(c);this.scheduleTryable(d)},n.prototype.handleOtherResponse=function(e){var t=this,r=e.map(function(s){return s.timeout=s.attempts*t.retryTimeout,s}),i=this.getTryableList(r);this.scheduleTryable(i)},n.prototype.fulfillRequest=function(e,t,r){this.removeEvents(e),e.forEach(function(i){return i.callback(sn(i.event,t,r))})},n.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(t){return t.event});this.config.storageProvider.set(this.storageKey,e)}},n.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(t){return!e.some(function(r){return r.event.insert_id===t.event.insert_id})}),this.saveEvents()},n}(),$b=function(n){var e=new Error().stack||"";return e.split(`
`).slice(2+n).map(function(t){return t.trim()})},He=function(n){return function(){var e=Qe({},n.config),t=e.loggerProvider,r=e.logLevel;return{logger:t,logLevel:r}}},Ob=function(n,e){var t,r;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=un(e.split(".")),s=i.next();!s.done;s=i.next()){var o=s.value;if(o in n)n=n[o];else return}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},qe=function(n,e){return function(){var t,r,i={};try{for(var s=un(e),o=s.next();!o.done;o=s.next()){var l=o.value;i[l]=Ob(n,l)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i}},Ye=function(n,e,t,r,i){return i===void 0&&(i=null),function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var l=t(),a=l.logger,u=l.logLevel;if(u&&u<yt.Debug||!u||!a)return n.apply(i,s);var c={type:"invoke public method",name:e,args:s,stacktrace:$b(1),time:{start:new Date().toISOString()},states:{}};r&&c.states&&(c.states.before=r());var d=n.apply(i,s);return d&&d.promise?d.promise.then(function(){r&&c.states&&(c.states.after=r()),c.time&&(c.time.end=new Date().toISOString()),a.debug(JSON.stringify(c,null,2))}):(r&&c.states&&(c.states.after=r()),c.time&&(c.time.end=new Date().toISOString()),a.debug(JSON.stringify(c,null,2))),d}},ac=function(){function n(){this.memoryStorage=new Map}return n.prototype.isEnabled=function(){return rt(this,void 0,void 0,function(){return nt(this,function(e){return[2,!0]})})},n.prototype.get=function(e){return rt(this,void 0,void 0,function(){return nt(this,function(t){return[2,this.memoryStorage.get(e)]})})},n.prototype.getRaw=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return t=r.sent(),[2,t?JSON.stringify(t):void 0]}})})},n.prototype.set=function(e,t){return rt(this,void 0,void 0,function(){return nt(this,function(r){return this.memoryStorage.set(e,t),[2]})})},n.prototype.remove=function(e){return rt(this,void 0,void 0,function(){return nt(this,function(t){return this.memoryStorage.delete(e),[2]})})},n.prototype.reset=function(){return rt(this,void 0,void 0,function(){return nt(this,function(e){return this.memoryStorage.clear(),[2]})})},n}(),Qo=function(){function n(){}return n.prototype.send=function(e,t){return Promise.resolve(null)},n.prototype.buildResponse=function(e){var t,r,i,s,o,l,a,u,c,d,h,g,m,v,y,C,E,b,I,_,$,O;if(typeof e!="object")return null;var A=e.code||0,P=this.buildStatus(A);switch(P){case We.Success:return{status:P,statusCode:A,body:{eventsIngested:(t=e.events_ingested)!==null&&t!==void 0?t:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case We.Invalid:return{status:P,statusCode:A,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(l=e.events_with_invalid_fields)!==null&&l!==void 0?l:{},eventsWithMissingFields:(a=e.events_with_missing_fields)!==null&&a!==void 0?a:{},eventsWithInvalidIdLengths:(u=e.events_with_invalid_id_lengths)!==null&&u!==void 0?u:{},epsThreshold:(c=e.eps_threshold)!==null&&c!==void 0?c:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(g=e.silenced_events)!==null&&g!==void 0?g:[],throttledDevices:(m=e.throttled_devices)!==null&&m!==void 0?m:{},throttledEvents:(v=e.throttled_events)!==null&&v!==void 0?v:[]}};case We.PayloadTooLarge:return{status:P,statusCode:A,body:{error:(y=e.error)!==null&&y!==void 0?y:""}};case We.RateLimit:return{status:P,statusCode:A,body:{error:(C=e.error)!==null&&C!==void 0?C:"",epsThreshold:(E=e.eps_threshold)!==null&&E!==void 0?E:0,throttledDevices:(b=e.throttled_devices)!==null&&b!==void 0?b:{},throttledUsers:(I=e.throttled_users)!==null&&I!==void 0?I:{},exceededDailyQuotaDevices:(_=e.exceeded_daily_quota_devices)!==null&&_!==void 0?_:{},exceededDailyQuotaUsers:($=e.exceeded_daily_quota_users)!==null&&$!==void 0?$:{},throttledEvents:(O=e.throttled_events)!==null&&O!==void 0?O:[]}};case We.Timeout:default:return{status:P,statusCode:A}}},n.prototype.buildStatus=function(e){return e>=200&&e<300?We.Success:e===429?We.RateLimit:e===413?We.PayloadTooLarge:e===408?We.Timeout:e>=400&&e<500?We.Invalid:e>=500?We.Failed:We.Unknown},n}(),bu=function(n,e){return bu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},bu(n,e)};function $n(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ke=function(){return Ke=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ke.apply(this,arguments)};function Ee(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function Ce(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Tb(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}var Su=function(n,e){return Su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Su(n,e)};function Pb(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Su(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Pt=function(){return Pt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Pt.apply(this,arguments)};function Of(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function xt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function At(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function kp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}var Nt=function(){var n="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[n]<"u")return globalThis[n];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof nr<"u")return nr},yo=function(){var n,e=Nt();if(!(!((n=e?.location)===null||n===void 0)&&n.search))return{};var t=e.location.search.substring(1).split("&").filter(Boolean),r=t.reduce(function(i,s){var o=s.split("=",2),l=Tf(o[0]),a=Tf(o[1]);return a&&(i[l]=a),i},{});return r},Tf=function(n){n===void 0&&(n="");try{return decodeURIComponent(n)}catch{return""}},kb="utm_campaign",Nb="utm_content",Mb="utm_id",Lb="utm_medium",Db="utm_source",Ub="utm_term",Pf="dclid",kf="fbclid",Nf="gbraid",Mf="gclid",Lf="ko_click_id",Df="li_fat_id",Uf="msclkid",Ff="rtd_cid",Bf="ttclid",zf="twclid",jf="wbraid",ea={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Np=function(){function n(){}return n.prototype.parse=function(){return xt(this,void 0,void 0,function(){return At(this,function(e){return[2,Pt(Pt(Pt(Pt({},ea),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},n.prototype.getUtmParam=function(){var e=yo(),t=e[kb],r=e[Nb],i=e[Mb],s=e[Lb],o=e[Db],l=e[Ub];return{utm_campaign:t,utm_content:r,utm_id:i,utm_medium:s,utm_source:o,utm_term:l}},n.prototype.getReferrer=function(){var e,t,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(t=(e=r.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&t!==void 0?t:void 0}catch{}return r},n.prototype.getClickIds=function(){var e,t=yo();return e={},e[Pf]=t[Pf],e[kf]=t[kf],e[Nf]=t[Nf],e[Mf]=t[Mf],e[Lf]=t[Lf],e[Df]=t[Df],e[Uf]=t[Uf],e[Ff]=t[Ff],e[Bf]=t[Bf],e[zf]=t[zf],e[jf]=t[jf],e},n}(),Mp=function(n,e,t){return e===void 0&&(e=""),t===void 0&&(t=10),[Jo,e,n.substring(0,t)].filter(Boolean).join("_")},Fb=function(n){return"".concat(Jo.toLowerCase(),"_").concat(n.substring(0,6))},Wf=function(n){var e=n.split(".");return e.length<=2?n:e.slice(e.length-2,e.length).join(".")},Bb=function(n){return Object.values(n).every(function(e){return!e})},zb=function(n,e,t,r){r===void 0&&(r=!0),n.referrer;var i=n.referring_domain,s=Of(n,["referrer","referring_domain"]),o=e||{};o.referrer;var l=o.referring_domain,a=Of(o,["referrer","referring_domain"]);if(jb(t.excludeReferrers,n.referring_domain)||!r&&Bb(n)&&e)return!1;var u=JSON.stringify(s)!==JSON.stringify(a),c=Wf(i||"")!==Wf(l||"");return!e||u||c},jb=function(n,e){return n===void 0&&(n=[]),e===void 0&&(e=""),n.some(function(t){return t instanceof RegExp?t.test(e):t===e})},Wb=function(n,e){var t=Pt(Pt({},ea),n),r=Object.entries(t).reduce(function(i,s){var o,l=kp(s,2),a=l[0],u=l[1];return i.setOnce("initial_".concat(a),(o=u??e.initialEmptyValue)!==null&&o!==void 0?o:"EMPTY"),u?i.set(a,u):i.unset(a)},new mo);return $p(r)},Gb=function(n){var e=n;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},Vb=function(n,e,t){return t===void 0&&(t=10),[Jo,e,n.substring(0,t)].filter(Boolean).join("_")},Lp=function(n,e){e===void 0&&(e=Date.now());var t=Date.now(),r=t-e;return r>n},Hb=function(){function n(e,t){var r;this.shouldTrackNewCampaign=!1,this.options=Pt({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:Gb((r=t.cookieOptions)===null||r===void 0?void 0:r.domain)},e),this.storage=t.cookieStorage,this.storageKey=Vb(t.apiKey,"MKTG"),this.currentCampaign=ea,this.sessionTimeout=t.sessionTimeout,this.lastEventTime=t.lastEventTime,t.loggerProvider.log("Installing web attribution tracking.")}return n.prototype.init=function(){return xt(this,void 0,void 0,function(){var e,t;return At(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return t=kp.apply(void 0,[r.sent(),2]),this.currentCampaign=t[0],this.previousCampaign=t[1],e=this.lastEventTime?Lp(this.sessionTimeout,this.lastEventTime):!0,zb(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},n.prototype.fetchCampaign=function(){return xt(this,void 0,void 0,function(){return At(this,function(e){switch(e.label){case 0:return[4,Promise.all([new Np().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},n.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var t=Wb(this.currentCampaign,this.options);return e&&(t.event_id=e),t},n.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},n}(),Eu=function(){function n(e){this.options=Pt({},e)}return n.prototype.isEnabled=function(){return xt(this,void 0,void 0,function(){var e,t,r;return At(this,function(i){switch(i.label){case 0:if(!Nt())return[2,!1];n.testValue=String(Date.now()),e=new n(this.options),t="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,e.set(t,n.testValue)];case 2:return i.sent(),[4,e.get(t)];case 3:return r=i.sent(),[2,r===n.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,e.remove(t)];case 6:return i.sent(),[7];case 7:return[2]}})})},n.prototype.get=function(e){var t;return xt(this,void 0,void 0,function(){var r,i;return At(this,function(s){switch(s.label){case 0:return[4,this.getRaw(e)];case 1:if(r=s.sent(),!r)return[2,void 0];try{return i=(t=qb(r))!==null&&t!==void 0?t:Yb(r),i===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]):[2,JSON.parse(i)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]}return[2]}})})},n.prototype.getRaw=function(e){var t,r;return xt(this,void 0,void 0,function(){var i,s,o;return At(this,function(l){return i=Nt(),s=(r=(t=i?.document)===null||t===void 0?void 0:t.cookie.split("; "))!==null&&r!==void 0?r:[],o=s.find(function(a){return a.indexOf(e+"=")===0}),o?[2,o.substring(e.length+1)]:[2,void 0]})})},n.prototype.set=function(e,t){var r;return xt(this,void 0,void 0,function(){var i,s,o,l,a,u,c;return At(this,function(d){try{i=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,s=t!==null?i:-1,o=void 0,s&&(l=new Date,l.setTime(l.getTime()+s*24*60*60*1e3),o=l),a="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),o&&(a+="; expires=".concat(o.toUTCString())),a+="; path=/",this.options.domain&&(a+="; domain=".concat(this.options.domain)),this.options.secure&&(a+="; Secure"),this.options.sameSite&&(a+="; SameSite=".concat(this.options.sameSite)),u=Nt(),u&&(u.document.cookie=a)}catch(h){c=h instanceof Error?h.message:String(h),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(c))}return[2]})})},n.prototype.remove=function(e){return xt(this,void 0,void 0,function(){return At(this,function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}})})},n.prototype.reset=function(){return xt(this,void 0,void 0,function(){return At(this,function(e){return[2]})})},n}(),qb=function(n){try{return decodeURIComponent(atob(n))}catch{return}},Yb=function(n){try{return decodeURIComponent(atob(decodeURIComponent(n)))}catch{return}},Kb=function(n){Pb(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.send=function(t,r){return xt(this,void 0,void 0,function(){var i,s,o;return At(this,function(l){switch(l.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(t,i)];case 1:return s=l.sent(),[4,s.text()];case 2:o=l.sent();try{return[2,this.buildResponse(JSON.parse(o))]}catch{return[2,this.buildResponse({code:s.status})]}return[2]}})})},e}(Qo),Zb=function(){function n(){}return n.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Xb(),platform:"Web",os:void 0,deviceModel:void 0}},n}(),Xb=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Jb=function(){function n(){this.queue=[]}return n.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},n.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},n}(),cr=function(){return cr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cr.apply(this,arguments)},qs=function(n,e){var t=["string","number","boolean","undefined"],r=typeof n,i=typeof e;if(r!==i)return!1;for(var s=0,o=t;s<o.length;s++){var l=o[s];if(l===r)return n===e}if(n==null&&e==null)return!0;if(n==null||e==null||n.length!==e.length)return!1;var a=Array.isArray(n),u=Array.isArray(e);if(a!==u)return!1;if(a&&u){for(var c=0;c<n.length;c++)if(!qs(n[c],e[c]))return!1}else{var d=Object.keys(n).sort(),h=Object.keys(e).sort();if(!qs(d,h))return!1;var g=!0;return Object.keys(n).forEach(function(m){qs(n[m],e[m])||(g=!1)}),g}return!0},Qb="$set",e1="$unset",t1="$clearAll";Object.entries||(Object.entries=function(n){for(var e=Object.keys(n),t=e.length,r=new Array(t);t--;)r[t]=[e[t],n[e[t]]];return r});var r1=function(){function n(){this.identity={userProperties:{}},this.listeners=new Set}return n.prototype.editIdentity=function(){var e=this,t=cr({},this.identity.userProperties),r=cr(cr({},this.identity),{userProperties:t});return{setUserId:function(i){return r.userId=i,this},setDeviceId:function(i){return r.deviceId=i,this},setUserProperties:function(i){return r.userProperties=i,this},setOptOut:function(i){return r.optOut=i,this},updateUserProperties:function(i){for(var s=r.userProperties||{},o=0,l=Object.entries(i);o<l.length;o++){var a=l[o],u=a[0],c=a[1];switch(u){case Qb:for(var d=0,h=Object.entries(c);d<h.length;d++){var g=h[d],m=g[0],v=g[1];s[m]=v}break;case e1:for(var y=0,C=Object.keys(c);y<C.length;y++){var m=C[y];delete s[m]}break;case t1:s={};break}}return r.userProperties=s,this},commit:function(){return e.setIdentity(r),this}}},n.prototype.getIdentity=function(){return cr({},this.identity)},n.prototype.setIdentity=function(e){var t=cr({},this.identity);this.identity=cr({},e),qs(t,this.identity)||this.listeners.forEach(function(r){r(e)})},n.prototype.addIdentityListener=function(e){this.listeners.add(e)},n.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},n}(),kn=typeof globalThis<"u"?globalThis:typeof nr<"u"?nr:self,uc=function(){function n(){this.identityStore=new r1,this.eventBridge=new Jb,this.applicationContextProvider=new Zb}return n.getInstance=function(e){return kn.analyticsConnectorInstances||(kn.analyticsConnectorInstances={}),kn.analyticsConnectorInstances[e]||(kn.analyticsConnectorInstances[e]=new n),kn.analyticsConnectorInstances[e]},n}(),ii=function(n){return n===void 0&&(n="$default_instance"),uc.getInstance(n)},n1=function(n,e){ii(e).identityStore.editIdentity().setUserId(n).commit()},i1=function(n,e){ii(e).identityStore.editIdentity().setDeviceId(n).commit()},s1=function(){function n(){this.name="identity",this.type="before",this.identityStore=ii().identityStore}return n.prototype.execute=function(e){return xt(this,void 0,void 0,function(){var t;return At(this,function(r){return t=e.user_properties,t&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]})})},n.prototype.setup=function(e){return xt(this,void 0,void 0,function(){return At(this,function(t){return e.instanceName&&(this.identityStore=ii(e.instanceName).identityStore),[2]})})},n}(),o1=function(){var n,e,t,r;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(r=(t=(e=(n=navigator.languages)===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:navigator.language)!==null&&t!==void 0?t:i)!==null&&r!==void 0?r:""},Ri=function(n,e){return typeof n=="boolean"?n:n?.[e]!==!1},Dp=function(n){return Ri(n,"attribution")},a1=function(n){return Ri(n,"fileDownloads")},u1=function(n){return Ri(n,"formInteractions")},Up=function(n){return Ri(n,"pageViews")},Gf=function(n){return Ri(n,"sessions")},Fp=function(n){return typeof n=="boolean"?n:typeof n=="object"&&(n.elementInteractions===!0||typeof n.elementInteractions=="object")},l1=function(n){if(Fp(n.autocapture)&&typeof n.autocapture=="object"&&typeof n.autocapture.elementInteractions=="object")return n.autocapture.elementInteractions},c1=function(n){var e=function(){return!1},t=void 0,r,i=n.pageCounter,s=Up(n.defaultTracking);return s&&(e=void 0,r=void 0,n.defaultTracking&&typeof n.defaultTracking=="object"&&n.defaultTracking.pageViews&&typeof n.defaultTracking.pageViews=="object"&&("trackOn"in n.defaultTracking.pageViews&&(e=n.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in n.defaultTracking.pageViews&&(t=n.defaultTracking.pageViews.trackHistoryChanges),"eventType"in n.defaultTracking.pageViews&&n.defaultTracking.pageViews.eventType&&(r=n.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:t,eventType:r,pageCounter:i}},f1=function(n){return Dp(n.defaultTracking)&&n.defaultTracking&&typeof n.defaultTracking=="object"&&n.defaultTracking.attribution&&typeof n.defaultTracking.attribution=="object"?Pt({},n.defaultTracking.attribution):{}},$a=function(n,e){for(var t=0;t<e.length;t++){var r=e[t],i=r.name,s=r.args,o=r.resolve,l=n&&n[i];if(typeof l=="function"){var a=l.apply(n,s);typeof o=="function"&&o(a?.promise)}}return n},Oa=function(n){var e=n;return e&&e._q!==void 0},d1="2.11.7",h1="Web",p1="$remote",g1=function(){function n(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(d1),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return n.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},n.prototype.execute=function(e){var t,r;return Ee(this,void 0,void 0,function(){var i,s,o,l;return Ce(this,function(a){return i=new Date().getTime(),s=(t=this.config.lastEventId)!==null&&t!==void 0?t:-1,o=(r=e.event_id)!==null&&r!==void 0?r:s+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=i),l=Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:h1}),this.config.trackingOptions.language&&{language:o1()}),this.config.trackingOptions.ipAddress&&{ip:p1}),{insert_id:Rn(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent}),[2,l]})})},n}(),Bp=function(){function n(e){this.storage=e}return n.prototype.isEnabled=function(){return Ee(this,void 0,void 0,function(){var e,t,r,i;return Ce(this,function(s){switch(s.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),t=new n(this.storage),r="AMP_TEST",s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,t.set(r,e)];case 2:return s.sent(),[4,t.get(r)];case 3:return i=s.sent(),[2,i===e];case 4:return s.sent(),[2,!1];case 5:return[4,t.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},n.prototype.get=function(e){return Ee(this,void 0,void 0,function(){var t;return Ce(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return t=r.sent(),t?[2,JSON.parse(t)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},n.prototype.getRaw=function(e){var t;return Ee(this,void 0,void 0,function(){return Ce(this,function(r){return[2,((t=this.storage)===null||t===void 0?void 0:t.getItem(e))||void 0]})})},n.prototype.set=function(e,t){var r;return Ee(this,void 0,void 0,function(){return Ce(this,function(i){try{(r=this.storage)===null||r===void 0||r.setItem(e,JSON.stringify(t))}catch{}return[2]})})},n.prototype.remove=function(e){var t;return Ee(this,void 0,void 0,function(){return Ce(this,function(r){try{(t=this.storage)===null||t===void 0||t.removeItem(e)}catch{}return[2]})})},n.prototype.reset=function(){var e;return Ee(this,void 0,void 0,function(){return Ce(this,function(t){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},n}(),Gi=1e3,zp=function(n){$n(e,n);function e(t){var r=this,i;return r=n.call(this,(i=Nt())===null||i===void 0?void 0:i.localStorage)||this,r.loggerProvider=t?.loggerProvider,r}return e.prototype.set=function(t,r){var i;return Ee(this,void 0,void 0,function(){var s;return Ce(this,function(o){switch(o.label){case 0:return Array.isArray(r)&&r.length>Gi?(s=r.length-Gi,[4,n.prototype.set.call(this,t,r.slice(0,Gi))]):[3,2];case 1:return o.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(s," events because the queue length exceeded ").concat(Gi,".")),[3,4];case 2:return[4,n.prototype.set.call(this,t,r)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e}(Bp),m1=function(n){$n(e,n);function e(){var t;return n.call(this,(t=Nt())===null||t===void 0?void 0:t.sessionStorage)||this}return e}(Bp),y1=function(n){$n(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={done:4},t}return e.prototype.send=function(t,r){return Ee(this,void 0,void 0,function(){var i=this;return Ce(this,function(s){return[2,new Promise(function(o,l){typeof XMLHttpRequest>"u"&&l(new Error("XHRTransport is not supported."));var a=new XMLHttpRequest;a.open("POST",t,!0),a.onreadystatechange=function(){if(a.readyState===i.state.done){var u=a.responseText;try{o(i.buildResponse(JSON.parse(u)))}catch{o(i.buildResponse({code:a.status}))}}},a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","*/*"),a.send(JSON.stringify(r))})]})})},e}(Qo),v1=function(n){$n(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.send=function(t,r){return Ee(this,void 0,void 0,function(){var i=this;return Ce(this,function(s){return[2,new Promise(function(o,l){var a=Nt();if(!a?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var u=JSON.stringify(r),c=a.navigator.sendBeacon(t,JSON.stringify(r));return o(c?i.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:u.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(d){l(d)}})]})})},e}(Qo),w1=function(n,e,t){return t===void 0&&(t=!0),Ee(void 0,void 0,void 0,function(){var r,i,s,o,l,a,u,c,d;return Ce(this,function(h){switch(h.label){case 0:return r=Fb(n),[4,e.getRaw(r)];case 1:return i=h.sent(),i?t?[4,e.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:h.sent(),h.label=3;case 3:return s=Tb(i.split("."),6),o=s[0],l=s[1],a=s[2],u=s[3],c=s[4],d=s[5],[2,{deviceId:o,userId:b1(l),sessionId:Ta(u),lastEventId:Ta(d),lastEventTime:Ta(c),optOut:!!a}]}})})},Ta=function(n){var e=parseInt(n,32);if(!isNaN(e))return e},b1=function(n){if(!(!atob||!escape||!n))try{return decodeURIComponent(escape(atob(n)))}catch{return}},Dt="[Amplitude]",Vf="".concat(Dt," Form Started"),S1="".concat(Dt," Form Submitted"),E1="".concat(Dt," File Downloaded"),Hf="session_start",qf="session_end",C1="".concat(Dt," File Extension"),I1="".concat(Dt," File Name"),x1="".concat(Dt," Link ID"),A1="".concat(Dt," Link Text"),_1="".concat(Dt," Link URL"),Pa="".concat(Dt," Form ID"),ka="".concat(Dt," Form Name"),Na="".concat(Dt," Form Destination"),vo="cookie",R1="US",$1=function(n){$n(e,n);function e(t,r,i,s,o,l,a,u,c,d,h,g,m,v,y,C,E,b,I,_,$,O,A,P,N,U,F,M,Y,oe,B,z,te,J){i===void 0&&(i=new ac),s===void 0&&(s={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),u===void 0&&(u=1e3),c===void 0&&(c=5),d===void 0&&(d=30),h===void 0&&(h=vo),C===void 0&&(C=new Op),E===void 0&&(E=yt.Warn),I===void 0&&(I=!1),_===void 0&&(_=!1),A===void 0&&(A=""),P===void 0&&(P=R1),U===void 0&&(U=30*60*1e3),F===void 0&&(F=new zp({loggerProvider:C})),M===void 0&&(M={ipAddress:!0,language:!0,platform:!0}),Y===void 0&&(Y="fetch"),oe===void 0&&(oe=!1),B===void 0&&(B=!1);var L=n.call(this,{apiKey:t,storageProvider:F,transportProvider:jp(Y)})||this;return L.apiKey=t,L.appVersion=r,L.cookieOptions=s,L.defaultTracking=o,L.autocapture=l,L.flushIntervalMillis=u,L.flushMaxRetries=c,L.flushQueueSize=d,L.identityStorage=h,L.ingestionMetadata=g,L.instanceName=m,L.loggerProvider=C,L.logLevel=E,L.minIdLength=b,L.offline=I,L.partnerId=$,L.plan=O,L.serverUrl=A,L.serverZone=P,L.sessionTimeout=U,L.storageProvider=F,L.trackingOptions=M,L.transport=Y,L.useBatch=oe,L.fetchRemoteConfig=B,L._optOut=!1,L._cookieStorage=i,L.deviceId=a,L.lastEventId=v,L.lastEventTime=y,L.optOut=_,L.sessionId=N,L.pageCounter=te,L.userId=z,L.debugLogsEnabled=J,L.loggerProvider.enable(J?yt.Debug:L.logLevel),L}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(t){this._cookieStorage!==t&&(this._cookieStorage=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(t){this._deviceId!==t&&(this._deviceId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(t){this._userId!==t&&(this._userId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(t){this._sessionId!==t&&(this._sessionId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut!==t&&(this._optOut=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(t){this._lastEventTime!==t&&(this._lastEventTime=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(t){this._lastEventId!==t&&(this._lastEventId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(t){this._pageCounter!==t&&(this._pageCounter=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(t){this._debugLogsEnabled!==t&&(this._debugLogsEnabled=t,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var t={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(Mp(this.apiKey),t)},e}(xb),O1=function(n,e,t){return e===void 0&&(e={}),Ee(void 0,void 0,void 0,function(){var r,i,s,o,l,a,u,c,d,h,g,m,v,y,C,E,b,I,_,$,O,A,P,N,U,F,M,Y,oe,B,z,te,J,L,de,Te,pe,G,V,Ge,be,ge,Ve;return Ce(this,function(Ue){switch(Ue.label){case 0:return r=e.identityStorage||vo,_={},r===vo?[3,1]:(s="",[3,5]);case 1:return(O=($=e.cookieOptions)===null||$===void 0?void 0:$.domain)!==null&&O!==void 0?(o=O,[3,4]):[3,2];case 2:return[4,P1()];case 3:o=Ue.sent(),Ue.label=4;case 4:s=o,Ue.label=5;case 5:return i=Ke.apply(void 0,[(_.domain=s,_.expiration=365,_.sameSite="Lax",_.secure=!1,_.upgrade=!0,_),e.cookieOptions]),l=T1(e.identityStorage,i),[4,w1(n,l,(P=(A=e.cookieOptions)===null||A===void 0?void 0:A.upgrade)!==null&&P!==void 0?P:!0)];case 6:return a=Ue.sent(),[4,l.get(Mp(n))];case 7:return u=Ue.sent(),c=yo(),d=(Y=(M=(F=(U=(N=e.deviceId)!==null&&N!==void 0?N:c.ampDeviceId)!==null&&U!==void 0?U:c.deviceId)!==null&&F!==void 0?F:u?.deviceId)!==null&&M!==void 0?M:a.deviceId)!==null&&Y!==void 0?Y:Rn(),h=(oe=u?.lastEventId)!==null&&oe!==void 0?oe:a.lastEventId,g=(B=u?.lastEventTime)!==null&&B!==void 0?B:a.lastEventTime,m=(te=(z=e.optOut)!==null&&z!==void 0?z:u?.optOut)!==null&&te!==void 0?te:a.optOut,v=(J=u?.sessionId)!==null&&J!==void 0?J:a.sessionId,y=(de=(L=e.userId)!==null&&L!==void 0?L:u?.userId)!==null&&de!==void 0?de:a.userId,t.previousSessionDeviceId=(Te=u?.deviceId)!==null&&Te!==void 0?Te:a.deviceId,t.previousSessionUserId=(pe=u?.userId)!==null&&pe!==void 0?pe:a.userId,C={ipAddress:(V=(G=e.trackingOptions)===null||G===void 0?void 0:G.ipAddress)!==null&&V!==void 0?V:!0,language:(be=(Ge=e.trackingOptions)===null||Ge===void 0?void 0:Ge.language)!==null&&be!==void 0?be:!0,platform:(Ve=(ge=e.trackingOptions)===null||ge===void 0?void 0:ge.platform)!==null&&Ve!==void 0?Ve:!0},E=u?.pageCounter,b=u?.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),I=new $1(n,e.appVersion,l,i,e.defaultTracking,e.autocapture,d,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,r,e.ingestionMetadata,e.instanceName,h,g,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,m,e.partnerId,e.plan,e.serverUrl,e.serverZone,v,e.sessionTimeout,e.storageProvider,C,e.transport,e.useBatch,e.fetchRemoteConfig,y,E,b),[4,I.storageProvider.isEnabled()];case 8:return Ue.sent()||(I.loggerProvider.warn("Storage provider ".concat(I.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),I.storageProvider=new ac),[2,I]}})})},T1=function(n,e){switch(n===void 0&&(n=vo),e===void 0&&(e={}),n){case"localStorage":return new zp;case"sessionStorage":return new m1;case"none":return new ac;case"cookie":default:return new Eu(Ke(Ke({},e),{expirationDays:e.expiration}))}},jp=function(n){return n==="xhr"?new y1:n==="beacon"?new v1:new Kb},P1=function(n){return Ee(void 0,void 0,void 0,function(){var e,t,r,i,s,s,o,l,a,u;return Ce(this,function(c){switch(c.label){case 0:return[4,new Eu().isEnabled()];case 1:if(!c.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,t=e.split("."),r=[],i="AMP_TLDTEST",s=t.length-2;s>=0;--s)r.push(t.slice(s).join("."));s=0,c.label=2;case 2:return s<r.length?(o=r[s],l={domain:"."+o},a=new Eu(l),[4,a.set(i,1)]):[3,7];case 3:return c.sent(),[4,a.get(i)];case 4:return u=c.sent(),u?[4,a.remove(i)]:[3,6];case 5:return c.sent(),[2,"."+o];case 6:return s++,[3,2];case 7:return[2,""]}})})},fr=function(){return fr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fr.apply(this,arguments)};function qr(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function Yr(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Cu(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Yf(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var k1=function(n){var e={};for(var t in n){var r=n[t];r&&(e[t]=r)}return e},N1="[Amplitude] Page Viewed",M1=function(n){n===void 0&&(n={});var e,t=Nt(),r=void 0,i,s,o=n.trackOn,l=n.trackHistoryChanges,a=n.eventType,u=a===void 0?N1:a,c=function(C){var E=C;try{E=decodeURI(C)}catch(b){r?.error("Malformed URI sequence: ",b)}return E},d=function(){return qr(void 0,void 0,void 0,function(){var C,E,b;return Yr(this,function(I){switch(I.label){case 0:return C=c(typeof location<"u"&&location.href||""),b={event_type:u},E=[{}],[4,L1()];case 1:return[2,(b.event_properties=fr.apply(void 0,[fr.apply(void 0,E.concat([I.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":C,"[Amplitude] Page Path":typeof location<"u"&&c(location.pathname)||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":C.split("?")[0]}]),b)]}})})},h=function(){return typeof o>"u"||typeof o=="function"&&o()},g=typeof location<"u"?location.href:null,m=function(){return qr(void 0,void 0,void 0,function(){var C,E,b,I;return Yr(this,function(_){switch(_.label){case 0:return C=location.href,E=U1(l,C,g||"")&&h(),g=C,E?(r?.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return I=(b=e).track,[4,d()];case 2:I.apply(b,[_.sent()]),_.label=3;case 3:_.label=4;case 4:return[2]}})})},v=function(){m()},y={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(C,E){return qr(void 0,void 0,void 0,function(){var b,I;return Yr(this,function(_){switch(_.label){case 0:return e=E,s=C,r=C.loggerProvider,r.log("Installing @amplitude/plugin-page-view-tracking-browser"),t&&(t.addEventListener("popstate",v),i=t.history.pushState,t.history.pushState=new Proxy(t.history.pushState,{apply:function($,O,A){var P=Cu(A,3),N=P[0],U=P[1],F=P[2];$.apply(O,[N,U,F]),m()}})),h()?(r.log("Tracking page view event"),I=(b=e).track,[4,d()]):[3,2];case 1:I.apply(b,[_.sent()]),_.label=2;case 2:return[2]}})})},execute:function(C){return qr(void 0,void 0,void 0,function(){var E;return Yr(this,function(b){switch(b.label){case 0:return o==="attribution"&&D1(C)?(r?.log("Enriching campaign event to page view event with campaign parameters"),[4,d()]):[3,2];case 1:E=b.sent(),C.event_type=E.event_type,C.event_properties=fr(fr({},C.event_properties),E.event_properties),b.label=2;case 2:return s&&C.event_type===u&&(s.pageCounter=s.pageCounter?s.pageCounter+1:1,C.event_properties=fr(fr({},C.event_properties),{"[Amplitude] Page Counter":s.pageCounter})),[2,C]}})})},teardown:function(){return qr(void 0,void 0,void 0,function(){return Yr(this,function(C){return t&&(t.removeEventListener("popstate",v),i&&(t.history.pushState=i)),[2]})})}};return y},L1=function(){return qr(void 0,void 0,void 0,function(){var n;return Yr(this,function(e){switch(e.label){case 0:return n=k1,[4,new Np().parse()];case 1:return[2,n.apply(void 0,[e.sent()])]}})})},D1=function(n){if(n.event_type==="$identify"&&n.user_properties){var e=n.user_properties,t=e[et.SET]||{},r=e[et.UNSET]||{},i=Yf(Yf([],Cu(Object.keys(t)),!1),Cu(Object.keys(r)),!1);return Object.keys(ea).every(function(s){return i.includes(s)})}return!1},U1=function(n,e,t){switch(n){case"pathOnly":{if(t=="")return!0;var r=new URL(e),i=new URL(t),s=r.origin+r.pathname,o=i.origin+i.pathname;return s!==o}default:return e!==t}},F1=function(){var n,e=[],t=function(u,c,d){u.addEventListener(c,d),e.push({element:u,type:c,handler:d})},r=function(){e.forEach(function(u){var c=u.element,d=u.type,h=u.handler;c?.removeEventListener(d,h)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",s="enrichment",o=function(u,c){return Ee(void 0,void 0,void 0,function(){var d;return Ce(this,function(h){return(d=Nt())===null||d===void 0||d.addEventListener("load",function(){if(!c){u.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var g=function(v){var y=!1;t(v,"change",function(){var C;y||c.track(Vf,(C={},C[Pa]=Br(v.id),C[ka]=Br(v.name),C[Na]=v.action,C)),y=!0}),t(v,"submit",function(){var C,E;y||c.track(Vf,(C={},C[Pa]=Br(v.id),C[ka]=Br(v.name),C[Na]=v.action,C)),c.track(S1,(E={},E[Pa]=Br(v.id),E[ka]=Br(v.name),E[Na]=v.action,E)),y=!1})},m=Array.from(document.getElementsByTagName("form"));m.forEach(g),typeof MutationObserver<"u"&&(n=new MutationObserver(function(v){v.forEach(function(y){y.addedNodes.forEach(function(C){C.nodeName==="FORM"&&g(C),"querySelectorAll"in C&&typeof C.querySelectorAll=="function"&&Array.from(C.querySelectorAll("form")).map(g)})})}),n.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},l=function(u){return Ee(void 0,void 0,void 0,function(){return Ce(this,function(c){return[2,u]})})},a=function(){return Ee(void 0,void 0,void 0,function(){return Ce(this,function(u){return n?.disconnect(),r(),[2]})})};return{name:i,type:s,setup:o,execute:l,teardown:a}},Br=function(n){if(typeof n=="string")return n},B1=function(){var n,e=[],t=function(u,c,d){u.addEventListener(c,d),e.push({element:u,type:c,handler:d})},r=function(){e.forEach(function(u){var c=u.element,d=u.type,h=u.handler;c?.removeEventListener(d,h)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",s="enrichment",o=function(u,c){return Ee(void 0,void 0,void 0,function(){var d;return Ce(this,function(h){return(d=Nt())===null||d===void 0||d.addEventListener("load",function(){if(!c){u.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var g=function(y){var C;try{C=new URL(y.href,window.location.href)}catch{return}var E=m.exec(C.href),b=E?.[1];b&&t(y,"click",function(){var I;b&&c.track(E1,(I={},I[C1]=b,I[I1]=C.pathname,I[x1]=y.id,I[A1]=y.text,I[_1]=y.href,I))})},m=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,v=Array.from(document.getElementsByTagName("a"));v.forEach(g),typeof MutationObserver<"u"&&(n=new MutationObserver(function(y){y.forEach(function(C){C.addedNodes.forEach(function(E){E.nodeName==="A"&&g(E),"querySelectorAll"in E&&typeof E.querySelectorAll=="function"&&Array.from(E.querySelectorAll("a")).map(g)})})}),n.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},l=function(u){return Ee(void 0,void 0,void 0,function(){return Ce(this,function(c){return[2,u]})})},a=function(){return Ee(void 0,void 0,void 0,function(){return Ce(this,function(u){return n?.disconnect(),r(),[2]})})};return{name:i,type:s,setup:o,execute:l,teardown:a}},Kf=!1,z1=function(n){if(!(Kf||n.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;n.loggerProvider.warn(e),Kf=!0}},j1=function(){var n="@amplitude/plugin-network-checker-browser",e="before",t=Nt(),r=[],i=function(a,u){t&&(t.addEventListener(a,u),r.push({type:a,handler:u}))},s=function(){r.forEach(function(a){var u=a.type,c=a.handler;t&&t.removeEventListener(u,c)}),r=[]},o=function(a,u){return Ee(void 0,void 0,void 0,function(){return Ce(this,function(c){return typeof navigator>"u"?(a.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),a.offline=!1,[2]):(a.offline=!navigator.onLine,i("online",function(){a.loggerProvider.debug("Network connectivity changed to online."),a.offline=!1,setTimeout(function(){u.flush()},a.flushIntervalMillis)}),i("offline",function(){a.loggerProvider.debug("Network connectivity changed to offline."),a.offline=!0}),[2])})})},l=function(){return Ee(void 0,void 0,void 0,function(){return Ce(this,function(a){return s(),[2]})})};return{name:n,type:e,setup:o,teardown:l}},wo=function(){return wo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wo.apply(this,arguments)};function Kr(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function Zr(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function W1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var G1="Network error occurred, remote config fetch failed",V1="Remote config successfully fetched",H1="Remote config fetch rejected due to exceeded retry count",Zf="Remote config fetch rejected due to timeout after 5 seconds",q1="Unexpected error occurred",Y1="https://sr-client-cfg.amplitude.com/config",K1="https://sr-client-cfg.stag2.amplitude.com/config",Z1="https://sr-client-cfg.eu.amplitude.com/config",X1=function(){function n(e){var t=e.localConfig,r=e.configKeys,i=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(s,o,l){return Kr(i,void 0,void 0,function(){var a,u,c;return Zr(this,function(d){switch(d.label){case 0:return a=Date.now(),[4,this.fetchWithTimeout(l)];case 1:return u=d.sent(),u&&(c=u.configs&&u.configs[s],c)?(this.metrics.fetchTimeAPISuccess=Date.now()-a,[2,c[o]]):(this.metrics.fetchTimeAPIFail=Date.now()-a,[2,void 0])}})})},this.fetchWithTimeout=function(s){return Kr(i,void 0,void 0,function(){var o,l,a;return Zr(this,function(u){switch(u.label){case 0:return o=new AbortController,l=setTimeout(function(){return o.abort()},5e3),[4,this.fetchRemoteConfig(o.signal,s)];case 1:return a=u.sent(),clearTimeout(l),[2,a]}})})},this.fetchRemoteConfig=function(s,o){return Kr(i,void 0,void 0,function(){var l,a,u,c,d,h,g,m,v,y,C,E;return Zr(this,function(b){switch(b.label){case 0:if(o===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:H1})];if(s.aborted)return[2,this.completeRequest({err:Zf})];o!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=o,this.attempts=0),b.label=1;case 1:b.trys.push([1,3,,4]),l=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(a=W1(this.configKeys),u=a.next();!u.done;u=a.next())c=u.value,l.append("config_keys",c)}catch(I){C={error:I}}finally{try{u&&!u.done&&(E=a.return)&&E.call(a)}finally{if(C)throw C.error}}return o&&l.set("session_id",String(o)),d={headers:{Accept:"*/*"},method:"GET"},h="".concat(this.getServerUrl(),"?").concat(l.toString()),this.attempts+=1,[4,fetch(h,wo(wo({},d),{signal:s}))];case 2:if(g=b.sent(),g===null)return[2,this.completeRequest({err:q1})];switch(m=new Qo().buildStatus(g.status),m){case We.Success:return this.attempts=0,[2,this.parseAndStoreConfig(g)];case We.Failed:return[2,this.retryFetch(s,o)];default:return[2,this.completeRequest({err:G1})]}case 3:return v=b.sent(),y=v,s.aborted?[2,this.completeRequest({err:Zf})]:[2,this.completeRequest({err:y.message})];case 4:return[2]}})})},this.retryFetch=function(s,o){return Kr(i,void 0,void 0,function(){var l=this;return Zr(this,function(a){switch(a.label){case 0:return[4,new Promise(function(u){return setTimeout(u,l.attempts*l.retryTimeout)})];case 1:return a.sent(),[2,this.fetchRemoteConfig(s,o)]}})})},this.parseAndStoreConfig=function(s){return Kr(i,void 0,void 0,function(){var o;return Zr(this,function(l){switch(l.label){case 0:return[4,s.json()];case 1:return o=l.sent(),this.completeRequest({success:V1}),[2,o]}})})},this.localConfig=t,this.configKeys=r}return n.prototype.getServerUrl=function(){return this.localConfig.serverZone===go.STAGING?K1:this.localConfig.serverZone===go.EU?Z1:Y1},n.prototype.completeRequest=function(e){var t=e.err,r=e.success;if(t)throw new Error(t);r&&this.localConfig.loggerProvider.log(r)},n}(),J1=function(n){var e=n.localConfig,t=n.configKeys;return Kr(void 0,void 0,void 0,function(){return Zr(this,function(r){return[2,new X1({localConfig:e,configKeys:t})]})})},Q1=J1,e0=function(){function n(e){this.config=e,this.config.loggerProvider.debug("Local configuration before merging with remote config",JSON.stringify(this.config,null,2))}return n.prototype.initialize=function(){return Ee(this,void 0,void 0,function(){var e;return Ce(this,function(t){switch(t.label){case 0:return e=this,[4,Q1({localConfig:this.config,configKeys:["analyticsSDK"]})];case 1:return e.remoteConfigFetch=t.sent(),[2]}})})},n.prototype.generateJoinedConfig=function(){var e,t,r,i;return Ee(this,void 0,void 0,function(){var s,o,l;return Ce(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),o=this.remoteConfigFetch,o?[4,this.remoteConfigFetch.getRemoteConfig("analyticsSDK","browserSDK",this.config.sessionId)]:[3,2];case 1:o=a.sent(),a.label=2;case 2:return s=o,this.config.loggerProvider.debug("Remote configuration:",JSON.stringify(s,null,2)),s&&"autocapture"in s&&(typeof s.autocapture=="boolean"&&(this.config.autocapture=s.autocapture),typeof s.autocapture=="object"&&(this.config.autocapture===void 0&&(this.config.autocapture=s.autocapture),typeof this.config.autocapture=="boolean"&&(this.config.autocapture=Ke({attribution:this.config.autocapture,fileDownloads:this.config.autocapture,formInteractions:this.config.autocapture,pageViews:this.config.autocapture,sessions:this.config.autocapture,elementInteractions:this.config.autocapture},s.autocapture)),typeof this.config.autocapture=="object"&&(this.config.autocapture=Ke(Ke({},this.config.autocapture),s.autocapture))),this.config.defaultTracking=this.config.autocapture),this.config.loggerProvider.debug("Joined configuration: ",JSON.stringify(this.config,null,2)),(e=(i=this.config).requestMetadata)!==null&&e!==void 0||(i.requestMetadata=new Pp),!((t=this.remoteConfigFetch)===null||t===void 0)&&t.metrics.fetchTimeAPISuccess&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_success",this.remoteConfigFetch.metrics.fetchTimeAPISuccess),!((r=this.remoteConfigFetch)===null||r===void 0)&&r.metrics.fetchTimeAPIFail&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_fail",this.remoteConfigFetch.metrics.fetchTimeAPIFail),[3,4];case 3:return l=a.sent(),this.config.loggerProvider.error("Failed to fetch remote configuration because of error: ",l),[3,4];case 4:return[2,this.config]}})})},n}(),t0=function(n){return Ee(void 0,void 0,void 0,function(){var e;return Ce(this,function(t){switch(t.label){case 0:return e=new e0(n),[4,e.initialize()];case 1:return t.sent(),[2,e]}})})},cn=function(){return cn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cn.apply(this,arguments)};function Ma(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function Yn(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function yr(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mt(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function $r(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var r0="@amplitude/plugin-autocapture-browser",Iu="[Amplitude] Element Clicked",n0="[Amplitude] Element Changed",i0="[Amplitude] Element ID",s0="[Amplitude] Element Class",Wp="[Amplitude] Element Tag",Gp="[Amplitude] Element Text",o0="[Amplitude] Element Hierarchy",a0="[Amplitude] Element Href",u0="[Amplitude] Element Position Left",l0="[Amplitude] Element Position Top",c0="[Amplitude] Element Aria Label",f0="[Amplitude] Element Attributes",Vp="[Amplitude] Element Selector",d0="[Amplitude] Element Parent Label",Hp="[Amplitude] Page URL",h0="[Amplitude] Page Title",p0="[Amplitude] Viewport Height",g0="[Amplitude] Viewport Width",Ys="https://app.amplitude.com",m0="https://app.eu.amplitude.com",y0="https://apps.stag2.amplitude.com",v0={US:Ys,EU:m0,STAGING:y0},w0="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",xu="amp-visual-tagging-selector-highlight",Au=function(n,e){return Au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Au(n,e)};function On(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Au(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function b0(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function qp(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function si(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fn(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function oi(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function on(n){return this instanceof on?(this.v=n,this):new on(n)}function S0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(g){return new Promise(function(m,v){s.push([h,g,m,v])>1||l(h,g)})})}function l(h,g){try{a(r[h](g))}catch(m){d(s[0][3],m)}}function a(h){h.value instanceof on?Promise.resolve(h.value.v).then(u,c):d(s[0][2],h)}function u(h){l("next",h)}function c(h){l("throw",h)}function d(h,g){h(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function E0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof si=="function"?si(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(l,a){o=n[s](o),i(l,a,o.done,o.value)})}}function i(s,o,l,a){Promise.resolve(a).then(function(u){s({value:u,done:l})},o)}}function Ie(n){return typeof n=="function"}function Yp(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var La=Yp(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function _u(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ta=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=si(o),a=l.next();!a.done;a=l.next()){var u=a.value;u.remove(this)}}catch(v){e={error:v}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(Ie(c))try{c()}catch(v){s=v instanceof La?v.errors:[v]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=si(d),g=h.next();!g.done;g=h.next()){var m=g.value;try{Xf(m)}catch(v){s=s??[],v instanceof La?s=oi(oi([],fn(s)),fn(v.errors)):s.push(v)}}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(s)throw new La(s)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Xf(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&_u(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&_u(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}();ta.EMPTY;function Kp(n){return n instanceof ta||n&&"closed"in n&&Ie(n.remove)&&Ie(n.add)&&Ie(n.unsubscribe)}function Xf(n){Ie(n)?n():n.unsubscribe()}var C0={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Zp={setTimeout:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setTimeout.apply(void 0,oi([n,e],fn(t)))},clearTimeout:function(n){var e=Zp.delegate;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xp(n){Zp.setTimeout(function(){throw n})}function Ru(){}function I0(n){n()}var lc=function(n){On(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Kp(t)&&t.add(r)):r.destination=_0,r}return e.create=function(t,r,i){return new $u(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ta),x0=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){Vi(r)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){Vi(r)}else Vi(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Vi(t)}},n}(),$u=function(n){On(e,n);function e(t,r,i){var s=n.call(this)||this,o;return Ie(t)||!t?o={next:t??void 0,error:r??void 0,complete:i??void 0}:o=t,s.destination=new x0(o),s}return e}(lc);function Vi(n){Xp(n)}function A0(n){throw n}var _0={closed:!0,next:Ru,error:A0,complete:Ru},cc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Jp(n){return n}function R0(n){return n.length===0?Jp:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var wt=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,s=O0(e)?e:new $u(e,t,r);return I0(function(){var o=i,l=o.operator,a=o.source;s.add(l?l.call(s,a):a?i._subscribe(s):i._trySubscribe(s))}),s},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=Jf(t),new t(function(i,s){var o=new $u({next:function(l){try{e(l)}catch(a){s(a),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[cc]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R0(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Jf(e),new e(function(r,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},n.create=function(e){return new n(e)},n}();function Jf(n){var e;return(e=n??C0.Promise)!==null&&e!==void 0?e:Promise}function $0(n){return n&&Ie(n.next)&&Ie(n.error)&&Ie(n.complete)}function O0(n){return n&&n instanceof lc||$0(n)&&Kp(n)}function T0(n){return Ie(n?.lift)}function Ut(n){return function(e){if(T0(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function vt(n,e,t,r,i){return new P0(n,e,t,r,i)}var P0=function(n){On(e,n);function e(t,r,i,s,o,l){var a=n.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=l,a._next=r?function(u){try{r(u)}catch(c){t.error(c)}}:n.prototype._next,a._error=s?function(u){try{s(u)}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._error,a._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:n.prototype._complete,a}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(lc),k0={now:function(){return Date.now()},delegate:void 0},N0=function(n){On(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(ta),Qf={setInterval:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setInterval.apply(void 0,oi([n,e],fn(t)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},M0=function(n){On(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=t;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),Qf.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Qf.clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,s;try{this.work(t)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,i=t.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,_u(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(N0),ed=function(){function n(e,t){t===void 0&&(t=n.now),this.schedulerActionCtor=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},n.now=k0.now,n}(),L0=function(n){On(e,n);function e(t,r){r===void 0&&(r=ed.now);var i=n.call(this,t,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(ed),ra=new L0(M0),D0=ra,fc=new wt(function(n){return n.complete()});function Qp(n){return n&&Ie(n.schedule)}function eg(n){return n[n.length-1]}function U0(n){return Qp(eg(n))?n.pop():void 0}function F0(n,e){return typeof eg(n)=="number"?n.pop():e}var dc=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function tg(n){return Ie(n?.then)}function rg(n){return Ie(n[cc])}function ng(n){return Symbol.asyncIterator&&Ie(n?.[Symbol.asyncIterator])}function ig(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function B0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sg=B0();function og(n){return Ie(n?.[sg])}function ag(n){return S0(this,arguments,function(){var t,r,i,s;return qp(this,function(o){switch(o.label){case 0:t=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,on(t.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,on(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,on(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function ug(n){return Ie(n?.getReader)}function Ft(n){if(n instanceof wt)return n;if(n!=null){if(rg(n))return z0(n);if(dc(n))return j0(n);if(tg(n))return W0(n);if(ng(n))return lg(n);if(og(n))return G0(n);if(ug(n))return V0(n)}throw ig(n)}function z0(n){return new wt(function(e){var t=n[cc]();if(Ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function j0(n){return new wt(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function W0(n){return new wt(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Xp)})}function G0(n){return new wt(function(e){var t,r;try{for(var i=si(n),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function lg(n){return new wt(function(e){H0(n,e).catch(function(t){return e.error(t)})})}function V0(n){return lg(ag(n))}function H0(n,e){var t,r,i,s;return b0(this,void 0,void 0,function(){var o,l;return qp(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),t=E0(n),a.label=1;case 1:return[4,t.next()];case 2:if(r=a.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=a.sent(),i={error:l},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function gr(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function cg(n,e){return e===void 0&&(e=0),Ut(function(t,r){t.subscribe(vt(r,function(i){return gr(r,n,function(){return r.next(i)},e)},function(){return gr(r,n,function(){return r.complete()},e)},function(i){return gr(r,n,function(){return r.error(i)},e)}))})}function fg(n,e){return e===void 0&&(e=0),Ut(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function q0(n,e){return Ft(n).pipe(fg(e),cg(e))}function Y0(n,e){return Ft(n).pipe(fg(e),cg(e))}function K0(n,e){return new wt(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Z0(n,e){return new wt(function(t){var r;return gr(t,e,function(){r=n[sg](),gr(t,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(l){t.error(l);return}o?t.complete():t.next(s)},0,!0)}),function(){return Ie(r?.return)&&r.return()}})}function dg(n,e){if(!n)throw new Error("Iterable cannot be null");return new wt(function(t){gr(t,e,function(){var r=n[Symbol.asyncIterator]();gr(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function X0(n,e){return dg(ag(n),e)}function J0(n,e){if(n!=null){if(rg(n))return q0(n,e);if(dc(n))return K0(n,e);if(tg(n))return Y0(n,e);if(ng(n))return dg(n,e);if(og(n))return Z0(n,e);if(ug(n))return X0(n,e)}throw ig(n)}function Q0(n,e){return e?J0(n,e):Ft(n)}function hg(n){return n instanceof Date&&!isNaN(n)}var eS=Yp(function(n){return function(t){t===void 0&&(t=null),n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function tS(n,e){var t=hg(n)?{first:n}:typeof n=="number"?{each:n}:n,r=t.first,i=t.each,s=t.with,o=s===void 0?rS:s,l=t.scheduler,a=l===void 0?ra:l,u=t.meta,c=u===void 0?null:u;if(r==null&&i==null)throw new TypeError("No timeout provided.");return Ut(function(d,h){var g,m,v=null,y=0,C=function(E){m=gr(h,a,function(){try{g.unsubscribe(),Ft(o({meta:c,lastValue:v,seen:y})).subscribe(h)}catch(b){h.error(b)}},E)};g=d.subscribe(vt(h,function(E){m?.unsubscribe(),y++,h.next(v=E),i>0&&C(i)},void 0,void 0,function(){m?.closed||m?.unsubscribe(),v=null})),!y&&C(r!=null?typeof r=="number"?r:+r-a.now():i)})}function rS(n){throw new eS(n)}function Zt(n,e){return Ut(function(t,r){var i=0;t.subscribe(vt(r,function(s){r.next(n.call(e,s,i++))}))})}var nS=Array.isArray;function iS(n,e){return nS(e)?n.apply(void 0,oi([],fn(e))):n(e)}function sS(n){return Zt(function(e){return iS(n,e)})}function oS(n,e,t,r,i,s,o,l){var a=[],u=0,c=0,d=!1,h=function(){d&&!a.length&&!u&&e.complete()},g=function(v){return u<r?m(v):a.push(v)},m=function(v){u++;var y=!1;Ft(t(v,c++)).subscribe(vt(e,function(C){e.next(C)},function(){y=!0},void 0,function(){if(y)try{u--;for(var C=function(){var E=a.shift();o||m(E)};a.length&&u<r;)C();h()}catch(E){e.error(E)}}))};return n.subscribe(vt(e,g,function(){d=!0,h()})),function(){}}function na(n,e,t){return t===void 0&&(t=1/0),Ie(e)?na(function(r,i){return Zt(function(s,o){return e(r,s,i,o)})(Ft(n(r,i)))},t):(typeof e=="number"&&(t=e),Ut(function(r,i){return oS(r,i,n,t)}))}function aS(n){return n===void 0&&(n=1/0),na(Jp,n)}var uS=["addListener","removeListener"],lS=["addEventListener","removeEventListener"],cS=["on","off"];function Kn(n,e,t,r){if(Ie(t)&&(r=t,t=void 0),r)return Kn(n,e,t).pipe(sS(r));var i=fn(hS(n)?lS.map(function(l){return function(a){return n[l](e,a,t)}}):fS(n)?uS.map(td(n,e)):dS(n)?cS.map(td(n,e)):[],2),s=i[0],o=i[1];if(!s&&dc(n))return na(function(l){return Kn(l,e,t)})(Ft(n));if(!s)throw new TypeError("Invalid event target");return new wt(function(l){var a=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return l.next(1<u.length?u:u[0])};return s(a),function(){return o(a)}})}function td(n,e){return function(t){return function(r){return n[t](e,r)}}}function fS(n){return Ie(n.addListener)&&Ie(n.removeListener)}function dS(n){return Ie(n.on)&&Ie(n.off)}function hS(n){return Ie(n.addEventListener)&&Ie(n.removeEventListener)}function pS(n,e,t){t===void 0&&(t=D0);var r=-1;return e!=null&&(Qp(e)?t=e:r=e),new wt(function(i){var s=hg(n)?0-t.now():n;s<0&&(s=0);var o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function pg(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=U0(n),r=F0(n,1/0),i=n;return i.length?i.length===1?Ft(i[0]):aS(r)(Q0(i,t)):fc}function mr(n,e){return Ut(function(t,r){var i=0;t.subscribe(vt(r,function(s){return n.call(e,s,i++)&&r.next(s)}))})}function gS(n){return Ut(function(e,t){var r=[];return e.subscribe(vt(t,function(i){return r.push(i)},function(){t.next(r),t.complete()})),Ft(n).subscribe(vt(t,function(){var i=r;r=[],t.next(i)},Ru)),function(){r=null}})}function mS(n,e){return e===void 0&&(e=ra),Ut(function(t,r){var i=null,s=null,o=null,l=function(){if(i){i.unsubscribe(),i=null;var u=s;s=null,r.next(u)}};function a(){var u=o+n,c=e.now();if(c<u){i=this.schedule(void 0,u-c),r.add(i);return}l()}t.subscribe(vt(r,function(u){s=u,o=e.now(),i||(i=e.schedule(a,n),r.add(i))},function(){l(),r.complete()},void 0,function(){s=i=null}))})}function gg(n){return n<=0?function(){return fc}:Ut(function(e,t){var r=0;e.subscribe(vt(t,function(i){++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yS(n){return Zt(function(){return n})}function vS(n,e){return na(function(t,r){return Ft(n(t,r)).pipe(gg(1),yS(t))})}function wS(n,e){e===void 0&&(e=ra);var t=pS(n,e);return vS(function(){return t})}function bS(){return Ut(function(n,e){var t,r=!1;n.subscribe(vt(e,function(i){var s=t;t=i,r&&e.next([s,i]),r=!0}))})}function SS(n,e){return Ut(function(t,r){var i=null,s=0,o=!1,l=function(){return o&&!i&&r.complete()};t.subscribe(vt(r,function(a){i?.unsubscribe();var u=0,c=s++;Ft(n(a,c)).subscribe(i=vt(r,function(d){return r.next(e?e(a,d,c,u++):d)},function(){i=null,l()}))},function(){o=!0,l()}))})}var Xt,hc;function ES(n,e){if(n.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(n.tagName.toLowerCase()==="html")return"html";var t={root:document.body,idName:function(s){return!0},className:function(s){return!0},tagName:function(s){return!0},attr:function(s,o){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};Xt=cn(cn({},t),e),hc=CS(Xt.root,t);var r=Hi(n,"all",function(){return Hi(n,"two",function(){return Hi(n,"one",function(){return Hi(n,"none")})})});if(r){var i=vg(wg(r,n));return i.length>0&&(r=i[0]),ia(r)}else throw new Error("Selector was not found.")}function CS(n,e){return n.nodeType===Node.DOCUMENT_NODE?n:n===e.root?n.ownerDocument:n}function Hi(n,e,t){for(var r=null,i=[],s=n,o=0,l=function(){var u,c,d=Yi(IS(s))||Yi.apply(void 0,$r([],Mt(xS(s)),!1))||Yi.apply(void 0,$r([],Mt(AS(s)),!1))||Yi(_S(s))||[id()],h=RS(s);if(e=="all")h&&(d=d.concat(d.filter(Da).map(function(C){return qi(C,h)})));else if(e=="two")d=d.slice(0,1),h&&(d=d.concat(d.filter(Da).map(function(C){return qi(C,h)})));else if(e=="one"){var g=Mt(d=d.slice(0,1),1),m=g[0];h&&Da(m)&&(d=[qi(m,h)])}else e=="none"&&(d=[id()],h&&(d=[qi(d[0],h)]));try{for(var v=(u=void 0,yr(d)),y=v.next();!y.done;y=v.next()){var m=y.value;m.level=o}}catch(C){u={error:C}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(u)throw u.error}}if(i.push(d),i.length>=Xt.seedMinLength&&(r=rd(i,t),r))return"break";s=s.parentElement,o++};s;){var a=l();if(a==="break")break}return r||(r=rd(i,t)),!r&&t?t():r}function rd(n,e){var t,r,i=n.reduce(function(u,c){return u*c.length},1);if(i>Xt.threshold)return e?e():null;var s=vg(yg(n));try{for(var o=yr(s),l=o.next();!l.done;l=o.next()){var a=l.value;if(mg(a))return a}}catch(u){t={error:u}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return null}function ia(n){for(var e=n[0],t=e.name,r=1;r<n.length;r++){var i=n[r].level||0;e.level===i-1?t="".concat(n[r].name," > ").concat(t):t="".concat(n[r].name," ").concat(t),e=n[r]}return t}function nd(n){return n.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function mg(n){var e=ia(n);switch(hc.querySelectorAll(e).length){case 0:throw new Error("Can't select any node with this selector: ".concat(e));case 1:return!0;default:return!1}}function IS(n){var e=n.getAttribute("id");return e&&Xt.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null}function xS(n){var e=Array.from(n.attributes).filter(function(t){return Xt.attr(t.name,t.value)});return e.map(function(t){return{name:"[".concat(CSS.escape(t.name),'="').concat(CSS.escape(t.value),'"]'),penalty:.5}})}function AS(n){var e=Array.from(n.classList).filter(Xt.className);return e.map(function(t){return{name:"."+CSS.escape(t),penalty:1}})}function _S(n){var e=n.tagName.toLowerCase();return Xt.tagName(e)?{name:e,penalty:2}:null}function id(){return{name:"*",penalty:3}}function RS(n){var e=n.parentNode;if(!e)return null;var t=e.firstChild;if(!t)return null;for(var r=0;t&&(t.nodeType===Node.ELEMENT_NODE&&r++,t!==n);)t=t.nextSibling;return r}function qi(n,e){return{name:n.name+":nth-child(".concat(e,")"),penalty:n.penalty+1}}function Da(n){return n.name!=="html"&&!n.name.startsWith("#")}function Yi(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter($S);return t.length>0?t:null}function $S(n){return n!=null}function yg(n,e){var t,r,i,s,o,l;return e===void 0&&(e=[]),Yn(this,function(a){switch(a.label){case 0:if(!(n.length>0))return[3,9];a.label=1;case 1:a.trys.push([1,6,7,8]),t=yr(n[0]),r=t.next(),a.label=2;case 2:return r.done?[3,5]:(i=r.value,[5,yr(yg(n.slice(1,n.length),e.concat(i)))]);case 3:a.sent(),a.label=4;case 4:return r=t.next(),[3,2];case 5:return[3,8];case 6:return s=a.sent(),o={error:s},[3,8];case 7:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 8:return[3,11];case 9:return[4,e];case 10:a.sent(),a.label=11;case 11:return[2]}})}function vg(n){return $r([],Mt(n),!1).sort(function(e,t){return nd(e)-nd(t)})}function wg(n,e,t){var r,i,s;return t===void 0&&(t={counter:0,visited:new Map}),Yn(this,function(o){switch(o.label){case 0:if(!(n.length>2&&n.length>Xt.optimizedMinLength))return[3,5];r=1,o.label=1;case 1:return r<n.length-1?t.counter>Xt.maxNumberOfTries?[2]:(t.counter+=1,i=$r([],Mt(n),!1),i.splice(r,1),s=ia(i),t.visited.has(s)?[2]:mg(i)&&OS(i,e)?[4,i]:[3,4]):[3,5];case 2:return o.sent(),t.visited.set(s,!0),[5,yr(wg(i,e,t))];case 3:o.sent(),o.label=4;case 4:return r++,[3,1];case 5:return[2]}})}function OS(n,e){return hc.querySelector(ia(n))===e}var TS=["input","select","textarea"],Ua=function(n,e){return function(t,r){var i,s,o,l=n.pageUrlAllowlist,a=n.shouldTrackEventResolver,u=(s=(i=r?.tagName)===null||i===void 0?void 0:i.toLowerCase)===null||s===void 0?void 0:s.call(i);if(!u)return!1;if(a)return a(t,r);if(!kS(window.location.href,l))return!1;var c=String(r?.getAttribute("type"))||"";if(typeof c=="string")switch(c.toLowerCase()){case"hidden":return!1;case"password":return!1}if(e){var d=e.some(function(g){var m;return!!(!((m=r?.matches)===null||m===void 0)&&m.call(r,g))});if(!d)return!1}switch(u){case"input":case"select":case"textarea":return t==="change"||t==="click";default:{var h=(o=window?.getComputedStyle)===null||o===void 0?void 0:o.call(window,r);return h&&h.getPropertyValue("cursor")==="pointer"&&t==="click"?!0:t==="click"}}}},bg=function(n){if(n==null)return!1;if(typeof n=="string"){var e=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;if(e.test((n||"").replace(/[- ]/g,"")))return!1;var t=/(^\d{3}-?\d{2}-?\d{4}$)/;if(t.test(n))return!1}return!0},PS=function(n){return!!n&&n.nodeType===3},Sg=function(n){var e,t,r,i=(t=(e=n?.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||t===void 0?void 0:t.call(e),s=n instanceof HTMLElement?((r=n.getAttribute("contenteditable"))===null||r===void 0?void 0:r.toLowerCase())==="true":!1;return!TS.includes(i)&&!s},pc=function(n){var e="";return Sg(n)&&n.childNodes&&n.childNodes.length&&n.childNodes.forEach(function(t){var r="";PS(t)?t.textContent&&(r=t.textContent):r=pc(t),e+=r.split(/(\s+)/).filter(bg).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}),e},Eg=function(n,e){var t,r,i="";try{return i=ES(n,{className:function(c){return c!==xu},maxNumberOfTries:1e3}),i}catch(c){if(e){var s=c;e.warn("Failed to get selector with finder, use fallback strategy instead: ".concat(s.toString()))}}var o=(r=(t=n?.tagName)===null||t===void 0?void 0:t.toLowerCase)===null||r===void 0?void 0:r.call(t);o&&(i=o);var l=n.getAttribute("id"),a=n.getAttribute("class");if(l)i="#".concat(l);else if(a){var u=a.split(" ").filter(function(c){return c!==xu}).join(".");u&&(i="".concat(i,".").concat(u))}return i},kS=function(n,e){return!e||!e.length?!0:e.some(function(t){return typeof t=="string"?n===t:n.match(t)})},NS=function(n,e){return n.getAttributeNames().reduce(function(t,r){if(r.startsWith(e)){var i=r.replace(e,""),s=n.getAttribute(r);i&&(t[i]=s||"")}return t},{})},MS=function(n){return n==null||typeof n=="object"&&Object.keys(n).length===0||typeof n=="string"&&n.trim().length===0},Cg=function(n){return Object.keys(n).reduce(function(e,t){var r=n[t];return MS(r)||(e[t]=r),e},{})},Ig=function(n){var e=n.parentElement;if(!e)return"";var t;try{t=e.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{t=null}if(t){var r=t.textContent||"";return bg(r)?r:""}return Ig(e)},gc=function(n,e){return n?e.some(function(t){var r;return(r=n?.matches)===null||r===void 0?void 0:r.call(n,t)})?n:gc(n?.parentElement,e):null},LS=function(n,e){var t,r,i;if(!n)return{};var s=(i=(r=n?.tagName)===null||r===void 0?void 0:r.toLowerCase)===null||i===void 0?void 0:i.call(r),o=Eg(n,e),l=(t={},t[Wp]=s,t[Gp]=pc(n),t[Vp]=o,t[Hp]=window.location.href.split("?")[0],t);return Cg(l)},DS=function(n){return new Promise(function(e,t){var r;try{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=n,i.addEventListener("load",function(){e({status:!0})},{once:!0}),i.addEventListener("error",function(){t({status:!1,message:"Failed to load the script ".concat(n)})}),(r=document.head)===null||r===void 0||r.appendChild(i)}catch(s){t(s)}})};function US(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var mc=function(n){return!(n.event.target===null||!n.closestTrackedAncestor)},FS=function(){function n(e){var t=e===void 0?{}:e,r=t.origin,i=r===void 0?Ys:r,s=this;this.endpoint=Ys,this.requestCallbacks={},this.onSelect=function(o){s.notify({action:"element-selected",data:o})},this.onTrack=function(o,l){o==="selector-mode-changed"?s.notify({action:"track-selector-mode-changed",data:l}):o==="selector-moved"&&s.notify({action:"track-selector-moved",data:l})},this.endpoint=i}return n.prototype.notify=function(e){var t,r,i,s;(r=(t=this.logger)===null||t===void 0?void 0:t.debug)===null||r===void 0||r.call(t,"Message sent: ",JSON.stringify(e)),(s=(i=window.opener)===null||i===void 0?void 0:i.postMessage)===null||s===void 0||s.call(i,e,this.endpoint)},n.prototype.sendRequest=function(e,t,r){var i=this;r===void 0&&(r={timeout:15e3});var s=US(),o={id:s,action:e,args:t},l=new Promise(function(a,u){i.requestCallbacks[s]={resolve:a,reject:u},i.notify(o),r?.timeout>0&&setTimeout(function(){u(new Error("".concat(e," timed out (id: ").concat(s,")"))),delete i.requestCallbacks[s]},r.timeout)});return l},n.prototype.handleResponse=function(e){var t;if(!this.requestCallbacks[e.id]){(t=this.logger)===null||t===void 0||t.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},n.prototype.setup=function(e){var t=this,r=e===void 0?{}:e,i=r.logger,s=r.endpoint,o=r.isElementSelectable,l=r.cssSelectorAllowlist,a=r.actionClickAllowlist;this.logger=i,s&&this.endpoint===Ys&&(this.endpoint=s);var u=null;window.addEventListener("message",function(c){var d,h,g,m,v;if((h=(d=t.logger)===null||d===void 0?void 0:d.debug)===null||h===void 0||h.call(d,"Message received: ",JSON.stringify(c)),t.endpoint===c.origin){var y=c?.data,C=y?.action;if(C)if("id"in y)(m=(g=t.logger)===null||g===void 0?void 0:g.debug)===null||m===void 0||m.call(g,"Received Response to previous request: ",JSON.stringify(c)),t.handleResponse(y);else if(C==="ping")t.notify({action:"pong"});else if(C==="initialize-visual-tagging-selector"){var E=y?.data;DS(w0).then(function(){var b;u=(b=window?.amplitudeVisualTaggingSelector)===null||b===void 0?void 0:b.call(window,{getEventTagProps:LS,isElementSelectable:function(I){return o?o(E?.actionType||"click",I):!0},onTrack:t.onTrack,onSelect:t.onSelect,visualHighlightClass:xu,messenger:t,cssSelectorAllowlist:l,actionClickAllowlist:a}),t.notify({action:"selector-loaded"})}).catch(function(){var b;(b=t.logger)===null||b===void 0||b.warn("Failed to initialize visual tagging selector")})}else C==="close-visual-tagging-selector"&&((v=u?.close)===null||v===void 0||v.call(u))}}),this.notify({action:"page-loaded"})},n}(),BS=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],zS=["type"],jS=["svg","path","g"],WS=["password","hidden"],GS=128,VS=1024;function HS(n){var e,t,r,i,s,o;if(n===null)return null;var l=String(n.tagName).toLowerCase(),a={tag:l},u=Array.from((i=(r=n.parentElement)===null||r===void 0?void 0:r.children)!==null&&i!==void 0?i:[]);u.length&&(a.index=u.indexOf(n),a.indexOfType=u.filter(function(I){return I.tagName===n.tagName}).indexOf(n));var c=(o=(s=n.previousElementSibling)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase();c&&(a.prevSib=String(c));var d=n.getAttribute("id");d&&(a.id=String(d));var h=Array.from(n.classList);h.length&&(a.classes=h);var g={},m=Array.from(n.attributes),v=m.filter(function(I){return!BS.includes(I.name)}),y=!Sg(n);if(!WS.includes(String(n.getAttribute("type")))&&!jS.includes(l))try{for(var C=yr(v),E=C.next();!E.done;E=C.next()){var b=E.value;y&&!zS.includes(b.name)||(g[b.name]=String(b.value).substring(0,GS))}}catch(I){e={error:I}}finally{try{E&&!E.done&&(t=C.return)&&t.call(C)}finally{if(e)throw e.error}}return Object.keys(g).length&&(a.attrs=g),a}function qS(n){var e=[];if(!n)return e;e.push(n);for(var t=n.parentElement;t&&t.tagName!=="HTML";)e.push(t),t=t.parentElement;return e}var YS=function(n){var e=[];if(!n)return[];var t=qS(n);return e=KS(t.map(function(r){return HS(r)}),VS),e};function KS(n,e){for(var t=0,r=0;r<n.length;r++){var i=n[r];if(i===null)t+=4;else{var s=Ks(i);t+=s?Array.from(s).length:4}if(t>e)return n.slice(0,r)}return n}function Ks(n,e){e===void 0&&(e=!1);try{if(n==null)return e?"None":null;if(typeof n=="string")return e?(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r"),n.includes('"')?"'".concat(n,"'"):n.includes("'")?'"'.concat(n.replace(/'/g,"\\'"),'"'):"'".concat(n,"'")):n;if(typeof n=="boolean")return n?"True":"False";if(Array.isArray(n)){var t=n.map(function(s){return Ks(s,!0)});return"[".concat(t.join(", "),"]")}else if(typeof n=="object"){var r=Object.entries(n).filter(function(s){var o=Mt(s,1),l=o[0];return l!=null}).map(function(s){var o=Mt(s,2),l=o[0],a=o[1];return"".concat(String(Ks(l,!0)),": ").concat(String(Ks(a,!0)))}),i="{".concat(r.join(", "),"}");return i.includes("\\'")&&(i=i.replace(/'/g,"'").replace(/'/g,"\\'")),i}return n.toString()}catch{return null}}var ZS=5;function XS(n){var e=n.amplitude,t=n.allObservables,r=n.options,i=n.shouldTrackEvent,s=t.clickObservable,o=s.pipe(bS(),mr(function(c){var d=Mt(c,2),h=d[0],g=d[1],m=h.event.target!==g.event.target,v=Math.abs(g.event.screenX-h.event.screenX)<=20&&Math.abs(g.event.screenY-h.event.screenY)<=20;return m&&!v})),l=s.pipe(mS(r.debounceTime),Zt(function(){return"timeout"})),a=pg(o,l),u=s.pipe(wS(0),mr(mc),mr(function(c){return i("click",c.closestTrackedAncestor)}),gS(a));return u.subscribe(function(c){var d,h,g=(c.length>=ZS,Iu);try{for(var m=yr(c),v=m.next();!v.done;v=m.next()){var y=v.value;e?.track(g,y.targetElementProperties,{time:y.timestamp})}}catch(C){d={error:C}}finally{try{v&&!v.done&&(h=m.return)&&h.call(m)}finally{if(d)throw d.error}}})}function JS(n){var e=n.amplitude,t=n.allObservables,r=n.getEventProperties,i=n.shouldTrackEvent,s=t.changeObservable,o=s.pipe(mr(mc),mr(function(l){return i("change",l.closestTrackedAncestor)}));return o.subscribe(function(l){e?.track(n0,r("change",l.closestTrackedAncestor))})}function QS(n){var e=n.amplitude,t=n.allObservables,r=n.options,i=n.getEventProperties,s=n.shouldTrackEvent,o=n.shouldTrackActionClick,l=t.clickObservable,a=t.mutationObservable,u=t.navigateObservable,c=l.pipe(mr(function(m){return!s("click",m.closestTrackedAncestor)}),Zt(function(m){var v=gc(m.event.target,r.actionClickAllowlist);return m.closestTrackedAncestor=v,m.closestTrackedAncestor!==null&&(m.targetElementProperties=i(m.type,m.closestTrackedAncestor)),m}),mr(mc),mr(function(m){return o("click",m.closestTrackedAncestor)})),d=[a];u&&d.push(u);var h=pg.apply(void 0,$r([],Mt(d),!1)),g=c.pipe(SS(function(m){return h.pipe(gg(1),tS({first:500,with:function(){return fc}}),Zt(function(){return m}))}));return g.subscribe(function(m){e?.track(Iu,i("click",m.closestTrackedAncestor),{time:m.timestamp})})}var en;(function(n){n.ClickObservable="clickObservable",n.ChangeObservable="changeObservable",n.NavigateObservable="navigateObservable",n.MutationObservable="mutationObservable"})(en||(en={}));function eE(n){return n.type==="click"||n.type==="change"}var tE=function(n){var e,t,r;n===void 0&&(n={});var i=n.dataAttributePrefix,s=i===void 0?cb:i,o=n.visualTaggingOptions,l=o===void 0?{enabled:!0,messenger:new FS}:o;n.cssSelectorAllowlist=(e=n.cssSelectorAllowlist)!==null&&e!==void 0?e:lb,n.actionClickAllowlist=(t=n.actionClickAllowlist)!==null&&t!==void 0?t:fb,n.debounceTime=(r=n.debounceTime)!==null&&r!==void 0?r:0;var a=r0,u="enrichment",c=[],d=void 0,h=function(){var E,b=Kn(document,"click",{capture:!0}).pipe(Zt(function(O){return m(O,"click")})),I=Kn(document,"change",{capture:!0}).pipe(Zt(function(O){return m(O,"change")})),_;window.navigation&&(_=Kn(window.navigation,"navigate").pipe(Zt(function(O){return m(O,"navigate")})));var $=new wt(function(O){var A=new MutationObserver(function(P){O.next(P)});return A.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return A.disconnect()}}).pipe(Zt(function(O){return m(O,"mutation")}));return E={},E[en.ClickObservable]=b,E[en.ChangeObservable]=I,E[en.NavigateObservable]=_,E[en.MutationObservable]=$,E},g=function(E,b){var I,_,$,O=($=(_=b?.tagName)===null||_===void 0?void 0:_.toLowerCase)===null||$===void 0?void 0:$.call(_),A=typeof b.getBoundingClientRect=="function"?b.getBoundingClientRect():{left:null,top:null},P=b.getAttribute("aria-label"),N=NS(b,s),U=Ig(b),F=Eg(b,d),M=(I={},I[i0]=b.getAttribute("id")||"",I[s0]=b.getAttribute("class"),I[o0]=YS(b),I[Wp]=O,I[Gp]=pc(b),I[u0]=A.left==null?null:Math.round(A.left),I[l0]=A.top==null?null:Math.round(A.top),I[c0]=P,I[f0]=N,I[Vp]=F,I[d0]=U,I[Hp]=window.location.href.split("?")[0],I[h0]=typeof document<"u"&&document.title||"",I[p0]=window.innerHeight,I[g0]=window.innerWidth,I);return O==="a"&&E==="click"&&b instanceof HTMLAnchorElement&&(M[a0]=b.href),Cg(M)},m=function(E,b){var I={event:E,timestamp:Date.now(),type:b};if(eE(I)&&I.event.target!==null){var _=gc(I.event.target,n.cssSelectorAllowlist);return _&&(I.closestTrackedAncestor=_,I.targetElementProperties=g(I.type,_)),I}return I},v=function(E,b){return Ma(void 0,void 0,void 0,function(){var I,_,$,O,A,P,N,U,F,M;return Yn(this,function(Y){return d=E.loggerProvider,typeof document>"u"?[2]:(I=Ua(n,n.cssSelectorAllowlist),_=Ua(n,n.actionClickAllowlist),$=h(),O=XS({allObservables:$,options:n,amplitude:b,shouldTrackEvent:I}),c.push(O),A=JS({allObservables:$,getEventProperties:g,amplitude:b,shouldTrackEvent:I}),c.push(A),P=QS({allObservables:$,options:n,getEventProperties:g,amplitude:b,shouldTrackEvent:I,shouldTrackActionClick:_}),c.push(P),(F=E?.loggerProvider)===null||F===void 0||F.log("".concat(a," has been successfully added.")),window.opener&&l.enabled&&(N=n.cssSelectorAllowlist,U=n.actionClickAllowlist,(M=l.messenger)===null||M===void 0||M.setup(cn(cn({logger:E?.loggerProvider},E?.serverZone&&{endpoint:v0[E.serverZone]}),{isElementSelectable:Ua(n,$r($r([],Mt(N),!1),Mt(U),!1)),cssSelectorAllowlist:N,actionClickAllowlist:U}))),[2])})})},y=function(E){return Ma(void 0,void 0,void 0,function(){return Yn(this,function(b){return[2,E]})})},C=function(){return Ma(void 0,void 0,void 0,function(){var E,b,I,_,$;return Yn(this,function(O){try{for(E=yr(c),b=E.next();!b.done;b=E.next())I=b.value,I.unsubscribe()}catch(A){_={error:A}}finally{try{b&&!b.done&&($=E.return)&&$.call(E)}finally{if(_)throw _.error}}return[2]})})};return{name:a,type:u,setup:v,execute:y,teardown:C}},rE=function(n){$n(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i){t===void 0&&(t="");var s,o;return arguments.length>2?(s=r,o=i):typeof r=="string"?(s=r,o=void 0):(s=r?.userId,o=r),gt(this._init(Ke(Ke({},o),{userId:s,apiKey:t})))},e.prototype._init=function(t){var r,i,s;return Ee(this,void 0,void 0,function(){var o,l,a,u,c,d,h=this;return Ce(this,function(g){switch(g.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,O1(t.apiKey,t,this)]);case 1:return o=g.sent(),t.fetchRemoteConfig?[4,t0(o)]:[3,4];case 2:return l=g.sent(),[4,l.generateJoinedConfig()];case 3:o=g.sent(),g.label=4;case 4:return[4,n.prototype._init.call(this,o)];case 5:return g.sent(),this.logBrowserOptions(o),Dp(this.config.defaultTracking)?(a=f1(this.config),this.webAttribution=new Hb(a,this.config),[4,this.webAttribution.init()]):[3,7];case 6:g.sent(),g.label=7;case 7:return u=yo(),c=Number.isNaN(Number(u.ampSessionId))?void 0:Number(u.ampSessionId),this.setSessionId((s=(i=(r=t.sessionId)!==null&&r!==void 0?r:c)!==null&&i!==void 0?i:this.config.sessionId)!==null&&s!==void 0?s:Date.now()),d=ii(t.instanceName),d.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===ub?[3,9]:[4,this.add(j1()).promise];case 8:g.sent(),g.label=9;case 9:return[4,this.add(new Rb).promise];case 10:return g.sent(),[4,this.add(new g1).promise];case 11:return g.sent(),[4,this.add(new s1).promise];case 12:return g.sent(),z1(this.config),a1(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(B1()).promise]):[3,14];case 13:g.sent(),g.label=14;case 14:return u1(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(F1()).promise]):[3,16];case 15:g.sent(),g.label=16;case 16:return Up(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(M1(c1(this.config))).promise]):[3,18];case 17:g.sent(),g.label=18;case 18:return Fp(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(tE(l1(this.config))).promise]):[3,20];case 19:g.sent(),g.label=20;case 20:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 21:return g.sent(),d.eventBridge.setEventReceiver(function(m){h.track(m.eventType,m.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.userId},e.prototype.setUserId=function(t){if(!this.config){this.q.push(this.setUserId.bind(this,t));return}this.config.loggerProvider.debug("function setUserId: ",t),(t!==this.config.userId||t===void 0)&&(this.config.userId=t,n1(t,this.config.instanceName))},e.prototype.getDeviceId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.deviceId},e.prototype.setDeviceId=function(t){if(!this.config){this.q.push(this.setDeviceId.bind(this,t));return}this.config.loggerProvider.debug("function setDeviceId: ",t),this.config.deviceId=t,i1(t,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(Rn()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.sessionId},e.prototype.setSessionId=function(t){var r,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,t)),gt(Promise.resolve());if(t===this.config.sessionId)return gt(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",t);var s=this.getSessionId(),o=this.config.lastEventTime,l=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=t,this.config.lastEventTime=void 0,this.config.pageCounter=0,Gf(this.config.defaultTracking)&&(s&&o&&i.push(this.track(qf,void 0,{device_id:this.previousSessionDeviceId,event_id:++l,session_id:s,time:o+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var a=this.trackCampaignEventIfNeeded(++l,i);return Gf(this.config.defaultTracking)&&i.push(this.track(Hf,void 0,{event_id:a?++l:l,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,gt(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(t){if(!this.config){this.q.push(this.setTransport.bind(this,t));return}this.config.transportProvider=jp(t)},e.prototype.identify=function(t,r){if(Oa(t)){var i=t._q;t._q=[],t=$a(new mo,i)}return r?.user_id&&this.setUserId(r.user_id),r?.device_id&&this.setDeviceId(r.device_id),n.prototype.identify.call(this,t,r)},e.prototype.groupIdentify=function(t,r,i,s){if(Oa(i)){var o=i._q;i._q=[],i=$a(new mo,o)}return n.prototype.groupIdentify.call(this,t,r,i,s)},e.prototype.revenue=function(t,r){if(Oa(t)){var i=t._q;t._q=[],t=$a(new Cb,i)}return n.prototype.revenue.call(this,t,r)},e.prototype.trackCampaignEventIfNeeded=function(t,r){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(t);return r?r.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(t){return Ee(this,void 0,void 0,function(){var r,i,s;return Ce(this,function(o){return r=Date.now(),i=Lp(this.config.sessionTimeout,this.config.lastEventTime),s=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),t.event_type!==Hf&&t.event_type!==qf&&(!t.session_id||t.session_id===this.getSessionId())&&(i||s?(this.setSessionId(r),s&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),[2,n.prototype.process.call(this,t)]})})},e.prototype.logBrowserOptions=function(t){try{var r=Ke(Ke({},t),{apiKey:t.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(r))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},e}(Eb),nE=function(){var n=new rE;return{init:Ye(n.init.bind(n),"init",He(n),qe(n,["config"])),add:Ye(n.add.bind(n),"add",He(n),qe(n,["config.apiKey","timeline.plugins"])),remove:Ye(n.remove.bind(n),"remove",He(n),qe(n,["config.apiKey","timeline.plugins"])),track:Ye(n.track.bind(n),"track",He(n),qe(n,["config.apiKey","timeline.queue.length"])),logEvent:Ye(n.logEvent.bind(n),"logEvent",He(n),qe(n,["config.apiKey","timeline.queue.length"])),identify:Ye(n.identify.bind(n),"identify",He(n),qe(n,["config.apiKey","timeline.queue.length"])),groupIdentify:Ye(n.groupIdentify.bind(n),"groupIdentify",He(n),qe(n,["config.apiKey","timeline.queue.length"])),setGroup:Ye(n.setGroup.bind(n),"setGroup",He(n),qe(n,["config.apiKey","timeline.queue.length"])),revenue:Ye(n.revenue.bind(n),"revenue",He(n),qe(n,["config.apiKey","timeline.queue.length"])),flush:Ye(n.flush.bind(n),"flush",He(n),qe(n,["config.apiKey","timeline.queue.length"])),getUserId:Ye(n.getUserId.bind(n),"getUserId",He(n),qe(n,["config","config.userId"])),setUserId:Ye(n.setUserId.bind(n),"setUserId",He(n),qe(n,["config","config.userId"])),getDeviceId:Ye(n.getDeviceId.bind(n),"getDeviceId",He(n),qe(n,["config","config.deviceId"])),setDeviceId:Ye(n.setDeviceId.bind(n),"setDeviceId",He(n),qe(n,["config","config.deviceId"])),reset:Ye(n.reset.bind(n),"reset",He(n),qe(n,["config","config.userId","config.deviceId"])),getSessionId:Ye(n.getSessionId.bind(n),"getSessionId",He(n),qe(n,["config"])),setSessionId:Ye(n.setSessionId.bind(n),"setSessionId",He(n),qe(n,["config"])),extendSession:Ye(n.extendSession.bind(n),"extendSession",He(n),qe(n,["config"])),setOptOut:Ye(n.setOptOut.bind(n),"setOptOut",He(n),qe(n,["config"])),setTransport:Ye(n.setTransport.bind(n),"setTransport",He(n),qe(n,["config"]))}};const vr=nE();var NM=vr.add,MM=vr.getDeviceId,LM=vr.getUserId,DM=vr.identify,UM=vr.init,FM=vr.remove,BM=vr.setUserId,zM=vr.track,er=function(){return er=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},er.apply(this,arguments)};function Nn(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function Mn(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Ou=function(n,e){return Ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Ou(n,e)};function sa(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ou(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var he=function(){return he=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},he.apply(this,arguments)};function H(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function j(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function kt(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rr(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function dn(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var iE="AMP",sE="".concat(iE,"_unsent"),xg="https://api2.amplitude.com/2/httpapi",oE="https://api.eu.amplitude.com/2/httpapi",aE="https://api2.amplitude.com/batch",uE="https://api.eu.amplitude.com/batch",it;(function(n){n.Unknown="unknown",n.Skipped="skipped",n.Success="success",n.RateLimit="rate_limit",n.PayloadTooLarge="payload_too_large",n.Invalid="invalid",n.Failed="failed",n.Timeout="Timeout",n.SystemError="SystemError"})(it||(it={}));var Lt=function(){var n="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[n]<"u")return globalThis[n];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof nr<"u")return nr},sd=function(n){return{promise:n||Promise.resolve()}},It;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Verbose=3]="Verbose",n[n.Debug=4]="Debug"})(It||(It={}));var Ki="Amplitude Logger ",bo=function(){function n(){this.logLevel=It.None}return n.prototype.disable=function(){this.logLevel=It.None},n.prototype.enable=function(e){e===void 0&&(e=It.Warn),this.logLevel=e},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<It.Verbose||console.log("".concat(Ki,"[Log]: ").concat(e.join(" ")))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<It.Warn||console.warn("".concat(Ki,"[Warn]: ").concat(e.join(" ")))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<It.Error||console.error("".concat(Ki,"[Error]: ").concat(e.join(" ")))},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<It.Debug||console.log("".concat(Ki,"[Debug]: ").concat(e.join(" ")))},n}(),Zs=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:It.Warn,loggerProvider:new bo,offline:!1,optOut:!1,serverUrl:xg,serverZone:"US",useBatch:!1}},lE=function(){function n(e){var t,r,i,s;this._optOut=!1;var o=Zs();this.apiKey=e.apiKey,this.flushIntervalMillis=(t=e.flushIntervalMillis)!==null&&t!==void 0?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:o.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:o.useBatch,this.loggerProvider.enable(this.logLevel);var l=fE(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=l.serverZone,this.serverUrl=l.serverUrl}return Object.defineProperty(n.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),n}(),cE=function(n,e){return n==="EU"?e?uE:oE:e?aE:xg},fE=function(n,e,t){if(n===void 0&&(n=""),e===void 0&&(e=Zs().serverZone),t===void 0&&(t=Zs().useBatch),n)return{serverUrl:n,serverZone:void 0};var r=["US","EU"].includes(e)?e:Zs().serverZone;return{serverZone:r,serverUrl:cE(r,t)}},dE=function(){function n(){}return n.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:hE(),platform:"Web",os:void 0,deviceModel:void 0}},n}(),hE=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},pE=function(){function n(){this.queue=[]}return n.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},n.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},n}(),dr=function(){return dr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},dr.apply(this,arguments)};function Xs(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function od(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}var Js=function(n,e){var t,r,i=["string","number","boolean","undefined"],s=typeof n,o=typeof e;if(s!==o)return!1;try{for(var l=Xs(i),a=l.next();!a.done;a=l.next()){var u=a.value;if(u===s)return n===e}}catch(y){t={error:y}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}if(n==null&&e==null)return!0;if(n==null||e==null||n.length!==e.length)return!1;var c=Array.isArray(n),d=Array.isArray(e);if(c!==d)return!1;if(c&&d){for(var h=0;h<n.length;h++)if(!Js(n[h],e[h]))return!1}else{var g=Object.keys(n).sort(),m=Object.keys(e).sort();if(!Js(g,m))return!1;var v=!0;return Object.keys(n).forEach(function(y){Js(n[y],e[y])||(v=!1)}),v}return!0},gE="$set",mE="$unset",yE="$clearAll";Object.entries||(Object.entries=function(n){for(var e=Object.keys(n),t=e.length,r=new Array(t);t--;)r[t]=[e[t],n[e[t]]];return r});var vE=function(){function n(){this.identity={userProperties:{}},this.listeners=new Set}return n.prototype.editIdentity=function(){var e=this,t=dr({},this.identity.userProperties),r=dr(dr({},this.identity),{userProperties:t});return{setUserId:function(i){return r.userId=i,this},setDeviceId:function(i){return r.deviceId=i,this},setUserProperties:function(i){return r.userProperties=i,this},setOptOut:function(i){return r.optOut=i,this},updateUserProperties:function(i){var s,o,l,a,u,c,d=r.userProperties||{};try{for(var h=Xs(Object.entries(i)),g=h.next();!g.done;g=h.next()){var m=od(g.value,2),v=m[0],y=m[1];switch(v){case gE:try{for(var C=(l=void 0,Xs(Object.entries(y))),E=C.next();!E.done;E=C.next()){var b=od(E.value,2),I=b[0],_=b[1];d[I]=_}}catch(A){l={error:A}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(l)throw l.error}}break;case mE:try{for(var $=(u=void 0,Xs(Object.keys(y))),O=$.next();!O.done;O=$.next()){var I=O.value;delete d[I]}}catch(A){u={error:A}}finally{try{O&&!O.done&&(c=$.return)&&c.call($)}finally{if(u)throw u.error}}break;case yE:d={};break}}}catch(A){s={error:A}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}return r.userProperties=d,this},commit:function(){return e.setIdentity(r),this}}},n.prototype.getIdentity=function(){return dr({},this.identity)},n.prototype.setIdentity=function(e){var t=dr({},this.identity);this.identity=dr({},e),Js(t,this.identity)||this.listeners.forEach(function(r){r(e)})},n.prototype.addIdentityListener=function(e){this.listeners.add(e)},n.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},n}(),Ln=typeof globalThis<"u"?globalThis:typeof nr<"u"?nr:self,wE=function(){function n(){this.identityStore=new vE,this.eventBridge=new pE,this.applicationContextProvider=new dE}return n.getInstance=function(e){return Ln.analyticsConnectorInstances||(Ln.analyticsConnectorInstances={}),Ln.analyticsConnectorInstances[e]||(Ln.analyticsConnectorInstances[e]=new n),Ln.analyticsConnectorInstances[e]},n}(),bE=function(n){return n===void 0&&(n="$default_instance"),wE.getInstance(n)},SE=function(n){var e=new Error().stack||"";return e.split(`
`).slice(2+n).map(function(t){return t.trim()})},zr=function(n,e,t,r,i){return i===void 0&&(i=null),function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var l=t(),a=l.logger,u=l.logLevel;if(u&&u<It.Debug||!u||!a)return n.apply(i,s);var c={type:"invoke public method",name:e,args:s,stacktrace:SE(1),time:{start:new Date().toISOString()},states:{}},d=n.apply(i,s);return d&&d.promise?d.promise.then(function(){c.time&&(c.time.end=new Date().toISOString()),a.debug(JSON.stringify(c,null,2))}):(c.time&&(c.time.end=new Date().toISOString()),a.debug(JSON.stringify(c,null,2))),d}},Ag=function(){function n(){}return n.prototype.send=function(e,t){return Promise.resolve(null)},n.prototype.buildResponse=function(e){var t,r,i,s,o,l,a,u,c,d,h,g,m,v,y,C,E,b,I,_,$,O;if(typeof e!="object")return null;var A=e.code||0,P=this.buildStatus(A);switch(P){case it.Success:return{status:P,statusCode:A,body:{eventsIngested:(t=e.events_ingested)!==null&&t!==void 0?t:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case it.Invalid:return{status:P,statusCode:A,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(l=e.events_with_invalid_fields)!==null&&l!==void 0?l:{},eventsWithMissingFields:(a=e.events_with_missing_fields)!==null&&a!==void 0?a:{},eventsWithInvalidIdLengths:(u=e.events_with_invalid_id_lengths)!==null&&u!==void 0?u:{},epsThreshold:(c=e.eps_threshold)!==null&&c!==void 0?c:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(g=e.silenced_events)!==null&&g!==void 0?g:[],throttledDevices:(m=e.throttled_devices)!==null&&m!==void 0?m:{},throttledEvents:(v=e.throttled_events)!==null&&v!==void 0?v:[]}};case it.PayloadTooLarge:return{status:P,statusCode:A,body:{error:(y=e.error)!==null&&y!==void 0?y:""}};case it.RateLimit:return{status:P,statusCode:A,body:{error:(C=e.error)!==null&&C!==void 0?C:"",epsThreshold:(E=e.eps_threshold)!==null&&E!==void 0?E:0,throttledDevices:(b=e.throttled_devices)!==null&&b!==void 0?b:{},throttledUsers:(I=e.throttled_users)!==null&&I!==void 0?I:{},exceededDailyQuotaDevices:(_=e.exceeded_daily_quota_devices)!==null&&_!==void 0?_:{},exceededDailyQuotaUsers:($=e.exceeded_daily_quota_users)!==null&&$!==void 0?$:{},throttledEvents:(O=e.throttled_events)!==null&&O!==void 0?O:[]}};case it.Timeout:default:return{status:P,statusCode:A}}},n.prototype.buildStatus=function(e){return e>=200&&e<300?it.Success:e===429?it.RateLimit:e===413?it.PayloadTooLarge:e===408?it.Timeout:e>=400&&e<500?it.Invalid:e>=500?it.Failed:it.Unknown},n}(),EE=function(n){sa(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.send=function(t,r){return H(this,void 0,void 0,function(){var i,s,o;return j(this,function(l){switch(l.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(t,i)];case 1:return s=l.sent(),[4,s.text()];case 2:o=l.sent();try{return[2,this.buildResponse(JSON.parse(o))]}catch{return[2,this.buildResponse({code:s.status})]}return[2]}})})},e}(Ag),ai;(function(n){n.US="US",n.EU="EU",n.STAGING="STAGING"})(ai||(ai={}));var _g="[Amplitude]",CE="".concat(_g," Session Replay ID"),IE=0,xE=ai.US,AE="".concat(_g," Session Replay Debug"),_E="amp-block",Rg="amp-mask",RE="amp-unmask",$E="https://api-sr.amplitude.com/sessions/v2/track",OE="https://api-sr.eu.amplitude.com/sessions/v2/track",TE="https://api-sr.stag2.amplitude.com/sessions/v2/track",PE=1*1e6,kE=3e4,NE=6e4,ME=500,LE=10*1e3,$g=1024,DE=1e3,Ir;(function(n){n.GET_SR_PROPS="get-sr-props",n.DEBUG_INFO="debug-info",n.FETCH_REQUEST="fetch-request",n.METADATA="metadata"})(Ir||(Ir={}));var Tu=function(){function n(e){this.logger=e,this.log=this.getSafeMethod("log"),this.warn=this.getSafeMethod("warn"),this.error=this.getSafeMethod("error"),this.debug=this.getSafeMethod("debug")}return n.prototype.getSafeMethod=function(e){var t;if(!this.logger)return function(){};var r=this.logger[e];if(typeof r=="function"){var i=(t=r.__rrweb_original__)!==null&&t!==void 0?t:r;return i.bind(this.logger)}return function(){}},n.prototype.enable=function(e){this.logger.enable(e)},n.prototype.disable=function(){this.logger.disable()},n}(),Og=function(){return{flushMaxRetries:2,logLevel:It.Warn,loggerProvider:new bo,transportProvider:new EE}},UE=function(n){sa(e,n);function e(t,r){var i=this,s,o=Og();return i=n.call(this,he(he({transportProvider:o.transportProvider,loggerProvider:new Tu(r.loggerProvider||o.loggerProvider)},r),{apiKey:t}))||this,i.flushMaxRetries=r.flushMaxRetries!==void 0&&r.flushMaxRetries<=o.flushMaxRetries?r.flushMaxRetries:o.flushMaxRetries,i.apiKey=t,i.sampleRate=r.sampleRate||IE,i.serverZone=r.serverZone||xE,i.configServerUrl=r.configServerUrl,i.trackServerUrl=r.trackServerUrl,i.shouldInlineStylesheet=r.shouldInlineStylesheet,i.version=r.version,i.performanceConfig=r.performanceConfig,i.storeType=(s=r.storeType)!==null&&s!==void 0?s:"idb",r.privacyConfig&&(i.privacyConfig=r.privacyConfig),r.debugMode&&(i.debugMode=r.debugMode),r.experimental&&(i.experimental=r.experimental),i}return e}(lE),So={},FE=Object.defineProperty,BE=(n,e,t)=>e in n?FE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e,t)=>BE(n,typeof e!="symbol"?e+"":e,t),ad,zE=Object.defineProperty,jE=(n,e,t)=>e in n?zE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ud=(n,e,t)=>jE(n,typeof e!="symbol"?e+"":e,t),Je=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(Je||{});const ld={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},cd={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Zi={},WE=()=>!!globalThis.Zone;function yc(n){if(Zi[n])return Zi[n];const e=globalThis[n],t=e.prototype,r=n in ld?ld[n]:void 0,i=!!(r&&r.every(l=>{var a,u;return!!((u=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&u.toString().includes("[native code]"))})),s=n in cd?cd[n]:void 0,o=!!(s&&s.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(i&&o&&!WE())return Zi[n]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const u=a[n].prototype;return document.body.removeChild(l),u?Zi[n]=u:t}catch{return t}}const Fa={};function wr(n,e,t){var r;const i=`${n}.${String(t)}`;if(Fa[i])return Fa[i].call(e);const s=yc(n),o=(r=Object.getOwnPropertyDescriptor(s,t))==null?void 0:r.get;return o?(Fa[i]=o,o.call(e)):e[t]}const Ba={};function Tg(n,e,t){const r=`${n}.${String(t)}`;if(Ba[r])return Ba[r].bind(e);const s=yc(n)[t];return typeof s!="function"?e[t]:(Ba[r]=s,s.bind(e))}function GE(n){return wr("Node",n,"childNodes")}function VE(n){return wr("Node",n,"parentNode")}function HE(n){return wr("Node",n,"parentElement")}function qE(n){return wr("Node",n,"textContent")}function YE(n,e){return Tg("Node",n,"contains")(e)}function KE(n){return Tg("Node",n,"getRootNode")()}function ZE(n){return!n||!("host"in n)?null:wr("ShadowRoot",n,"host")}function XE(n){return n.styleSheets}function JE(n){return!n||!("shadowRoot"in n)?null:wr("Element",n,"shadowRoot")}function QE(n,e){return wr("Element",n,"querySelector")(e)}function eC(n,e){return wr("Element",n,"querySelectorAll")(e)}function tC(){return yc("MutationObserver").constructor}const ot={childNodes:GE,parentNode:VE,parentElement:HE,textContent:qE,contains:YE,getRootNode:KE,host:ZE,styleSheets:XE,shadowRoot:JE,querySelector:QE,querySelectorAll:eC,mutationObserver:tC};function Pg(n){return n.nodeType===n.ELEMENT_NODE}function Zn(n){const e=n&&"host"in n&&"mode"in n&&ot.host(n)||null;return!!(e&&"shadowRoot"in e&&ot.shadowRoot(e)===n)}function Xn(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}function rC(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}function nC(n){const{cssText:e}=n;if(e.split('"').length<3)return e;const t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}function Pu(n){try{const e=n.rules||n.cssRules;if(!e)return null;let t=n.href;!t&&n.ownerNode&&n.ownerNode.ownerDocument&&(t=n.ownerNode.ownerDocument.location.href);const r=Array.from(e,i=>kg(i,t)).join("");return rC(r)}catch{return null}}function kg(n,e){if(sC(n)){let t;try{t=Pu(n.styleSheet)||nC(n)}catch{t=n.cssText}return n.styleSheet.href?Io(t,n.styleSheet.href):t}else{let t=n.cssText;return oC(n)&&n.selectorText.includes(":")&&(t=iC(t)),e?Io(t,e):t}}function iC(n){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}function sC(n){return"styleSheet"in n}function oC(n){return"selectorText"in n}let Ng=class{constructor(){ud(this,"idNodeMap",new Map),ud(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function aC(){return new Ng}function Eo({element:n,maskInputOptions:e,tagName:t,type:r,value:i,maskInputFn:s}){let o=i||"";const l=r&&Or(r);return(e[t.toLowerCase()]||l&&e[l])&&(s?o=s(o,n):o="*".repeat(o.length)),o}function Or(n){return n.toLowerCase()}const fd="__rrweb_original__";function uC(n){const e=n.getContext("2d");if(!e)return!0;const t=50;for(let r=0;r<n.width;r+=t)for(let i=0;i<n.height;i+=t){const s=e.getImageData,o=fd in s?s[fd]:s;if(new Uint32Array(o.call(e,r,i,Math.min(t,n.width-r),Math.min(t,n.height-i)).data.buffer).some(a=>a!==0))return!1}return!0}function Co(n){const e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?Or(e):null}function Mg(n,e){let t;try{t=new URL(n,e??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(r);return i?.[1]??null}function lC(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}const cC=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,fC=/^(?:[a-z+]+:)?\/\//i,dC=/^www\..*/i,hC=/^(data:)([^,]*),(.*)/i;function Io(n,e){return(n||"").replace(cC,(t,r,i,s,o,l)=>{const a=i||o||l,u=r||s||"";if(!a)return t;if(fC.test(a)||dC.test(a))return`url(${u}${a}${u})`;if(hC.test(a))return`url(${u}${a}${u})`;if(a[0]==="/")return`url(${u}${lC(e)+a}${u})`;const c=e.split("/"),d=a.split("/");c.pop();for(const h of d)h!=="."&&(h===".."?c.pop():c.push(h));return`url(${u}${c.join("/")}${u})`})}function Xi(n,e=!1){return e?n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function pC(n,e,t=!1){const r=Array.from(e.childNodes),i=[];let s=0;if(r.length>1&&n&&typeof n=="string"){let o=Xi(n,t);const l=o.length/n.length;for(let a=1;a<r.length;a++)if(r[a].textContent&&typeof r[a].textContent=="string"){const u=Xi(r[a].textContent,t),c=100;let d=3;for(;d<u.length&&(u[d].match(/[a-zA-Z0-9]/)||u.indexOf(u.substring(0,d),1)!==-1);d++);for(;d<u.length;d++){let h=u.substring(0,d),g=o.split(h),m=-1;if(g.length===2)m=g[0].length;else if(g.length>2&&g[0]===""&&r[a-1].textContent!=="")m=o.indexOf(h,1);else if(g.length===1){if(h=h.substring(0,h.length-1),g=o.split(h),g.length<=1)return i.push(n),i;d=c+1}else d===u.length-1&&(m=o.indexOf(h));if(g.length>=2&&d>c){const v=r[a-1].textContent;if(v&&typeof v=="string"){const y=Xi(v).length;m=o.indexOf(h,y)}m===-1&&(m=g[0].length)}if(m!==-1){let v=Math.floor(m/l);for(;v>0&&v<n.length;){if(s+=1,s>50*r.length)return i.push(n),i;const y=Xi(n.substring(0,v),t);if(y.length===m){i.push(n.substring(0,v)),n=n.substring(v),o=o.substring(m);break}else y.length<m?v+=Math.max(1,Math.floor((m-y.length)/l)):v-=Math.max(1,Math.floor((y.length-m)*l))}break}}}}return i.push(n),i}function gC(n,e){return pC(n,e).join("/* rr_split */")}let mC=1;const yC=new RegExp("[^a-z0-9-_:]"),ui=-2;function Lg(){return mC++}function vC(n){if(n instanceof HTMLFormElement)return"form";const e=Or(n.tagName);return yC.test(e)?"div":e}let jr,dd;const wC=/^[^ \t\n\r\u000c]+/,bC=/^[, \t\n\r\u000c]+/;function SC(n,e){if(e.trim()==="")return e;let t=0;function r(s){let o;const l=s.exec(e.substring(t));return l?(o=l[0],t+=o.length,o):""}const i=[];for(;r(bC),!(t>=e.length);){let s=r(wC);if(s.slice(-1)===",")s=tn(n,s.substring(0,s.length-1)),i.push(s);else{let o="";s=tn(n,s);let l=!1;for(;;){const a=e.charAt(t);if(a===""){i.push((s+o).trim());break}else if(l)a===")"&&(l=!1);else if(a===","){t+=1,i.push((s+o).trim());break}else a==="("&&(l=!0);o+=a,t+=1}}}return i.join(", ")}const hd=new WeakMap;function tn(n,e){return!e||e.trim()===""?e:vc(n,e)}function EC(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}function vc(n,e){let t=hd.get(n);if(t||(t=n.createElement("a"),hd.set(n,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}function Dg(n,e,t,r){return r&&(t==="src"||t==="href"&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?tn(n,r):t==="srcset"?SC(n,r):t==="style"?Io(r,vc(n)):e==="object"&&t==="data"?tn(n,r):r)}function Ug(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}function CC(n,e,t){try{if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let r=n.classList.length;r--;){const i=n.classList[r];if(e.test(i))return!0}if(t)return n.matches(t)}catch{}return!1}function xo(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?xo(ot.parentNode(n),e,t):!1;for(let r=n.classList.length;r--;){const i=n.classList[r];if(e.test(i))return!0}return t?xo(ot.parentNode(n),e,t):!1}function Fg(n,e,t,r){let i;if(Pg(n)){if(i=n,!ot.childNodes(i).length)return!1}else{if(ot.parentElement(n)===null)return!1;i=ot.parentElement(n)}try{if(typeof e=="string"){if(r){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(xo(i,e,r))return!0;if(t){if(r){if(i.closest(t))return!0}else if(i.matches(t))return!0}}catch{}return!1}function IC(n,e,t){const r=n.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const l=setTimeout(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{clearTimeout(l),i=!0,e()});return}const o="about:blank";if(r.location.href!==o||n.src===o||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}function xC(n,e,t){let r=!1,i;try{i=n.sheet}catch{return}if(i)return;const s=setTimeout(()=>{r||(e(),r=!0)},t);n.addEventListener("load",()=>{clearTimeout(s),r=!0,e()})}function AC(n,e){const{doc:t,mirror:r,blockClass:i,blockSelector:s,needsMask:o,inlineStylesheet:l,maskInputOptions:a={},maskTextFn:u,maskInputFn:c,dataURLOptions:d={},inlineImages:h,recordCanvas:g,keepIframeSrcFn:m,newlyAddedElement:v=!1,cssCaptured:y=!1}=e,C=_C(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:Je.Document,childNodes:[],compatMode:n.compatMode}:{type:Je.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:Je.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:C};case n.ELEMENT_NODE:return $C(n,{doc:t,blockClass:i,blockSelector:s,inlineStylesheet:l,maskInputOptions:a,maskInputFn:c,dataURLOptions:d,inlineImages:h,recordCanvas:g,keepIframeSrcFn:m,newlyAddedElement:v,rootId:C});case n.TEXT_NODE:return RC(n,{doc:t,needsMask:o,maskTextFn:u,rootId:C,cssCaptured:y});case n.CDATA_SECTION_NODE:return{type:Je.CDATA,textContent:"",rootId:C};case n.COMMENT_NODE:return{type:Je.Comment,textContent:ot.textContent(n)||"",rootId:C};default:return!1}}function _C(n,e){if(!e.hasNode(n))return;const t=e.getId(n);return t===1?void 0:t}function RC(n,e){const{needsMask:t,maskTextFn:r,rootId:i,cssCaptured:s}=e,o=ot.parentNode(n),l=o&&o.tagName;let a="";const u=l==="STYLE"?!0:void 0,c=l==="SCRIPT"?!0:void 0;return c?a="SCRIPT_PLACEHOLDER":s||(a=ot.textContent(n),u&&a&&(a=Io(a,vc(e.doc)))),!u&&!c&&a&&t&&(a=r?r(a,ot.parentElement(n)):a.replace(/[\S]/g,"*")),{type:Je.Text,textContent:a||"",rootId:i}}function $C(n,e){const{doc:t,blockClass:r,blockSelector:i,inlineStylesheet:s,maskInputOptions:o={},maskInputFn:l,dataURLOptions:a={},inlineImages:u,recordCanvas:c,keepIframeSrcFn:d,newlyAddedElement:h=!1,rootId:g}=e,m=CC(n,r,i),v=vC(n);let y={};const C=n.attributes.length;for(let b=0;b<C;b++){const I=n.attributes[b];Ug(v,I.name,I.value)||(y[I.name]=Dg(t,v,Or(I.name),I.value))}if(v==="link"&&s){const b=Array.from(t.styleSheets).find(_=>_.href===n.href);let I=null;b&&(I=Pu(b)),I&&(delete y.rel,delete y.href,y._cssText=I)}if(v==="style"&&n.sheet){let b=Pu(n.sheet);b&&(n.childNodes.length>1&&(b=gC(b,n)),y._cssText=b)}if(v==="input"||v==="textarea"||v==="select"){const b=n.value,I=n.checked;y.type!=="radio"&&y.type!=="checkbox"&&y.type!=="submit"&&y.type!=="button"&&b?y.value=Eo({element:n,type:Co(n),tagName:v,value:b,maskInputOptions:o,maskInputFn:l}):I&&(y.checked=I)}if(v==="option"&&(n.selected&&!o.select?y.selected=!0:delete y.selected),v==="dialog"&&n.open&&(y.rr_open_mode=n.matches("dialog:modal")?"modal":"non-modal"),v==="canvas"&&c){if(n.__context==="2d")uC(n)||(y.rr_dataURL=n.toDataURL(a.type,a.quality));else if(!("__context"in n)){const b=n.toDataURL(a.type,a.quality),I=t.createElement("canvas");I.width=n.width,I.height=n.height;const _=I.toDataURL(a.type,a.quality);b!==_&&(y.rr_dataURL=b)}}if(v==="img"&&u){jr||(jr=t.createElement("canvas"),dd=jr.getContext("2d"));const b=n,I=b.currentSrc||b.getAttribute("src")||"<unknown-src>",_=b.crossOrigin,$=()=>{b.removeEventListener("load",$);try{jr.width=b.naturalWidth,jr.height=b.naturalHeight,dd.drawImage(b,0,0),y.rr_dataURL=jr.toDataURL(a.type,a.quality)}catch(O){if(b.crossOrigin!=="anonymous"){b.crossOrigin="anonymous",b.complete&&b.naturalWidth!==0?$():b.addEventListener("load",$);return}else console.warn(`Cannot inline img src=${I}! Error: ${O}`)}b.crossOrigin==="anonymous"&&(_?y.crossOrigin=_:b.removeAttribute("crossorigin"))};b.complete&&b.naturalWidth!==0?$():b.addEventListener("load",$)}if(v==="audio"||v==="video"){const b=y;b.rr_mediaState=n.paused?"paused":"played",b.rr_mediaCurrentTime=n.currentTime,b.rr_mediaPlaybackRate=n.playbackRate,b.rr_mediaMuted=n.muted,b.rr_mediaLoop=n.loop,b.rr_mediaVolume=n.volume}if(h||(n.scrollLeft&&(y.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(y.rr_scrollTop=n.scrollTop)),m){const{width:b,height:I}=n.getBoundingClientRect();y={class:y.class,rr_width:`${b}px`,rr_height:`${I}px`}}v==="iframe"&&!d(y.src)&&(n.contentDocument||(y.rr_src=y.src),delete y.src);let E;try{customElements.get(v)&&(E=!0)}catch{}return{type:Je.Element,tagName:v,attributes:y,childNodes:[],isSVG:EC(n)||void 0,needBlock:m,rootId:g,isCustom:E}}function Se(n){return n==null?"":n.toLowerCase()}function OC(n,e){if(e.comment&&n.type===Je.Comment)return!0;if(n.type===Je.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"||n.attributes.rel==="modulepreload")&&n.attributes.as==="script"||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Mg(n.attributes.href)==="js"))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(Se(n.attributes.name).match(/^msapplication-tile(image|color)$/)||Se(n.attributes.name)==="application-name"||Se(n.attributes.rel)==="icon"||Se(n.attributes.rel)==="apple-touch-icon"||Se(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&Se(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Se(n.attributes.property).match(/^(og|twitter|fb):/)||Se(n.attributes.name).match(/^(og|twitter):/)||Se(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(Se(n.attributes.name)==="robots"||Se(n.attributes.name)==="googlebot"||Se(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(Se(n.attributes.name)==="author"||Se(n.attributes.name)==="generator"||Se(n.attributes.name)==="framework"||Se(n.attributes.name)==="publisher"||Se(n.attributes.name)==="progid"||Se(n.attributes.property).match(/^article:/)||Se(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(Se(n.attributes.name)==="google-site-verification"||Se(n.attributes.name)==="yandex-verification"||Se(n.attributes.name)==="csrf-token"||Se(n.attributes.name)==="p:domain_verify"||Se(n.attributes.name)==="verify-v1"||Se(n.attributes.name)==="verification"||Se(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function rn(n,e){const{doc:t,mirror:r,blockClass:i,blockSelector:s,maskTextClass:o,maskTextSelector:l,skipChild:a=!1,inlineStylesheet:u=!0,maskInputOptions:c={},maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:m={},inlineImages:v=!1,recordCanvas:y=!1,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:b=5e3,onStylesheetLoad:I,stylesheetLoadTimeout:_=5e3,keepIframeSrcFn:$=()=>!1,newlyAddedElement:O=!1,cssCaptured:A=!1}=e;let{needsMask:P}=e,{preserveWhiteSpace:N=!0}=e;P||(P=Fg(n,o,l,P===void 0));const U=AC(n,{doc:t,mirror:r,blockClass:i,blockSelector:s,needsMask:P,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,dataURLOptions:m,inlineImages:v,recordCanvas:y,keepIframeSrcFn:$,newlyAddedElement:O,cssCaptured:A});if(!U)return console.warn(n,"not serialized"),null;let F;r.hasNode(n)?F=r.getId(n):OC(U,g)||!N&&U.type===Je.Text&&!U.textContent.replace(/^\s+|\s+$/gm,"").length?F=ui:F=Lg();const M=Object.assign(U,{id:F});if(r.add(n,M),F===ui)return null;C&&C(n);let Y=!a;if(M.type===Je.Element){Y=Y&&!M.needBlock,delete M.needBlock;const B=ot.shadowRoot(n);B&&Xn(B)&&(M.isShadowHost=!0)}if((M.type===Je.Document||M.type===Je.Element)&&Y){g.headWhitespace&&M.type===Je.Element&&M.tagName==="head"&&(N=!1);const B={doc:t,mirror:r,blockClass:i,blockSelector:s,needsMask:P,maskTextClass:o,maskTextSelector:l,skipChild:a,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:m,inlineImages:v,recordCanvas:y,preserveWhiteSpace:N,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:b,onStylesheetLoad:I,stylesheetLoadTimeout:_,keepIframeSrcFn:$,cssCaptured:!1};if(!(M.type===Je.Element&&M.tagName==="textarea"&&M.attributes.value!==void 0)){M.type===Je.Element&&M.attributes._cssText!==void 0&&typeof M.attributes._cssText=="string"&&(B.cssCaptured=!0);for(const te of Array.from(ot.childNodes(n))){const J=rn(te,B);J&&M.childNodes.push(J)}}let z=null;if(Pg(n)&&(z=ot.shadowRoot(n)))for(const te of Array.from(ot.childNodes(z))){const J=rn(te,B);J&&(Xn(z)&&(J.isShadow=!0),M.childNodes.push(J))}}const oe=ot.parentNode(n);return oe&&Zn(oe)&&Xn(oe)&&(M.isShadow=!0),M.type===Je.Element&&M.tagName==="iframe"&&IC(n,()=>{const B=n.contentDocument;if(B&&E){const z=rn(B,{doc:B,mirror:r,blockClass:i,blockSelector:s,needsMask:P,maskTextClass:o,maskTextSelector:l,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:m,inlineImages:v,recordCanvas:y,preserveWhiteSpace:N,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:b,onStylesheetLoad:I,stylesheetLoadTimeout:_,keepIframeSrcFn:$});z&&E(n,z)}},b),M.type===Je.Element&&M.tagName==="link"&&typeof M.attributes.rel=="string"&&(M.attributes.rel==="stylesheet"||M.attributes.rel==="preload"&&typeof M.attributes.href=="string"&&Mg(M.attributes.href)==="css")&&xC(n,()=>{if(I){const B=rn(n,{doc:t,mirror:r,blockClass:i,blockSelector:s,needsMask:P,maskTextClass:o,maskTextSelector:l,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g,dataURLOptions:m,inlineImages:v,recordCanvas:y,preserveWhiteSpace:N,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:b,onStylesheetLoad:I,stylesheetLoadTimeout:_,keepIframeSrcFn:$});B&&I(n,B)}},_),M}function TC(n,e){const{mirror:t=new Ng,blockClass:r="rr-block",blockSelector:i=null,maskTextClass:s="rr-mask",maskTextSelector:o=null,inlineStylesheet:l=!0,inlineImages:a=!1,recordCanvas:u=!1,maskAllInputs:c=!1,maskTextFn:d,maskInputFn:h,slimDOM:g=!1,dataURLOptions:m,preserveWhiteSpace:v,onSerialize:y,onIframeLoad:C,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:I,keepIframeSrcFn:_=()=>!1}=e;return rn(n,{doc:n,mirror:t,blockClass:r,blockSelector:i,maskTextClass:s,maskTextSelector:o,skipChild:!1,inlineStylesheet:l,maskInputOptions:c===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:c===!1?{password:!0}:c,maskTextFn:d,maskInputFn:h,slimDOMOptions:g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:g==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:g===!1?{}:g,dataURLOptions:m,inlineImages:a,recordCanvas:u,preserveWhiteSpace:v,onSerialize:y,onIframeLoad:C,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:I,keepIframeSrcFn:_,newlyAddedElement:!1})}function PC(n){return n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kC(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var wc={exports:{}},Ae=String,Bg=function(){return{isColorSupported:!1,reset:Ae,bold:Ae,dim:Ae,italic:Ae,underline:Ae,inverse:Ae,hidden:Ae,strikethrough:Ae,black:Ae,red:Ae,green:Ae,yellow:Ae,blue:Ae,magenta:Ae,cyan:Ae,white:Ae,gray:Ae,bgBlack:Ae,bgRed:Ae,bgGreen:Ae,bgYellow:Ae,bgBlue:Ae,bgMagenta:Ae,bgCyan:Ae,bgWhite:Ae}};wc.exports=Bg();wc.exports.createColors=Bg;var NC=wc.exports;const MC={},LC=Object.freeze(Object.defineProperty({__proto__:null,default:MC},Symbol.toStringTag,{value:"Module"})),Bt=kC(LC);let pd=NC,gd=Bt,ku=class zg extends Error{constructor(e,t,r,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,zg)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=pd.isColorSupported),gd&&e&&(t=gd(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,r.length),o=String(s).length,l,a;if(e){let{bold:u,gray:c,red:d}=pd.createColors(!0);l=h=>u(d(h)),a=h=>c(h)}else l=a=u=>u;return r.slice(i,s).map((u,c)=>{let d=i+1+c,h=" "+(" "+d).slice(-o)+" | ";if(d===this.line){let g=a(h.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+a(h)+u+`
 `+g+l("^")}return" "+a(h)+u}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var bc=ku;ku.default=ku;var $i={};$i.isClean=Symbol("isClean");$i.my=Symbol("my");const md={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function DC(n){return n[0].toUpperCase()+n.slice(1)}let Nu=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(r+i+s,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(r.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)r+=o}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let s=e.parent;if(r==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return md[r];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[r]<"u")return o.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let l="raw"+DC(r);this[l]?i=this[l](o,e):o.walk(a=>{if(i=a.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=md[r]),o.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let s=r.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var jg=Nu;Nu.default=Nu;let UC=jg;function Mu(n,e){new UC(e).stringify(n)}var oa=Mu;Mu.default=Mu;let{isClean:Ji,my:FC}=$i,BC=bc,zC=jg,jC=oa;function Lu(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],s=typeof i;r==="parent"&&s==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(o=>Lu(o,t)):(s==="object"&&i!==null&&(i=Lu(i)),t[r]=i)}return t}let Du=class{constructor(e={}){this.raws={},this[Ji]=!1,this[FC]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Lu(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new BC(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[Ji]){this[Ji]=!1;let e=this;for(;e=e.parent;)e[Ji]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,s=this.source.start.line;for(let o=0;o<e;o++)r[o]===`
`?(i=1,s+=1):i+=1;return{column:i,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),s=i.indexOf(e.word);s!==-1&&(t=this.positionInside(s,i),r=this.positionInside(s+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new zC().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))r[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)r[o]=l.toJSON(null,t);else if(o==="source"){let a=t.get(l.input);a==null&&(a=s,t.set(l.input,s),s++),r[o]={end:l.end,inputId:a,start:l.start}}else r[o]=l}return i&&(r.inputs=[...t.keys()].map(o=>o.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=jC){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let s in r)i[s]=r[s];return e.warn(t,i)}get proxyOf(){return this}};var aa=Du;Du.default=Du;let WC=aa,Uu=class extends WC{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var ua=Uu;Uu.default=Uu;let GC="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",VC=(n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},HC=(n=21)=>{let e="",t=n;for(;t--;)e+=GC[Math.random()*64|0];return e};var qC={nanoid:HC,customAlphabet:VC};let{SourceMapConsumer:yd,SourceMapGenerator:vd}=Bt,{existsSync:YC,readFileSync:KC}=Bt,{dirname:za,join:ZC}=Bt;function XC(n){return Fe?Fe.from(n,"base64").toString():window.atob(n)}let Fu=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=za(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new yd(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(i.test(e)||s.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return XC(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=za(e),YC(e))return this.mapFile=e,KC(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof yd)return vd.fromSourceMap(t).toString();if(t instanceof vd)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=ZC(za(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Wg=Fu;Fu.default=Fu;let{SourceMapConsumer:JC,SourceMapGenerator:QC}=Bt,{fileURLToPath:wd,pathToFileURL:Qi}=Bt,{isAbsolute:Bu,resolve:zu}=Bt,{nanoid:eI}=qC,ja=Bt,bd=bc,tI=Wg,Wa=Symbol("fromOffsetCache"),rI=!!(JC&&QC),Sd=!!(zu&&Bu),Ao=class{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Sd||/^\w+:\/\//.test(t.from)||Bu(t.from)?this.file=t.from:this.file=zu(t.from)),Sd&&rI){let r=new tI(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+eI(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let s,o,l;if(t&&typeof t=="object"){let u=t,c=r;if(typeof u.offset=="number"){let d=this.fromOffset(u.offset);t=d.line,r=d.col}else t=u.line,r=u.column;if(typeof c.offset=="number"){let d=this.fromOffset(c.offset);o=d.line,l=d.col}else o=c.line,l=c.column}else if(!r){let u=this.fromOffset(t);t=u.line,r=u.col}let a=this.origin(t,r,o,l);return a?s=new bd(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,i.plugin):s=new bd(e,o===void 0?t:{column:r,line:t},o===void 0?r:{column:l,line:o},this.css,this.file,i.plugin),s.input={column:r,endColumn:l,endLine:o,line:t,source:this.css},this.file&&(Qi&&(s.input.url=Qi(this.file).toString()),s.input.file=this.file),s}fromOffset(e){let t,r;if(this[Wa])r=this[Wa];else{let s=this.css.split(`
`);r=new Array(s.length);let o=0;for(let l=0,a=s.length;l<a;l++)r[l]=o,o+=s[l].length+1;this[Wa]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let s=r.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<r[o])s=o-1;else if(e>=r[o+1])i=o+1;else{i=o;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:zu(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof r=="number"&&(l=s.originalPositionFor({column:i,line:r}));let a;Bu(o.source)?a=Qi(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||Qi(this.map.mapFile));let u={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if(wd)u.file=wd(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=s.sourceContentFor(o.source);return c&&(u.source=c),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var la=Ao;Ao.default=Ao;ja&&ja.registerInput&&ja.registerInput(Ao);let{SourceMapConsumer:Gg,SourceMapGenerator:Qs}=Bt,{dirname:eo,relative:Vg,resolve:Hg,sep:qg}=Bt,{pathToFileURL:Ed}=Bt,nI=la,iI=!!(Gg&&Qs),sI=!!(eo&&Hg&&Vg&&qg),oI=class{constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||eo(e.file),i;this.mapOpts.sourcesContent===!1?(i=new Gg(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),sI&&iI&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Qs.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Qs({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Qs({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(l,a,u)=>{if(this.css+=l,a&&u!=="end"&&(i.generated.line=e,i.generated.column=t-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),s=l.match(/\n/g),s?(e+=s.length,o=l.lastIndexOf(`
`),t=l.length-o):t+=l.length,a&&u!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?eo(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=eo(Hg(r,this.mapOpts.annotation)));let i=Vg(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new nI(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Fe?Fe.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Ed){let r=Ed(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;qg==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};var Yg=oI;let aI=aa,ju=class extends aI{constructor(e){super(e),this.type="comment"}};var ca=ju;ju.default=ju;let{isClean:Kg,my:Zg}=$i,Xg=ua,Jg=ca,uI=aa,Qg,Sc,Ec,em;function tm(n){return n.map(e=>(e.nodes&&(e.nodes=tm(e.nodes)),delete e.source,e))}function rm(n){if(n[Kg]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)rm(e)}let ir=class nm extends uI{append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?r=>e[t]((i,...s)=>r(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let o of i)this.proxyOf.nodes.splice(r+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],r<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let l of s)this.proxyOf.nodes.splice(r,0,l);let o;for(let l in this.indexes)o=this.indexes[l],r<=o&&(this.indexes[l]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=tm(Qg(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Xg(e)]}else if(e.selector)e=[new Sc(e)];else if(e.name)e=[new Ec(e)];else if(e.text)e=[new Jg(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Zg]||nm.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Kg]&&rm(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};ir.registerParse=n=>{Qg=n};ir.registerRule=n=>{Sc=n};ir.registerAtRule=n=>{Ec=n};ir.registerRoot=n=>{em=n};var kr=ir;ir.default=ir;ir.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,Ec.prototype):n.type==="rule"?Object.setPrototypeOf(n,Sc.prototype):n.type==="decl"?Object.setPrototypeOf(n,Xg.prototype):n.type==="comment"?Object.setPrototypeOf(n,Jg.prototype):n.type==="root"&&Object.setPrototypeOf(n,em.prototype),n[Zg]=!0,n.nodes&&n.nodes.forEach(e=>{ir.rebuild(e)})};let lI=kr,im,sm,li=class extends lI{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new im(new sm,this,e).stringify()}};li.registerLazyResult=n=>{im=n};li.registerProcessor=n=>{sm=n};var Cc=li;li.default=li;let Wu=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var om=Wu;Wu.default=Wu;let cI=om,Gu=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new cI(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Ic=Gu;Gu.default=Gu;const Ga=39,Cd=34,es=92,Id=47,ts=10,Dn=32,rs=12,ns=9,is=13,fI=91,dI=93,hI=40,pI=41,gI=123,mI=125,yI=59,vI=42,wI=58,bI=64,ss=/[\t\n\f\r "#'()/;[\\\]{}]/g,os=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,SI=/.[\r\n"'(/\\]/,xd=/[\da-f]/i;var EI=function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,s,o,l,a,u,c,d,h,g,m,v=r.length,y=0,C=[],E=[];function b(){return y}function I(A){throw e.error("Unclosed "+A,y)}function _(){return E.length===0&&y>=v}function $(A){if(E.length)return E.pop();if(y>=v)return;let P=A?A.ignoreUnclosed:!1;switch(s=r.charCodeAt(y),s){case ts:case Dn:case ns:case is:case rs:{o=y;do o+=1,s=r.charCodeAt(o);while(s===Dn||s===ts||s===ns||s===is||s===rs);m=["space",r.slice(y,o)],y=o-1;break}case fI:case dI:case gI:case mI:case wI:case yI:case pI:{let N=String.fromCharCode(s);m=[N,N,y];break}case hI:{if(h=C.length?C.pop()[1]:"",g=r.charCodeAt(y+1),h==="url"&&g!==Ga&&g!==Cd&&g!==Dn&&g!==ts&&g!==ns&&g!==rs&&g!==is){o=y;do{if(c=!1,o=r.indexOf(")",o+1),o===-1)if(i||P){o=y;break}else I("bracket");for(d=o;r.charCodeAt(d-1)===es;)d-=1,c=!c}while(c);m=["brackets",r.slice(y,o+1),y,o],y=o}else o=r.indexOf(")",y+1),a=r.slice(y,o+1),o===-1||SI.test(a)?m=["(","(",y]:(m=["brackets",a,y,o],y=o);break}case Ga:case Cd:{l=s===Ga?"'":'"',o=y;do{if(c=!1,o=r.indexOf(l,o+1),o===-1)if(i||P){o=y+1;break}else I("string");for(d=o;r.charCodeAt(d-1)===es;)d-=1,c=!c}while(c);m=["string",r.slice(y,o+1),y,o],y=o;break}case bI:{ss.lastIndex=y+1,ss.test(r),ss.lastIndex===0?o=r.length-1:o=ss.lastIndex-2,m=["at-word",r.slice(y,o+1),y,o],y=o;break}case es:{for(o=y,u=!0;r.charCodeAt(o+1)===es;)o+=1,u=!u;if(s=r.charCodeAt(o+1),u&&s!==Id&&s!==Dn&&s!==ts&&s!==ns&&s!==is&&s!==rs&&(o+=1,xd.test(r.charAt(o)))){for(;xd.test(r.charAt(o+1));)o+=1;r.charCodeAt(o+1)===Dn&&(o+=1)}m=["word",r.slice(y,o+1),y,o],y=o;break}default:{s===Id&&r.charCodeAt(y+1)===vI?(o=r.indexOf("*/",y+2)+1,o===0&&(i||P?o=r.length:I("comment")),m=["comment",r.slice(y,o+1),y,o],y=o):(os.lastIndex=y+1,os.test(r),os.lastIndex===0?o=r.length-1:o=os.lastIndex-2,m=["word",r.slice(y,o+1),y,o],C.push(m),y=o);break}}return y++,m}function O(A){E.push(A)}return{back:O,endOfFile:_,nextToken:$,position:b}};let am=kr,_o=class extends am{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var xc=_o;_o.default=_o;am.registerAtRule(_o);let um=kr,lm,cm,hn=class extends um{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new lm(new cm,this,e).stringify()}};hn.registerLazyResult=n=>{lm=n};hn.registerProcessor=n=>{cm=n};var Oi=hn;hn.default=hn;um.registerRoot(hn);let ci={comma(n){return ci.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return ci.split(n,e)},split(n,e,t){let r=[],i="",s=!1,o=0,l=!1,a="",u=!1;for(let c of n)u?u=!1:c==="\\"?u=!0:l?c===a&&(l=!1):c==='"'||c==="'"?(l=!0,a=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(s=!0),s?(i!==""&&r.push(i.trim()),i="",s=!1):i+=c;return(t||i!=="")&&r.push(i.trim()),r}};var fm=ci;ci.default=ci;let dm=kr,CI=fm,Ro=class extends dm{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return CI.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var Ac=Ro;Ro.default=Ro;dm.registerRule(Ro);let II=ua,xI=EI,AI=ca,_I=xc,RI=Oi,Ad=Ac;const _d={empty:!0,space:!0};function $I(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}let OI=class{constructor(e){this.input=e,this.root=new RI,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new _I;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,s,o=!1,l=!1,a=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?u.push(r==="("?")":"]"):r==="{"&&u.length>0?u.push("}"):r===u[u.length-1]&&u.pop(),u.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){l=!0;break}else if(r==="}"){if(a.length>0){for(s=a.length-1,i=a[s];i&&i[0]==="space";)i=a[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(r+=1,r===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,s;for(let[o,l]of e.entries()){if(r=l,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=r}return!1}comment(e){let t=new AI;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=xI(this.input)}decl(e,t){let r=new II;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||$I(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){r.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(s=e[u],s[1].toLowerCase()==="!important"){r.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(r.raws.important=c);break}else if(s[1].toLowerCase()==="important"){let c=e.slice(0),d="";for(let h=u;h>0;h--){let g=c[h][0];if(d.trim().indexOf("!")===0&&g!=="space")break;d=c.pop()[1]+d}d.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=d,e=c)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(r.raws.between+=o.map(u=>u[1]).join(""),o=[]),this.raw(r,"value",o.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Ad;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),a=[],u=e;for(;u;){if(r=u[0],a.push(u),r==="("||r==="[")s||(s=u),o.push(r==="("?")":"]");else if(l&&i&&r==="{")s||(s=u),o.push("}");else if(o.length===0)if(r===";")if(i){this.decl(a,l);return}else break;else if(r==="{"){this.rule(a);return}else if(r==="}"){this.tokenizer.back(a.pop()),t=!0;break}else r===":"&&(i=!0);else r===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;a.length&&(u=a[a.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let s,o,l=r.length,a="",u=!0,c,d;for(let h=0;h<l;h+=1)s=r[h],o=s[0],o==="space"&&h===l-1&&!i?u=!1:o==="comment"?(d=r[h-1]?r[h-1][0]:"empty",c=r[h+1]?r[h+1][0]:"empty",!_d[d]&&!_d[c]?a.slice(-1)===","?u=!1:a+=s[1]:u=!1):a+=s[1];if(!u){let h=r.reduce((g,m)=>g+m[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new Ad;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var TI=OI;let PI=kr,kI=TI,NI=la;function $o(n,e){let t=new NI(n,e),r=new kI(t);try{r.parse()}catch(i){throw i}return r.root}var _c=$o;$o.default=$o;PI.registerParse($o);let{isClean:Gt,my:MI}=$i,LI=Yg,DI=oa,UI=kr,FI=Cc,Rd=Ic,BI=_c,zI=Oi;const jI={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},WI={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},GI={Once:!0,postcssPlugin:!0,prepare:!0},pn=0;function Un(n){return typeof n=="object"&&typeof n.then=="function"}function hm(n){let e=!1,t=jI[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,pn,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,pn,t+"Exit"]:[t,t+"Exit"]}function $d(n){let e;return n.type==="document"?e=["Document",pn,"DocumentExit"]:n.type==="root"?e=["Root",pn,"RootExit"]:e=hm(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}function Vu(n){return n[Gt]=!1,n.nodes&&n.nodes.forEach(e=>Vu(e)),n}let Hu={},gn=class pm{constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=Vu(t);else if(t instanceof pm||t instanceof Rd)i=Vu(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let s=BI;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(t,r)}catch(o){this.processed=!0,this.error=o}i&&!i[MI]&&UI.rebuild(i)}this.result=new Rd(e,i,r),this.helpers={...Hu,postcss:Hu,result:this.result},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!WI[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!GI[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Un(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Gt];){e[Gt]=!0;let t=[$d(e)];for(;t.length>0;){let r=this.visitTick(t);if(Un(r))try{await r}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>r(s,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return Un(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=DI;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new LI(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Un(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Gt];)e[Gt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Un(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(r.toProxy(),this.helpers)}catch(a){throw this.handleError(a,r)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!l[Gt]){l[Gt]=!0,e.push($d(l));return}t.iterator=0,delete r.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===pn){r.nodes&&r.nodes.length&&(r[Gt]=!0,t.iterator=r.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[Gt]=!0;let t=hm(e);for(let r of t)if(r===pn)e.nodes&&e.each(i=>{i[Gt]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};gn.registerPostcss=n=>{Hu=n};var gm=gn;gn.default=gn;zI.registerLazyResult(gn);FI.registerLazyResult(gn);let VI=Yg,HI=oa,qI=_c;const YI=Ic;let qu=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,s=HI;this.result=new YI(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new VI(s,i,this._opts,t);if(l.isMap()){let[a,u]=l.generate();a&&(this.result.css=a),u&&(this.result.map=u)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=qI;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var KI=qu;qu.default=qu;let ZI=KI,XI=gm,JI=Cc,QI=Oi,fi=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new ZI(this,e,t):new XI(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var ex=fi;fi.default=fi;QI.registerProcessor(fi);JI.registerProcessor(fi);let tx=ua,rx=Wg,nx=ca,ix=xc,sx=la,ox=Oi,ax=Ac;function di(n,e){if(Array.isArray(n))return n.map(i=>di(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let s={...i,__proto__:sx.prototype};s.map&&(s.map={...s.map,__proto__:rx.prototype}),e.push(s)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>di(i,e))),r.source){let{inputId:i,...s}=r.source;r.source=s,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new ox(r);if(r.type==="decl")return new tx(r);if(r.type==="rule")return new ax(r);if(r.type==="comment")return new nx(r);if(r.type==="atrule")return new ix(r);throw new Error("Unknown node type: "+n.type)}var ux=di;di.default=di;let lx=bc,mm=ua,cx=gm,fx=kr,Rc=ex,dx=oa,hx=ux,ym=Cc,px=om,vm=ca,wm=xc,gx=Ic,mx=la,yx=_c,vx=fm,bm=Ac,Sm=Oi,wx=aa;function ue(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new Rc(n)}ue.plugin=function(e,t){let r=!1;function i(...o){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),So.LANG&&So.LANG.startsWith("cn")&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new Rc().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,a){return ue([i(a)]).process(o,l)},i};ue.stringify=dx;ue.parse=yx;ue.fromJSON=hx;ue.list=vx;ue.comment=n=>new vm(n);ue.atRule=n=>new wm(n);ue.decl=n=>new mm(n);ue.rule=n=>new bm(n);ue.root=n=>new Sm(n);ue.document=n=>new ym(n);ue.CssSyntaxError=lx;ue.Declaration=mm;ue.Container=fx;ue.Processor=Rc;ue.Document=ym;ue.Comment=vm;ue.Warning=px;ue.AtRule=wm;ue.Result=gx;ue.Input=mx;ue.Rule=bm;ue.Root=Sm;ue.Node=wx;cx.registerPostcss(ue);var bx=ue;ue.default=ue;const Ne=PC(bx);Ne.stringify;Ne.fromJSON;Ne.plugin;Ne.parse;Ne.list;Ne.document;Ne.comment;Ne.atRule;Ne.rule;Ne.decl;Ne.root;Ne.CssSyntaxError;Ne.Declaration;Ne.Container;Ne.Processor;Ne.Document;Ne.Comment;Ne.Warning;Ne.AtRule;Ne.Result;Ne.Input;Ne.Rule;Ne.Root;Ne.Node;var Sx=Object.defineProperty,Ex=(n,e,t)=>e in n?Sx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bt=(n,e,t)=>Ex(n,typeof e!="symbol"?e+"":e,t);function Cx(n){return n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ix(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var $c={exports:{}},_e=String,Em=function(){return{isColorSupported:!1,reset:_e,bold:_e,dim:_e,italic:_e,underline:_e,inverse:_e,hidden:_e,strikethrough:_e,black:_e,red:_e,green:_e,yellow:_e,blue:_e,magenta:_e,cyan:_e,white:_e,gray:_e,bgBlack:_e,bgRed:_e,bgGreen:_e,bgYellow:_e,bgBlue:_e,bgMagenta:_e,bgCyan:_e,bgWhite:_e}};$c.exports=Em();$c.exports.createColors=Em;var xx=$c.exports;const Ax={},_x=Object.freeze(Object.defineProperty({__proto__:null,default:Ax},Symbol.toStringTag,{value:"Module"})),zt=Ix(_x);let Od=xx,Td=zt,Yu=class Cm extends Error{constructor(e,t,r,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Cm)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Od.isColorSupported),Td&&e&&(t=Td(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,r.length),o=String(s).length,l,a;if(e){let{bold:u,gray:c,red:d}=Od.createColors(!0);l=h=>u(d(h)),a=h=>c(h)}else l=a=u=>u;return r.slice(i,s).map((u,c)=>{let d=i+1+c,h=" "+(" "+d).slice(-o)+" | ";if(d===this.line){let g=a(h.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+a(h)+u+`
 `+g+l("^")}return" "+a(h)+u}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Oc=Yu;Yu.default=Yu;var Ti={};Ti.isClean=Symbol("isClean");Ti.my=Symbol("my");const Pd={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function Rx(n){return n[0].toUpperCase()+n.slice(1)}let Ku=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(r+i+s,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(r.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)r+=o}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let s=e.parent;if(r==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return Pd[r];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[r]<"u")return o.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let l="raw"+Rx(r);this[l]?i=this[l](o,e):o.walk(a=>{if(i=a.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=Pd[r]),o.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let s=r.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Im=Ku;Ku.default=Ku;let $x=Im;function Zu(n,e){new $x(e).stringify(n)}var fa=Zu;Zu.default=Zu;let{isClean:as,my:Ox}=Ti,Tx=Oc,Px=Im,kx=fa;function Xu(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],s=typeof i;r==="parent"&&s==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(o=>Xu(o,t)):(s==="object"&&i!==null&&(i=Xu(i)),t[r]=i)}return t}let Ju=class{constructor(e={}){this.raws={},this[as]=!1,this[Ox]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Xu(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new Tx(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[as]){this[as]=!1;let e=this;for(;e=e.parent;)e[as]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,s=this.source.start.line;for(let o=0;o<e;o++)r[o]===`
`?(i=1,s+=1):i+=1;return{column:i,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),s=i.indexOf(e.word);s!==-1&&(t=this.positionInside(s,i),r=this.positionInside(s+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new Px().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))r[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)r[o]=l.toJSON(null,t);else if(o==="source"){let a=t.get(l.input);a==null&&(a=s,t.set(l.input,s),s++),r[o]={end:l.end,inputId:a,start:l.start}}else r[o]=l}return i&&(r.inputs=[...t.keys()].map(o=>o.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=kx){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let s in r)i[s]=r[s];return e.warn(t,i)}get proxyOf(){return this}};var da=Ju;Ju.default=Ju;let Nx=da,Qu=class extends Nx{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var ha=Qu;Qu.default=Qu;let Mx="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Lx=(n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},Dx=(n=21)=>{let e="",t=n;for(;t--;)e+=Mx[Math.random()*64|0];return e};var Ux={nanoid:Dx,customAlphabet:Lx};let{SourceMapConsumer:kd,SourceMapGenerator:Nd}=zt,{existsSync:Fx,readFileSync:Bx}=zt,{dirname:Va,join:zx}=zt;function jx(n){return Fe?Fe.from(n,"base64").toString():window.atob(n)}let el=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Va(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new kd(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(i.test(e)||s.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return jx(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=Va(e),Fx(e))return this.mapFile=e,Bx(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof kd)return Nd.fromSourceMap(t).toString();if(t instanceof Nd)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=zx(Va(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var xm=el;el.default=el;let{SourceMapConsumer:Wx,SourceMapGenerator:Gx}=zt,{fileURLToPath:Md,pathToFileURL:us}=zt,{isAbsolute:tl,resolve:rl}=zt,{nanoid:Vx}=Ux,Ha=zt,Ld=Oc,Hx=xm,qa=Symbol("fromOffsetCache"),qx=!!(Wx&&Gx),Dd=!!(rl&&tl),Oo=class{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Dd||/^\w+:\/\//.test(t.from)||tl(t.from)?this.file=t.from:this.file=rl(t.from)),Dd&&qx){let r=new Hx(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+Vx(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let s,o,l;if(t&&typeof t=="object"){let u=t,c=r;if(typeof u.offset=="number"){let d=this.fromOffset(u.offset);t=d.line,r=d.col}else t=u.line,r=u.column;if(typeof c.offset=="number"){let d=this.fromOffset(c.offset);o=d.line,l=d.col}else o=c.line,l=c.column}else if(!r){let u=this.fromOffset(t);t=u.line,r=u.col}let a=this.origin(t,r,o,l);return a?s=new Ld(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,i.plugin):s=new Ld(e,o===void 0?t:{column:r,line:t},o===void 0?r:{column:l,line:o},this.css,this.file,i.plugin),s.input={column:r,endColumn:l,endLine:o,line:t,source:this.css},this.file&&(us&&(s.input.url=us(this.file).toString()),s.input.file=this.file),s}fromOffset(e){let t,r;if(this[qa])r=this[qa];else{let s=this.css.split(`
`);r=new Array(s.length);let o=0;for(let l=0,a=s.length;l<a;l++)r[l]=o,o+=s[l].length+1;this[qa]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let s=r.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<r[o])s=o-1;else if(e>=r[o+1])i=o+1;else{i=o;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:rl(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof r=="number"&&(l=s.originalPositionFor({column:i,line:r}));let a;tl(o.source)?a=us(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||us(this.map.mapFile));let u={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if(Md)u.file=Md(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=s.sourceContentFor(o.source);return c&&(u.source=c),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var pa=Oo;Oo.default=Oo;Ha&&Ha.registerInput&&Ha.registerInput(Oo);let{SourceMapConsumer:Am,SourceMapGenerator:to}=zt,{dirname:ro,relative:_m,resolve:Rm,sep:$m}=zt,{pathToFileURL:Ud}=zt,Yx=pa,Kx=!!(Am&&to),Zx=!!(ro&&Rm&&_m&&$m),Xx=class{constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||ro(e.file),i;this.mapOpts.sourcesContent===!1?(i=new Am(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Zx&&Kx&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=to.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new to({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new to({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(l,a,u)=>{if(this.css+=l,a&&u!=="end"&&(i.generated.line=e,i.generated.column=t-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),s=l.match(/\n/g),s?(e+=s.length,o=l.lastIndexOf(`
`),t=l.length-o):t+=l.length,a&&u!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?ro(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=ro(Rm(r,this.mapOpts.annotation)));let i=_m(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Yx(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Fe?Fe.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Ud){let r=Ud(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;$m==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};var Om=Xx;let Jx=da,nl=class extends Jx{constructor(e){super(e),this.type="comment"}};var ga=nl;nl.default=nl;let{isClean:Tm,my:Pm}=Ti,km=ha,Nm=ga,Qx=da,Mm,Tc,Pc,Lm;function Dm(n){return n.map(e=>(e.nodes&&(e.nodes=Dm(e.nodes)),delete e.source,e))}function Um(n){if(n[Tm]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)Um(e)}let sr=class Fm extends Qx{append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?r=>e[t]((i,...s)=>r(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let o of i)this.proxyOf.nodes.splice(r+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],r<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let l of s)this.proxyOf.nodes.splice(r,0,l);let o;for(let l in this.indexes)o=this.indexes[l],r<=o&&(this.indexes[l]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Dm(Mm(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new km(e)]}else if(e.selector)e=[new Tc(e)];else if(e.name)e=[new Pc(e)];else if(e.text)e=[new Nm(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Pm]||Fm.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Tm]&&Um(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};sr.registerParse=n=>{Mm=n};sr.registerRule=n=>{Tc=n};sr.registerAtRule=n=>{Pc=n};sr.registerRoot=n=>{Lm=n};var Nr=sr;sr.default=sr;sr.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,Pc.prototype):n.type==="rule"?Object.setPrototypeOf(n,Tc.prototype):n.type==="decl"?Object.setPrototypeOf(n,km.prototype):n.type==="comment"?Object.setPrototypeOf(n,Nm.prototype):n.type==="root"&&Object.setPrototypeOf(n,Lm.prototype),n[Pm]=!0,n.nodes&&n.nodes.forEach(e=>{sr.rebuild(e)})};let eA=Nr,Bm,zm,hi=class extends eA{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Bm(new zm,this,e).stringify()}};hi.registerLazyResult=n=>{Bm=n};hi.registerProcessor=n=>{zm=n};var kc=hi;hi.default=hi;let il=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var jm=il;il.default=il;let tA=jm,sl=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new tA(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Nc=sl;sl.default=sl;const Ya=39,Fd=34,ls=92,Bd=47,cs=10,Fn=32,fs=12,ds=9,hs=13,rA=91,nA=93,iA=40,sA=41,oA=123,aA=125,uA=59,lA=42,cA=58,fA=64,ps=/[\t\n\f\r "#'()/;[\\\]{}]/g,gs=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,dA=/.[\r\n"'(/\\]/,zd=/[\da-f]/i;var hA=function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,s,o,l,a,u,c,d,h,g,m,v=r.length,y=0,C=[],E=[];function b(){return y}function I(A){throw e.error("Unclosed "+A,y)}function _(){return E.length===0&&y>=v}function $(A){if(E.length)return E.pop();if(y>=v)return;let P=A?A.ignoreUnclosed:!1;switch(s=r.charCodeAt(y),s){case cs:case Fn:case ds:case hs:case fs:{o=y;do o+=1,s=r.charCodeAt(o);while(s===Fn||s===cs||s===ds||s===hs||s===fs);m=["space",r.slice(y,o)],y=o-1;break}case rA:case nA:case oA:case aA:case cA:case uA:case sA:{let N=String.fromCharCode(s);m=[N,N,y];break}case iA:{if(h=C.length?C.pop()[1]:"",g=r.charCodeAt(y+1),h==="url"&&g!==Ya&&g!==Fd&&g!==Fn&&g!==cs&&g!==ds&&g!==fs&&g!==hs){o=y;do{if(c=!1,o=r.indexOf(")",o+1),o===-1)if(i||P){o=y;break}else I("bracket");for(d=o;r.charCodeAt(d-1)===ls;)d-=1,c=!c}while(c);m=["brackets",r.slice(y,o+1),y,o],y=o}else o=r.indexOf(")",y+1),a=r.slice(y,o+1),o===-1||dA.test(a)?m=["(","(",y]:(m=["brackets",a,y,o],y=o);break}case Ya:case Fd:{l=s===Ya?"'":'"',o=y;do{if(c=!1,o=r.indexOf(l,o+1),o===-1)if(i||P){o=y+1;break}else I("string");for(d=o;r.charCodeAt(d-1)===ls;)d-=1,c=!c}while(c);m=["string",r.slice(y,o+1),y,o],y=o;break}case fA:{ps.lastIndex=y+1,ps.test(r),ps.lastIndex===0?o=r.length-1:o=ps.lastIndex-2,m=["at-word",r.slice(y,o+1),y,o],y=o;break}case ls:{for(o=y,u=!0;r.charCodeAt(o+1)===ls;)o+=1,u=!u;if(s=r.charCodeAt(o+1),u&&s!==Bd&&s!==Fn&&s!==cs&&s!==ds&&s!==hs&&s!==fs&&(o+=1,zd.test(r.charAt(o)))){for(;zd.test(r.charAt(o+1));)o+=1;r.charCodeAt(o+1)===Fn&&(o+=1)}m=["word",r.slice(y,o+1),y,o],y=o;break}default:{s===Bd&&r.charCodeAt(y+1)===lA?(o=r.indexOf("*/",y+2)+1,o===0&&(i||P?o=r.length:I("comment")),m=["comment",r.slice(y,o+1),y,o],y=o):(gs.lastIndex=y+1,gs.test(r),gs.lastIndex===0?o=r.length-1:o=gs.lastIndex-2,m=["word",r.slice(y,o+1),y,o],C.push(m),y=o);break}}return y++,m}function O(A){E.push(A)}return{back:O,endOfFile:_,nextToken:$,position:b}};let Wm=Nr,To=class extends Wm{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Mc=To;To.default=To;Wm.registerAtRule(To);let Gm=Nr,Vm,Hm,mn=class extends Gm{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new Vm(new Hm,this,e).stringify()}};mn.registerLazyResult=n=>{Vm=n};mn.registerProcessor=n=>{Hm=n};var Pi=mn;mn.default=mn;Gm.registerRoot(mn);let pi={comma(n){return pi.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return pi.split(n,e)},split(n,e,t){let r=[],i="",s=!1,o=0,l=!1,a="",u=!1;for(let c of n)u?u=!1:c==="\\"?u=!0:l?c===a&&(l=!1):c==='"'||c==="'"?(l=!0,a=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(s=!0),s?(i!==""&&r.push(i.trim()),i="",s=!1):i+=c;return(t||i!=="")&&r.push(i.trim()),r}};var qm=pi;pi.default=pi;let Ym=Nr,pA=qm,Po=class extends Ym{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return pA.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var Lc=Po;Po.default=Po;Ym.registerRule(Po);let gA=ha,mA=hA,yA=ga,vA=Mc,wA=Pi,jd=Lc;const Wd={empty:!0,space:!0};function bA(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}let SA=class{constructor(e){this.input=e,this.root=new wA,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new vA;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,s,o=!1,l=!1,a=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?u.push(r==="("?")":"]"):r==="{"&&u.length>0?u.push("}"):r===u[u.length-1]&&u.pop(),u.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){l=!0;break}else if(r==="}"){if(a.length>0){for(s=a.length-1,i=a[s];i&&i[0]==="space";)i=a[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(r+=1,r===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,s;for(let[o,l]of e.entries()){if(r=l,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=r}return!1}comment(e){let t=new yA;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=mA(this.input)}decl(e,t){let r=new gA;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||bA(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){r.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(s=e[u],s[1].toLowerCase()==="!important"){r.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(r.raws.important=c);break}else if(s[1].toLowerCase()==="important"){let c=e.slice(0),d="";for(let h=u;h>0;h--){let g=c[h][0];if(d.trim().indexOf("!")===0&&g!=="space")break;d=c.pop()[1]+d}d.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=d,e=c)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(r.raws.between+=o.map(u=>u[1]).join(""),o=[]),this.raw(r,"value",o.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new jd;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),a=[],u=e;for(;u;){if(r=u[0],a.push(u),r==="("||r==="[")s||(s=u),o.push(r==="("?")":"]");else if(l&&i&&r==="{")s||(s=u),o.push("}");else if(o.length===0)if(r===";")if(i){this.decl(a,l);return}else break;else if(r==="{"){this.rule(a);return}else if(r==="}"){this.tokenizer.back(a.pop()),t=!0;break}else r===":"&&(i=!0);else r===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;a.length&&(u=a[a.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let s,o,l=r.length,a="",u=!0,c,d;for(let h=0;h<l;h+=1)s=r[h],o=s[0],o==="space"&&h===l-1&&!i?u=!1:o==="comment"?(d=r[h-1]?r[h-1][0]:"empty",c=r[h+1]?r[h+1][0]:"empty",!Wd[d]&&!Wd[c]?a.slice(-1)===","?u=!1:a+=s[1]:u=!1):a+=s[1];if(!u){let h=r.reduce((g,m)=>g+m[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new jd;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var EA=SA;let CA=Nr,IA=EA,xA=pa;function ko(n,e){let t=new xA(n,e),r=new IA(t);try{r.parse()}catch(i){throw i}return r.root}var Dc=ko;ko.default=ko;CA.registerParse(ko);let{isClean:Vt,my:AA}=Ti,_A=Om,RA=fa,$A=Nr,OA=kc,Gd=Nc,TA=Dc,PA=Pi;const kA={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},NA={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},MA={Once:!0,postcssPlugin:!0,prepare:!0},yn=0;function Bn(n){return typeof n=="object"&&typeof n.then=="function"}function Km(n){let e=!1,t=kA[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,yn,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,yn,t+"Exit"]:[t,t+"Exit"]}function Vd(n){let e;return n.type==="document"?e=["Document",yn,"DocumentExit"]:n.type==="root"?e=["Root",yn,"RootExit"]:e=Km(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}function ol(n){return n[Vt]=!1,n.nodes&&n.nodes.forEach(e=>ol(e)),n}let al={},vn=class Zm{constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=ol(t);else if(t instanceof Zm||t instanceof Gd)i=ol(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let s=TA;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(t,r)}catch(o){this.processed=!0,this.error=o}i&&!i[AA]&&$A.rebuild(i)}this.result=new Gd(e,i,r),this.helpers={...al,postcss:al,result:this.result},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!NA[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!MA[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Bn(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Vt];){e[Vt]=!0;let t=[Vd(e)];for(;t.length>0;){let r=this.visitTick(t);if(Bn(r))try{await r}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>r(s,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return Bn(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=RA;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new _A(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Bn(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Vt];)e[Vt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Bn(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(r.toProxy(),this.helpers)}catch(a){throw this.handleError(a,r)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!l[Vt]){l[Vt]=!0,e.push(Vd(l));return}t.iterator=0,delete r.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===yn){r.nodes&&r.nodes.length&&(r[Vt]=!0,t.iterator=r.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[Vt]=!0;let t=Km(e);for(let r of t)if(r===yn)e.nodes&&e.each(i=>{i[Vt]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};vn.registerPostcss=n=>{al=n};var Xm=vn;vn.default=vn;PA.registerLazyResult(vn);OA.registerLazyResult(vn);let LA=Om,DA=fa,UA=Dc;const FA=Nc;let ul=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,s=DA;this.result=new FA(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new LA(s,i,this._opts,t);if(l.isMap()){let[a,u]=l.generate();a&&(this.result.css=a),u&&(this.result.map=u)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=UA;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var BA=ul;ul.default=ul;let zA=BA,jA=Xm,WA=kc,GA=Pi,gi=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new zA(this,e,t):new jA(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var VA=gi;gi.default=gi;GA.registerProcessor(gi);WA.registerProcessor(gi);let HA=ha,qA=xm,YA=ga,KA=Mc,ZA=pa,XA=Pi,JA=Lc;function mi(n,e){if(Array.isArray(n))return n.map(i=>mi(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let s={...i,__proto__:ZA.prototype};s.map&&(s.map={...s.map,__proto__:qA.prototype}),e.push(s)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>mi(i,e))),r.source){let{inputId:i,...s}=r.source;r.source=s,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new XA(r);if(r.type==="decl")return new HA(r);if(r.type==="rule")return new JA(r);if(r.type==="comment")return new YA(r);if(r.type==="atrule")return new KA(r);throw new Error("Unknown node type: "+n.type)}var QA=mi;mi.default=mi;let e_=Oc,Jm=ha,t_=Xm,r_=Nr,Uc=VA,n_=fa,i_=QA,Qm=kc,s_=jm,ey=ga,ty=Mc,o_=Nc,a_=pa,u_=Dc,l_=qm,ry=Lc,ny=Pi,c_=da;function le(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new Uc(n)}le.plugin=function(e,t){let r=!1;function i(...o){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),So.LANG&&So.LANG.startsWith("cn")&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new Uc().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,a){return le([i(a)]).process(o,l)},i};le.stringify=n_;le.parse=u_;le.fromJSON=i_;le.list=l_;le.comment=n=>new ey(n);le.atRule=n=>new ty(n);le.decl=n=>new Jm(n);le.rule=n=>new ry(n);le.root=n=>new ny(n);le.document=n=>new Qm(n);le.CssSyntaxError=e_;le.Declaration=Jm;le.Container=r_;le.Processor=Uc;le.Document=Qm;le.Comment=ey;le.Warning=s_;le.AtRule=ty;le.Result=o_;le.Input=a_;le.Rule=ry;le.Root=ny;le.Node=c_;t_.registerPostcss(le);var f_=le;le.default=le;const Me=Cx(f_);Me.stringify;Me.fromJSON;Me.plugin;Me.parse;Me.list;Me.document;Me.comment;Me.atRule;Me.rule;Me.decl;Me.root;Me.CssSyntaxError;Me.Declaration;Me.Container;Me.Processor;Me.Document;Me.Comment;Me.Warning;Me.AtRule;Me.Result;Me.Input;Me.Rule;Me.Root;Me.Node;let d_=class iy{constructor(...e){bt(this,"parentElement",null),bt(this,"parentNode",null),bt(this,"ownerDocument"),bt(this,"firstChild",null),bt(this,"lastChild",null),bt(this,"previousSibling",null),bt(this,"nextSibling",null),bt(this,"ELEMENT_NODE",1),bt(this,"TEXT_NODE",3),bt(this,"nodeType"),bt(this,"nodeName"),bt(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof iy){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};const Hd={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},qd={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ms={},h_=()=>!!globalThis.Zone;function Fc(n){if(ms[n])return ms[n];const e=globalThis[n],t=e.prototype,r=n in Hd?Hd[n]:void 0,i=!!(r&&r.every(l=>{var a,u;return!!((u=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&u.toString().includes("[native code]"))})),s=n in qd?qd[n]:void 0,o=!!(s&&s.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(i&&o&&!h_())return ms[n]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const u=a[n].prototype;return document.body.removeChild(l),u?ms[n]=u:t}catch{return t}}const Ka={};function br(n,e,t){var r;const i=`${n}.${String(t)}`;if(Ka[i])return Ka[i].call(e);const s=Fc(n),o=(r=Object.getOwnPropertyDescriptor(s,t))==null?void 0:r.get;return o?(Ka[i]=o,o.call(e)):e[t]}const Za={};function sy(n,e,t){const r=`${n}.${String(t)}`;if(Za[r])return Za[r].bind(e);const s=Fc(n)[t];return typeof s!="function"?e[t]:(Za[r]=s,s.bind(e))}function p_(n){return br("Node",n,"childNodes")}function g_(n){return br("Node",n,"parentNode")}function m_(n){return br("Node",n,"parentElement")}function y_(n){return br("Node",n,"textContent")}function v_(n,e){return sy("Node",n,"contains")(e)}function w_(n){return sy("Node",n,"getRootNode")()}function b_(n){return!n||!("host"in n)?null:br("ShadowRoot",n,"host")}function S_(n){return n.styleSheets}function E_(n){return!n||!("shadowRoot"in n)?null:br("Element",n,"shadowRoot")}function C_(n,e){return br("Element",n,"querySelector")(e)}function I_(n,e){return br("Element",n,"querySelectorAll")(e)}function oy(){return Fc("MutationObserver").constructor}const ee={childNodes:p_,parentNode:g_,parentElement:m_,textContent:y_,contains:v_,getRootNode:w_,host:b_,styleSheets:S_,shadowRoot:E_,querySelector:C_,querySelectorAll:I_,mutationObserver:oy};function at(n,e,t=document){const r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}const Xr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ll={map:{},getId(){return console.error(Xr),-1},getNode(){return console.error(Xr),null},removeNodeFromMap(){console.error(Xr)},has(){return console.error(Xr),!1},reset(){console.error(Xr)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ll=new Proxy(ll,{get(n,e,t){return e==="map"&&console.error(Xr),Reflect.get(n,e,t)}}));function wn(n,e,t={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&t.leading===!1&&(i=o);const l=e-(o-i),a=this;l<=0||l>e?(r&&(clearTimeout(r),r=null),i=o,n.apply(a,s)):!r&&t.trailing!==!1&&(r=setTimeout(()=>{i=t.leading===!1?0:Date.now(),r=null,n.apply(a,s)},l))}}function ki(n,e,t,r,i=window){const s=i.Object.getOwnPropertyDescriptor(n,e);return i.Object.defineProperty(n,e,r?t:{set(o){setTimeout(()=>{t.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>ki(n,e,s||{},!0)}function Mr(n,e,t){try{if(!(e in n))return()=>{};const r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}let yi=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(yi=()=>new Date().getTime());function Bc(n){var e,t,r,i;const s=n.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:s.documentElement.scrollLeft||s?.body&&((e=ee.parentElement(s.body))==null?void 0:e.scrollLeft)||((t=s?.body)==null?void 0:t.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:s?.documentElement.scrollTop||s?.body&&((r=ee.parentElement(s.body))==null?void 0:r.scrollTop)||((i=s?.body)==null?void 0:i.scrollTop)||0}}function zc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function jc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Wc(n){return n?n.nodeType===n.ELEMENT_NODE?n:ee.parentElement(n):null}function ut(n,e,t,r){if(!n)return!1;const i=Wc(n);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||r&&i.closest("."+e)!==null)return!0}else if(xo(i,e,r))return!0}catch{}return!!(t&&(i.matches(t)||r&&i.closest(t)!==null))}function ay(n,e){return e.getId(n)!==-1}function no(n,e,t){return n.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(n)===ui}function Gc(n,e){if(Zn(n))return!1;const t=e.getId(n);if(!e.has(t))return!0;const r=ee.parentNode(n);return r&&r.nodeType===n.DOCUMENT_NODE?!1:r?Gc(r,e):!0}function No(n){return!!n.changedTouches}function uy(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function x_(n){const e={},t=(i,s)=>{const o={value:i,parent:s,children:[]};return e[i.node.id]=o,o},r=[];for(const i of n){const{nextId:s,parentId:o}=i;if(s&&s in e){const l=e[s];if(l.parent){const a=l.parent.children.indexOf(l);l.parent.children.splice(a,0,t(i,l.parent))}else{const a=r.indexOf(l);r.splice(a,0,t(i,null))}continue}if(o in e){const l=e[o];l.children.push(t(i,l));continue}r.push(t(i,null))}return r}function ly(n,e){e(n.value);for(let t=n.children.length-1;t>=0;t--)ly(n.children[t],e)}function Vc(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}function Hc(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}function cy(n,e){var t,r;const i=(r=(t=n.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.frameElement;if(!i||i===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};const s=i.getBoundingClientRect(),o=cy(i,e),l=s.height/i.clientHeight;return{x:s.x*o.relativeScale+o.x,y:s.y*o.relativeScale+o.y,relativeScale:l,absoluteScale:o.absoluteScale*l}}function Mo(n){return n?n instanceof d_&&"shadowRoot"in n?!!n.shadowRoot:!!ee.shadowRoot(n):!1}function fy(n,e){const t=n[e[0]];return e.length===1?t:fy(t.cssRules[e[1]].cssRules,e.slice(2))}function A_(n){const e=[...n],t=e.pop();return{positions:e,index:t}}function __(n){const e=new Set,t=[];for(let r=n.length;r--;){const i=n[r];e.has(i.id)||(t.push(i),e.add(i.id))}return t}let dy=class{constructor(){k(this,"id",1),k(this,"styleIDMap",new WeakMap),k(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function qc(n){var e;let t=null;return"getRootNode"in n&&((e=ee.getRootNode(n))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ee.host(ee.getRootNode(n))&&(t=ee.host(ee.getRootNode(n))),t}function hy(n){let e=n,t;for(;t=qc(e);)e=t;return e}function py(n){const e=n.ownerDocument;if(!e)return!1;const t=hy(n);return ee.contains(e,t)}function Yc(n){const e=n.ownerDocument;return e?ee.contains(e,n)||py(n):!1}const Kc=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:dy,get _mirror(){return ll},closestElementOfNode:Wc,getBaseDimension:cy,getNestedRule:fy,getPositionsAndIndex:A_,getRootShadowHost:hy,getShadowHost:qc,getWindowHeight:zc,getWindowScroll:Bc,getWindowWidth:jc,hasShadowRoot:Mo,hookSetter:ki,inDom:Yc,isAncestorRemoved:Gc,isBlocked:ut,isIgnored:no,isSerialized:ay,isSerializedIframe:Vc,isSerializedStylesheet:Hc,iterateResolveTree:ly,legacy_isTouchEvent:No,get nowTimestamp(){return yi},on:at,patch:Mr,polyfill:uy,queueToResolveTrees:x_,shadowHostInDom:py,throttle:wn,uniqueTextMutations:__},Symbol.toStringTag,{value:"Module"}));var se=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(se||{}),re=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(re||{}),pt=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(pt||{}),Qt=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(Qt||{}),bn=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(bn||{}),Jr=(n=>(n[n.Play=0]="Play",n[n.Pause=1]="Pause",n[n.Seeked=2]="Seeked",n[n.VolumeChange=3]="VolumeChange",n[n.RateChange=4]="RateChange",n))(Jr||{}),gy=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(gy||{});function Yd(n){return"__ln"in n}class R_{constructor(){k(this,"length",0),k(this,"head",null),k(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=t?.next||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Yd(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&Yd(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Kd=(n,e)=>`${n}@${e}`;class $_{constructor(){k(this,"frozen",!1),k(this,"locked",!1),k(this,"texts",[]),k(this,"attributes",[]),k(this,"attributeMap",new WeakMap),k(this,"removes",[]),k(this,"mapRemoves",[]),k(this,"movedMap",{}),k(this,"addedSet",new Set),k(this,"movedSet",new Set),k(this,"droppedSet",new Set),k(this,"removesSubTreeCache",new Set),k(this,"mutationCb"),k(this,"blockClass"),k(this,"blockSelector"),k(this,"maskTextClass"),k(this,"maskTextSelector"),k(this,"inlineStylesheet"),k(this,"maskInputOptions"),k(this,"maskTextFn"),k(this,"maskInputFn"),k(this,"keepIframeSrcFn"),k(this,"recordCanvas"),k(this,"inlineImages"),k(this,"slimDOMOptions"),k(this,"dataURLOptions"),k(this,"doc"),k(this,"mirror"),k(this,"iframeManager"),k(this,"stylesheetManager"),k(this,"shadowDomManager"),k(this,"canvasManager"),k(this,"processedNodeManager"),k(this,"unattachedDoc"),k(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),k(this,"emit",()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,r=new R_,i=a=>{let u=a,c=ui;for(;c===ui;)u=u&&u.nextSibling,c=u&&this.mirror.getId(u);return c},s=a=>{const u=ee.parentNode(a);if(!u||!Yc(a))return;let c=!1;if(a.nodeType===Node.TEXT_NODE){const m=u.tagName;if(m==="TEXTAREA")return;m==="STYLE"&&this.addedSet.has(u)&&(c=!0)}const d=Zn(u)?this.mirror.getId(qc(a)):this.mirror.getId(u),h=i(a);if(d===-1||h===-1)return r.addNode(a);const g=rn(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:m=>{Vc(m,this.mirror)&&this.iframeManager.addIframe(m),Hc(m,this.mirror)&&this.stylesheetManager.trackLinkElement(m),Mo(a)&&this.shadowDomManager.addShadowRoot(ee.shadowRoot(a),this.doc)},onIframeLoad:(m,v)=>{this.iframeManager.attachIframe(m,v),this.shadowDomManager.observeAttachShadow(m)},onStylesheetLoad:(m,v)=>{this.stylesheetManager.attachLinkElement(m,v)},cssCaptured:c});g&&(e.push({parentId:d,nextId:h,node:g}),t.add(g.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)Zd(this.removesSubTreeCache,a,this.mirror)&&!this.movedSet.has(ee.parentNode(a))||s(a);for(const a of this.addedSet)!Xd(this.droppedSet,a)&&!Zd(this.removesSubTreeCache,a,this.mirror)||Xd(this.movedSet,a)?s(a):this.droppedSet.add(a);let o=null;for(;r.length;){let a=null;if(o){const u=this.mirror.getId(ee.parentNode(o.value)),c=i(o.value);u!==-1&&c!==-1&&(a=o)}if(!a){let u=r.tail;for(;u;){const c=u;if(u=u.previous,c){const d=this.mirror.getId(ee.parentNode(c.value));if(i(c.value)===-1)continue;if(d!==-1){a=c;break}else{const g=c.value,m=ee.parentNode(g);if(m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const v=ee.host(m);if(this.mirror.getId(v)!==-1){a=c;break}}}}}}if(!a){for(;r.head;)r.removeNode(r.head.value);break}o=a.previous,r.removeNode(a.value),s(a.value)}const l={texts:this.texts.map(a=>{const u=a.node,c=ee.parentNode(u);return c&&c.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(c),{id:this.mirror.getId(u),value:a.value}}).filter(a=>!t.has(a.id)).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>{const{attributes:u}=a;if(typeof u.style=="string"){const c=JSON.stringify(a.styleDiff),d=JSON.stringify(a._unchangedStyles);c.length<u.style.length&&(c+d).split("var(").length===u.style.split("var(").length&&(u.style=a.styleDiff)}return{id:this.mirror.getId(a.node),attributes:u}}).filter(a=>!t.has(a.id)).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:e};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(l))}),k(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t));const r=Array.from(ee.childNodes(e),i=>ee.textContent(i)||"").join("");t.attributes.value=Eo({element:e,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:Co(e),value:r,maskInputFn:this.maskInputFn})}),k(this,"processMutation",e=>{if(!no(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=ee.textContent(e.target);!ut(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:Fg(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,Wc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){const o=Co(t);i=Eo({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:o,value:i,maskInputFn:this.maskInputFn})}if(ut(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)r="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),r==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!Ug(t.tagName,r))if(s.attributes[r]=Dg(this.doc,Or(t.tagName),Or(r),i),r==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const l of Array.from(t.style)){const a=t.style.getPropertyValue(l),u=t.style.getPropertyPriority(l);a!==o.style.getPropertyValue(l)||u!==o.style.getPropertyPriority(l)?u===""?s.styleDiff[l]=a:s.styleDiff[l]=[a,u]:s._unchangedStyles[l]=[a,u]}for(const l of Array.from(o.style))t.style.getPropertyValue(l)===""&&(s.styleDiff[l]=!1)}else r==="open"&&t.tagName==="DIALOG"&&(t.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal");break}case"childList":{if(ut(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const r=this.mirror.getId(t),i=Zn(e.target)?this.mirror.getId(ee.host(e.target)):this.mirror.getId(e.target);ut(e.target,this.blockClass,this.blockSelector,!1)||no(t,this.mirror,this.slimDOMOptions)||!ay(t,this.mirror)||(this.addedSet.has(t)?(cl(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||Gc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Kd(r,i)]?cl(this.movedSet,t):(this.removes.push({parentId:i,id:r,isShadow:Zn(e.target)&&Xn(e.target)?!0:void 0}),O_(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}}),k(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(no(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[Kd(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);ut(e,this.blockClass,this.blockSelector,!1)||(ee.childNodes(e).forEach(r=>this.genAdds(r)),Mo(e)&&ee.childNodes(ee.shadowRoot(e)).forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function cl(n,e){n.delete(e),ee.childNodes(e).forEach(t=>cl(n,t))}function O_(n,e){const t=[n];for(;t.length;){const r=t.pop();e.has(r)||(e.add(r),ee.childNodes(r).forEach(i=>t.push(i)))}}function Zd(n,e,t){return n.size===0?!1:T_(n,e)}function T_(n,e,t){const r=ee.parentNode(e);return r?n.has(r):!1}function Xd(n,e){return n.size===0?!1:my(n,e)}function my(n,e){const t=ee.parentNode(e);return t?n.has(t)?!0:my(n,t):!1}let Jn;function P_(n){Jn=n}function k_(){Jn=void 0}const ie=n=>Jn?(...t)=>{try{return n(...t)}catch(r){if(Jn&&Jn(r)===!0)return;throw r}}:n;function Jd(n){return(...e)=>{try{return n(...e)}catch(t){try{t._external_=!0}catch{}throw t}}}const Ar=[];function Ni(n){try{if("composedPath"in n){const e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0]}catch{}return n&&n.target}function yy(n,e){const t=new $_;Ar.push(t),t.init(n);const r=new(oy())(ie(t.processMutations.bind(t)));return r.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function N_({mousemoveCb:n,sampling:e,doc:t,mirror:r}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],l;const a=wn(ie(d=>{const h=Date.now()-l;n(o.map(g=>(g.timeOffset-=h,g)),d),o=[],l=null}),s),u=ie(wn(ie(d=>{const h=Ni(d),{clientX:g,clientY:m}=No(d)?d.changedTouches[0]:d;l||(l=yi()),o.push({x:g,y:m,id:r.getId(h),timeOffset:yi()-l}),a(typeof DragEvent<"u"&&d instanceof DragEvent?re.Drag:d instanceof MouseEvent?re.MouseMove:re.TouchMove)}),i,{trailing:!1})),c=[at("mousemove",u,t),at("touchmove",u,t),at("drag",u,t)];return ie(()=>{c.forEach(d=>d())})}function M_({mouseInteractionCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};const o=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,l=[];let a=null;const u=c=>d=>{const h=Ni(d);if(ut(h,r,i,!0))return;let g=null,m=c;if("pointerType"in d){switch(d.pointerType){case"mouse":g=Qt.Mouse;break;case"touch":g=Qt.Touch;break;case"pen":g=Qt.Pen;break}g===Qt.Touch?pt[c]===pt.MouseDown?m="TouchStart":pt[c]===pt.MouseUp&&(m="TouchEnd"):Qt.Pen}else No(d)&&(g=Qt.Touch);g!==null?(a=g,(m.startsWith("Touch")&&g===Qt.Touch||m.startsWith("Mouse")&&g===Qt.Mouse)&&(g=null)):pt[c]===pt.Click&&(g=a,a=null);const v=No(d)?d.changedTouches[0]:d;if(!v)return;const y=t.getId(h),{clientX:C,clientY:E}=v;ie(n)({type:pt[m],id:y,x:C,y:E,...g!==null&&{pointerType:g}})};return Object.keys(pt).filter(c=>Number.isNaN(Number(c))&&!c.endsWith("_Departed")&&o[c]!==!1).forEach(c=>{let d=Or(c);const h=u(c);if(window.PointerEvent)switch(pt[c]){case pt.MouseDown:case pt.MouseUp:d=d.replace("mouse","pointer");break;case pt.TouchStart:case pt.TouchEnd:return}l.push(at(d,h,e))}),ie(()=>{l.forEach(c=>c())})}function vy({scrollCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,sampling:s}){const o=ie(wn(ie(l=>{const a=Ni(l);if(!a||ut(a,r,i,!0))return;const u=t.getId(a);if(a===e&&e.defaultView){const c=Bc(e.defaultView);n({id:u,x:c.left,y:c.top})}else n({id:u,x:a.scrollLeft,y:a.scrollTop})}),s.scroll||100));return at("scroll",o,e)}function L_({viewportResizeCb:n},{win:e}){let t=-1,r=-1;const i=ie(wn(ie(()=>{const s=zc(),o=jc();(t!==s||r!==o)&&(n({width:Number(o),height:Number(s)}),t=s,r=o)}),200));return at("resize",i,e)}const D_=["INPUT","TEXTAREA","SELECT"],Qd=new WeakMap;function U_({inputCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,ignoreClass:s,ignoreSelector:o,maskInputOptions:l,maskInputFn:a,sampling:u,userTriggeredOnInput:c}){function d(E){let b=Ni(E);const I=E.isTrusted,_=b&&b.tagName;if(b&&_==="OPTION"&&(b=ee.parentElement(b)),!b||!_||D_.indexOf(_)<0||ut(b,r,i,!0)||b.classList.contains(s)||o&&b.matches(o))return;let $=b.value,O=!1;const A=Co(b)||"";A==="radio"||A==="checkbox"?O=b.checked:(l[_.toLowerCase()]||l[A])&&($=Eo({element:b,maskInputOptions:l,tagName:_,type:A,value:$,maskInputFn:a})),h(b,c?{text:$,isChecked:O,userTriggered:I}:{text:$,isChecked:O});const P=b.name;A==="radio"&&P&&O&&e.querySelectorAll(`input[type="radio"][name="${P}"]`).forEach(N=>{if(N!==b){const U=N.value;h(N,c?{text:U,isChecked:!O,userTriggered:!1}:{text:U,isChecked:!O})}})}function h(E,b){const I=Qd.get(E);if(!I||I.text!==b.text||I.isChecked!==b.isChecked){Qd.set(E,b);const _=t.getId(E);ie(n)({...b,id:_})}}const m=(u.input==="last"?["change"]:["input","change"]).map(E=>at(E,ie(d),e)),v=e.defaultView;if(!v)return()=>{m.forEach(E=>E())};const y=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),C=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&m.push(...C.map(E=>ki(E[0],E[1],{set(){ie(d)({target:this,isTrusted:!1})}},!1,v))),ie(()=>{m.forEach(E=>E())})}function Lo(n){const e=[];function t(r,i){if(ys("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ys("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ys("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ys("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return t(n,e)}function hr(n,e,t){let r,i;return n?(n.ownerNode?r=e.getId(n.ownerNode):i=t.getId(n),{styleId:i,id:r}):{}}function F_({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:ie((c,d,h)=>{const[g,m]=h,{id:v,styleId:y}=hr(d,e,t.styleMirror);return(v&&v!==-1||y&&y!==-1)&&n({id:v,styleId:y,adds:[{rule:g,index:m}]}),Jd(()=>c.apply(d,h))()})}),r.CSSStyleSheet.prototype.addRule=function(c,d,h=this.cssRules.length){const g=`${c} { ${d} }`;return r.CSSStyleSheet.prototype.insertRule.apply(this,[g,h])};const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:ie((c,d,h)=>{const[g]=h,{id:m,styleId:v}=hr(d,e,t.styleMirror);return(m&&m!==-1||v&&v!==-1)&&n({id:m,styleId:v,removes:[{index:g}]}),Jd(()=>c.apply(d,h))()})}),r.CSSStyleSheet.prototype.removeRule=function(c){return r.CSSStyleSheet.prototype.deleteRule.apply(this,[c])};let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:ie((c,d,h)=>{const[g]=h,{id:m,styleId:v}=hr(d,e,t.styleMirror);return(m&&m!==-1||v&&v!==-1)&&n({id:m,styleId:v,replace:g}),c.apply(d,h)})}));let l;r.CSSStyleSheet.prototype.replaceSync&&(l=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:ie((c,d,h)=>{const[g]=h,{id:m,styleId:v}=hr(d,e,t.styleMirror);return(m&&m!==-1||v&&v!==-1)&&n({id:m,styleId:v,replaceSync:g}),c.apply(d,h)})}));const a={};vs("CSSGroupingRule")?a.CSSGroupingRule=r.CSSGroupingRule:(vs("CSSMediaRule")&&(a.CSSMediaRule=r.CSSMediaRule),vs("CSSConditionRule")&&(a.CSSConditionRule=r.CSSConditionRule),vs("CSSSupportsRule")&&(a.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(a).forEach(([c,d])=>{u[c]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[c].insertRule,{apply:ie((h,g,m)=>{const[v,y]=m,{id:C,styleId:E}=hr(g.parentStyleSheet,e,t.styleMirror);return(C&&C!==-1||E&&E!==-1)&&n({id:C,styleId:E,adds:[{rule:v,index:[...Lo(g),y||0]}]}),h.apply(g,m)})}),d.prototype.deleteRule=new Proxy(u[c].deleteRule,{apply:ie((h,g,m)=>{const[v]=m,{id:y,styleId:C}=hr(g.parentStyleSheet,e,t.styleMirror);return(y&&y!==-1||C&&C!==-1)&&n({id:y,styleId:C,removes:[{index:[...Lo(g),v]}]}),h.apply(g,m)})})}),ie(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),l&&(r.CSSStyleSheet.prototype.replaceSync=l),Object.entries(a).forEach(([c,d])=>{d.prototype.insertRule=u[c].insertRule,d.prototype.deleteRule=u[c].deleteRule})})}function wy({mirror:n,stylesheetManager:e},t){var r,i,s;let o=null;t.nodeName==="#document"?o=n.getId(t):o=n.getId(ee.host(t));const l=t.nodeName==="#document"?(r=t.defaultView)==null?void 0:r.Document:(s=(i=t.ownerDocument)==null?void 0:i.defaultView)==null?void 0:s.ShadowRoot,a=l?.prototype?Object.getOwnPropertyDescriptor(l?.prototype,"adoptedStyleSheets"):void 0;return o===null||o===-1||!l||!a?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){var u;return(u=a.get)==null?void 0:u.call(this)},set(u){var c;const d=(c=a.set)==null?void 0:c.call(this,u);if(o!==null&&o!==-1)try{e.adoptStyleSheets(u,o)}catch{}return d}}),ie(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))}function B_({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:ie((l,a,u)=>{var c;const[d,h,g]=u;if(t.has(d))return s.apply(a,[d,h,g]);const{id:m,styleId:v}=hr((c=a.parentRule)==null?void 0:c.parentStyleSheet,e,r.styleMirror);return(m&&m!==-1||v&&v!==-1)&&n({id:m,styleId:v,set:{property:d,value:h,priority:g},index:Lo(a.parentRule)}),l.apply(a,u)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:ie((l,a,u)=>{var c;const[d]=u;if(t.has(d))return o.apply(a,[d]);const{id:h,styleId:g}=hr((c=a.parentRule)==null?void 0:c.parentStyleSheet,e,r.styleMirror);return(h&&h!==-1||g&&g!==-1)&&n({id:h,styleId:g,remove:{property:d},index:Lo(a.parentRule)}),l.apply(a,u)})}),ie(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function z_({mediaInteractionCb:n,blockClass:e,blockSelector:t,mirror:r,sampling:i,doc:s}){const o=ie(a=>wn(ie(u=>{const c=Ni(u);if(!c||ut(c,e,t,!0))return;const{currentTime:d,volume:h,muted:g,playbackRate:m,loop:v}=c;n({type:a,id:r.getId(c),currentTime:d,volume:h,muted:g,playbackRate:m,loop:v})}),i.media||500)),l=[at("play",o(Jr.Play),s),at("pause",o(Jr.Pause),s),at("seeked",o(Jr.Seeked),s),at("volumechange",o(Jr.VolumeChange),s),at("ratechange",o(Jr.RateChange),s)];return ie(()=>{l.forEach(a=>a())})}function j_({fontCb:n,doc:e}){const t=e.defaultView;if(!t)return()=>{};const r=[],i=new WeakMap,s=t.FontFace;t.FontFace=function(a,u,c){const d=new s(a,u,c);return i.set(d,{family:a,buffer:typeof u!="string",descriptors:c,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};const o=Mr(e.fonts,"add",function(l){return function(a){return setTimeout(ie(()=>{const u=i.get(a);u&&(n(u),i.delete(a))}),0),l.apply(this,[a])}});return r.push(()=>{t.FontFace=s}),r.push(o),ie(()=>{r.forEach(l=>l())})}function W_(n){const{doc:e,mirror:t,blockClass:r,blockSelector:i,selectionCb:s}=n;let o=!0;const l=ie(()=>{const a=e.getSelection();if(!a||o&&a?.isCollapsed)return;o=a.isCollapsed||!1;const u=[],c=a.rangeCount||0;for(let d=0;d<c;d++){const h=a.getRangeAt(d),{startContainer:g,startOffset:m,endContainer:v,endOffset:y}=h;ut(g,r,i,!0)||ut(v,r,i,!0)||u.push({start:t.getId(g),startOffset:m,end:t.getId(v),endOffset:y})}s({ranges:u})});return l(),at("selectionchange",l)}function G_({doc:n,customElementCb:e}){const t=n.defaultView;return!t||!t.customElements?()=>{}:Mr(t.customElements,"define",function(i){return function(s,o,l){try{e({define:{name:s}})}catch{console.warn(`Custom element callback failed for ${s}`)}return i.apply(this,[s,o,l])}})}function V_(n,e){const{mutationCb:t,mousemoveCb:r,mouseInteractionCb:i,scrollCb:s,viewportResizeCb:o,inputCb:l,mediaInteractionCb:a,styleSheetRuleCb:u,styleDeclarationCb:c,canvasMutationCb:d,fontCb:h,selectionCb:g,customElementCb:m}=n;n.mutationCb=(...v)=>{e.mutation&&e.mutation(...v),t(...v)},n.mousemoveCb=(...v)=>{e.mousemove&&e.mousemove(...v),r(...v)},n.mouseInteractionCb=(...v)=>{e.mouseInteraction&&e.mouseInteraction(...v),i(...v)},n.scrollCb=(...v)=>{e.scroll&&e.scroll(...v),s(...v)},n.viewportResizeCb=(...v)=>{e.viewportResize&&e.viewportResize(...v),o(...v)},n.inputCb=(...v)=>{e.input&&e.input(...v),l(...v)},n.mediaInteractionCb=(...v)=>{e.mediaInteaction&&e.mediaInteaction(...v),a(...v)},n.styleSheetRuleCb=(...v)=>{e.styleSheetRule&&e.styleSheetRule(...v),u(...v)},n.styleDeclarationCb=(...v)=>{e.styleDeclaration&&e.styleDeclaration(...v),c(...v)},n.canvasMutationCb=(...v)=>{e.canvasMutation&&e.canvasMutation(...v),d(...v)},n.fontCb=(...v)=>{e.font&&e.font(...v),h(...v)},n.selectionCb=(...v)=>{e.selection&&e.selection(...v),g(...v)},n.customElementCb=(...v)=>{e.customElement&&e.customElement(...v),m(...v)}}function H_(n,e={}){const t=n.doc.defaultView;if(!t)return()=>{};V_(n,e);let r;n.recordDOM&&(r=yy(n,n.doc));const i=N_(n),s=M_(n),o=vy(n),l=L_(n,{win:t}),a=U_(n),u=z_(n);let c=()=>{},d=()=>{},h=()=>{},g=()=>{};n.recordDOM&&(c=F_(n,{win:t}),d=wy(n,n.doc),h=B_(n,{win:t}),n.collectFonts&&(g=j_(n)));const m=W_(n),v=G_(n),y=[];for(const C of n.plugins)y.push(C.observer(C.callback,t,C.options));return ie(()=>{Ar.forEach(C=>C.reset()),r?.disconnect(),i(),s(),o(),l(),a(),u(),c(),d(),h(),g(),m(),v(),y.forEach(C=>C())})}function ys(n){return typeof window[n]<"u"}function vs(n){return!!(typeof window[n]<"u"&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}class eh{constructor(e){k(this,"iframeIdToRemoteIdMap",new WeakMap),k(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,r,i){const s=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let l=s.get(t);return l||(l=this.generateIdFn(),s.set(t,l),o.set(l,t)),l}getIds(e,t){const r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(s=>this.getId(e,s,r,i))}getRemoteId(e,t,r){const i=r||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;const s=i.get(t);return s||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class q_{constructor(e){k(this,"iframes",new WeakMap),k(this,"crossOriginIframeMap",new WeakMap),k(this,"crossOriginIframeMirror",new eh(Lg)),k(this,"crossOriginIframeStyleMirror"),k(this,"crossOriginIframeRootIdMap",new WeakMap),k(this,"mirror"),k(this,"mutationCb"),k(this,"wrappedEmit"),k(this,"loadListener"),k(this,"stylesheetManager"),k(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new eh(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((r=e.contentWindow)==null||r.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;const i=this.crossOriginIframeMap.get(e.source);if(!i)return;const s=this.transformCrossOriginEvent(i,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){var r;switch(t.type){case se.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:se.IncrementalSnapshot,data:{source:re.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case se.Meta:case se.Load:case se.DomContentLoaded:return!1;case se.Plugin:return t;case se.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case se.IncrementalSnapshot:switch(t.data.source){case re.Mutation:return t.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(i.node,s)}),t.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),t.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),t.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case re.Drag:case re.TouchMove:case re.MouseMove:return t.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case re.ViewportResize:return!1;case re.MediaInteraction:case re.MouseInteraction:case re.Scroll:case re.CanvasMutation:case re.Input:return this.replaceIds(t.data,e,["id"]),t;case re.StyleSheetRule:case re.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case re.Font:return t;case re.Selection:return t.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),t;case re.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(r=t.data.styles)==null||r.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),t}}return!1}replace(e,t,r,i){for(const s of i)!Array.isArray(t[s])&&typeof t[s]!="number"||(Array.isArray(t[s])?t[s]=e.getIds(r,t[s]):t[s]=e.getId(r,t[s]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,t)})}patchRootIdOnNode(e,t){e.type!==gy.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,t)})}}class Y_{constructor(e){k(this,"shadowDoms",new WeakSet),k(this,"mutationCb"),k(this,"scrollCb"),k(this,"bypassOptions"),k(this,"mirror"),k(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Xn(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=yy({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(vy({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ee.host(e))),this.restoreHandlers.push(wy({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const r=this;this.restoreHandlers.push(Mr(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s),l=ee.shadowRoot(this);return l&&Yc(this)&&r.addShadowRoot(l,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}var nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ws=0;ws<nn.length;ws++)K_[nn.charCodeAt(ws)]=ws;var Z_=function(n){var e=new Uint8Array(n),t,r=e.length,i="";for(t=0;t<r;t+=3)i+=nn[e[t]>>2],i+=nn[(e[t]&3)<<4|e[t+1]>>4],i+=nn[(e[t+1]&15)<<2|e[t+2]>>6],i+=nn[e[t+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i};const th=new Map;function X_(n,e){let t=th.get(n);return t||(t=new Map,th.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}const by=(n,e,t)=>{if(!n||!(Ey(n,e)||typeof n=="object"))return;const r=n.constructor.name,i=X_(t,r);let s=i.indexOf(n);return s===-1&&(s=i.length,i.push(n)),s};function io(n,e,t){if(n instanceof Array)return n.map(r=>io(r,e,t));if(n===null)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer){const r=n.constructor.name,i=Z_(n);return{rr_type:r,base64:i}}else{if(n instanceof DataView)return{rr_type:n.constructor.name,args:[io(n.buffer,e,t),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){const r=n.constructor.name,{src:i}=n;return{rr_type:r,src:i}}else if(n instanceof HTMLCanvasElement){const r="HTMLImageElement",i=n.toDataURL();return{rr_type:r,src:i}}else{if(n instanceof ImageData)return{rr_type:n.constructor.name,args:[io(n.data,e,t),n.width,n.height]};if(Ey(n,e)||typeof n=="object"){const r=n.constructor.name,i=by(n,e,t);return{rr_type:r,index:i}}}}return n}const Sy=(n,e,t)=>n.map(r=>io(r,e,t)),Ey=(n,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>n instanceof e[i]);function J_(n,e,t,r){const i=[],s=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const o of s)try{if(typeof e.CanvasRenderingContext2D.prototype[o]!="function")continue;const l=Mr(e.CanvasRenderingContext2D.prototype,o,function(a){return function(...u){return ut(this.canvas,t,r,!0)||setTimeout(()=>{const c=Sy(u,e,this);n(this.canvas,{type:bn["2D"],property:o,args:c})},0),a.apply(this,u)}});i.push(l)}catch{const l=ki(e.CanvasRenderingContext2D.prototype,o,{set(a){n(this.canvas,{type:bn["2D"],property:o,args:[a],setter:!0})}});i.push(l)}return()=>{i.forEach(o=>o())}}function Q_(n){return n==="experimental-webgl"?"webgl":n}function rh(n,e,t,r){const i=[];try{const s=Mr(n.HTMLCanvasElement.prototype,"getContext",function(o){return function(l,...a){if(!ut(this,e,t,!0)){const u=Q_(l);if("__context"in this||(this.__context=u),r&&["webgl","webgl2"].includes(u))if(a[0]&&typeof a[0]=="object"){const c=a[0];c.preserveDrawingBuffer||(c.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return o.apply(this,[l,...a])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function nh(n,e,t,r,i,s){const o=[],l=Object.getOwnPropertyNames(n);for(const a of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if(typeof n[a]!="function")continue;const u=Mr(n,a,function(c){return function(...d){const h=c.apply(this,d);if(by(h,s,this),"tagName"in this.canvas&&!ut(this.canvas,r,i,!0)){const g=Sy(d,s,this),m={type:e,property:a,args:g};t(this.canvas,m)}return h}});o.push(u)}catch{const u=ki(n,a,{set(c){t(this.canvas,{type:e,property:a,args:[c],setter:!0})}});o.push(u)}return o}function eR(n,e,t,r){const i=[];return i.push(...nh(e.WebGLRenderingContext.prototype,bn.WebGL,n,t,r,e)),typeof e.WebGL2RenderingContext<"u"&&i.push(...nh(e.WebGL2RenderingContext.prototype,bn.WebGL2,n,t,r,e)),()=>{i.forEach(s=>s())}}const Cy="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",tR=n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0)),ih=typeof window<"u"&&window.Blob&&new Blob([tR(Cy)],{type:"text/javascript;charset=utf-8"});function rR(n){let e;try{if(e=ih&&(window.URL||window.webkitURL).createObjectURL(ih),!e)throw"";const t=new Worker(e,{name:n?.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+Cy,{name:n?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}class nR{constructor(e){k(this,"pendingCanvasMutations",new Map),k(this,"rafStamps",{latestId:0,invokeId:null}),k(this,"mirror"),k(this,"mutationCb"),k(this,"resetObservers"),k(this,"frozen",!1),k(this,"locked",!1),k(this,"processMutation",(a,u)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(u)});const{sampling:t="all",win:r,blockClass:i,blockSelector:s,recordCanvas:o,dataURLOptions:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&t==="all"&&this.initCanvasMutationObserver(r,i,s),o&&typeof t=="number"&&this.initCanvasFPSObserver(t,r,i,s,{dataURLOptions:l})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,i,s){const o=rh(t,r,i,!0),l=new Map,a=new rR;a.onmessage=m=>{const{id:v}=m.data;if(l.set(v,!1),!("base64"in m.data))return;const{base64:y,type:C,width:E,height:b}=m.data;this.mutationCb({id:v,type:bn["2D"],commands:[{property:"clearRect",args:[0,0,E,b]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:y}],type:C}]},0,0]}]})};const u=1e3/e;let c=0,d;const h=()=>{const m=[];return t.document.querySelectorAll("canvas").forEach(v=>{ut(v,r,i,!0)||m.push(v)}),m},g=m=>{if(c&&m-c<u){d=requestAnimationFrame(g);return}c=m,h().forEach(async v=>{var y;const C=this.mirror.getId(v);if(l.get(C)||v.width===0||v.height===0)return;if(l.set(C,!0),["webgl","webgl2"].includes(v.__context)){const b=v.getContext(v.__context);((y=b?.getContextAttributes())==null?void 0:y.preserveDrawingBuffer)===!1&&b.clear(b.COLOR_BUFFER_BIT)}const E=await createImageBitmap(v);a.postMessage({id:C,bitmap:E,width:v.width,height:v.height,dataURLOptions:s.dataURLOptions},[E])}),d=requestAnimationFrame(g)};d=requestAnimationFrame(g),this.resetObservers=()=>{o(),cancelAnimationFrame(d)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=rh(e,t,r,!1),s=J_(this.processMutation.bind(this),e,t,r),o=eR(this.processMutation.bind(this),e,t,r);this.resetObservers=()=>{i(),s(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||t===-1)return;const i=r.map(o=>{const{type:l,...a}=o;return a}),{type:s}=r[0];this.mutationCb({id:t,type:s,commands:i}),this.pendingCanvasMutations.delete(e)}}class iR{constructor(e){k(this,"trackedLinkElements",new WeakSet),k(this,"mutationCb"),k(this,"adoptedStyleSheetCb"),k(this,"styleMirror",new dy),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;const r={id:t,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(l,a)=>({rule:kg(l,s.href),index:a}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class sR{constructor(){k(this,"nodeMap",new WeakMap),k(this,"active",!1)}inOtherBuffer(e,t){const r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let je,so,Xa,Do=!1;try{if(Array.from([1],n=>n*2)[0]!==2){const n=document.createElement("iframe");document.body.appendChild(n),Array.from=((ad=n.contentWindow)==null?void 0:ad.Array.from)||Array.from,document.body.removeChild(n)}}catch(n){console.debug("Unable to override Array.from",n)}const Tt=aC();function Tr(n={}){const{emit:e,checkoutEveryNms:t,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,ignoreClass:o="rr-ignore",ignoreSelector:l=null,maskTextClass:a="rr-mask",maskTextSelector:u=null,inlineStylesheet:c=!0,maskAllInputs:d,maskInputOptions:h,slimDOMOptions:g,maskInputFn:m,maskTextFn:v,hooks:y,packFn:C,sampling:E={},dataURLOptions:b={},mousemoveWait:I,recordDOM:_=!0,recordCanvas:$=!1,recordCrossOriginIframes:O=!1,recordAfter:A=n.recordAfter==="DOMContentLoaded"?n.recordAfter:"load",userTriggeredOnInput:P=!1,collectFonts:N=!1,inlineImages:U=!1,plugins:F,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:Y=new Set([]),errorHandler:oe}=n;P_(oe);const B=O?window.parent===window:!0;let z=!1;if(!B)try{window.parent.document&&(z=!1)}catch{z=!0}if(B&&!e)throw new Error("emit function is required");if(!B&&!z)return()=>{};I!==void 0&&E.mousemove===void 0&&(E.mousemove=I),Tt.reset();const te=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:h!==void 0?h:{password:!0},J=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all",headTitleMutations:g==="all"}:g||{};uy();let L,de=0;const Te=q=>{for(const Pe of F||[])Pe.eventProcessor&&(q=Pe.eventProcessor(q));return C&&!z&&(q=C(q)),q};je=(q,Pe)=>{var me;const ae=q;if(ae.timestamp=yi(),(me=Ar[0])!=null&&me.isFrozen()&&ae.type!==se.FullSnapshot&&!(ae.type===se.IncrementalSnapshot&&ae.data.source===re.Mutation)&&Ar.forEach(Ze=>Ze.unfreeze()),B)e?.(Te(ae),Pe);else if(z){const Ze={type:"rrweb",event:Te(ae),origin:window.location.origin,isCheckout:Pe};window.parent.postMessage(Ze,"*")}if(ae.type===se.FullSnapshot)L=ae,de=0;else if(ae.type===se.IncrementalSnapshot){if(ae.data.source===re.Mutation&&ae.data.isAttachIframe)return;de++;const Ze=r&&de>=r,K=t&&ae.timestamp-L.timestamp>t;(Ze||K)&&so(!0)}};const pe=q=>{je({type:se.IncrementalSnapshot,data:{source:re.Mutation,...q}})},G=q=>je({type:se.IncrementalSnapshot,data:{source:re.Scroll,...q}}),V=q=>je({type:se.IncrementalSnapshot,data:{source:re.CanvasMutation,...q}}),Ge=q=>je({type:se.IncrementalSnapshot,data:{source:re.AdoptedStyleSheet,...q}}),be=new iR({mutationCb:pe,adoptedStyleSheetCb:Ge}),ge=new q_({mirror:Tt,mutationCb:pe,stylesheetManager:be,recordCrossOriginIframes:O,wrappedEmit:je});for(const q of F||[])q.getMirror&&q.getMirror({nodeMirror:Tt,crossOriginIframeMirror:ge.crossOriginIframeMirror,crossOriginIframeStyleMirror:ge.crossOriginIframeStyleMirror});const Ve=new sR;Xa=new nR({recordCanvas:$,mutationCb:V,win:window,blockClass:i,blockSelector:s,mirror:Tt,sampling:E.canvas,dataURLOptions:b});const Ue=new Y_({mutationCb:pe,scrollCb:G,bypassOptions:{blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:u,inlineStylesheet:c,maskInputOptions:te,dataURLOptions:b,maskTextFn:v,maskInputFn:m,recordCanvas:$,inlineImages:U,sampling:E,slimDOMOptions:J,iframeManager:ge,stylesheetManager:be,canvasManager:Xa,keepIframeSrcFn:M,processedNodeManager:Ve},mirror:Tt});so=(q=!1)=>{if(!_)return;je({type:se.Meta,data:{href:window.location.href,width:jc(),height:zc()}},q),be.reset(),Ue.init(),Ar.forEach(me=>me.lock());const Pe=TC(document,{mirror:Tt,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:u,inlineStylesheet:c,maskAllInputs:te,maskTextFn:v,maskInputFn:m,slimDOM:J,dataURLOptions:b,recordCanvas:$,inlineImages:U,onSerialize:me=>{Vc(me,Tt)&&ge.addIframe(me),Hc(me,Tt)&&be.trackLinkElement(me),Mo(me)&&Ue.addShadowRoot(ee.shadowRoot(me),document)},onIframeLoad:(me,ae)=>{ge.attachIframe(me,ae),Ue.observeAttachShadow(me)},onStylesheetLoad:(me,ae)=>{be.attachLinkElement(me,ae)},keepIframeSrcFn:M});if(!Pe)return console.warn("Failed to snapshot the document");je({type:se.FullSnapshot,data:{node:Pe,initialOffset:Bc(window)}},q),Ar.forEach(me=>me.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&be.adoptStyleSheets(document.adoptedStyleSheets,Tt.getId(document))};try{const q=[],Pe=ae=>{var Ze;return ie(H_)({mutationCb:pe,mousemoveCb:(K,Ot)=>je({type:se.IncrementalSnapshot,data:{source:Ot,positions:K}}),mouseInteractionCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.MouseInteraction,...K}}),scrollCb:G,viewportResizeCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.ViewportResize,...K}}),inputCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.Input,...K}}),mediaInteractionCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.MediaInteraction,...K}}),styleSheetRuleCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.StyleSheetRule,...K}}),styleDeclarationCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.StyleDeclaration,...K}}),canvasMutationCb:V,fontCb:K=>je({type:se.IncrementalSnapshot,data:{source:re.Font,...K}}),selectionCb:K=>{je({type:se.IncrementalSnapshot,data:{source:re.Selection,...K}})},customElementCb:K=>{je({type:se.IncrementalSnapshot,data:{source:re.CustomElement,...K}})},blockClass:i,ignoreClass:o,ignoreSelector:l,maskTextClass:a,maskTextSelector:u,maskInputOptions:te,inlineStylesheet:c,sampling:E,recordDOM:_,recordCanvas:$,inlineImages:U,userTriggeredOnInput:P,collectFonts:N,doc:ae,maskInputFn:m,maskTextFn:v,keepIframeSrcFn:M,blockSelector:s,slimDOMOptions:J,dataURLOptions:b,mirror:Tt,iframeManager:ge,stylesheetManager:be,shadowDomManager:Ue,processedNodeManager:Ve,canvasManager:Xa,ignoreCSSAttributes:Y,plugins:((Ze=F?.filter(K=>K.observer))==null?void 0:Ze.map(K=>({observer:K.observer,options:K.options,callback:Ot=>je({type:se.Plugin,data:{plugin:K.name,payload:Ot}})})))||[]},y)};ge.addLoadListener(ae=>{try{q.push(Pe(ae.contentDocument))}catch(Ze){console.warn(Ze)}});const me=()=>{so(),q.push(Pe(document)),Do=!0};return document.readyState==="interactive"||document.readyState==="complete"?me():(q.push(at("DOMContentLoaded",()=>{je({type:se.DomContentLoaded,data:{}}),A==="DOMContentLoaded"&&me()})),q.push(at("load",()=>{je({type:se.Load,data:{}}),A==="load"&&me()},window))),()=>{q.forEach(ae=>ae()),Ve.destroy(),Do=!1,k_()}}catch(q){console.warn(q)}}Tr.addCustomEvent=(n,e)=>{if(!Do)throw new Error("please add custom event after start recording");je({type:se.Custom,data:{tag:n,payload:e}})};Tr.freezePage=()=>{Ar.forEach(n=>n.freeze())};Tr.takeFullSnapshot=n=>{if(!Do)throw new Error("please take full snapshot after start recording");so(n)};Tr.mirror=Tt;var sh;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(sh||(sh={}));var Uo;(function(n){n.US="US",n.EU="EU",n.STAGING="STAGING"})(Uo||(Uo={}));var st;(function(n){n.Unknown="unknown",n.Skipped="skipped",n.Success="success",n.RateLimit="rate_limit",n.PayloadTooLarge="payload_too_large",n.Invalid="invalid",n.Failed="failed",n.Timeout="Timeout",n.SystemError="SystemError"})(st||(st={}));var oR=function(){function n(){}return n.prototype.send=function(e,t){return Promise.resolve(null)},n.prototype.buildResponse=function(e){var t,r,i,s,o,l,a,u,c,d,h,g,m,v,y,C,E,b,I,_,$,O;if(typeof e!="object")return null;var A=e.code||0,P=this.buildStatus(A);switch(P){case st.Success:return{status:P,statusCode:A,body:{eventsIngested:(t=e.events_ingested)!==null&&t!==void 0?t:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case st.Invalid:return{status:P,statusCode:A,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(l=e.events_with_invalid_fields)!==null&&l!==void 0?l:{},eventsWithMissingFields:(a=e.events_with_missing_fields)!==null&&a!==void 0?a:{},eventsWithInvalidIdLengths:(u=e.events_with_invalid_id_lengths)!==null&&u!==void 0?u:{},epsThreshold:(c=e.eps_threshold)!==null&&c!==void 0?c:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(g=e.silenced_events)!==null&&g!==void 0?g:[],throttledDevices:(m=e.throttled_devices)!==null&&m!==void 0?m:{},throttledEvents:(v=e.throttled_events)!==null&&v!==void 0?v:[]}};case st.PayloadTooLarge:return{status:P,statusCode:A,body:{error:(y=e.error)!==null&&y!==void 0?y:""}};case st.RateLimit:return{status:P,statusCode:A,body:{error:(C=e.error)!==null&&C!==void 0?C:"",epsThreshold:(E=e.eps_threshold)!==null&&E!==void 0?E:0,throttledDevices:(b=e.throttled_devices)!==null&&b!==void 0?b:{},throttledUsers:(I=e.throttled_users)!==null&&I!==void 0?I:{},exceededDailyQuotaDevices:(_=e.exceeded_daily_quota_devices)!==null&&_!==void 0?_:{},exceededDailyQuotaUsers:($=e.exceeded_daily_quota_users)!==null&&$!==void 0?$:{},throttledEvents:(O=e.throttled_events)!==null&&O!==void 0?O:[]}};case st.Timeout:default:return{status:P,statusCode:A}}},n.prototype.buildStatus=function(e){return e>=200&&e<300?st.Success:e===429?st.RateLimit:e===413?st.PayloadTooLarge:e===408?st.Timeout:e>=400&&e<500?st.Invalid:e>=500?st.Failed:st.Unknown},n}(),aR="Network error occurred, remote config fetch failed",uR="Remote config successfully fetched",lR="Remote config fetch rejected due to exceeded retry count",oh="Remote config fetch rejected due to timeout after 5 seconds",ah="Unexpected error occurred",cR="https://sr-client-cfg.amplitude.com/config",fR="https://sr-client-cfg.stag2.amplitude.com/config",dR="https://sr-client-cfg.eu.amplitude.com/config",hR=function(){function n(e){var t=e.localConfig,r=e.configKeys,i=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(s,o,l){return H(i,void 0,void 0,function(){var a,u,c;return j(this,function(d){switch(d.label){case 0:return a=Date.now(),[4,this.fetchWithTimeout(l)];case 1:return u=d.sent(),u&&(c=u.configs&&u.configs[s],c)?(this.metrics.fetchTimeAPISuccess=Date.now()-a,[2,c[o]]):(this.metrics.fetchTimeAPIFail=Date.now()-a,[2,void 0])}})})},this.fetchWithTimeout=function(s){return H(i,void 0,void 0,function(){var o,l,a;return j(this,function(u){switch(u.label){case 0:return o=new AbortController,l=setTimeout(function(){return o.abort()},5e3),[4,this.fetchRemoteConfig(o.signal,s)];case 1:return a=u.sent(),clearTimeout(l),[2,a]}})})},this.fetchRemoteConfig=function(s,o){return H(i,void 0,void 0,function(){var l,a,u,c,d,h,g,m,v,y,C,E,b;return j(this,function(I){switch(I.label){case 0:if(o===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:lR})];if(s.aborted)return[2,this.completeRequest({err:oh})];o!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=o,this.attempts=0),I.label=1;case 1:I.trys.push([1,3,,4]),l=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(a=kt(this.configKeys),u=a.next();!u.done;u=a.next())c=u.value,l.append("config_keys",c)}catch(_){C={error:_}}finally{try{u&&!u.done&&(E=a.return)&&E.call(a)}finally{if(C)throw C.error}}return o&&l.set("session_id",String(o)),d={headers:{Accept:"*/*"},method:"GET"},h="".concat(this.getServerUrl(),"?").concat(l.toString()),this.attempts+=1,[4,fetch(h,he(he({},d),{signal:s}))];case 2:if(g=I.sent(),g===null)return[2,this.completeRequest({err:ah})];switch(m=new oR().buildStatus(g.status),m){case st.Success:return this.attempts=0,[2,this.parseAndStoreConfig(g)];case st.Failed:return[2,this.retryFetch(s,o)];default:return[2,this.completeRequest({err:aR})]}case 3:return v=I.sent(),y=v,s.aborted?[2,this.completeRequest({err:oh})]:[2,this.completeRequest({err:(b=y.message)!==null&&b!==void 0?b:ah})];case 4:return[2]}})})},this.retryFetch=function(s,o){return H(i,void 0,void 0,function(){var l=this;return j(this,function(a){switch(a.label){case 0:return[4,new Promise(function(u){return setTimeout(u,l.attempts*l.retryTimeout)})];case 1:return a.sent(),[2,this.fetchRemoteConfig(s,o)]}})})},this.parseAndStoreConfig=function(s){return H(i,void 0,void 0,function(){var o;return j(this,function(l){switch(l.label){case 0:return[4,s.json()];case 1:return o=l.sent(),this.completeRequest({success:uR}),[2,o]}})})},this.localConfig=t,this.configKeys=r}return n.prototype.getServerUrl=function(){return this.localConfig.configServerUrl?this.localConfig.configServerUrl:this.localConfig.serverZone===Uo.STAGING?fR:this.localConfig.serverZone===Uo.EU?dR:cR},n.prototype.completeRequest=function(e){var t=e.err,r=e.success;if(t)throw new Error(t);r&&this.localConfig.loggerProvider.log(r)},n}(),pR=function(n){var e=n.localConfig,t=n.configKeys;return H(void 0,void 0,void 0,function(){return j(this,function(r){return[2,new hR({localConfig:e,configKeys:t})]})})},gR=pR,fl="medium";function mR(n){return n.toLowerCase()}function yR(n){var e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?mR(e):null}var Iy=function(n,e,t){switch(e){case"light":{if(n!=="input")return!0;var r=t?yR(t):"";return r?!!(["password","hidden","email","tel"].includes(r)||t.autocomplete.startsWith("cc-")):!1}case"medium":case"conservative":return!0;default:return Iy(n,fl,t)}},vR=function(n,e,t){var r,i,s;if(e===void 0&&(e={defaultMaskLevel:fl}),t){if(t.closest("."+Rg))return!0;var o=((r=e.maskSelector)!==null&&r!==void 0?r:[]).some(function(a){return t.closest(a)});if(o)return!0;if(t.closest("."+RE))return!1;var l=((i=e.unmaskSelector)!==null&&i!==void 0?i:[]).some(function(a){return t.closest(a)});if(l)return!1}return Iy(n,(s=e.defaultMaskLevel)!==null&&s!==void 0?s:fl,t)},uh=function(n,e){return function(t,r){return vR(n,e,r)?t.replace(/[^\s]/g,"*"):t}},dl=function(n){var e=0;if(n.length===0)return e;for(var t=0;t<n.length;t++){var r=n.charCodeAt(t);e=(e<<5)-e+r,e|=0}return e},wR=function(n,e){var t=dl(n.toString()),r=Math.abs(t),i=r*31,s=i%1e6;return s/1e6<e},bR=function(){var n=Lt();return n?.location?n.location.href:""},SR=function(n,e){return"".concat(e,"/").concat(n)},xy=function(n,e){return e||(n===ai.STAGING?TE:n===ai.EU?OE:$E)},Ay=function(){return H(void 0,void 0,void 0,function(){var n,e,t,r,i,s,o;return j(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),n=Lt(),n?[4,n.navigator.storage.estimate()]:[3,2];case 1:return e=l.sent(),t=e.usage,r=e.quota,i=e.usageDetails,s=t?Math.round(t/$g):0,o=t&&r?Math.round((t/r+Number.EPSILON)*1e3)/1e3:0,[2,{totalStorageSize:s,percentOfQuota:o,usageDetails:JSON.stringify(i)}];case 2:return[3,4];case 3:return l.sent(),[3,4];case 4:return[2,{totalStorageSize:0,percentOfQuota:0,usageDetails:""}]}})})},_y=function(n){var e=he({},n),t=e.apiKey;return e.apiKey="****".concat(t.substring(t.length-4)),e},ER=function(n,e){var t=document.createDocumentFragment(),r=function(i){if(i===void 0&&(i=[]),typeof i=="string"&&(i=[i]),i=i.filter(function(s){try{t.querySelector(s)}catch{return e.warn('[session-replay-browser] omitting selector "'.concat(s,'" because it is invalid')),!1}return!0}),i.length!==0)return i};return n.blockSelector=r(n.blockSelector),n.maskSelector=r(n.maskSelector),n.unmaskSelector=r(n.unmaskSelector),n},CR=function(){function n(e,t){this.localConfig=t,this.remoteConfigFetch=e}return n.prototype.generateJoinedConfig=function(e){var t,r,i;return H(this,void 0,void 0,function(){var s,o,l,a,u,c,d,h,g,m,v,y,C,E,b,I,_,$,O,A,P;return j(this,function(N){switch(N.label){case 0:s=he({},this.localConfig),s.optOut=this.localConfig.optOut,s.captureEnabled=!0,N.label=1;case 1:return N.trys.push([1,6,,7]),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_sampling_config",e)];case 2:return l=N.sent(),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_privacy_config",e)];case 3:return a=N.sent(),u=s,[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_interaction_config",e)];case 4:return u.interactionConfig=N.sent(),c=s,[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_logging_config",e)];case 5:return c.loggingConfig=N.sent(),(l||a)&&(o={},l&&(o.sr_sampling_config=l),a&&(o.sr_privacy_config=a)),[3,7];case 6:return d=N.sent(),h=d,this.localConfig.loggerProvider.warn(h.message),s.captureEnabled=!1,[3,7];case 7:if(!o)return[2,{localConfig:this.localConfig,joinedConfig:s,remoteConfig:o}];if(g=o.sr_sampling_config,m=o.sr_privacy_config,g&&Object.keys(g).length>0?(Object.prototype.hasOwnProperty.call(g,"capture_enabled")?s.captureEnabled=g.capture_enabled:s.captureEnabled=!1,Object.prototype.hasOwnProperty.call(g,"sample_rate")&&(s.sampleRate=g.sample_rate)):(s.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),m){v=(t=s.privacyConfig)!==null&&t!==void 0?t:{},y={defaultMaskLevel:(i=(r=m.defaultMaskLevel)!==null&&r!==void 0?r:v.defaultMaskLevel)!==null&&i!==void 0?i:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},C=function(U){var F,M,Y,oe,B,z,te,J,L,de={};typeof U.blockSelector=="string"&&(U.blockSelector=[U.blockSelector]);try{for(var Te=kt((te=U.blockSelector)!==null&&te!==void 0?te:[]),pe=Te.next();!pe.done;pe=Te.next()){var G=pe.value;de[G]="block"}}catch(Ve){F={error:Ve}}finally{try{pe&&!pe.done&&(M=Te.return)&&M.call(Te)}finally{if(F)throw F.error}}try{for(var V=kt((J=U.maskSelector)!==null&&J!==void 0?J:[]),Ge=V.next();!Ge.done;Ge=V.next()){var G=Ge.value;de[G]="mask"}}catch(Ve){Y={error:Ve}}finally{try{Ge&&!Ge.done&&(oe=V.return)&&oe.call(V)}finally{if(Y)throw Y.error}}try{for(var be=kt((L=U.unmaskSelector)!==null&&L!==void 0?L:[]),ge=be.next();!ge.done;ge=be.next()){var G=ge.value;de[G]="unmask"}}catch(Ve){B={error:Ve}}finally{try{ge&&!ge.done&&(z=be.return)&&z.call(be)}finally{if(B)throw B.error}}return de},E=he(he({},C(v)),C(m));try{for(b=kt(Object.entries(E)),I=b.next();!I.done;I=b.next())_=rr(I.value,2),$=_[0],O=_[1],O==="mask"?y.maskSelector.push($):O==="block"?y.blockSelector.push($):O==="unmask"&&y.unmaskSelector.push($)}catch(U){A={error:U}}finally{try{I&&!I.done&&(P=b.return)&&P.call(b)}finally{if(A)throw A.error}}s.privacyConfig=ER(y,this.localConfig.loggerProvider)}return this.localConfig.loggerProvider.debug(JSON.stringify({name:"session replay joined config",config:_y(s)},null,2)),[2,{localConfig:this.localConfig,joinedConfig:s,remoteConfig:o}]}})})},n}(),IR=function(n,e){return H(void 0,void 0,void 0,function(){var t,r;return j(this,function(i){switch(i.label){case 0:return t=new UE(n,e),[4,gR({localConfig:t,configKeys:["sessionReplay"]})];case 1:return r=i.sent(),[2,new CR(r,t)]}})})},xR="Unexpected error occurred",AR="Network error occurred, event batch rejected",_R="Session replay event batch rejected due to exceeded retry count",Wr="Failed to store session replay events in IndexedDB",RR="Session replay event batch not sent due to missing device ID",$R="Session replay event batch not sent due to missing api key",hl="1.22.10",OR=function(){function n(e){var t=e.trackServerUrl,r=e.loggerProvider,i=e.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=r,this.payloadBatcher=i||function(s){return s},this.trackServerUrl=t}return n.prototype.sendEventsList=function(e){this.addToQueue(he(he({},e),{attempts:0,timeout:0}))},n.prototype.addToQueue=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t.filter(function(s){return s.attempts<(s.flushMaxRetries||0)?(s.attempts+=1,!0):(e.completeRequest({context:s,err:_R}),!1)});i.forEach(function(s){if(e.queue=e.queue.concat(s),s.timeout===0){e.schedule(0);return}setTimeout(function(){s.timeout=0,e.schedule(0)},s.timeout)})},n.prototype.schedule=function(e){var t=this;this.scheduled||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},n.prototype.flush=function(e){return e===void 0&&(e=!1),H(this,void 0,void 0,function(){var t,r,i=this;return j(this,function(s){switch(s.label){case 0:return t=[],r=[],this.queue.forEach(function(o){return o.timeout===0?t.push(o):r.push(o)}),this.queue=r,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(t.map(function(o){return i.send(o,e)}))];case 1:return s.sent(),[2]}})})},n.prototype.send=function(e,t){var r,i;return t===void 0&&(t=!0),H(this,void 0,void 0,function(){var s,o,l,a,u,c,d,h,g,m,v,y,C;return j(this,function(E){switch(E.label){case 0:if(s=e.apiKey,!s)return[2,this.completeRequest({context:e,err:$R})];if(o=e.deviceId,!o)return[2,this.completeRequest({context:e,err:RR})];if(l=bR(),a=hl,u=e.sampleRate,c=new URLSearchParams({device_id:o,session_id:"".concat(e.sessionId),type:"".concat(e.type)}),d="".concat(((r=e.version)===null||r===void 0?void 0:r.type)||"standalone","/").concat(((i=e.version)===null||i===void 0?void 0:i.version)||a),h=this.payloadBatcher({version:1,events:e.events}),h.events.length===0)return this.completeRequest({context:e}),[2];E.label=1;case 1:return E.trys.push([1,3,,4]),g={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(s),"X-Client-Version":a,"X-Client-Library":d,"X-Client-Url":l.substring(0,DE),"X-Client-Sample-Rate":"".concat(u)},body:JSON.stringify(h),method:"POST"},m="".concat(xy(e.serverZone,this.trackServerUrl),"?").concat(c.toString()),[4,fetch(m,g)];case 2:if(v=E.sent(),v===null)return this.completeRequest({context:e,err:xR}),[2];if(t)this.handleReponse(v.status,e);else{y="";try{y=JSON.stringify(v.body,null,2)}catch{}this.completeRequest({context:e,success:"".concat(v.status,": ").concat(y)})}return[3,4];case 3:return C=E.sent(),this.completeRequest({context:e,err:C}),[3,4];case 4:return[2]}})})},n.prototype.handleReponse=function(e,t){var r=new Ag().buildStatus(e);switch(r){case it.Success:this.handleSuccessResponse(t);break;case it.Failed:this.handleOtherResponse(t);break;default:this.completeRequest({context:t,err:AR})}},n.prototype.handleSuccessResponse=function(e){var t=Math.round(new Blob(e.events).size/$g);this.completeRequest({context:e,success:"Session replay event batch tracked successfully for session id ".concat(e.sessionId,", size of events: ").concat(t," KB")})},n.prototype.handleOtherResponse=function(e){this.addToQueue(he(he({},e),{timeout:e.attempts*this.retryTimeout}))},n.prototype.completeRequest=function(e){var t=e.context,r=e.err,i=e.success;t.onComplete(),r?this.loggerProvider.warn(r):i&&this.loggerProvider.log(i)},n}();const pl=(n,e)=>e.some(t=>n instanceof t);let lh,ch;function TR(){return lh||(lh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PR(){return ch||(ch=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gl=new WeakMap,Ja=new WeakMap,ma=new WeakMap;function kR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return ma.set(e,n),e}function NR(n){if(gl.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});gl.set(n,e)}let ml={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gl.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ry(n){ml=n(ml)}function MR(n){return PR().includes(n)?function(...e){return n.apply(yl(this),e),Rr(this.request)}:function(...e){return Rr(n.apply(yl(this),e))}}function LR(n){return typeof n=="function"?MR(n):(n instanceof IDBTransaction&&NR(n),pl(n,TR())?new Proxy(n,ml):n)}function Rr(n){if(n instanceof IDBRequest)return kR(n);if(Ja.has(n))return Ja.get(n);const e=LR(n);return e!==n&&(Ja.set(n,e),ma.set(e,n)),e}const yl=n=>ma.get(n);function DR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),l=Rr(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Rr(o.result),a.oldVersion,a.newVersion,Rr(o.transaction),a)}),t&&o.addEventListener("blocked",a=>t(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const UR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],Qa=new Map;function fh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qa.get(e))return Qa.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=FR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UR.includes(t)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),i&&a.done]))[0]};return Qa.set(e,s),s}Ry(n=>({...n,get:(e,t,r)=>fh(e,t)||n.get(e,t,r),has:(e,t)=>!!fh(e,t)||n.has(e,t)}));const BR=["continue","continuePrimaryKey","advance"],dh={},vl=new WeakMap,$y=new WeakMap,zR={get(n,e){if(!BR.includes(e))return n[e];let t=dh[e];return t||(t=dh[e]=function(...r){vl.set(this,$y.get(this)[e](...r))}),t}};async function*jR(...n){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...n)),!e)return;e=e;const t=new Proxy(e,zR);for($y.set(t,e),ma.set(t,yl(e));e;)yield t,e=await(vl.get(t)||e.continue()),vl.delete(t)}function hh(n,e){return e===Symbol.asyncIterator&&pl(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&pl(n,[IDBIndex,IDBObjectStore])}Ry(n=>({...n,get(e,t,r){return hh(e,t)?jR:n.get(e,t,r)},has(e,t){return hh(e,t)||n.has(e,t)}}));var Oy=function(){function n(e){var t=this,r,i,s;this.minInterval=ME,this.maxInterval=LE,this.maxPersistedEventsSize=PE,this.interval=this.minInterval,this._timeAtLastSplit=Date.now(),this.shouldSplitEventsList=function(o,l){var a=new Blob([l]).size,u=new Blob(o).size;return u+a>=t.maxPersistedEventsSize?!0:Date.now()-t.timeAtLastSplit>t.interval&&o.length?(t.interval=Math.min(t.maxInterval,t.interval+t.minInterval),t._timeAtLastSplit=Date.now(),!0):!1},this.loggerProvider=e.loggerProvider,this.minInterval=(r=e.minInterval)!==null&&r!==void 0?r:this.minInterval,this.maxInterval=(i=e.maxInterval)!==null&&i!==void 0?i:this.maxInterval,this.maxPersistedEventsSize=(s=e.maxPersistedEventsSize)!==null&&s!==void 0?s:this.maxPersistedEventsSize}return Object.defineProperty(n.prototype,"timeAtLastSplit",{get:function(){return this._timeAtLastSplit},enumerable:!1,configurable:!0}),n}(),Fo;(function(n){n.RECORDING="recording",n.SENT="sent"})(Fo||(Fo={}));var Qn="sessionCurrentSequence",ei="sequencesToSend",WR=function(){var n=Lt();return new Promise(function(e,t){if(!n)return t(new Error("Global scope not found"));if(!n.indexedDB)return t(new Error("Session Replay: cannot find indexedDB"));try{var r=n.indexedDB.open("keyval-store");r.onupgradeneeded=function(){r.result.version===1&&(r.result.close(),r.transaction&&r.transaction.abort(),n.indexedDB.deleteDatabase("keyval-store"),e())},r.onsuccess=function(){e(r.result)}}catch(i){t(i)}})},ph=function(n){return H(void 0,void 0,void 0,function(){var e,t;return j(this,function(r){switch(r.label){case 0:return n.length>0?(e=10,t=n.splice(0,e),[4,Promise.all(t)]):[3,2];case 1:return r.sent(),[3,0];case 2:return[2]}})})},GR=function(n){var e,t;return n.objectStoreNames.contains(Qn)||(t=n.createObjectStore(Qn,{keyPath:"sessionId"})),n.objectStoreNames.contains(ei)||(e=n.createObjectStore(ei,{keyPath:"sequenceId",autoIncrement:!0}),e.createIndex("sessionId","sessionId")),{sequencesStore:e,currentSequenceStore:t}},VR=function(n){return H(void 0,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,DR(n,1,{upgrade:GR})];case 1:return[2,e.sent()]}})})},HR=function(n){sa(e,n);function e(t){var r=n.call(this,t)||this;return r.getSequencesToSend=function(){return H(r,void 0,void 0,function(){var i,s,o,l,a,u;return j(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),i=[],[4,this.db.transaction("sequencesToSend").store.openCursor()];case 1:s=c.sent(),c.label=2;case 2:return s?(o=s.value,l=o.sessionId,a=o.events,i.push({events:a,sequenceId:s.key,sessionId:l}),[4,s.continue()]):[3,4];case 3:return s=c.sent(),[3,2];case 4:return[2,i];case 5:return u=c.sent(),this.loggerProvider.warn("".concat(Wr,": ").concat(u)),[3,6];case 6:return[2,void 0]}})})},r.storeCurrentSequence=function(i){return H(r,void 0,void 0,function(){var s,o,l;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,this.db.get(Qn,i)];case 1:return s=a.sent(),s?[4,this.db.put(ei,{sessionId:i,events:s.events})]:[2,void 0];case 2:return o=a.sent(),[4,this.db.put(Qn,{sessionId:i,events:[]})];case 3:return a.sent(),[2,he(he({},s),{sessionId:i,sequenceId:o})];case 4:return l=a.sent(),this.loggerProvider.warn("".concat(Wr,": ").concat(l)),[3,5];case 5:return[2,void 0]}})})},r.addEventToCurrentSequence=function(i,s){return H(r,void 0,void 0,function(){var o,l,a,u,c,d;return j(this,function(h){switch(h.label){case 0:return h.trys.push([0,10,,11]),o=this.db.transaction(Qn,"readwrite"),[4,o.store.get(i)];case 1:return l=h.sent(),l?[3,3]:[4,o.store.put({sessionId:i,events:[s]})];case 2:return h.sent(),[2];case 3:return a=void 0,this.shouldSplitEventsList(l.events,s)?(a=l.events,[4,o.store.put({sessionId:i,events:[s]})]):[3,5];case 4:return h.sent(),[3,7];case 5:return u=l.events.concat(s),[4,o.store.put({sessionId:i,events:u})];case 6:h.sent(),h.label=7;case 7:return[4,o.done];case 8:return h.sent(),a?[4,this.storeSendingEvents(i,a)]:[2,void 0];case 9:return c=h.sent(),c?[2,{events:a,sessionId:i,sequenceId:c}]:[2,void 0];case 10:return d=h.sent(),this.loggerProvider.warn("".concat(Wr,": ").concat(d)),[3,11];case 11:return[2,void 0]}})})},r.storeSendingEvents=function(i,s){return H(r,void 0,void 0,function(){var o,l;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.db.put(ei,{sessionId:i,events:s})];case 1:return o=a.sent(),[2,o];case 2:return l=a.sent(),this.loggerProvider.warn("".concat(Wr,": ").concat(l)),[3,3];case 3:return[2,void 0]}})})},r.cleanUpSessionEventsStore=function(i,s){return H(r,void 0,void 0,function(){var o;return j(this,function(l){switch(l.label){case 0:if(!s)return[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.db.delete(ei,s)];case 2:return l.sent(),[3,4];case 3:return o=l.sent(),this.loggerProvider.warn("".concat(Wr,": ").concat(o)),[3,4];case 4:return[2]}})})},r.transitionFromKeyValStore=function(i){return H(r,void 0,void 0,function(){var s,o,l,a,u,c,d,h,g=this;return j(this,function(m){switch(m.label){case 0:return m.trys.push([0,6,,7]),[4,WR()];case 1:if(s=m.sent(),!s)return[2];o=function(v,y){return H(g,void 0,void 0,function(){var C,E,b=this;return j(this,function(I){switch(I.label){case 0:return C=y.sessionSequences,E=[],Object.keys(C).forEach(function(_){var $=parseInt(_,10),O=C[$];if($===y.currentSequenceId){var A=O.events.map(function(P){return H(b,void 0,void 0,function(){return j(this,function(N){return[2,this.addEventToCurrentSequence(v,P)]})})});E.concat(A)}else O.status!==Fo.SENT&&E.push(b.storeSendingEvents(v,O.events))}),[4,ph(E)];case 1:return I.sent(),[2]}})})},l="".concat(sE,"_").concat(this.apiKey.substring(0,10)),m.label=2;case 2:return m.trys.push([2,4,,5]),a=s.transaction("keyval").objectStore("keyval").getAll(l),u=new Promise(function(v){a.onsuccess=function(y){return H(g,void 0,void 0,function(){var C,E,b,I=this;return j(this,function(_){switch(_.label){case 0:return C=y&&y.target.result,E=C&&C[0],E?(b=[],Object.keys(E).forEach(function($){var O=parseInt($,10),A=E[O];if(i===O)b.push(o(O,A));else{var P=A.sessionSequences;Object.keys(P).forEach(function(N){var U=parseInt(N,10);P[U].status!==Fo.SENT&&b.push(I.storeSendingEvents(O,P[U].events))})}}),[4,ph(b)]):[3,2];case 1:_.sent(),_.label=2;case 2:return v(),[2]}})})}}),[4,u];case 3:return m.sent(),c=Lt(),c&&c.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return d=m.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(d)),[3,5];case 5:return[3,7];case 6:return h=m.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(h,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}})})},r.apiKey=t.apiKey,r.db=t.db,r}return e.new=function(t,r,i){return H(this,void 0,void 0,function(){var s,o,l,a,u;return j(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),s=t==="replay"?"":"_".concat(t),o="".concat(r.apiKey.substring(0,10),"_amp_session_replay_events").concat(s),[4,VR(o)];case 1:return l=c.sent(),a=new e(he(he({},r),{db:l})),[4,a.transitionFromKeyValStore(i)];case 2:return c.sent(),[2,a];case 3:return u=c.sent(),r.loggerProvider.warn("".concat(Wr,": ").concat(u)),[3,4];case 4:return[2]}})})},e.prototype.getCurrentSequenceEvents=function(t){return H(this,void 0,void 0,function(){var o,r,i,s,o,l,a,u;return j(this,function(c){switch(c.label){case 0:return t?[4,this.db.get("sessionCurrentSequence",t)]:[3,2];case 1:return o=c.sent(),o?[2,[o]]:[2,void 0];case 2:r=[],c.label=3;case 3:return c.trys.push([3,8,9,10]),[4,this.db.getAll("sessionCurrentSequence")];case 4:i=kt.apply(void 0,[c.sent()]),s=i.next(),c.label=5;case 5:if(s.done)return[3,7];o=s.value,r.push(o),c.label=6;case 6:return s=i.next(),[3,5];case 7:return[3,10];case 8:return l=c.sent(),a={error:l},[3,10];case 9:try{s&&!s.done&&(u=i.return)&&u.call(i)}finally{if(a)throw a.error}return[7];case 10:return[2,r]}})})},e}(Oy),qR=function(n){sa(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.finalizedSequences={},t.sequences={},t.sequenceId=0,t}return e.prototype.resetCurrentSequence=function(t){this.sequences[t]=[]},e.prototype.addSequence=function(t){var r=this.sequenceId++,i=dn([],rr(this.sequences[t]),!1);return this.finalizedSequences[r]={sessionId:t,events:i},this.resetCurrentSequence(t),{sequenceId:r,events:i,sessionId:t}},e.prototype.getSequencesToSend=function(){return H(this,void 0,void 0,function(){return j(this,function(t){return[2,Object.entries(this.finalizedSequences).map(function(r){var i=rr(r,2),s=i[0],o=i[1],l=o.sessionId,a=o.events;return{sequenceId:Number(s),sessionId:l,events:a}})]})})},e.prototype.storeCurrentSequence=function(t){return H(this,void 0,void 0,function(){return j(this,function(r){return this.sequences[t]?[2,this.addSequence(t)]:[2,void 0]})})},e.prototype.addEventToCurrentSequence=function(t,r){return H(this,void 0,void 0,function(){var i;return j(this,function(s){return this.sequences[t]||this.resetCurrentSequence(t),this.shouldSplitEventsList(this.sequences[t],r)&&(i=this.addSequence(t)),this.sequences[t].push(r),[2,i]})})},e.prototype.storeSendingEvents=function(t,r){return H(this,void 0,void 0,function(){return j(this,function(i){return this.finalizedSequences[this.sequenceId]={sessionId:t,events:r},[2,this.sequenceId++]})})},e.prototype.cleanUpSessionEventsStore=function(t,r){return H(this,void 0,void 0,function(){return j(this,function(i){return r!==void 0&&delete this.finalizedSequences[r],[2]})})},e}(Oy),gh=function(n){var e=n.config,t=n.sessionId,r=n.minInterval,i=n.maxInterval,s=n.type,o=n.payloadBatcher,l=n.storeType;return H(void 0,void 0,void 0,function(){function a(E){return E===void 0&&(E=!1),H(this,void 0,void 0,function(){return j(this,function(b){return[2,u.flush(E)]})})}var u,c,d,h,g,m,v,y,C;return j(this,function(E){switch(E.label){case 0:return u=new OR(he(he({},e),{loggerProvider:e.loggerProvider,payloadBatcher:o})),c=function(){return new qR({loggerProvider:e.loggerProvider,maxInterval:i,minInterval:r})},d=function(){return H(void 0,void 0,void 0,function(){var b;return j(this,function(I){switch(I.label){case 0:return[4,HR.new(s,{loggerProvider:e.loggerProvider,minInterval:r,maxInterval:i,apiKey:e.apiKey},t)];case 1:return b=I.sent(),e.loggerProvider.log("Failed to initialize idb store, falling back to memory store."),[2,b??c()]}})})},l!=="idb"?[3,2]:[4,d()];case 1:return g=E.sent(),[3,3];case 2:g=c(),E.label=3;case 3:return h=g,m=function(b){var I=b.events,_=b.sessionId,$=b.deviceId,O=b.sequenceId;e.debugMode&&Ay().then(function(A){var P=A.totalStorageSize,N=A.percentOfQuota,U=A.usageDetails;e.loggerProvider.debug("Total storage size: ".concat(P," KB, percentage of quota: ").concat(N,"%, usage details: ").concat(U))}).catch(function(){}),u.sendEventsList({events:I,sessionId:_,flushMaxRetries:e.flushMaxRetries,apiKey:e.apiKey,deviceId:$,sampleRate:e.sampleRate,serverZone:e.serverZone,version:e.version,type:s,onComplete:function(){return H(void 0,void 0,void 0,function(){return j(this,function(A){switch(A.label){case 0:return[4,h.cleanUpSessionEventsStore(_,O)];case 1:return A.sent(),[2]}})})}})},v=function(b){var I=b.sessionId,_=b.deviceId;h.storeCurrentSequence(I).then(function($){$&&m({sequenceId:$.sequenceId,events:$.events,sessionId:$.sessionId,deviceId:_})}).catch(function($){e.loggerProvider.warn("Failed to get current sequence of session replay events for session:",$)})},y=function(b){var I=b.deviceId;return H(void 0,void 0,void 0,function(){var _;return j(this,function($){switch($.label){case 0:return[4,h.getSequencesToSend()];case 1:return _=$.sent(),_&&_.forEach(function(O){m({sequenceId:O.sequenceId,events:O.events,sessionId:O.sessionId,deviceId:I})}),[2]}})})},C=function(b){var I=b.event,_=b.sessionId,$=b.deviceId;h.addEventToCurrentSequence(_,I.data).then(function(O){return O&&m({sequenceId:O.sequenceId,events:O.events,sessionId:O.sessionId,deviceId:$})}).catch(function(O){e.loggerProvider.warn("Failed to add event to session replay capture:",O)})},[2,{sendCurrentSequenceEvents:v,addEvent:C,sendStoredEvents:y,flush:a}]}})})},mh=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new Map;e.forEach(function(i){r.set(i.name,i.manager)}),this.managers=r}return n.prototype.sendStoredEvents=function(e){return H(this,void 0,void 0,function(){var t;return j(this,function(r){switch(r.label){case 0:return t=[],this.managers.forEach(function(i){t.push(i.sendStoredEvents(e))}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},n.prototype.addEvent=function(e){var t,r=e.sessionId,i=e.event,s=e.deviceId;(t=this.managers.get(i.type))===null||t===void 0||t.addEvent({sessionId:r,event:i,deviceId:s})},n.prototype.sendCurrentSequenceEvents=function(e){var t=e.sessionId,r=e.deviceId;this.managers.forEach(function(i){i.sendCurrentSequenceEvents({sessionId:t,deviceId:r})})},n.prototype.flush=function(e){return H(this,void 0,void 0,function(){var t;return j(this,function(r){switch(r.label){case 0:return t=[],this.managers.forEach(function(i){t.push(i.flush(e))}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},n}(),Ty=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(Ty||{}),Rt,Zc,Py;function YR(n,e){if(Py=new Date,n.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(n.tagName.toLowerCase()==="html")return"html";var t={root:document.body,idName:function(s){return!0},className:function(s){return!0},tagName:function(s){return!0},attr:function(s,o){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};Rt=he(he({},t),e),Zc=KR(Rt.root,t);var r=bs(n,"all",function(){return bs(n,"two",function(){return bs(n,"one",function(){return bs(n,"none")})})});if(r){var i=My(Ly(r,n));return i.length>0&&(r=i[0]),ya(r)}else throw new Error("Selector was not found.")}function KR(n,e){return n.nodeType===Node.DOCUMENT_NODE?n:n===e.root?n.ownerDocument:n}function bs(n,e,t){for(var r=null,i=[],s=n,o=0,l=function(){var u,c,d=new Date().getTime()-Py.getTime();if(Rt.timeoutMs!==void 0&&d>Rt.timeoutMs)throw new Error("Timeout: Can't find a unique selector after ".concat(d,"ms"));var h=Es(ZR(s))||Es.apply(void 0,dn([],rr(XR(s)),!1))||Es.apply(void 0,dn([],rr(JR(s)),!1))||Es(QR(s))||[wh()],g=e$(s);if(e=="all")g&&(h=h.concat(h.filter(eu).map(function(E){return Ss(E,g)})));else if(e=="two")h=h.slice(0,1),g&&(h=h.concat(h.filter(eu).map(function(E){return Ss(E,g)})));else if(e=="one"){var m=rr(h=h.slice(0,1),1),v=m[0];g&&eu(v)&&(h=[Ss(v,g)])}else e=="none"&&(h=[wh()],g&&(h=[Ss(h[0],g)]));try{for(var y=(u=void 0,kt(h)),C=y.next();!C.done;C=y.next()){var v=C.value;v.level=o}}catch(E){u={error:E}}finally{try{C&&!C.done&&(c=y.return)&&c.call(y)}finally{if(u)throw u.error}}if(i.push(h),i.length>=Rt.seedMinLength&&(r=yh(i,t),r))return"break";s=s.parentElement,o++};s;){var a=l();if(a==="break")break}return r||(r=yh(i,t)),!r&&t?t():r}function yh(n,e){var t,r,i=My(Ny(n));if(i.length>Rt.threshold)return e?e():null;try{for(var s=kt(i),o=s.next();!o.done;o=s.next()){var l=o.value;if(ky(l))return l}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return null}function ya(n){for(var e=n[0],t=e.name,r=1;r<n.length;r++){var i=n[r].level||0;e.level===i-1?t="".concat(n[r].name," > ").concat(t):t="".concat(n[r].name," ").concat(t),e=n[r]}return t}function vh(n){return n.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function ky(n){var e=ya(n);switch(Zc.querySelectorAll(e).length){case 0:throw new Error("Can't select any node with this selector: ".concat(e));case 1:return!0;default:return!1}}function ZR(n){var e=n.getAttribute("id");return e&&Rt.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null}function XR(n){var e=Array.from(n.attributes).filter(function(t){return Rt.attr(t.name,t.value)});return e.map(function(t){return{name:"[".concat(CSS.escape(t.name),'="').concat(CSS.escape(t.value),'"]'),penalty:.5}})}function JR(n){var e=Array.from(n.classList).filter(Rt.className);return e.map(function(t){return{name:"."+CSS.escape(t),penalty:1}})}function QR(n){var e=n.tagName.toLowerCase();return Rt.tagName(e)?{name:e,penalty:2}:null}function wh(){return{name:"*",penalty:3}}function e$(n){var e=n.parentNode;if(!e)return null;var t=e.firstChild;if(!t)return null;for(var r=0;t&&(t.nodeType===Node.ELEMENT_NODE&&r++,t!==n);)t=t.nextSibling;return r}function Ss(n,e){return{name:n.name+":nth-child(".concat(e,")"),penalty:n.penalty+1}}function eu(n){return n.name!=="html"&&!n.name.startsWith("#")}function Es(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(t$);return t.length>0?t:null}function t$(n){return n!=null}function Ny(n,e){var t,r,i,s,o,l;return e===void 0&&(e=[]),j(this,function(a){switch(a.label){case 0:if(!(n.length>0))return[3,9];a.label=1;case 1:a.trys.push([1,6,7,8]),t=kt(n[0]),r=t.next(),a.label=2;case 2:return r.done?[3,5]:(i=r.value,[5,kt(Ny(n.slice(1,n.length),e.concat(i)))]);case 3:a.sent(),a.label=4;case 4:return r=t.next(),[3,2];case 5:return[3,8];case 6:return s=a.sent(),o={error:s},[3,8];case 7:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 8:return[3,11];case 9:return[4,e];case 10:a.sent(),a.label=11;case 11:return[2]}})}function My(n){return dn([],rr(n),!1).sort(function(e,t){return vh(e)-vh(t)})}function Ly(n,e,t){var r,i,s;return t===void 0&&(t={counter:0,visited:new Map}),j(this,function(o){switch(o.label){case 0:if(!(n.length>2&&n.length>Rt.optimizedMinLength))return[3,5];r=1,o.label=1;case 1:return r<n.length-1?t.counter>Rt.maxNumberOfTries?[2]:(t.counter+=1,i=dn([],rr(n),!1),i.splice(r,1),s=ya(i),t.visited.has(s)?[2]:ky(i)&&r$(i,e)?[4,i]:[3,4]):[3,5];case 2:return o.sent(),t.visited.set(s,!0),[5,kt(Ly(i,e,t))];case 3:o.sent(),o.label=4;case 4:return r++,[3,1];case 5:return[2]}})}function r$(n,e){return Zc.querySelector(ya(n))===e}var n$=36e5,i$=function(n){var e=n.version,t=n.events,r=[];return t.forEach(function(i){var s=JSON.parse(i);s.count=1,s.type==="click"&&r.push(s)}),{version:e,events:r}},s$=function(n){var e=n.version,t=n.events,r=[];t.forEach(function(s){var o=JSON.parse(s);o.type==="click"&&r.push(o)});var i=r.reduce(function(s,o){var l=o.x,a=o.y,u=o.selector,c=o.timestamp,d=c-c%n$,h="".concat(l,":").concat(a,":").concat(u??"",":").concat(d);return s[h]?s[h].count+=1:s[h]=he(he({},o),{timestamp:d,count:1}),s},{});return{version:e,events:Object.values(i)}},o$=function(n,e){var t=e.eventsManager,r=e.sessionId,i=e.deviceIdFn;return function(s){if(s.type===Ty.Click){var o=Lt();if(o){var l=o.location,a=o.innerHeight,u=o.innerWidth;if(l){var c=s.x,d=s.y;if(!(c===void 0||d===void 0)){var h=Tr.mirror.getNode(s.id),g;if(h)try{g=YR(h)}catch{n.debug("error resolving selector from finder")}var m=Kc.getWindowScroll(o),v=m.left,y=m.top,C={x:c+v,y:d+y,selector:g,viewportHeight:a,viewportWidth:u,pageUrl:l.href,timestamp:Date.now(),type:"click"},E=i();E&&t.addEvent({sessionId:r,event:{type:"interaction",data:JSON.stringify(C)},deviceId:E})}}}}}},a$=function(){function n(e,t){var r=Lt();r&&r.navigator&&typeof r.navigator.sendBeacon=="function"?this.sendBeacon=function(i,s){try{if(r.navigator.sendBeacon(i,JSON.stringify(s)))return!0}catch{}return!1}:this.sendBeacon=function(){return!1},this.sendXhr=function(i,s){var o=new XMLHttpRequest;return o.open("POST",i,!0),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(s)),!0},this.basePageUrl=xy(t.serverZone,t.trackServerUrl),this.apiKey=t.apiKey,this.context=e}return n.prototype.send=function(e,t){var r=this.context,i=r.sessionId,s=r.type,o=new URLSearchParams({device_id:e,session_id:String(i),type:String(s),api_key:this.apiKey}),l="".concat(this.basePageUrl,"?").concat(o.toString());this.sendBeacon(l,t)||this.sendXhr(l,t)},n}(),tu=Kc.getWindowHeight,ru=Kc.getWindowWidth,u$=function(){function n(e){var t=this;this.timestamp=Date.now(),this.hook=function(r){t.update(r)},this.send=function(r){return function(i){var s=r(),o=Lt();o&&s&&t.transport.send(s,{version:1,events:[{maxScrollX:t._maxScrollX,maxScrollY:t._maxScrollY,maxScrollWidth:t._maxScrollWidth,maxScrollHeight:t._maxScrollHeight,viewportHeight:tu(),viewportWidth:ru(),pageUrl:o.location.href,timestamp:t.timestamp,type:"scroll"}]})}},this._maxScrollX=0,this._maxScrollY=0,this._maxScrollWidth=ru(),this._maxScrollHeight=tu(),this.transport=e}return n.default=function(e,t){return new n(new a$(e,t))},Object.defineProperty(n.prototype,"maxScrollX",{get:function(){return this._maxScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollY",{get:function(){return this._maxScrollY},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollWidth",{get:function(){return this._maxScrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollHeight",{get:function(){return this._maxScrollHeight},enumerable:!1,configurable:!0}),n.prototype.update=function(e){var t=Date.now();if(e.x>this._maxScrollX){var r=ru();this._maxScrollX=e.x;var i=e.x+r;i>this._maxScrollWidth&&(this._maxScrollWidth=i),this.timestamp=t}if(e.y>this._maxScrollY){var s=tu();this._maxScrollY=e.y;var o=e.y+s;o>this._maxScrollHeight&&(this._maxScrollHeight=o),this.timestamp=t}},n}(),bh=function(){function n(e){var t=e.sessionId,r=e.deviceId;this.deviceId=r,this.sessionId=t,t&&r&&(this.sessionReplayId=SR(t,r))}return n}(),$t=Uint8Array,ht=Uint16Array,vi=Uint32Array,Xc=new $t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jc=new $t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sh=new $t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dy=function(n,e){for(var t=new ht(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new vi(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},Uy=Dy(Xc,2),l$=Uy[0],wl=Uy[1];l$[28]=258,wl[258]=28;var c$=Dy(Jc,0),Eh=c$[1],bl=new ht(32768);for(var Oe=0;Oe<32768;++Oe){var lr=(Oe&43690)>>>1|(Oe&21845)<<1;lr=(lr&52428)>>>2|(lr&13107)<<2,lr=(lr&61680)>>>4|(lr&3855)<<4,bl[Oe]=((lr&65280)>>>8|(lr&255)<<8)>>>1}var ti=function(n,e,t){for(var r=n.length,i=0,s=new ht(e);i<r;++i)++s[n[i]-1];var o=new ht(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(t){l=new ht(1<<e);var a=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],d=o[n[i]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)l[bl[d]>>>a]=u}else for(l=new ht(r),i=0;i<r;++i)l[i]=bl[o[n[i]-1]++]>>>15-n[i];return l},Pr=new $t(288);for(var Oe=0;Oe<144;++Oe)Pr[Oe]=8;for(var Oe=144;Oe<256;++Oe)Pr[Oe]=9;for(var Oe=256;Oe<280;++Oe)Pr[Oe]=7;for(var Oe=280;Oe<288;++Oe)Pr[Oe]=8;var Bo=new $t(32);for(var Oe=0;Oe<32;++Oe)Bo[Oe]=5;var f$=ti(Pr,9,0),d$=ti(Bo,5,0),Fy=function(n){return(n/8>>0)+(n&7&&1)},By=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof ht?ht:n instanceof vi?vi:$t)(t-e);return r.set(n.subarray(e,t)),r},Jt=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8},zn=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},nu=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[new $t(0),0];if(i==1){var o=new $t(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(_,$){return _.f-$.f}),t.push({s:-1,f:25001});var l=t[0],a=t[1],u=0,c=1,d=2;for(t[0]={s:-1,f:l.f+a.f,l,r:a};c!=i-1;)l=t[t[u].f<t[d].f?u++:d++],a=t[u!=c&&t[u].f<t[d].f?u++:d++],t[c++]={s:-1,f:l.f+a.f,l,r:a};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var g=new ht(h+1),m=Sl(t[c-1],g,0);if(m>e){var r=0,v=0,y=m-e,C=1<<y;for(s.sort(function($,O){return g[O.s]-g[$.s]||$.f-O.f});r<i;++r){var E=s[r].s;if(g[E]>e)v+=C-(1<<m-g[E]),g[E]=e;else break}for(v>>>=y;v>0;){var b=s[r].s;g[b]<e?v-=1<<e-g[b]++-1:++r}for(;r>=0&&v;--r){var I=s[r].s;g[I]==e&&(--g[I],++v)}m=e}return[new $t(g),m]},Sl=function(n,e,t){return n.s==-1?Math.max(Sl(n.l,e,t+1),Sl(n.r,e,t+1)):e[n.s]=t},Ch=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ht(++e),r=0,i=n[0],s=1,o=function(a){t[r++]=a},l=1;l<=e;++l)if(n[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[l]}return[t.subarray(0,r),e]},jn=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},El=function(n,e,t){var r=t.length,i=Fy(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},Ih=function(n,e,t,r,i,s,o,l,a,u,c){Jt(e,c++,t),++i[256];for(var d=nu(i,15),h=d[0],g=d[1],m=nu(s,15),v=m[0],y=m[1],C=Ch(h),E=C[0],b=C[1],I=Ch(v),_=I[0],$=I[1],O=new ht(19),A=0;A<E.length;++A)O[E[A]&31]++;for(var A=0;A<_.length;++A)O[_[A]&31]++;for(var P=nu(O,7),N=P[0],U=P[1],F=19;F>4&&!N[Sh[F-1]];--F);var M=u+5<<3,Y=jn(i,Pr)+jn(s,Bo)+o,oe=jn(i,h)+jn(s,v)+o+14+3*F+jn(O,N)+(2*O[16]+3*O[17]+7*O[18]);if(M<=Y&&M<=oe)return El(e,c,n.subarray(a,a+u));var B,z,te,J;if(Jt(e,c,1+(oe<Y)),c+=2,oe<Y){B=ti(h,g,0),z=h,te=ti(v,y,0),J=v;var L=ti(N,U,0);Jt(e,c,b-257),Jt(e,c+5,$-1),Jt(e,c+10,F-4),c+=14;for(var A=0;A<F;++A)Jt(e,c+3*A,N[Sh[A]]);c+=3*F;for(var de=[E,_],Te=0;Te<2;++Te)for(var pe=de[Te],A=0;A<pe.length;++A){var G=pe[A]&31;Jt(e,c,L[G]),c+=N[G],G>15&&(Jt(e,c,pe[A]>>>5&127),c+=pe[A]>>>12)}}else B=f$,z=Pr,te=d$,J=Bo;for(var A=0;A<l;++A)if(r[A]>255){var G=r[A]>>>18&31;zn(e,c,B[G+257]),c+=z[G+257],G>7&&(Jt(e,c,r[A]>>>23&31),c+=Xc[G]);var V=r[A]&31;zn(e,c,te[V]),c+=J[V],V>3&&(zn(e,c,r[A]>>>5&8191),c+=Jc[V])}else zn(e,c,B[r[A]]),c+=z[r[A]];return zn(e,c,B[256]),c+z[256]},h$=new vi([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),p$=function(n,e,t,r,i,s){var o=n.length,l=new $t(r+o+5*(1+Math.floor(o/7e3))+i),a=l.subarray(r,l.length-i),u=0;if(!e||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?u=El(a,u,n.subarray(c,d)):(a[c]=s,u=El(a,u,n.subarray(c,o)))}else{for(var h=h$[e-1],g=h>>>13,m=h&8191,v=(1<<t)-1,y=new ht(32768),C=new ht(v+1),E=Math.ceil(t/3),b=2*E,I=function(ae){return(n[ae]^n[ae+1]<<E^n[ae+2]<<b)&v},_=new vi(25e3),$=new ht(288),O=new ht(32),A=0,P=0,c=0,N=0,U=0,F=0;c<o;++c){var M=I(c),Y=c&32767,oe=C[M];if(y[Y]=oe,C[M]=Y,U<=c){var B=o-c;if((A>7e3||N>24576)&&B>423){u=Ih(n,a,0,_,$,O,P,N,F,c-F,u),N=A=P=0,F=c;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)O[z]=0}var te=2,J=0,L=m,de=Y-oe&32767;if(B>2&&M==I(c-de))for(var Te=Math.min(g,B)-1,pe=Math.min(32767,c),G=Math.min(258,B);de<=pe&&--L&&Y!=oe;){if(n[c+te]==n[c+te-de]){for(var V=0;V<G&&n[c+V]==n[c+V-de];++V);if(V>te){if(te=V,J=de,V>Te)break;for(var Ge=Math.min(de,V-2),be=0,z=0;z<Ge;++z){var ge=c-de+z+32768&32767,Ve=y[ge],Ue=ge-Ve+32768&32767;Ue>be&&(be=Ue,oe=ge)}}}Y=oe,oe=y[Y],de+=Y-oe+32768&32767}if(J){_[N++]=268435456|wl[te]<<18|Eh[J];var q=wl[te]&31,Pe=Eh[J]&31;P+=Xc[q]+Jc[Pe],++$[257+q],++O[Pe],U=c+te,++A}else _[N++]=n[c],++$[n[c]]}}u=Ih(n,a,s,_,$,O,P,N,F,c-F,u)}return By(l,0,r+Fy(u)+i)},g$=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,o=0;o!=s;){for(var l=Math.min(o+5552,s);o<l;++o)r+=t[o],i+=r;r%=65521,i%=65521}n=r,e=i},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},m$=function(n,e,t,r,i){return p$(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!0)},y$=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},v$=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)};function w$(n,e){e===void 0&&(e={});var t=g$();t.p(n);var r=m$(n,e,2,4);return v$(r,e),y$(r,r.length-4,t.d()),r}function b$(n,e){var t=n.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(n);for(var r=new $t(n.length+(n.length>>>1)),i=0,s=function(u){r[i++]=u},o=0;o<t;++o){if(i+5>r.length){var l=new $t(i+8+(t-o<<1));l.set(r),r=l}var a=n.charCodeAt(o);a<128||e?s(a):a<2048?(s(192|a>>>6),s(128|a&63)):a>55295&&a<57344?(a=65536+(a&1047552)|n.charCodeAt(++o)&1023,s(240|a>>>18),s(128|a>>>12&63),s(128|a>>>6&63),s(128|a&63)):(s(224|a>>>12),s(128|a>>>6&63),s(128|a&63))}return By(r,0,i)}function S$(n,e){for(var t="",r=0;r<n.length;){var i=n[r++];t+=String.fromCharCode(i)}return t}const E$="v1",C$=n=>{const e={...n,v:E$};return S$(w$(b$(JSON.stringify(e))))};var I$=2e3,x$=function(){function n(e,t,r,i){var s=this,o,l,a;this.taskQueue=[],this.isProcessing=!1,this.compressEvent=function(g){var m=C$(g);return JSON.stringify(m)},this.addCompressedEventToManager=function(g,m){s.eventsManager&&s.deviceId&&s.eventsManager.addEvent({event:{type:"replay",data:g},sessionId:m,deviceId:s.deviceId})},this.addCompressedEvent=function(g,m){if(s.worker)s.worker.postMessage({event:g,sessionId:m});else{var v=s.compressEvent(g);s.addCompressedEventToManager(v,m)}},this.terminate=function(){var g;(g=s.worker)===null||g===void 0||g.terminate()};var u=Lt();this.canUseIdleCallback=u&&"requestIdleCallback"in u,this.eventsManager=e,this.config=t,this.deviceId=r,this.timeout=((o=t.performanceConfig)===null||o===void 0?void 0:o.timeout)||I$;var c={},d=(l=c.COMPRESSION_WEBWORKER_BODY)!==null&&l!==void 0?l:i;if(!((a=this.config.experimental)===null||a===void 0)&&a.useWebWorker&&u&&u.Worker&&d){t.loggerProvider.log("[Experimental] Enabling web worker for compression");var h=new Worker(URL.createObjectURL(new Blob([d],{type:"application/javascript"})));h.onerror=function(g){t.loggerProvider.error(g)},h.onmessage=function(g){var m=g.data,v=m.compressedEvent,y=m.sessionId;s.addCompressedEventToManager(v,y)},this.worker=h}}return n.prototype.scheduleIdleProcessing=function(){var e=this;this.isProcessing||(this.isProcessing=!0,requestIdleCallback(function(t){e.processQueue(t)},{timeout:this.timeout}))},n.prototype.enqueueEvent=function(e,t){var r;this.canUseIdleCallback&&(!((r=this.config.performanceConfig)===null||r===void 0)&&r.enabled)?(this.config.loggerProvider.debug("Enqueuing event for processing during idle time."),this.taskQueue.push({event:e,sessionId:t}),this.scheduleIdleProcessing()):(this.config.loggerProvider.debug("Processing event without idle callback."),this.addCompressedEvent(e,t))},n.prototype.processQueue=function(e){for(var t=this;this.taskQueue.length>0&&(e.timeRemaining()>0||e.didTimeout);){var r=this.taskQueue.shift();if(r){var i=r.event,s=r.sessionId;this.addCompressedEvent(i,s)}}this.taskQueue.length>0?requestIdleCallback(function(o){t.processQueue(o)},{timeout:this.timeout}):this.isProcessing=!1},n}(),A$=function(){function n(){this.fetchObserver=null}return n.prototype.start=function(e){this.eventCallback=e,this.observeFetch()},n.prototype.stop=function(){var e;(e=this.fetchObserver)===null||e===void 0||e.call(this),this.fetchObserver=null,this.eventCallback=void 0},n.prototype.notifyEvent=function(e){var t;(t=this.eventCallback)===null||t===void 0||t.call(this,e)},n.prototype.observeFetch=function(){var e=this,t=Lt();if(t){var r=t.fetch;r&&(t.fetch=function(i,s){return H(e,void 0,void 0,function(){var o,l,a,d,u,c,d,h;return j(this,function(g){switch(g.label){case 0:o=Date.now(),l={timestamp:o,type:"fetch",method:s?.method||"GET",url:i.toString(),requestHeaders:s?.headers},g.label=1;case 1:return g.trys.push([1,3,,4]),[4,r(i,s)];case 2:return a=g.sent(),d=Date.now(),l.status=a.status,l.duration=d-o,u={},a.headers.forEach(function(m,v){u[v]=m}),l.responseHeaders=u,this.notifyEvent(l),[2,a];case 3:throw c=g.sent(),d=Date.now(),l.duration=d-o,h=c,l.error={name:h.name||"UnknownError",message:h.message||"An unknown error occurred"},this.notifyEvent(l),c;case 4:return[2]}})})},this.fetchObserver=function(){t.fetch=r})}},n}(),_$=function(){function n(){var e=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.eventCount=0,this.pageLeaveFns=[],this.teardownEventListeners=function(t){var r=Lt();r&&(r.removeEventListener("blur",e.blurListener),r.removeEventListener("focus",e.focusListener),!t&&r.addEventListener("blur",e.blurListener),!t&&r.addEventListener("focus",e.focusListener),r.self&&"onpagehide"in r.self?(r.removeEventListener("pagehide",e.pageLeaveListener),!t&&r.addEventListener("pagehide",e.pageLeaveListener)):(r.removeEventListener("beforeunload",e.pageLeaveListener),!t&&r.addEventListener("beforeunload",e.pageLeaveListener)))},this.blurListener=function(){e.sendEvents()},this.focusListener=function(){e.recordEvents(!1)},this.pageLeaveListener=function(t){e.pageLeaveFns.forEach(function(r){r(t)})},this.addCustomRRWebEvent=function(t,r,i){return r===void 0&&(r={}),i===void 0&&(i=!0),H(e,void 0,void 0,function(){var s,o,l,a;return j(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),s=void 0,o=this.config,o&&t!==Ir.METADATA?(s={config:_y(o),version:hl},i?[4,Ay()]:[3,2]):[3,2];case 1:l=u.sent(),s=he(he({},l),s),u.label=2;case 2:return this.recordCancelCallback?Tr.addCustomEvent(t,he(he({},r),s)):this.loggerProvider.debug("Not able to add custom replay capture event ".concat(t," due to no ongoing recording.")),[3,4];case 3:return a=u.sent(),this.loggerProvider.debug("Error while adding custom replay capture event: ",a),[3,4];case 4:return[2]}})})},this.stopRecordingEvents=function(){var t;try{e.loggerProvider.log("Session Replay capture stopping."),e.recordCancelCallback&&e.recordCancelCallback(),e.recordCancelCallback=null,(t=e.networkObservers)===null||t===void 0||t.stop()}catch(i){var r=i;e.loggerProvider.warn("Error occurred while stopping replay capture: ".concat(r.toString()))}},this.loggerProvider=new Tu(new bo)}return n.prototype.init=function(e,t){return sd(this._init(e,t))},n.prototype._init=function(e,t){var r,i,s,o,l,a,u,c;return H(this,void 0,void 0,function(){var d,h,g,m,v,y,C,E,b,I,A,_,$,O,A;return j(this,function(P){switch(P.label){case 0:return this.loggerProvider=new Tu(t.loggerProvider||new bo),Object.prototype.hasOwnProperty.call(t,"logLevel")&&this.loggerProvider.enable(t.logLevel),this.identifiers=new bh({sessionId:t.sessionId,deviceId:t.deviceId}),d=this,[4,IR(e,t)];case 1:return d.joinedConfigGenerator=P.sent(),[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];case 2:h=P.sent(),g=h.joinedConfig,m=h.localConfig,v=h.remoteConfig,this.config=g,this.setMetadata(t.sessionId,g,m,v,(r=t.version)===null||r===void 0?void 0:r.version,hl,(i=t.version)===null||i===void 0?void 0:i.type),t.sessionId&&(!((s=this.config.interactionConfig)===null||s===void 0)&&s.enabled)&&(y=u$.default({sessionId:t.sessionId,type:"interaction"},this.config),this.pageLeaveFns=[y.send(this.getDeviceId.bind(this)).bind(y)],this.scrollHook=y.hook.bind(y)),C=[],E=this.config.storeType,E==="idb"&&!(!((o=Lt())===null||o===void 0)&&o.indexedDB)&&(E="memory",this.loggerProvider.warn("Could not use preferred indexedDB storage, reverting to in memory option.")),this.loggerProvider.log("Using ".concat(E," for event storage.")),P.label=3;case 3:return P.trys.push([3,5,,6]),[4,gh({config:this.config,sessionId:this.identifiers.sessionId,type:"replay",storeType:E})];case 4:return b=P.sent(),C.push({name:"replay",manager:b}),[3,6];case 5:return I=P.sent(),A=I,this.loggerProvider.warn("Error occurred while creating replay events manager: ".concat(A.toString())),[3,6];case 6:if(!(!((l=this.config.interactionConfig)===null||l===void 0)&&l.enabled))return[3,10];_=this.config.interactionConfig.batch?s$:i$,P.label=7;case 7:return P.trys.push([7,9,,10]),[4,gh({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:(a=this.config.interactionConfig.trackEveryNms)!==null&&a!==void 0?a:kE,maxInterval:NE,payloadBatcher:_,storeType:E})];case 8:return $=P.sent(),C.push({name:"interaction",manager:$}),[3,10];case 9:return O=P.sent(),A=O,this.loggerProvider.warn("Error occurred while creating interaction events manager: ".concat(A.toString())),[3,10];case 10:return this.eventsManager=new(mh.bind.apply(mh,dn([void 0],rr(C),!1))),this.eventCompressor&&this.eventCompressor.terminate(),this.eventCompressor=new x$(this.eventsManager,this.config,this.getDeviceId()),!((c=(u=this.config.loggingConfig)===null||u===void 0?void 0:u.network)===null||c===void 0)&&c.enabled&&(this.networkObservers=new A$),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),this.teardownEventListeners(!1),this.initialize(!0),[2]}})})},n.prototype.setSessionId=function(e,t){return sd(this.asyncSetSessionId(e,t))},n.prototype.asyncSetSessionId=function(e,t){return H(this,void 0,void 0,function(){var r,i,s;return j(this,function(o){switch(o.label){case 0:return r=this.identifiers&&this.identifiers.sessionId,r&&this.sendEvents(r),i=t||this.getDeviceId(),this.identifiers=new bh({sessionId:e,deviceId:i}),this.joinedConfigGenerator&&r?[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)]:[3,2];case 1:s=o.sent().joinedConfig,this.config=s,o.label=2;case 2:return this.recordEvents(),[2]}})})},n.prototype.getSessionReplayProperties=function(){var e,t=this.config,r=this.identifiers;if(!t||!r)return this.loggerProvider.warn("Session replay init has not been called, cannot get session replay properties."),{};var i=this.getShouldRecord(),s={};return i&&(s=(e={},e[CE]=r.sessionReplayId?r.sessionReplayId:null,e),t.debugMode&&(s[AE]=JSON.stringify({appHash:dl(t.apiKey).toString()}))),this.addCustomRRWebEvent(Ir.GET_SR_PROPS,{shouldRecord:i,eventProperties:s},this.eventCount===10),this.eventCount===10&&(this.eventCount=0),this.eventCount++,s},n.prototype.sendEvents=function(e){var t,r=e||((t=this.identifiers)===null||t===void 0?void 0:t.sessionId),i=this.getDeviceId();this.eventsManager&&r&&i&&this.eventsManager.sendCurrentSequenceEvents({sessionId:r,deviceId:i})},n.prototype.initialize=function(e){var t;return e===void 0&&(e=!1),H(this,void 0,void 0,function(){var r;return j(this,function(i){return!((t=this.identifiers)===null||t===void 0)&&t.sessionId?(r=this.getDeviceId(),r?(this.eventsManager&&e&&this.eventsManager.sendStoredEvents({deviceId:r}),[2,this.recordEvents()]):(this.loggerProvider.log("Session is not being recorded due to lack of device id."),[2,Promise.resolve()])):(this.loggerProvider.log("Session is not being recorded due to lack of session id."),[2,Promise.resolve()])})})},n.prototype.shouldOptOut=function(){var e,t,r;if(!((e=this.config)===null||e===void 0)&&e.instanceName){var i=bE(this.config.instanceName).identityStore;r=i.getIdentity().optOut}return r!==void 0?r:(t=this.config)===null||t===void 0?void 0:t.optOut},n.prototype.getShouldRecord=function(){if(!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project or because the remote config could not be fetched.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var e=wR(this.identifiers.sessionId,this.config.sampleRate);return e||this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate.")),e},n.prototype.getBlockSelectors=function(){var e,t,r,i=(r=(t=(e=this.config)===null||e===void 0?void 0:e.privacyConfig)===null||t===void 0?void 0:t.blockSelector)!==null&&r!==void 0?r:[];if(i.length!==0)return i},n.prototype.getMaskTextSelectors=function(){var e,t,r,i;if(((t=(e=this.config)===null||e===void 0?void 0:e.privacyConfig)===null||t===void 0?void 0:t.defaultMaskLevel)==="conservative")return"*";var s=(i=(r=this.config)===null||r===void 0?void 0:r.privacyConfig)===null||i===void 0?void 0:i.maskSelector;if(s)return s},n.prototype.getRecordingPlugins=function(e){var t;return H(this,void 0,void 0,function(){var r,i,s;return j(this,function(o){switch(o.label){case 0:if(r=[],!(!((t=e?.console)===null||t===void 0)&&t.enabled))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Vw(()=>Promise.resolve().then(()=>OM),void 0,import.meta.url)];case 2:return i=o.sent().getRecordConsolePlugin,r.push(i({level:e.console.levels})),[3,4];case 3:return s=o.sent(),this.loggerProvider.warn("Failed to load console plugin:",s),[3,4];case 4:return[2,r.length>0?r:void 0]}})})},n.prototype.recordEvents=function(e){var t,r;return e===void 0&&(e=!0),H(this,void 0,void 0,function(){var i,s,o,l,a,u,c,d,h,g,m,v=this;return j(this,function(y){switch(y.label){case 0:if(i=this.config,s=this.getShouldRecord(),o=(t=this.identifiers)===null||t===void 0?void 0:t.sessionId,!s||!o||!i)return[2];this.stopRecordingEvents(),(r=this.networkObservers)===null||r===void 0||r.start(function(C){v.addCustomRRWebEvent(Ir.FETCH_REQUEST,C)}),l=i.privacyConfig,a=i.interactionConfig,u=i.loggingConfig,c=a?.enabled?{mouseInteraction:this.eventsManager&&o$(this.loggerProvider,{eventsManager:this.eventsManager,sessionId:o,deviceIdFn:this.getDeviceId.bind(this)}),scroll:this.scrollHook}:{},this.loggerProvider.log("Session Replay capture beginning for ".concat(o,".")),y.label=1;case 1:return y.trys.push([1,3,,4]),d=this,h=Tr,m={emit:function(C){if(v.shouldOptOut()){v.loggerProvider.log("Opting session ".concat(o," out of recording due to optOut config.")),v.stopRecordingEvents(),v.sendEvents();return}v.eventCompressor&&v.eventCompressor.enqueueEvent(C,o)},inlineStylesheet:i.shouldInlineStylesheet,hooks:c,maskAllInputs:!0,maskTextClass:Rg,blockClass:_E,blockSelector:this.getBlockSelectors(),maskInputFn:uh("input",l),maskTextFn:uh("text",l),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,errorHandler:function(C){var E=C;if(E.message.includes("insertRule")&&E.message.includes("CSSStyleSheet")||E._external_)throw E;return v.loggerProvider.warn("Error while capturing replay: ",E.toString()),!0}},[4,this.getRecordingPlugins(u)];case 2:return d.recordCancelCallback=h.apply(void 0,[(m.plugins=y.sent(),m)]),this.addCustomRRWebEvent(Ir.DEBUG_INFO),e&&this.addCustomRRWebEvent(Ir.METADATA,this.metadata),[3,4];case 3:return g=y.sent(),this.loggerProvider.warn("Failed to initialize session replay:",g),[3,4];case 4:return[2]}})})},n.prototype.getDeviceId=function(){var e;return(e=this.identifiers)===null||e===void 0?void 0:e.deviceId},n.prototype.getSessionId=function(){var e;return(e=this.identifiers)===null||e===void 0?void 0:e.sessionId},n.prototype.flush=function(e){var t;return e===void 0&&(e=!1),H(this,void 0,void 0,function(){return j(this,function(r){return[2,(t=this.eventsManager)===null||t===void 0?void 0:t.flush(e)]})})},n.prototype.shutdown=function(){this.teardownEventListeners(!0),this.stopRecordingEvents(),this.sendEvents()},n.prototype.mapSDKType=function(e){return e==="plugin"?"@amplitude/plugin-session-replay-browser":e==="segment"?"@amplitude/segment-session-replay-plugin":null},n.prototype.setMetadata=function(e,t,r,i,s,o,l){var a=e?.toString()?dl(e.toString()):void 0;this.metadata={joinedConfig:t,localConfig:r,remoteConfig:i,sessionId:e,hashValue:a,sampleRate:t.sampleRate,replaySDKType:this.mapSDKType(l),replaySDKVersion:s,standaloneSDKType:"@amplitude/session-replay-browser",standaloneSDKVersion:o}},n}(),Gr=function(n){return function(){var e=n.config,t=e||Og(),r=t.loggerProvider,i=t.logLevel;return{logger:r,logLevel:i}}},R$=function(){var n=new _$;return{init:zr(n.init.bind(n),"init",Gr(n)),setSessionId:zr(n.setSessionId.bind(n),"setSessionId",Gr(n)),getSessionId:zr(n.getSessionId.bind(n),"getSessionId",Gr(n)),getSessionReplayProperties:zr(n.getSessionReplayProperties.bind(n),"getSessionReplayProperties",Gr(n)),flush:zr(n.flush.bind(n),"flush",Gr(n)),shutdown:zr(n.shutdown.bind(n),"shutdown",Gr(n))}};const Tn=R$();var $$=Tn.init,O$=Tn.setSessionId,T$=Tn.getSessionId,P$=Tn.getSessionReplayProperties,k$=Tn.flush,N$=Tn.shutdown,xh="1.16.13",M$=function(){function n(e){this.name=n.pluginName,this.type="enrichment",this.sr={flush:k$,getSessionId:T$,getSessionReplayProperties:P$,init:$$,setSessionId:O$,shutdown:N$},this.options=er({forceSessionTracking:!1},e),this.srInitOptions=this.options}return n.prototype.setup=function(e,t){var r,i,s,o,l;return Nn(this,void 0,void 0,function(){var a;return Mn(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e?.loggerProvider.log("Installing @amplitude/plugin-session-replay, version ".concat(xh,".")),this.config=e,this.options.forceSessionTracking&&(typeof e.defaultTracking=="boolean"?e.defaultTracking===!1&&(e.defaultTracking={pageViews:!1,formInteractions:!1,fileDownloads:!1,sessions:!0}):e.defaultTracking=er(er({},e.defaultTracking),{sessions:!0})),this.srInitOptions={instanceName:this.config.instanceName,deviceId:(r=this.options.deviceId)!==null&&r!==void 0?r:this.config.deviceId,optOut:this.config.optOut,sessionId:this.options.customSessionId?void 0:this.config.sessionId,loggerProvider:this.config.loggerProvider,logLevel:this.config.logLevel,flushMaxRetries:this.config.flushMaxRetries,serverZone:this.config.serverZone,configServerUrl:this.options.configServerUrl,trackServerUrl:this.options.trackServerUrl,sampleRate:this.options.sampleRate,privacyConfig:{blockSelector:(i=this.options.privacyConfig)===null||i===void 0?void 0:i.blockSelector,maskSelector:(s=this.options.privacyConfig)===null||s===void 0?void 0:s.maskSelector,unmaskSelector:(o=this.options.privacyConfig)===null||o===void 0?void 0:o.unmaskSelector,defaultMaskLevel:(l=this.options.privacyConfig)===null||l===void 0?void 0:l.defaultMaskLevel},debugMode:this.options.debugMode,shouldInlineStylesheet:this.options.shouldInlineStylesheet,version:{type:"plugin",version:xh},performanceConfig:this.options.performanceConfig,storeType:this.options.storeType,experimental:this.options.experimental},[4,this.sr.init(e.apiKey,this.srInitOptions).promise];case 1:return u.sent(),[3,3];case 2:return a=u.sent(),e?.loggerProvider.error("Session Replay: Failed to initialize due to ".concat(a.message)),[3,3];case 3:return[2]}})})},n.prototype.onSessionIdChanged=function(e){return Nn(this,void 0,void 0,function(){return Mn(this,function(t){switch(t.label){case 0:return this.config.loggerProvider.debug("Analytics session id is changed to ".concat(e,", SR session id is ").concat(String(this.sr.getSessionId()),".")),[4,this.sr.setSessionId(e).promise];case 1:return t.sent(),[2]}})})},n.prototype.onOptOutChanged=function(e){return Nn(this,void 0,void 0,function(){return Mn(this,function(t){switch(t.label){case 0:return this.config.loggerProvider.debug("optOut is changed to ".concat(String(e),", calling ").concat(e?"sessionReplay.shutdown()":"sessionReplay.init()",".")),e?(this.sr.shutdown(),[3,3]):[3,1];case 1:return[4,this.sr.init(this.config.apiKey,this.srInitOptions).promise];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.execute=function(e){var t;return Nn(this,void 0,void 0,function(){var r,i,r,i,s;return Mn(this,function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),this.options.customSessionId?(r=this.options.customSessionId(e),r?r===this.sr.getSessionId()?[3,2]:[4,this.sr.setSessionId(r).promise]:[3,3]):[3,4];case 1:o.sent(),o.label=2;case 2:i=this.sr.getSessionReplayProperties(),e.event_properties=er(er({},e.event_properties),i),o.label=3;case 3:return[3,7];case 4:return r=this.config.sessionId,r&&r!==this.sr.getSessionId()?[4,this.sr.setSessionId(r).promise]:[3,6];case 5:o.sent(),o.label=6;case 6:r&&r===e.session_id&&(i=this.sr.getSessionReplayProperties(),e.event_properties=er(er({},e.event_properties),i)),o.label=7;case 7:return[2,Promise.resolve(e)];case 8:return s=o.sent(),(t=this.config)===null||t===void 0||t.loggerProvider.error("Session Replay: Failed to enrich event due to ".concat(s.message)),[2,Promise.resolve(e)];case 9:return[2]}})})},n.prototype.teardown=function(){var e;return Nn(this,void 0,void 0,function(){return Mn(this,function(t){try{this.sr.shutdown(),this.config=null}catch(r){(e=this.config)===null||e===void 0||e.loggerProvider.error("Session Replay: teardown failed due to ".concat(r.message))}return[2]})})},n.prototype.getSessionReplayProperties=function(){return this.sr.getSessionReplayProperties()},n.pluginName="@amplitude/plugin-session-replay-browser",n}(),EL=function(n){return new M$(n)},Cl=function(n,e){return Cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Cl(n,e)};function L$(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Cl(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pr=function(){return pr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},pr.apply(this,arguments)};function zy(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function jy(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ct(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qc(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function ef(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var D={IS:"is",IS_NOT:"is not",CONTAINS:"contains",DOES_NOT_CONTAIN:"does not contain",LESS_THAN:"less",LESS_THAN_EQUALS:"less or equal",GREATER_THAN:"greater",GREATER_THAN_EQUALS:"greater or equal",VERSION_LESS_THAN:"version less",VERSION_LESS_THAN_EQUALS:"version less or equal",VERSION_GREATER_THAN:"version greater",VERSION_GREATER_THAN_EQUALS:"version greater or equal",SET_IS:"set is",SET_IS_NOT:"set is not",SET_CONTAINS:"set contains",SET_DOES_NOT_CONTAIN:"set does not contain",SET_CONTAINS_ANY:"set contains any",SET_DOES_NOT_CONTAIN_ANY:"set does not contain any",REGEX_MATCH:"regex match",REGEX_DOES_NOT_MATCH:"regex does not match"},D$=function(n){for(var e=[],t=0,r=0;r<n.length;r++){var i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)==55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return Uint8Array.from(e)},oo=-862048943,ao=461845907,uo=15,U$=13,F$=5,B$=-430675100,z$=function(n,e){e===void 0&&(e=0);for(var t=D$(n),r=t.length,i=r>>2,s=e,o=0;o<i;o++){var l=o<<2,a=G$(t,l);s=j$(a,s)}var u=i<<2,c=0;switch(r-u){case 3:c^=t[u+2]<<16,c^=t[u+1]<<8,c^=t[u],c=Math.imul(c,oo),c=ri(c,uo),c=Math.imul(c,ao),s^=c;break;case 2:c^=t[u+1]<<8,c^=t[u],c=Math.imul(c,oo),c=ri(c,uo),c=Math.imul(c,ao),s^=c;break;case 1:c^=t[u],c=Math.imul(c,oo),c=ri(c,uo),c=Math.imul(c,ao),s^=c;break}return s^=r,W$(s)>>>0},j$=function(n,e){var t=n,r=e;return t=Math.imul(t,oo),t=ri(t,uo),t=Math.imul(t,ao),r^=t,r=ri(r,U$),r=Math.imul(r,F$),r+B$|0},W$=function(n){var e=n;return e^=e>>>16,e=Math.imul(e,-2048144789),e^=e>>>13,e=Math.imul(e,-1028477387),e^=e>>>16,e},ri=function(n,e,t){t===void 0&&(t=32),e>t&&(e=e%t);var r=4294967295<<t-e>>>0,i=(n&r)>>>0>>>t-e>>>0;return(n<<e|i)>>>0},G$=function(n,e){e===void 0&&(e=0);var t=n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3];return V$(t)},V$=function(n){return(n&-16777216)>>>24|(n&16711680)>>>8|(n&65280)<<8|(n&255)<<24},Ah=function(n,e){var t,r;if(!(!e||e.length===0)){try{for(var i=Ct(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(!o||!n||typeof n!="object")return;n=n[o]}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}if(n)return n}},H$="(\\d+)\\.(\\d+)",q$="(\\d+)",Y$="(-(([-\\w]+\\.?)*))?",K$="^".concat(H$,"(\\.").concat(q$).concat(Y$,")?$"),Z$=function(){function n(e,t,r,i){i===void 0&&(i=void 0),this.major=e,this.minor=t,this.patch=r,this.preRelease=i}return n.parse=function(e){if(e){var t=new RegExp(K$).exec(e);if(t){var r=Number(t[1]),i=Number(t[2]);if(!(isNaN(r)||isNaN(i))){var s=Number(t[4])||0,o=t[5]||void 0;return new n(r,i,s,o)}}}},n.prototype.compareTo=function(e){return this.major>e.major?1:this.major<e.major?-1:this.minor>e.minor?1:this.minor<e.minor?-1:this.patch>e.patch?1:this.patch<e.patch||this.preRelease&&!e.preRelease?-1:!this.preRelease&&e.preRelease?1:this.preRelease&&e.preRelease?this.preRelease>e.preRelease?1:this.preRelease<e.preRelease?-1:0:0},n}(),X$=function(){function n(){}return n.prototype.evaluate=function(e,t){var r,i,s={},o={context:e,result:s};try{for(var l=Ct(t),a=l.next();!a.done;a=l.next()){var u=a.value,c=this.evaluateFlag(o,u);c&&(s[u.key]=c)}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return s},n.prototype.evaluateFlag=function(e,t){var r,i,s;try{for(var o=Ct(t.segments),l=o.next();!l.done;l=o.next()){var a=l.value;if(s=this.evaluateSegment(e,t,a),s){var u=pr(pr(pr({},t.metadata),a.metadata),s.metadata);s=pr(pr({},s),{metadata:u});break}}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},n.prototype.evaluateSegment=function(e,t,r){var i,s,o,l;if(!r.conditions){var a=this.bucket(e,r);return a!==void 0?t.variants[a]:void 0}try{for(var u=Ct(r.conditions),c=u.next();!c.done;c=u.next()){var d=c.value,h=!0;try{for(var g=(o=void 0,Ct(d)),m=g.next();!m.done;m=g.next()){var v=m.value;if(h=this.matchCondition(e,v),!h)break}}catch(y){o={error:y}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}if(h){var a=this.bucket(e,r);return a!==void 0?t.variants[a]:void 0}}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}},n.prototype.matchCondition=function(e,t){var r=Ah(e,t.selector);if(r)if(this.isSetOperator(t.op)){var i=this.coerceStringArray(r);return i?this.matchSet(i,t.op,t.values):!1}else{var s=this.coerceString(r);return s!==void 0?this.matchString(s,t.op,t.values):!1}else return this.matchNull(t.op,t.values)},n.prototype.getHash=function(e){return z$(e)},n.prototype.bucket=function(e,t){var r,i,s,o;if(!t.bucket)return t.variant;var l=this.coerceString(Ah(e,t.bucket.selector));if(!l||l.length===0)return t.variant;var a="".concat(t.bucket.salt,"/").concat(l),u=this.getHash(a),c=u%100,d=Math.floor(u/100);try{for(var h=Ct(t.bucket.allocations),g=h.next();!g.done;g=h.next()){var m=g.value,v=m.range[0],y=m.range[1];if(c>=v&&c<y)try{for(var C=(s=void 0,Ct(m.distributions)),E=C.next();!E.done;E=C.next()){var b=E.value,I=b.range[0],_=b.range[1];if(d>=I&&d<_)return b.variant}}catch($){s={error:$}}finally{try{E&&!E.done&&(o=C.return)&&o.call(C)}finally{if(s)throw s.error}}}}catch($){r={error:$}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return t.variant},n.prototype.matchNull=function(e,t){var r=this.containsNone(t);switch(e){case D.IS:case D.CONTAINS:case D.LESS_THAN:case D.LESS_THAN_EQUALS:case D.GREATER_THAN:case D.GREATER_THAN_EQUALS:case D.VERSION_LESS_THAN:case D.VERSION_LESS_THAN_EQUALS:case D.VERSION_GREATER_THAN:case D.VERSION_GREATER_THAN_EQUALS:case D.SET_IS:case D.SET_CONTAINS:case D.SET_CONTAINS_ANY:return r;case D.IS_NOT:case D.DOES_NOT_CONTAIN:case D.SET_DOES_NOT_CONTAIN:case D.SET_DOES_NOT_CONTAIN_ANY:return!r;default:return!1}},n.prototype.matchSet=function(e,t,r){switch(t){case D.SET_IS:return this.setEquals(e,r);case D.SET_IS_NOT:return!this.setEquals(e,r);case D.SET_CONTAINS:return this.matchesSetContainsAll(e,r);case D.SET_DOES_NOT_CONTAIN:return!this.matchesSetContainsAll(e,r);case D.SET_CONTAINS_ANY:return this.matchesSetContainsAny(e,r);case D.SET_DOES_NOT_CONTAIN_ANY:return!this.matchesSetContainsAny(e,r);default:return!1}},n.prototype.matchString=function(e,t,r){var i=this;switch(t){case D.IS:return this.matchesIs(e,r);case D.IS_NOT:return!this.matchesIs(e,r);case D.CONTAINS:return this.matchesContains(e,r);case D.DOES_NOT_CONTAIN:return!this.matchesContains(e,r);case D.LESS_THAN:case D.LESS_THAN_EQUALS:case D.GREATER_THAN:case D.GREATER_THAN_EQUALS:return this.matchesComparable(e,t,r,function(s){return i.parseNumber(s)},this.comparator);case D.VERSION_LESS_THAN:case D.VERSION_LESS_THAN_EQUALS:case D.VERSION_GREATER_THAN:case D.VERSION_GREATER_THAN_EQUALS:return this.matchesComparable(e,t,r,function(s){return Z$.parse(s)},this.versionComparator);case D.REGEX_MATCH:return this.matchesRegex(e,r);case D.REGEX_DOES_NOT_MATCH:return!this.matchesRegex(e,r);default:return!1}},n.prototype.matchesIs=function(e,t){if(this.containsBooleans(t)){var r=e.toLowerCase();if(r==="true"||r==="false")return t.some(function(i){return i.toLowerCase()===r})}return t.some(function(i){return e===i})},n.prototype.matchesContains=function(e,t){var r,i;try{for(var s=Ct(t),o=s.next();!o.done;o=s.next()){var l=o.value;if(e.toLowerCase().includes(l.toLowerCase()))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},n.prototype.matchesComparable=function(e,t,r,i,s){var o=this,l=i(e),a=r.map(function(u){return i(u)}).filter(function(u){return u!==void 0});return l===void 0||a.length===0?r.some(function(u){return o.comparator(e,t,u)}):a.some(function(u){return s(l,t,u)})},n.prototype.comparator=function(e,t,r){switch(t){case D.LESS_THAN:case D.VERSION_LESS_THAN:return e<r;case D.LESS_THAN_EQUALS:case D.VERSION_LESS_THAN_EQUALS:return e<=r;case D.GREATER_THAN:case D.VERSION_GREATER_THAN:return e>r;case D.GREATER_THAN_EQUALS:case D.VERSION_GREATER_THAN_EQUALS:return e>=r;default:return!1}},n.prototype.versionComparator=function(e,t,r){var i=e.compareTo(r);switch(t){case D.LESS_THAN:case D.VERSION_LESS_THAN:return i<0;case D.LESS_THAN_EQUALS:case D.VERSION_LESS_THAN_EQUALS:return i<=0;case D.GREATER_THAN:case D.VERSION_GREATER_THAN:return i>0;case D.GREATER_THAN_EQUALS:case D.VERSION_GREATER_THAN_EQUALS:return i>=0;default:return!1}},n.prototype.matchesRegex=function(e,t){return t.some(function(r){return!!new RegExp(r).exec(e)})},n.prototype.containsNone=function(e){return e.some(function(t){return t==="(none)"})},n.prototype.containsBooleans=function(e){return e.some(function(t){switch(t.toLowerCase()){case"true":case"false":return!0;default:return!1}})},n.prototype.parseNumber=function(e){var t;return(t=Number(e))!==null&&t!==void 0?t:void 0},n.prototype.coerceString=function(e){if(e)return typeof e=="object"?JSON.stringify(e):String(e)},n.prototype.coerceStringArray=function(e){var t=this;if(Array.isArray(e)){var r=e;return r.map(function(o){return t.coerceString(o)}).filter(Boolean)}var i=String(e);try{var s=JSON.parse(i);if(Array.isArray(s)){var r=e;return r.map(function(l){return t.coerceString(l)}).filter(Boolean)}else return}catch{return}},n.prototype.isSetOperator=function(e){switch(e){case D.SET_IS:case D.SET_IS_NOT:case D.SET_CONTAINS:case D.SET_DOES_NOT_CONTAIN:case D.SET_CONTAINS_ANY:case D.SET_DOES_NOT_CONTAIN_ANY:return!0;default:return!1}},n.prototype.setEquals=function(e,t){var r=new Set(e),i=new Set(t);return r.size===i.size&&ef([],Qc(i),!1).every(function(s){return r.has(s)})},n.prototype.matchesSetContainsAll=function(e,t){var r,i;if(e.length<t.length)return!1;try{for(var s=Ct(t),o=s.next();!o.done;o=s.next()){var l=o.value;if(!this.matchesIs(l,e))return!1}}catch(a){r={error:a}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!0},n.prototype.matchesSetContainsAny=function(e,t){var r,i;try{for(var s=Ct(t),o=s.next();!o.done;o=s.next()){var l=o.value;if(this.matchesIs(l,e))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},n}(),J$=function(n,e){var t,r,i=pr({},n),s=[],o=e||Object.keys(i);try{for(var l=Ct(o),a=l.next();!a.done;a=l.next()){var u=a.value,c=Wy(u,i);c&&s.push.apply(s,ef([],Qc(c),!1))}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},Wy=function(n,e,t){var r,i;t===void 0&&(t=[]);var s=e[n];if(s){if(!s.dependencies||s.dependencies.length===0)return delete e[s.key],[s]}else return;t.push(s.key);var o=[],l=function(d){if(t.some(function(g){return g===d}))throw Error("Detected a cycle between flags ".concat(t));var h=Wy(d,e,t);h&&o.push.apply(o,ef([],Qc(h),!1))};try{for(var a=Ct(s.dependencies),u=a.next();!u.done;u=a.next()){var c=u.value;l(c)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o.push(s),t.pop(),delete e[s.key],o};const Gy="3.7.5",Q$=Gy,eO=typeof atob=="function",tO=typeof btoa=="function",Pn=typeof Fe=="function",_h=typeof TextDecoder=="function"?new TextDecoder:void 0,Rh=typeof TextEncoder=="function"?new TextEncoder:void 0,rO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",qn=Array.prototype.slice.call(rO),Cs=(n=>{let e={};return n.forEach((t,r)=>e[t]=r),e})(qn),nO=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,tt=String.fromCharCode.bind(String),$h=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0)),Vy=n=>n.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Hy=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),qy=n=>{let e,t,r,i,s="";const o=n.length%3;for(let l=0;l<n.length;){if((t=n.charCodeAt(l++))>255||(r=n.charCodeAt(l++))>255||(i=n.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=t<<16|r<<8|i,s+=qn[e>>18&63]+qn[e>>12&63]+qn[e>>6&63]+qn[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},tf=tO?n=>btoa(n):Pn?n=>Fe.from(n,"binary").toString("base64"):qy,Il=Pn?n=>Fe.from(n).toString("base64"):n=>{let t=[];for(let r=0,i=n.length;r<i;r+=4096)t.push(tt.apply(null,n.subarray(r,r+4096)));return tf(t.join(""))},lo=(n,e=!1)=>e?Vy(Il(n)):Il(n),iO=n=>{if(n.length<2){var e=n.charCodeAt(0);return e<128?n:e<2048?tt(192|e>>>6)+tt(128|e&63):tt(224|e>>>12&15)+tt(128|e>>>6&63)+tt(128|e&63)}else{var e=65536+(n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320);return tt(240|e>>>18&7)+tt(128|e>>>12&63)+tt(128|e>>>6&63)+tt(128|e&63)}},sO=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Yy=n=>n.replace(sO,iO),Oh=Pn?n=>Fe.from(n,"utf8").toString("base64"):Rh?n=>Il(Rh.encode(n)):n=>tf(Yy(n)),an=(n,e=!1)=>e?Vy(Oh(n)):Oh(n),Th=n=>an(n,!0),oO=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,aO=n=>{switch(n.length){case 4:var e=(7&n.charCodeAt(0))<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|63&n.charCodeAt(3),t=e-65536;return tt((t>>>10)+55296)+tt((t&1023)+56320);case 3:return tt((15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2));default:return tt((31&n.charCodeAt(0))<<6|63&n.charCodeAt(1))}},Ky=n=>n.replace(oO,aO),Zy=n=>{if(n=n.replace(/\s+/g,""),!nO.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let e,t="",r,i;for(let s=0;s<n.length;)e=Cs[n.charAt(s++)]<<18|Cs[n.charAt(s++)]<<12|(r=Cs[n.charAt(s++)])<<6|(i=Cs[n.charAt(s++)]),t+=r===64?tt(e>>16&255):i===64?tt(e>>16&255,e>>8&255):tt(e>>16&255,e>>8&255,e&255);return t},rf=eO?n=>atob(Hy(n)):Pn?n=>Fe.from(n,"base64").toString("binary"):Zy,Xy=Pn?n=>$h(Fe.from(n,"base64")):n=>$h(rf(n).split("").map(e=>e.charCodeAt(0))),Jy=n=>Xy(Qy(n)),uO=Pn?n=>Fe.from(n,"base64").toString("utf8"):_h?n=>_h.decode(Xy(n)):n=>Ky(rf(n)),Qy=n=>Hy(n.replace(/[-_]/g,e=>e=="-"?"+":"/")),xl=n=>uO(Qy(n)),lO=n=>{if(typeof n!="string")return!1;const e=n.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},ev=n=>({value:n,enumerable:!1,writable:!0,configurable:!0}),tv=function(){const n=(e,t)=>Object.defineProperty(String.prototype,e,ev(t));n("fromBase64",function(){return xl(this)}),n("toBase64",function(e){return an(this,e)}),n("toBase64URI",function(){return an(this,!0)}),n("toBase64URL",function(){return an(this,!0)}),n("toUint8Array",function(){return Jy(this)})},rv=function(){const n=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,ev(t));n("toBase64",function(e){return lo(this,e)}),n("toBase64URI",function(){return lo(this,!0)}),n("toBase64URL",function(){return lo(this,!0)})},cO=()=>{tv(),rv()},Ph={version:Gy,VERSION:Q$,atob:rf,atobPolyfill:Zy,btoa:tf,btoaPolyfill:qy,fromBase64:xl,toBase64:an,encode:an,encodeURI:Th,encodeURL:Th,utob:Yy,btou:Ky,decode:xl,isValid:lO,fromUint8Array:lo,toUint8Array:Jy,extendString:tv,extendUint8Array:rv,extendBuiltins:cO};var nv=function(n){L$(e,n);function e(t,r){var i=n.call(this,r)||this;return i.statusCode=t,Object.setPrototypeOf(i,e.prototype),i}return e}(Error),fO=function(){function n(e,t,r){this.deploymentKey=e,this.serverUrl=t,this.httpClient=r}return n.prototype.getVariants=function(e,t){return zy(this,void 0,void 0,function(){var r,i,s,o;return jy(this,function(l){switch(l.label){case 0:return r=Ph.encodeURL(JSON.stringify(e)),i={Authorization:"Api-Key ".concat(this.deploymentKey),"X-Amp-Exp-User":r},t?.flagKeys&&(i["X-Amp-Exp-Flag-Keys"]=Ph.encodeURL(JSON.stringify(t.flagKeys))),t?.trackingOption&&(i["X-Amp-Exp-Track"]=t.trackingOption),s=new URL("".concat(this.serverUrl,"/sdk/v2/vardata?v=0")),t?.evaluationMode&&s.searchParams.append("eval_mode",t?.evaluationMode),t?.deliveryMethod&&s.searchParams.append("delivery_method",t?.deliveryMethod),[4,this.httpClient.request({requestUrl:s.toString(),method:"GET",headers:i,timeoutMillis:t?.timeoutMillis})];case 1:if(o=l.sent(),o.status!=200)throw new nv(o.status,"Fetch error response: status=".concat(o.status));return[2,JSON.parse(o.body)]}})})},n}(),dO=function(){function n(e,t,r){this.deploymentKey=e,this.serverUrl=t,this.httpClient=r}return n.prototype.getFlags=function(e){return zy(this,void 0,void 0,function(){var t,r,i;return jy(this,function(s){switch(s.label){case 0:return t={Authorization:"Api-Key ".concat(this.deploymentKey)},e?.libraryName&&e?.libraryVersion&&(t["X-Amp-Exp-Library"]="".concat(e.libraryName,"/").concat(e.libraryVersion)),[4,this.httpClient.request({requestUrl:"".concat(this.serverUrl,"/sdk/v2/flags"),method:"GET",headers:t,timeoutMillis:e?.timeoutMillis})];case 1:if(r=s.sent(),r.status!=200)throw Error("Flags error response: status=".concat(r.status));return i=JSON.parse(r.body),[2,i.reduce(function(o,l){return o[l.key]=l,o},{})]}})})},n}(),Sn=typeof globalThis<"u"?globalThis:nr||self,hO=function(){function n(e,t){this.poller=void 0,this.action=e,this.ms=t}return n.prototype.start=function(){this.poller||(this.poller=Sn.setInterval(this.action,this.ms),this.action())},n.prototype.stop=function(){this.poller&&(Sn.clearInterval(this.poller),this.poller=void 0)},n}(),Al={exports:{}};(function(n,e){(function(t,r){var i="0.7.33",s="",o="?",l="function",a="undefined",u="object",c="string",d="major",h="model",g="name",m="type",v="vendor",y="version",C="architecture",E="console",b="mobile",I="tablet",_="smarttv",$="wearable",O="embedded",A=350,P="Amazon",N="Apple",U="ASUS",F="BlackBerry",M="Browser",Y="Chrome",oe="Edge",B="Firefox",z="Google",te="Huawei",J="LG",L="Microsoft",de="Motorola",Te="Opera",pe="Samsung",G="Sharp",V="Sony",Ge="Xiaomi",be="Zebra",ge="Facebook",Ve=function(Z,ne){var W={};for(var xe in Z)ne[xe]&&ne[xe].length%2===0?W[xe]=ne[xe].concat(Z[xe]):W[xe]=Z[xe];return W},Ue=function(Z){for(var ne={},W=0;W<Z.length;W++)ne[Z[W].toUpperCase()]=Z[W];return ne},q=function(Z,ne){return typeof Z===c?Pe(ne).indexOf(Pe(Z))!==-1:!1},Pe=function(Z){return Z.toLowerCase()},me=function(Z){return typeof Z===c?Z.replace(/[^\d\.]/g,s).split(".")[0]:r},ae=function(Z,ne){if(typeof Z===c)return Z=Z.replace(/^\s\s*/,s),typeof ne===a?Z:Z.substring(0,A)},Ze=function(Z,ne){for(var W=0,xe,Q,mt,ye,w,f;W<ne.length&&!w;){var p=ne[W],S=ne[W+1];for(xe=Q=0;xe<p.length&&!w;)if(w=p[xe++].exec(Z),w)for(mt=0;mt<S.length;mt++)f=w[++Q],ye=S[mt],typeof ye===u&&ye.length>0?ye.length===2?typeof ye[1]==l?this[ye[0]]=ye[1].call(this,f):this[ye[0]]=ye[1]:ye.length===3?typeof ye[1]===l&&!(ye[1].exec&&ye[1].test)?this[ye[0]]=f?ye[1].call(this,f,ye[2]):r:this[ye[0]]=f?f.replace(ye[1],ye[2]):r:ye.length===4&&(this[ye[0]]=f?ye[3].call(this,f.replace(ye[1],ye[2])):r):this[ye]=f||r;W+=2}},K=function(Z,ne){for(var W in ne)if(typeof ne[W]===u&&ne[W].length>0){for(var xe=0;xe<ne[W].length;xe++)if(q(ne[W][xe],Z))return W===o?r:W}else if(q(ne[W],Z))return W===o?r:W;return Z},Ot={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Fi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Bi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,y],[/opios[\/ ]+([\w\.]+)/i],[y,[g,Te+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[g,Te]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[g,"UC"+M]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[y,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[y,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+M],y],[/\bfocus\/([\w\.]+)/i],[y,[g,B+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[g,Te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[g,Te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[g,"MIUI "+M]],[/fxios\/([-\w\.]+)/i],[y,[g,B]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+M]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+M],y],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,ge],y],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[g,Y+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,Y+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[g,"Android "+M]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,y],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[y,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[y,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[y,K,Ot]],[/(webkit|khtml)\/([\w\.]+)/i],[g,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[g,B+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,y],[/(cobalt)\/([\w\.]+)/i],[g,[y,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[C,"amd64"]],[/(ia32(?=;))/i],[[C,Pe]],[/((?:i[346]|x)86)[;\)]/i],[[C,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[C,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[C,"armhf"]],[/windows (ce|mobile); ppc;/i],[[C,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[C,/ower/,s,Pe]],[/(sun4\w)[;\)]/i],[[C,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[C,Pe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[v,pe],[m,I]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[v,pe],[m,b]],[/((ipod|iphone)\d+,\d+)/i],[h,[v,N],[m,b]],[/(ipad\d+,\d+)/i],[h,[v,N],[m,I]],[/\((ip(?:hone|od)[\w ]*);/i],[h,[v,N],[m,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[v,N],[m,I]],[/(macintosh);/i],[h,[v,N]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[v,te],[m,I]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[v,te],[m,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[v,Ge],[m,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[v,Ge],[m,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[v,"OPPO"],[m,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[v,"Vivo"],[m,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[v,"Realme"],[m,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[v,de],[m,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[v,de],[m,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[v,J],[m,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[v,J],[m,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[v,"Lenovo"],[m,I]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[v,"Nokia"],[m,b]],[/(pixel c)\b/i],[h,[v,z],[m,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[v,z],[m,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[v,V],[m,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[v,V],[m,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[v,"OnePlus"],[m,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[v,P],[m,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[v,P],[m,b]],[/(playbook);[-\w\),; ]+(rim)/i],[h,v,[m,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[v,F],[m,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[v,U],[m,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[v,U],[m,b]],[/(nexus 9)/i],[h,[v,"HTC"],[m,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[h,/_/g," "],[m,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[v,"Acer"],[m,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[v,"Meizu"],[m,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[v,G],[m,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,h,[m,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,h,[m,I]],[/(surface duo)/i],[h,[v,L],[m,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[v,"Fairphone"],[m,b]],[/(u304aa)/i],[h,[v,"AT&T"],[m,b]],[/\bsie-(\w*)/i],[h,[v,"Siemens"],[m,b]],[/\b(rct\w+) b/i],[h,[v,"RCA"],[m,I]],[/\b(venue[\d ]{2,7}) b/i],[h,[v,"Dell"],[m,I]],[/\b(q(?:mv|ta)\w+) b/i],[h,[v,"Verizon"],[m,I]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[v,"Barnes & Noble"],[m,I]],[/\b(tm\d{3}\w+) b/i],[h,[v,"NuVision"],[m,I]],[/\b(k88) b/i],[h,[v,"ZTE"],[m,I]],[/\b(nx\d{3}j) b/i],[h,[v,"ZTE"],[m,b]],[/\b(gen\d{3}) b.+49h/i],[h,[v,"Swiss"],[m,b]],[/\b(zur\d{3}) b/i],[h,[v,"Swiss"],[m,I]],[/\b((zeki)?tb.*\b) b/i],[h,[v,"Zeki"],[m,I]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],h,[m,I]],[/\b(ns-?\w{0,9}) b/i],[h,[v,"Insignia"],[m,I]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[v,"NextBook"],[m,I]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],h,[m,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],h,[m,b]],[/\b(ph-1) /i],[h,[v,"Essential"],[m,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[v,"Envizen"],[m,I]],[/\b(trio[-\w\. ]+) b/i],[h,[v,"MachSpeed"],[m,I]],[/\btu_(1491) b/i],[h,[v,"Rotor"],[m,I]],[/(shield[\w ]+) b/i],[h,[v,"Nvidia"],[m,I]],[/(sprint) (\w+)/i],[v,h,[m,b]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[v,L],[m,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[v,be],[m,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[v,be],[m,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,h,[m,E]],[/droid.+; (shield) bui/i],[h,[v,"Nvidia"],[m,E]],[/(playstation [345portablevi]+)/i],[h,[v,V],[m,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[v,L],[m,E]],[/smart-tv.+(samsung)/i],[v,[m,_]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[v,pe],[m,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,J],[m,_]],[/(apple) ?tv/i],[v,[h,N+" TV"],[m,_]],[/crkey/i],[[h,Y+"cast"],[v,z],[m,_]],[/droid.+aft(\w)( bui|\))/i],[h,[v,P],[m,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[v,G],[m,_]],[/(bravia[\w ]+)( bui|\))/i],[h,[v,V],[m,_]],[/(mitv-\w{5}) bui/i],[h,[v,Ge],[m,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[v,ae],[h,ae],[m,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,_]],[/((pebble))app/i],[v,h,[m,$]],[/droid.+; (glass) \d/i],[h,[v,z],[m,$]],[/droid.+; (wt63?0{2,3})\)/i],[h,[v,be],[m,$]],[/(quest( 2)?)/i],[h,[v,ge],[m,$]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[m,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[m,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[m,I]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,b]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[g,oe+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[y,K,Fi]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[y,K,Fi]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,y],[/\(bb(10);/i],[y,[g,F]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[g,B+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[y,[g,Y+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],y],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,y],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,y]]},lt=function(Z,ne){if(typeof Z===u&&(ne=Z,Z=r),!(this instanceof lt))return new lt(Z,ne).getResult();var W=Z||(typeof t!==a&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:s),xe=ne?Ve(Bi,ne):Bi;return this.getBrowser=function(){var Q={};return Q[g]=r,Q[y]=r,Ze.call(Q,W,xe.browser),Q.major=me(Q.version),Q},this.getCPU=function(){var Q={};return Q[C]=r,Ze.call(Q,W,xe.cpu),Q},this.getDevice=function(){var Q={};return Q[v]=r,Q[h]=r,Q[m]=r,Ze.call(Q,W,xe.device),Q},this.getEngine=function(){var Q={};return Q[g]=r,Q[y]=r,Ze.call(Q,W,xe.engine),Q},this.getOS=function(){var Q={};return Q[g]=r,Q[y]=r,Ze.call(Q,W,xe.os),Q},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return W},this.setUA=function(Q){return W=typeof Q===c&&Q.length>A?ae(Q,A):Q,this},this.setUA(W),this};lt.VERSION=i,lt.BROWSER=Ue([g,y,d]),lt.CPU=Ue([C]),lt.DEVICE=Ue([h,v,m,E,b,_,I,$,O]),lt.ENGINE=lt.OS=Ue([g,y]),n.exports&&(e=n.exports=lt),e.UAParser=lt;var ur=typeof t!==a&&(t.jQuery||t.Zepto);if(ur&&!ur.ua){var Ur=new lt;ur.ua=Ur.getResult(),ur.ua.get=function(){return Ur.getUA()},ur.ua.set=function(Z){Ur.setUA(Z);var ne=Ur.getResult();for(var W in ne)ur.ua[W]=ne[W]}}})(typeof window=="object"?window:jw)})(Al,Al.exports);var pO=Al.exports,we=function(){return we=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},we.apply(this,arguments)};function ft(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(n,[])).next())})}function dt(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wi(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gO(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function mO(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function yO(n,e){return e=e||{},new Promise(function(t,r){var i=new XMLHttpRequest,s=[],o=[],l={},a=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return s},entries:function(){return o},get:function(c){return l[c.toLowerCase()]},has:function(c){return c.toLowerCase()in l}}}};for(var u in i.open(e.method||"get",n,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,d,h){s.push(d=d.toLowerCase()),o.push([d,h]),l[d]=l[d]?l[d]+","+h:h}),t(a())},i.onerror=r,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(u,e.headers[u]);i.send(e.body||null)})}var vO=Sn.fetch||yO,wO=function(n,e){return e==null||e<=0?n:new Promise(function(t,r){Sn.setTimeout(function(){r(Error("Request timeout after "+e+" milliseconds"))},e),n.then(t,r)})},bO=function(n,e,t,r,i){var s=function(){return ft(void 0,void 0,void 0,function(){var o,l,a;return dt(this,function(u){switch(u.label){case 0:return[4,vO(n,{method:e,headers:t,body:r})];case 1:return o=u.sent(),a={status:o.status},[4,o.text()];case 2:return l=(a.body=u.sent(),a),[2,l]}})})};return wO(s(),i)},SO=function(){function n(e){this.client=e}return n.prototype.request=function(e){return ft(this,void 0,void 0,function(){return dt(this,function(t){switch(t.label){case 0:return[4,this.client.request(e.requestUrl,e.method,e.headers,null,e.timeoutMillis)];case 1:return[2,t.sent()]}})})},n}(),iv={request:bO},tr;(function(n){n.LocalStorage="localStorage",n.InitialVariants="initialVariants"})(tr||(tr={}));var Xe;(function(n){n.LocalStorage="storage",n.InitialVariants="initial",n.SecondaryLocalStorage="secondary-storage",n.SecondaryInitialVariants="secondary-initial",n.FallbackInline="fallback-inline",n.FallbackConfig="fallback-config",n.LocalEvaluation="local-evaluation"})(Xe||(Xe={}));var kh=function(n){return!n||n===Xe.FallbackInline||n===Xe.FallbackConfig||n===Xe.SecondaryInitialVariants},ni={debug:!1,instanceName:"$default_instance",fallbackVariant:{},initialVariants:{},initialFlags:void 0,source:tr.LocalStorage,serverUrl:"https://api.lab.amplitude.com",flagsServerUrl:"https://flag.lab.amplitude.com",serverZone:"US",fetchTimeoutMillis:1e4,retryFetchOnFailure:!0,automaticExposureTracking:!0,pollOnStart:!0,fetchOnStart:!0,automaticFetchOnAmplitudeIdentityChange:!1,userProvider:null,analyticsProvider:null,exposureTrackingProvider:null,httpClient:iv},Nh="1.11.0",sv=function(){function n(e){this.identityStore=e}return n.prototype.identityReady=function(e){return ft(this,void 0,void 0,function(){var t,r=this;return dt(this,function(i){return t=this.identityStore.getIdentity(),!t.userId&&!t.deviceId?[2,Promise.race([new Promise(function(s){var o=function(){s(void 0),r.identityStore.removeIdentityListener(o)};r.identityStore.addIdentityListener(o)}),new Promise(function(s,o){Sn.setTimeout(o,e,"Timed out waiting for Amplitude Analytics SDK to initialize. You must ensure that the analytics SDK is initialized prior to calling fetch().")})])]:[2]})})},n.prototype.getUser=function(){var e=this.identityStore.getIdentity(),t=void 0;try{t=e.userProperties}catch{console.warn("[Experiment] failed to cast user properties")}return{user_id:e.userId,device_id:e.deviceId,user_properties:t}},n}(),EO=function(){function n(e){this.eventBridge=e}return n.prototype.track=function(e){this.eventBridge.logEvent({eventType:"$exposure",eventProperties:e})},n}(),nf=function(){function n(e,t){this.ua=new pO.UAParser(typeof navigator<"u"?navigator.userAgent:null).getResult(),this.contextProvider=e,this.userProvider=t}return n.prototype.getUser=function(){var e,t=((e=this.userProvider)===null||e===void 0?void 0:e.getUser())||{},r=this.contextProvider.getApplicationContext();return we({version:r.versionName,language:r.language,platform:r.platform,os:r.os||this.getOs(this.ua),device_model:r.deviceModel||this.getDeviceModel(this.ua)},t)},n.prototype.getOs=function(e){var t,r;return[(t=e.browser)===null||t===void 0?void 0:t.name,(r=e.browser)===null||r===void 0?void 0:r.major].filter(function(i){return i!=null}).join(" ")},n.prototype.getDeviceModel=function(e){var t;return(t=e.os)===null||t===void 0?void 0:t.name},n}(),ov=function(){function n(){}return n.prototype.get=function(e){return localStorage.getItem(e)},n.prototype.put=function(e,t){localStorage.setItem(e,t)},n.prototype.delete=function(e){localStorage.removeItem(e)},n}(),CO=function(n,e,t){var r=n.substring(n.length-6),i="amp-exp-".concat(e,"-").concat(r);return new av(i,t,uv)},IO=function(n,e,t){t===void 0&&(t=new ov);var r=n.substring(n.length-6),i="amp-exp-".concat(e,"-").concat(r,"-flags");return new av(i,t)},av=function(){function n(e,t,r){this.cache={},this.namespace=e,this.storage=t,this.transformer=r}return n.prototype.get=function(e){return this.cache[e]},n.prototype.getAll=function(){return we({},this.cache)},n.prototype.put=function(e,t){this.cache[e]=t},n.prototype.putAll=function(e){var t,r;try{for(var i=wi(Object.keys(e)),s=i.next();!s.done;s=i.next()){var o=s.value;this.cache[o]=e[o]}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.remove=function(e){delete this.cache[e]},n.prototype.clear=function(){this.cache={}},n.prototype.load=function(){var e,t,r=this.storage.get(this.namespace),i;try{i=JSON.parse(r)||{}}catch{return}var s={};try{for(var o=wi(Object.keys(i)),l=o.next();!l.done;l=o.next()){var a=l.value;try{var u=void 0;this.transformer?u=this.transformer(i[a]):u=i[a],u&&(s[a]=u)}catch{}}}catch(c){e={error:c}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.clear(),this.putAll(s)},n.prototype.store=function(e){e===void 0&&(e=this.cache),this.storage.put(this.namespace,JSON.stringify(e))},n}(),uv=function(n){if(typeof n=="string")return{key:n,value:n};if(typeof n=="object"){var e=n.key,t=n.value,r=n.payload,i=n.metadata,s=n.expKey;i&&i.experimentKey?s=i.experimentKey:s&&(i=i||{},i.experimentKey=s);var o={};return e?o.key=e:t&&(o.key=t),t&&(o.value=t),i&&(o.metadata=i),r&&(o.payload=r),s&&(o.expKey=s),o}},xO=function(n,e,t,r){var i,s="[Experiment] Exposure",o=t?.value,l="[Experiment] ".concat(e);return{name:s,user:n,key:e,variant:t,userProperty:l,properties:{key:e,variant:o,source:r},userProperties:(i={},i[l]=o,i)}},Ht=function(n){return n==null},iu=function(n){return Ht(n)?!0:n&&Object.keys(n).length===0},Mh=function(n){var e;return((e=n?.metadata)===null||e===void 0?void 0:e.evaluationMode)==="local"},AO=function(){function n(e,t,r,i){this.started=!1,this.done=!1,this.attempts=e,this.min=t,this.max=r,this.scalar=i}return n.prototype.start=function(e){return ft(this,void 0,void 0,function(){return dt(this,function(t){switch(t.label){case 0:if(!this.started)this.started=!0;else throw Error("Backoff already started");return[4,this.backoff(e,0,this.min)];case 1:return t.sent(),[2]}})})},n.prototype.cancel=function(){this.done=!0,clearTimeout(this.timeoutHandle)},n.prototype.backoff=function(e,t,r){return ft(this,void 0,void 0,function(){var i=this;return dt(this,function(s){return this.done?[2]:(this.timeoutHandle=Sn.setTimeout(function(){return ft(i,void 0,void 0,function(){var o,l;return dt(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,e()];case 1:return a.sent(),[3,3];case 2:return a.sent(),o=t+1,o<this.attempts&&(l=Math.min(r*this.scalar,this.max),this.backoff(e,o,l)),[3,3];case 3:return[2]}})})},r),[2])})})},n}(),_O=function(n){var e,t,r,i;if(!n)return{};var s={user:n},o={};if(!n.groups)return s;try{for(var l=wi(Object.keys(n.groups)),a=l.next();!a.done;a=l.next()){var u=a.value,c=n.groups[u];if(c.length>0&&c[0]){var d=c[0],h={group_name:d},g=(i=(r=n.group_properties)===null||r===void 0?void 0:r[u])===null||i===void 0?void 0:i[d];g&&Object.keys(g).length>0&&(h.group_properties=g),o[u]=h}}}catch(m){e={error:m}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return Object.keys(o).length>0&&(s.groups=o),delete s.user.groups,delete s.user.group_properties,s},ct=function(n){return n==null?{}:typeof n=="string"?{key:n,value:n}:n},Lh=function(n){if(!n)return{};var e=void 0;n.metadata&&(e=n.metadata.experimentKey);var t={};return n.key&&(t.key=n.key),n.value&&(t.value=n.value),n.payload&&(t.payload=n.payload),e&&(t.expKey=e),n.metadata&&(t.metadata=n.metadata),t},RO=function(){function n(e){this.setProperties={},this.unsetProperties={},this.analyticsProvider=e}return n.prototype.track=function(e){this.setProperties[e.key]!=e.variant.value&&(this.setProperties[e.key]=e.variant.value,delete this.unsetProperties[e.key],this.analyticsProvider.track(e))},n.prototype.setUserProperty=function(e){this.setProperties[e.key]!=e.variant.value&&this.analyticsProvider.setUserProperty(e)},n.prototype.unsetUserProperty=function(e){this.unsetProperties[e.key]||(this.unsetProperties[e.key]="unset",delete this.setProperties[e.key],this.analyticsProvider.unsetUserProperty(e))},n}(),$O=function(){function n(e){this.tracked={},this.exposureTrackingProvider=e}return n.prototype.track=function(e){var t=this.tracked[e.flag_key];t&&t.variant===e.variant||(this.tracked[e.flag_key]=e,this.exposureTrackingProvider.track(e))},n}(),OO=1e4,TO=8,PO=500,kO=1e4,NO=1.5,MO=6e4,LO="https://api.lab.eu.amplitude.com",DO="https://flag.lab.eu.amplitude.com",lv=function(){function n(e,t){var r=this,i,s;if(this.engine=new X$,this.poller=new hO(function(){return r.doFlags()},MO),this.isRunning=!1,this.apiKey=e,this.config=we(we(we({},ni),t),{serverUrl:t?.serverUrl||(((i=t?.serverZone)===null||i===void 0?void 0:i.toLowerCase())==="eu"?LO:ni.serverUrl),flagsServerUrl:t?.flagsServerUrl||(((s=t?.serverZone)===null||s===void 0?void 0:s.toLowerCase())==="eu"?DO:ni.flagsServerUrl)}),this.config.initialVariants)for(var o in this.config.initialVariants)this.config.initialVariants[o]=uv(this.config.initialVariants[o]);this.config.userProvider&&(this.userProvider=this.config.userProvider),this.config.analyticsProvider&&(this.analyticsProvider=new RO(this.config.analyticsProvider)),this.config.exposureTrackingProvider&&(this.exposureTrackingProvider=new $O(this.config.exposureTrackingProvider));var l=new SO(this.config.httpClient||iv);this.flagApi=new dO(this.apiKey,this.config.flagsServerUrl,l),this.evaluationApi=new fO(this.apiKey,this.config.serverUrl,l);var a=new ov;this.variants=CO(this.apiKey,this.config.instanceName,a),this.flags=IO(this.apiKey,this.config.instanceName,a);try{this.flags.load(),this.variants.load()}catch{}this.mergeInitialFlagsWithStorage()}return n.prototype.start=function(e){var t;return ft(this,void 0,void 0,function(){var r,i;return dt(this,function(s){switch(s.label){case 0:return this.isRunning?[2]:(this.isRunning=!0,this.setUser(e),r=this.doFlags(),i=(t=this.config.fetchOnStart)!==null&&t!==void 0?t:!0,i?[4,Promise.all([this.fetch(e),r])]:[3,2]);case 1:return s.sent(),[3,4];case 2:return[4,r];case 3:s.sent(),s.label=4;case 4:return this.config.pollOnStart&&this.poller.start(),[2]}})})},n.prototype.stop=function(){this.isRunning&&(this.poller.stop(),this.isRunning=!1)},n.prototype.fetch=function(e,t){return e===void 0&&(e=this.user),ft(this,void 0,void 0,function(){var r;return dt(this,function(i){switch(i.label){case 0:this.setUser(e||{}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchInternal(e,this.config.fetchTimeoutMillis,this.config.retryFetchOnFailure,t)];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),console.error(r),[3,4];case 4:return[2,this]}})})},n.prototype.variant=function(e,t){var r,i;if(!this.apiKey)return{value:void 0};var s=this.variantAndSource(e,t);return this.config.automaticExposureTracking&&this.exposureInternal(e,s),this.debug("[Experiment] variant for ".concat(e," is ").concat(((r=s.variant)===null||r===void 0?void 0:r.key)||((i=s.variant)===null||i===void 0?void 0:i.value))),s.variant||{}},n.prototype.exposure=function(e){var t=this.variantAndSource(e);this.exposureInternal(e,t)},n.prototype.all=function(){if(!this.apiKey)return{};var e=this.evaluate();for(var t in e){var r=this.flags.get(t);Mh(r)||delete e[t]}return we(we(we({},this.secondaryVariants()),this.sourceVariants()),e)},n.prototype.clear=function(){this.variants.clear();try{this.variants.store()}catch{}},n.prototype.getUser=function(){var e;if(!this.user)return this.user;if(!((e=this.user)===null||e===void 0)&&e.user_properties){var t=we({},this.user.user_properties);return we(we({},this.user),{user_properties:t})}else return we({},this.user)},n.prototype.setUser=function(e){var t;if(!e){this.user=null;return}if(!((t=this.user)===null||t===void 0)&&t.user_properties){var r=we({},e.user_properties);this.user=we(we({},e),{user_properties:r})}else this.user=we({},e)},n.prototype.getUserProvider=function(){return this.userProvider},n.prototype.setUserProvider=function(e){return this.userProvider=e,this},n.prototype.mergeInitialFlagsWithStorage=function(){var e=this;if(this.config.initialFlags){var t=JSON.parse(this.config.initialFlags);t.forEach(function(r){e.flags.get(r.key)||e.flags.put(r.key,r)})}},n.prototype.evaluate=function(e){var t,r,i=this.addContext(this.user),s=J$(this.flags.getAll(),e),o=_O(i),l=this.engine.evaluate(o,s),a={};try{for(var u=wi(Object.keys(l)),c=u.next();!c.done;c=u.next()){var d=c.value;a[d]=Lh(l[d])}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return a},n.prototype.variantAndSource=function(e,t){var r={};this.config.source===tr.LocalStorage?r=this.localStorageVariantAndSource(e,t):this.config.source===tr.InitialVariants&&(r=this.initialVariantsVariantAndSource(e,t));var i=this.flags.get(e);return(Mh(i)||!r.variant&&i)&&(r=this.localEvaluationVariantAndSource(e,i,t)),r},n.prototype.localEvaluationVariantAndSource=function(e,t,r){var i,s={},o=this.evaluate([t.key])[e],l=Xe.LocalEvaluation,a=(i=o?.metadata)===null||i===void 0?void 0:i.default;if(!Ht(o)&&!a)return{variant:ct(o),source:l,hasDefaultVariant:!1};if(a&&(s={variant:ct(o),source:l,hasDefaultVariant:!0}),!Ht(r))return{variant:ct(r),source:Xe.FallbackInline,hasDefaultVariant:s.hasDefaultVariant};var u=this.config.initialVariants[e];if(!Ht(u))return{variant:ct(u),source:Xe.SecondaryInitialVariants,hasDefaultVariant:s.hasDefaultVariant};var c=ct(this.config.fallbackVariant),d={variant:c,source:Xe.FallbackConfig,hasDefaultVariant:s.hasDefaultVariant};return iu(c)?s:d},n.prototype.localStorageVariantAndSource=function(e,t){var r,i={},s=this.variants.get(e),o=(r=s?.metadata)===null||r===void 0?void 0:r.default;if(!Ht(s)&&!o)return{variant:ct(s),source:Xe.LocalStorage,hasDefaultVariant:!1};if(o&&(i={variant:ct(s),source:Xe.LocalStorage,hasDefaultVariant:!0}),!Ht(t))return{variant:ct(t),source:Xe.FallbackInline,hasDefaultVariant:i.hasDefaultVariant};var l=this.config.initialVariants[e];if(!Ht(l))return{variant:ct(l),source:Xe.SecondaryInitialVariants,hasDefaultVariant:i.hasDefaultVariant};var a=ct(this.config.fallbackVariant),u={variant:a,source:Xe.FallbackConfig,hasDefaultVariant:i.hasDefaultVariant};return iu(a)?i:u},n.prototype.initialVariantsVariantAndSource=function(e,t){var r,i={},s=this.config.initialVariants[e];if(!Ht(s))return{variant:ct(s),source:Xe.InitialVariants,hasDefaultVariant:!1};var o=this.variants.get(e),l=(r=o?.metadata)===null||r===void 0?void 0:r.default;if(!Ht(o)&&!l)return{variant:ct(o),source:Xe.LocalStorage,hasDefaultVariant:!1};if(l&&(i={variant:ct(o),source:Xe.LocalStorage,hasDefaultVariant:!0}),!Ht(t))return{variant:ct(t),source:Xe.FallbackInline,hasDefaultVariant:i.hasDefaultVariant};var a=ct(this.config.fallbackVariant),u={variant:a,source:Xe.FallbackConfig,hasDefaultVariant:i.hasDefaultVariant};return iu(a)?i:u},n.prototype.fetchInternal=function(e,t,r,i){return ft(this,void 0,void 0,function(){var s,o;return dt(this,function(l){switch(l.label){case 0:if(!this.apiKey)throw Error("Experiment API key is empty");this.debug("[Experiment] Fetch all: retry=".concat(r)),r&&this.stopRetries(),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,this.doFetch(e,t,i)];case 2:return s=l.sent(),[4,this.storeVariants(s,i)];case 3:return l.sent(),[2,s];case 4:throw o=l.sent(),r&&this.shouldRetryFetch(o)&&this.startRetries(e,i),o;case 5:return[2]}})})},n.prototype.doFetch=function(e,t,r){return ft(this,void 0,void 0,function(){var i,s,o,l,a,u,c;return dt(this,function(d){switch(d.label){case 0:return[4,this.addContextOrWait(e,1e4)];case 1:return e=d.sent(),this.debug("[Experiment] Fetch variants for user: ",e),[4,this.evaluationApi.getVariants(e,we({timeoutMillis:t},r))];case 2:i=d.sent(),s={};try{for(o=wi(Object.keys(i)),l=o.next();!l.done;l=o.next())a=l.value,s[a]=Lh(i[a])}catch(h){u={error:h}}finally{try{l&&!l.done&&(c=o.return)&&c.call(o)}finally{if(u)throw u.error}}return this.debug("[Experiment] Received variants: ",s),[2,s]}})})},n.prototype.doFlags=function(){return ft(this,void 0,void 0,function(){var e;return dt(this,function(t){switch(t.label){case 0:return[4,this.flagApi.getFlags({libraryName:"experiment-js-client",libraryVersion:Nh,timeoutMillis:this.config.fetchTimeoutMillis})];case 1:e=t.sent(),this.flags.clear(),this.flags.putAll(e);try{this.flags.store()}catch{}return this.mergeInitialFlagsWithStorage(),[2]}})})},n.prototype.storeVariants=function(e,t){return ft(this,void 0,void 0,function(){var r,i,s,o,o;return dt(this,function(l){r=t&&t.flagKeys?t.flagKeys:[],r.length===0&&this.variants.clear(),i=function(a){r=r.filter(function(u){return u!==a}),s.variants.put(a,e[a])},s=this;for(o in e)i(o);for(o in r)this.variants.remove(o);try{this.variants.store()}catch{}return this.debug("[Experiment] Stored variants: ",e),[2]})})},n.prototype.startRetries=function(e,t){return ft(this,void 0,void 0,function(){var r=this;return dt(this,function(i){return this.debug("[Experiment] Retry fetch"),this.retriesBackoff=new AO(TO,PO,kO,NO),this.retriesBackoff.start(function(){return ft(r,void 0,void 0,function(){return dt(this,function(s){switch(s.label){case 0:return[4,this.fetchInternal(e,OO,!1,t)];case 1:return s.sent(),[2]}})})}),[2]})})},n.prototype.stopRetries=function(){this.retriesBackoff&&this.retriesBackoff.cancel()},n.prototype.addContext=function(e){var t,r,i=(t=this.userProvider)===null||t===void 0?void 0:t.getUser(),s=we(we({},e?.user_properties),i?.user_properties);return we(we(we({library:"experiment-js-client/".concat(Nh)},(r=this.userProvider)===null||r===void 0?void 0:r.getUser()),e),{user_properties:s})},n.prototype.addContextOrWait=function(e,t){return ft(this,void 0,void 0,function(){return dt(this,function(r){switch(r.label){case 0:return this.userProvider instanceof nf?this.userProvider.userProvider instanceof sv?[4,this.userProvider.userProvider.identityReady(t)]:[3,2]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.addContext(e)]}})})},n.prototype.sourceVariants=function(){if(this.config.source==tr.LocalStorage)return this.variants.getAll();if(this.config.source==tr.InitialVariants)return this.config.initialVariants},n.prototype.secondaryVariants=function(){if(this.config.source==tr.LocalStorage)return this.config.initialVariants;if(this.config.source==tr.InitialVariants)return this.variants.getAll()},n.prototype.exposureInternal=function(e,t){var r,i,s,o,l,a;this.legacyExposureInternal(e,t.variant,t.source);var u={flag_key:e},c=kh(t.source);if(!(c&&!t.hasDefaultVariant)){!((r=t.variant)===null||r===void 0)&&r.expKey&&(u.experiment_key=(i=t.variant)===null||i===void 0?void 0:i.expKey);var d=(s=t.variant)===null||s===void 0?void 0:s.metadata;!c&&!d?.default&&(!((o=t.variant)===null||o===void 0)&&o.key?u.variant=t.variant.key:!((l=t.variant)===null||l===void 0)&&l.value&&(u.variant=t.variant.value)),d&&(u.metadata=d),(a=this.exposureTrackingProvider)===null||a===void 0||a.track(u)}},n.prototype.legacyExposureInternal=function(e,t,r){var i,s,o,l,a;if(this.analyticsProvider){var u=this.addContext(this.getUser()),c=xO(u,e,t,r);kh(r)||!t?.value?(s=(i=this.analyticsProvider)===null||i===void 0?void 0:i.unsetUserProperty)===null||s===void 0||s.call(i,c):t?.value&&((l=(o=this.analyticsProvider)===null||o===void 0?void 0:o.setUserProperty)===null||l===void 0||l.call(o,c),(a=this.analyticsProvider)===null||a===void 0||a.track(c))}},n.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.config.debug&&console.debug.apply(console,mO([e],gO(t),!1))},n.prototype.shouldRetryFetch=function(e){return e instanceof nv?e.statusCode<400||e.statusCode>=500||e.statusCode===429:!0},n}(),_r={},UO=function(n,e){var t=e?.instanceName||ni.instanceName,r="".concat(t,".").concat(n),i=uc.getInstance(t);return _r[r]||(e=we(we({},e),{userProvider:new nf(i.applicationContextProvider,e?.userProvider)}),_r[r]=new lv(n,e)),_r[r]},FO=function(n,e){var t=e?.instanceName||ni.instanceName,r="".concat(t,".").concat(n),i=uc.getInstance(t);return _r[r]||(e=we({userProvider:new nf(i.applicationContextProvider,new sv(i.identityStore)),exposureTrackingProvider:new EO(i.eventBridge)},e),_r[r]=new lv(n,e),e.automaticFetchOnAmplitudeIdentityChange&&i.identityStore.addIdentityListener(function(){_r[r].fetch()})),_r[r]},CL={initialize:UO,initializeWithAmplitudeAnalytics:FO},zo={},BO=Object.defineProperty,zO=(n,e,t)=>e in n?BO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Is=(n,e,t)=>zO(n,typeof e!="symbol"?e+"":e,t),jO=Object.defineProperty,WO=(n,e,t)=>e in n?jO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,su=(n,e,t)=>WO(n,typeof e!="symbol"?e+"":e,t),Dh,GO=Object.defineProperty,VO=(n,e,t)=>e in n?GO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Uh=(n,e,t)=>VO(n,typeof e!="symbol"?e+"":e,t);const Fh={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Bh={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},xs={},HO=()=>!!globalThis.Zone;function sf(n){if(xs[n])return xs[n];const e=globalThis[n],t=e.prototype,r=n in Fh?Fh[n]:void 0,i=!!(r&&r.every(l=>{var a,u;return!!((u=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&u.toString().includes("[native code]"))})),s=n in Bh?Bh[n]:void 0,o=!!(s&&s.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(i&&o&&!HO())return xs[n]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const u=a[n].prototype;return document.body.removeChild(l),u?xs[n]=u:t}catch{return t}}const ou={};function Sr(n,e,t){var r;const i=`${n}.${String(t)}`;if(ou[i])return ou[i].call(e);const s=sf(n),o=(r=Object.getOwnPropertyDescriptor(s,t))==null?void 0:r.get;return o?(ou[i]=o,o.call(e)):e[t]}const au={};function cv(n,e,t){const r=`${n}.${String(t)}`;if(au[r])return au[r].bind(e);const s=sf(n)[t];return typeof s!="function"?e[t]:(au[r]=s,s.bind(e))}function qO(n){return Sr("Node",n,"childNodes")}function YO(n){return Sr("Node",n,"parentNode")}function KO(n){return Sr("Node",n,"parentElement")}function ZO(n){return Sr("Node",n,"textContent")}function XO(n,e){return cv("Node",n,"contains")(e)}function JO(n){return cv("Node",n,"getRootNode")()}function QO(n){return!n||!("host"in n)?null:Sr("ShadowRoot",n,"host")}function eT(n){return n.styleSheets}function tT(n){return!n||!("shadowRoot"in n)?null:Sr("Element",n,"shadowRoot")}function rT(n,e){return Sr("Element",n,"querySelector")(e)}function nT(n,e){return Sr("Element",n,"querySelectorAll")(e)}function iT(){return sf("MutationObserver").constructor}const jo={childNodes:qO,parentNode:YO,parentElement:KO,textContent:ZO,contains:XO,getRootNode:JO,host:QO,styleSheets:eT,shadowRoot:tT,querySelector:rT,querySelectorAll:nT,mutationObserver:iT};function sT(n){const e=n&&"host"in n&&"mode"in n&&jo.host(n)||null;return!!(e&&"shadowRoot"in e&&jo.shadowRoot(e)===n)}class oT{constructor(){Uh(this,"idNodeMap",new Map),Uh(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function aT(){return new oT}const uT=-2;function _l(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?_l(jo.parentNode(n),e,t):!1;for(let r=n.classList.length;r--;){const i=n.classList[r];if(e.test(i))return!0}return t?_l(jo.parentNode(n),e,t):!1}function lT(n){return n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function cT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var of={exports:{}},Re=String,fv=function(){return{isColorSupported:!1,reset:Re,bold:Re,dim:Re,italic:Re,underline:Re,inverse:Re,hidden:Re,strikethrough:Re,black:Re,red:Re,green:Re,yellow:Re,blue:Re,magenta:Re,cyan:Re,white:Re,gray:Re,bgBlack:Re,bgRed:Re,bgGreen:Re,bgYellow:Re,bgBlue:Re,bgMagenta:Re,bgCyan:Re,bgWhite:Re}};of.exports=fv();of.exports.createColors=fv;var fT=of.exports;const dT={},hT=Object.freeze(Object.defineProperty({__proto__:null,default:dT},Symbol.toStringTag,{value:"Module"})),jt=cT(hT);let zh=fT,jh=jt,Rl=class dv extends Error{constructor(e,t,r,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,dv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=zh.isColorSupported),jh&&e&&(t=jh(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,r.length),o=String(s).length,l,a;if(e){let{bold:u,gray:c,red:d}=zh.createColors(!0);l=h=>u(d(h)),a=h=>c(h)}else l=a=u=>u;return r.slice(i,s).map((u,c)=>{let d=i+1+c,h=" "+(" "+d).slice(-o)+" | ";if(d===this.line){let g=a(h.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+a(h)+u+`
 `+g+l("^")}return" "+a(h)+u}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var af=Rl;Rl.default=Rl;var Mi={};Mi.isClean=Symbol("isClean");Mi.my=Symbol("my");const Wh={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function pT(n){return n[0].toUpperCase()+n.slice(1)}let $l=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(r+i+s,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(r.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)r+=o}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let s=e.parent;if(r==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return Wh[r];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[r]<"u")return o.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let l="raw"+pT(r);this[l]?i=this[l](o,e):o.walk(a=>{if(i=a.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=Wh[r]),o.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let s=r.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var hv=$l;$l.default=$l;let gT=hv;function Ol(n,e){new gT(e).stringify(n)}var va=Ol;Ol.default=Ol;let{isClean:As,my:mT}=Mi,yT=af,vT=hv,wT=va;function Tl(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],s=typeof i;r==="parent"&&s==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(o=>Tl(o,t)):(s==="object"&&i!==null&&(i=Tl(i)),t[r]=i)}return t}let Pl=class{constructor(e={}){this.raws={},this[As]=!1,this[mT]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Tl(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new yT(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[As]){this[As]=!1;let e=this;for(;e=e.parent;)e[As]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,s=this.source.start.line;for(let o=0;o<e;o++)r[o]===`
`?(i=1,s+=1):i+=1;return{column:i,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),s=i.indexOf(e.word);s!==-1&&(t=this.positionInside(s,i),r=this.positionInside(s+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new vT().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))r[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)r[o]=l.toJSON(null,t);else if(o==="source"){let a=t.get(l.input);a==null&&(a=s,t.set(l.input,s),s++),r[o]={end:l.end,inputId:a,start:l.start}}else r[o]=l}return i&&(r.inputs=[...t.keys()].map(o=>o.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=wT){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let s in r)i[s]=r[s];return e.warn(t,i)}get proxyOf(){return this}};var wa=Pl;Pl.default=Pl;let bT=wa,kl=class extends bT{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var ba=kl;kl.default=kl;let ST="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ET=(n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},CT=(n=21)=>{let e="",t=n;for(;t--;)e+=ST[Math.random()*64|0];return e};var IT={nanoid:CT,customAlphabet:ET};let{SourceMapConsumer:Gh,SourceMapGenerator:Vh}=jt,{existsSync:xT,readFileSync:AT}=jt,{dirname:uu,join:_T}=jt;function RT(n){return Fe?Fe.from(n,"base64").toString():window.atob(n)}let Nl=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=uu(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Gh(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(i.test(e)||s.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return RT(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=uu(e),xT(e))return this.mapFile=e,AT(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof Gh)return Vh.fromSourceMap(t).toString();if(t instanceof Vh)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=_T(uu(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var pv=Nl;Nl.default=Nl;let{SourceMapConsumer:$T,SourceMapGenerator:OT}=jt,{fileURLToPath:Hh,pathToFileURL:_s}=jt,{isAbsolute:Ml,resolve:Ll}=jt,{nanoid:TT}=IT,lu=jt,qh=af,PT=pv,cu=Symbol("fromOffsetCache"),kT=!!($T&&OT),Yh=!!(Ll&&Ml),Wo=class{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Yh||/^\w+:\/\//.test(t.from)||Ml(t.from)?this.file=t.from:this.file=Ll(t.from)),Yh&&kT){let r=new PT(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+TT(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let s,o,l;if(t&&typeof t=="object"){let u=t,c=r;if(typeof u.offset=="number"){let d=this.fromOffset(u.offset);t=d.line,r=d.col}else t=u.line,r=u.column;if(typeof c.offset=="number"){let d=this.fromOffset(c.offset);o=d.line,l=d.col}else o=c.line,l=c.column}else if(!r){let u=this.fromOffset(t);t=u.line,r=u.col}let a=this.origin(t,r,o,l);return a?s=new qh(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,i.plugin):s=new qh(e,o===void 0?t:{column:r,line:t},o===void 0?r:{column:l,line:o},this.css,this.file,i.plugin),s.input={column:r,endColumn:l,endLine:o,line:t,source:this.css},this.file&&(_s&&(s.input.url=_s(this.file).toString()),s.input.file=this.file),s}fromOffset(e){let t,r;if(this[cu])r=this[cu];else{let s=this.css.split(`
`);r=new Array(s.length);let o=0;for(let l=0,a=s.length;l<a;l++)r[l]=o,o+=s[l].length+1;this[cu]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let s=r.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<r[o])s=o-1;else if(e>=r[o+1])i=o+1;else{i=o;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Ll(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof r=="number"&&(l=s.originalPositionFor({column:i,line:r}));let a;Ml(o.source)?a=_s(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||_s(this.map.mapFile));let u={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if(Hh)u.file=Hh(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=s.sourceContentFor(o.source);return c&&(u.source=c),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Sa=Wo;Wo.default=Wo;lu&&lu.registerInput&&lu.registerInput(Wo);let{SourceMapConsumer:gv,SourceMapGenerator:co}=jt,{dirname:fo,relative:mv,resolve:yv,sep:vv}=jt,{pathToFileURL:Kh}=jt,NT=Sa,MT=!!(gv&&co),LT=!!(fo&&yv&&mv&&vv),DT=class{constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||fo(e.file),i;this.mapOpts.sourcesContent===!1?(i=new gv(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),LT&&MT&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=co.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new co({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new co({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(l,a,u)=>{if(this.css+=l,a&&u!=="end"&&(i.generated.line=e,i.generated.column=t-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),s=l.match(/\n/g),s?(e+=s.length,o=l.lastIndexOf(`
`),t=l.length-o):t+=l.length,a&&u!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?fo(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=fo(yv(r,this.mapOpts.annotation)));let i=mv(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new NT(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Fe?Fe.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Kh){let r=Kh(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;vv==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};var wv=DT;let UT=wa,Dl=class extends UT{constructor(e){super(e),this.type="comment"}};var Ea=Dl;Dl.default=Dl;let{isClean:bv,my:Sv}=Mi,Ev=ba,Cv=Ea,FT=wa,Iv,uf,lf,xv;function Av(n){return n.map(e=>(e.nodes&&(e.nodes=Av(e.nodes)),delete e.source,e))}function _v(n){if(n[bv]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)_v(e)}let or=class Rv extends FT{append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?r=>e[t]((i,...s)=>r(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let o of i)this.proxyOf.nodes.splice(r+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],r<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let l of s)this.proxyOf.nodes.splice(r,0,l);let o;for(let l in this.indexes)o=this.indexes[l],r<=o&&(this.indexes[l]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Av(Iv(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Ev(e)]}else if(e.selector)e=[new uf(e)];else if(e.name)e=[new lf(e)];else if(e.text)e=[new Cv(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Sv]||Rv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[bv]&&_v(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};or.registerParse=n=>{Iv=n};or.registerRule=n=>{uf=n};or.registerAtRule=n=>{lf=n};or.registerRoot=n=>{xv=n};var Lr=or;or.default=or;or.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,lf.prototype):n.type==="rule"?Object.setPrototypeOf(n,uf.prototype):n.type==="decl"?Object.setPrototypeOf(n,Ev.prototype):n.type==="comment"?Object.setPrototypeOf(n,Cv.prototype):n.type==="root"&&Object.setPrototypeOf(n,xv.prototype),n[Sv]=!0,n.nodes&&n.nodes.forEach(e=>{or.rebuild(e)})};let BT=Lr,$v,Ov,bi=class extends BT{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new $v(new Ov,this,e).stringify()}};bi.registerLazyResult=n=>{$v=n};bi.registerProcessor=n=>{Ov=n};var cf=bi;bi.default=bi;let Ul=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Tv=Ul;Ul.default=Ul;let zT=Tv,Fl=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new zT(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var ff=Fl;Fl.default=Fl;const fu=39,Zh=34,Rs=92,Xh=47,$s=10,Wn=32,Os=12,Ts=9,Ps=13,jT=91,WT=93,GT=40,VT=41,HT=123,qT=125,YT=59,KT=42,ZT=58,XT=64,ks=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ns=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,JT=/.[\r\n"'(/\\]/,Jh=/[\da-f]/i;var QT=function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,s,o,l,a,u,c,d,h,g,m,v=r.length,y=0,C=[],E=[];function b(){return y}function I(A){throw e.error("Unclosed "+A,y)}function _(){return E.length===0&&y>=v}function $(A){if(E.length)return E.pop();if(y>=v)return;let P=A?A.ignoreUnclosed:!1;switch(s=r.charCodeAt(y),s){case $s:case Wn:case Ts:case Ps:case Os:{o=y;do o+=1,s=r.charCodeAt(o);while(s===Wn||s===$s||s===Ts||s===Ps||s===Os);m=["space",r.slice(y,o)],y=o-1;break}case jT:case WT:case HT:case qT:case ZT:case YT:case VT:{let N=String.fromCharCode(s);m=[N,N,y];break}case GT:{if(h=C.length?C.pop()[1]:"",g=r.charCodeAt(y+1),h==="url"&&g!==fu&&g!==Zh&&g!==Wn&&g!==$s&&g!==Ts&&g!==Os&&g!==Ps){o=y;do{if(c=!1,o=r.indexOf(")",o+1),o===-1)if(i||P){o=y;break}else I("bracket");for(d=o;r.charCodeAt(d-1)===Rs;)d-=1,c=!c}while(c);m=["brackets",r.slice(y,o+1),y,o],y=o}else o=r.indexOf(")",y+1),a=r.slice(y,o+1),o===-1||JT.test(a)?m=["(","(",y]:(m=["brackets",a,y,o],y=o);break}case fu:case Zh:{l=s===fu?"'":'"',o=y;do{if(c=!1,o=r.indexOf(l,o+1),o===-1)if(i||P){o=y+1;break}else I("string");for(d=o;r.charCodeAt(d-1)===Rs;)d-=1,c=!c}while(c);m=["string",r.slice(y,o+1),y,o],y=o;break}case XT:{ks.lastIndex=y+1,ks.test(r),ks.lastIndex===0?o=r.length-1:o=ks.lastIndex-2,m=["at-word",r.slice(y,o+1),y,o],y=o;break}case Rs:{for(o=y,u=!0;r.charCodeAt(o+1)===Rs;)o+=1,u=!u;if(s=r.charCodeAt(o+1),u&&s!==Xh&&s!==Wn&&s!==$s&&s!==Ts&&s!==Ps&&s!==Os&&(o+=1,Jh.test(r.charAt(o)))){for(;Jh.test(r.charAt(o+1));)o+=1;r.charCodeAt(o+1)===Wn&&(o+=1)}m=["word",r.slice(y,o+1),y,o],y=o;break}default:{s===Xh&&r.charCodeAt(y+1)===KT?(o=r.indexOf("*/",y+2)+1,o===0&&(i||P?o=r.length:I("comment")),m=["comment",r.slice(y,o+1),y,o],y=o):(Ns.lastIndex=y+1,Ns.test(r),Ns.lastIndex===0?o=r.length-1:o=Ns.lastIndex-2,m=["word",r.slice(y,o+1),y,o],C.push(m),y=o);break}}return y++,m}function O(A){E.push(A)}return{back:O,endOfFile:_,nextToken:$,position:b}};let Pv=Lr,Go=class extends Pv{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var df=Go;Go.default=Go;Pv.registerAtRule(Go);let kv=Lr,Nv,Mv,En=class extends kv{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new Nv(new Mv,this,e).stringify()}};En.registerLazyResult=n=>{Nv=n};En.registerProcessor=n=>{Mv=n};var Li=En;En.default=En;kv.registerRoot(En);let Si={comma(n){return Si.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return Si.split(n,e)},split(n,e,t){let r=[],i="",s=!1,o=0,l=!1,a="",u=!1;for(let c of n)u?u=!1:c==="\\"?u=!0:l?c===a&&(l=!1):c==='"'||c==="'"?(l=!0,a=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(s=!0),s?(i!==""&&r.push(i.trim()),i="",s=!1):i+=c;return(t||i!=="")&&r.push(i.trim()),r}};var Lv=Si;Si.default=Si;let Dv=Lr,eP=Lv,Vo=class extends Dv{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return eP.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var hf=Vo;Vo.default=Vo;Dv.registerRule(Vo);let tP=ba,rP=QT,nP=Ea,iP=df,sP=Li,Qh=hf;const ep={empty:!0,space:!0};function oP(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}let aP=class{constructor(e){this.input=e,this.root=new sP,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new iP;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,s,o=!1,l=!1,a=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?u.push(r==="("?")":"]"):r==="{"&&u.length>0?u.push("}"):r===u[u.length-1]&&u.pop(),u.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){l=!0;break}else if(r==="}"){if(a.length>0){for(s=a.length-1,i=a[s];i&&i[0]==="space";)i=a[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(r+=1,r===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,s;for(let[o,l]of e.entries()){if(r=l,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=r}return!1}comment(e){let t=new nP;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=rP(this.input)}decl(e,t){let r=new tP;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||oP(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){r.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(s=e[u],s[1].toLowerCase()==="!important"){r.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(r.raws.important=c);break}else if(s[1].toLowerCase()==="important"){let c=e.slice(0),d="";for(let h=u;h>0;h--){let g=c[h][0];if(d.trim().indexOf("!")===0&&g!=="space")break;d=c.pop()[1]+d}d.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=d,e=c)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(r.raws.between+=o.map(u=>u[1]).join(""),o=[]),this.raw(r,"value",o.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Qh;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),a=[],u=e;for(;u;){if(r=u[0],a.push(u),r==="("||r==="[")s||(s=u),o.push(r==="("?")":"]");else if(l&&i&&r==="{")s||(s=u),o.push("}");else if(o.length===0)if(r===";")if(i){this.decl(a,l);return}else break;else if(r==="{"){this.rule(a);return}else if(r==="}"){this.tokenizer.back(a.pop()),t=!0;break}else r===":"&&(i=!0);else r===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;a.length&&(u=a[a.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let s,o,l=r.length,a="",u=!0,c,d;for(let h=0;h<l;h+=1)s=r[h],o=s[0],o==="space"&&h===l-1&&!i?u=!1:o==="comment"?(d=r[h-1]?r[h-1][0]:"empty",c=r[h+1]?r[h+1][0]:"empty",!ep[d]&&!ep[c]?a.slice(-1)===","?u=!1:a+=s[1]:u=!1):a+=s[1];if(!u){let h=r.reduce((g,m)=>g+m[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new Qh;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var uP=aP;let lP=Lr,cP=uP,fP=Sa;function Ho(n,e){let t=new fP(n,e),r=new cP(t);try{r.parse()}catch(i){throw i}return r.root}var pf=Ho;Ho.default=Ho;lP.registerParse(Ho);let{isClean:qt,my:dP}=Mi,hP=wv,pP=va,gP=Lr,mP=cf,tp=ff,yP=pf,vP=Li;const wP={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},bP={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},SP={Once:!0,postcssPlugin:!0,prepare:!0},Cn=0;function Gn(n){return typeof n=="object"&&typeof n.then=="function"}function Uv(n){let e=!1,t=wP[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,Cn,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,Cn,t+"Exit"]:[t,t+"Exit"]}function rp(n){let e;return n.type==="document"?e=["Document",Cn,"DocumentExit"]:n.type==="root"?e=["Root",Cn,"RootExit"]:e=Uv(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}function Bl(n){return n[qt]=!1,n.nodes&&n.nodes.forEach(e=>Bl(e)),n}let zl={},In=class Fv{constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=Bl(t);else if(t instanceof Fv||t instanceof tp)i=Bl(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let s=yP;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(t,r)}catch(o){this.processed=!0,this.error=o}i&&!i[dP]&&gP.rebuild(i)}this.result=new tp(e,i,r),this.helpers={...zl,postcss:zl,result:this.result},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!bP[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!SP[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Gn(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[qt];){e[qt]=!0;let t=[rp(e)];for(;t.length>0;){let r=this.visitTick(t);if(Gn(r))try{await r}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>r(s,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return Gn(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=pP;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new hP(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Gn(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[qt];)e[qt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Gn(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(r.toProxy(),this.helpers)}catch(a){throw this.handleError(a,r)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!l[qt]){l[qt]=!0,e.push(rp(l));return}t.iterator=0,delete r.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===Cn){r.nodes&&r.nodes.length&&(r[qt]=!0,t.iterator=r.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[qt]=!0;let t=Uv(e);for(let r of t)if(r===Cn)e.nodes&&e.each(i=>{i[qt]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};In.registerPostcss=n=>{zl=n};var Bv=In;In.default=In;vP.registerLazyResult(In);mP.registerLazyResult(In);let EP=wv,CP=va,IP=pf;const xP=ff;let jl=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,s=CP;this.result=new xP(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new EP(s,i,this._opts,t);if(l.isMap()){let[a,u]=l.generate();a&&(this.result.css=a),u&&(this.result.map=u)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=IP;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var AP=jl;jl.default=jl;let _P=AP,RP=Bv,$P=cf,OP=Li,Ei=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new _P(this,e,t):new RP(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var TP=Ei;Ei.default=Ei;OP.registerProcessor(Ei);$P.registerProcessor(Ei);let PP=ba,kP=pv,NP=Ea,MP=df,LP=Sa,DP=Li,UP=hf;function Ci(n,e){if(Array.isArray(n))return n.map(i=>Ci(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let s={...i,__proto__:LP.prototype};s.map&&(s.map={...s.map,__proto__:kP.prototype}),e.push(s)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>Ci(i,e))),r.source){let{inputId:i,...s}=r.source;r.source=s,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new DP(r);if(r.type==="decl")return new PP(r);if(r.type==="rule")return new UP(r);if(r.type==="comment")return new NP(r);if(r.type==="atrule")return new MP(r);throw new Error("Unknown node type: "+n.type)}var FP=Ci;Ci.default=Ci;let BP=af,zv=ba,zP=Bv,jP=Lr,gf=TP,WP=va,GP=FP,jv=cf,VP=Tv,Wv=Ea,Gv=df,HP=ff,qP=Sa,YP=pf,KP=Lv,Vv=hf,Hv=Li,ZP=wa;function ce(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new gf(n)}ce.plugin=function(e,t){let r=!1;function i(...o){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),zo.LANG&&zo.LANG.startsWith("cn")&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new gf().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,a){return ce([i(a)]).process(o,l)},i};ce.stringify=WP;ce.parse=YP;ce.fromJSON=GP;ce.list=KP;ce.comment=n=>new Wv(n);ce.atRule=n=>new Gv(n);ce.decl=n=>new zv(n);ce.rule=n=>new Vv(n);ce.root=n=>new Hv(n);ce.document=n=>new jv(n);ce.CssSyntaxError=BP;ce.Declaration=zv;ce.Container=jP;ce.Processor=gf;ce.Document=jv;ce.Comment=Wv;ce.Warning=VP;ce.AtRule=Gv;ce.Result=HP;ce.Input=qP;ce.Rule=Vv;ce.Root=Hv;ce.Node=ZP;zP.registerPostcss(ce);var XP=ce;ce.default=ce;const Le=lT(XP);Le.stringify;Le.fromJSON;Le.plugin;Le.parse;Le.list;Le.document;Le.comment;Le.atRule;Le.rule;Le.decl;Le.root;Le.CssSyntaxError;Le.Declaration;Le.Container;Le.Processor;Le.Document;Le.Comment;Le.Warning;Le.AtRule;Le.Result;Le.Input;Le.Rule;Le.Root;Le.Node;var JP=Object.defineProperty,QP=(n,e,t)=>e in n?JP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,St=(n,e,t)=>QP(n,typeof e!="symbol"?e+"":e,t);function ek(n){return n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tk(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mf={exports:{}},$e=String,qv=function(){return{isColorSupported:!1,reset:$e,bold:$e,dim:$e,italic:$e,underline:$e,inverse:$e,hidden:$e,strikethrough:$e,black:$e,red:$e,green:$e,yellow:$e,blue:$e,magenta:$e,cyan:$e,white:$e,gray:$e,bgBlack:$e,bgRed:$e,bgGreen:$e,bgYellow:$e,bgBlue:$e,bgMagenta:$e,bgCyan:$e,bgWhite:$e}};mf.exports=qv();mf.exports.createColors=qv;var rk=mf.exports;const nk={},ik=Object.freeze(Object.defineProperty({__proto__:null,default:nk},Symbol.toStringTag,{value:"Module"})),Wt=tk(ik);let np=rk,ip=Wt,Wl=class Yv extends Error{constructor(e,t,r,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Yv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=np.isColorSupported),ip&&e&&(t=ip(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,r.length),o=String(s).length,l,a;if(e){let{bold:u,gray:c,red:d}=np.createColors(!0);l=h=>u(d(h)),a=h=>c(h)}else l=a=u=>u;return r.slice(i,s).map((u,c)=>{let d=i+1+c,h=" "+(" "+d).slice(-o)+" | ";if(d===this.line){let g=a(h.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+a(h)+u+`
 `+g+l("^")}return" "+a(h)+u}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var yf=Wl;Wl.default=Wl;var Di={};Di.isClean=Symbol("isClean");Di.my=Symbol("my");const sp={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function sk(n){return n[0].toUpperCase()+n.slice(1)}let Gl=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(r+i+s,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(r.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)r+=o}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let s=e.parent;if(r==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return sp[r];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[r]<"u")return o.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let l="raw"+sk(r);this[l]?i=this[l](o,e):o.walk(a=>{if(i=a.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=sp[r]),o.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let s=r.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Kv=Gl;Gl.default=Gl;let ok=Kv;function Vl(n,e){new ok(e).stringify(n)}var Ca=Vl;Vl.default=Vl;let{isClean:Ms,my:ak}=Di,uk=yf,lk=Kv,ck=Ca;function Hl(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],s=typeof i;r==="parent"&&s==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(o=>Hl(o,t)):(s==="object"&&i!==null&&(i=Hl(i)),t[r]=i)}return t}let ql=class{constructor(e={}){this.raws={},this[Ms]=!1,this[ak]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Hl(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new uk(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[Ms]){this[Ms]=!1;let e=this;for(;e=e.parent;)e[Ms]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,s=this.source.start.line;for(let o=0;o<e;o++)r[o]===`
`?(i=1,s+=1):i+=1;return{column:i,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),s=i.indexOf(e.word);s!==-1&&(t=this.positionInside(s,i),r=this.positionInside(s+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new lk().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))r[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)r[o]=l.toJSON(null,t);else if(o==="source"){let a=t.get(l.input);a==null&&(a=s,t.set(l.input,s),s++),r[o]={end:l.end,inputId:a,start:l.start}}else r[o]=l}return i&&(r.inputs=[...t.keys()].map(o=>o.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=ck){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let s in r)i[s]=r[s];return e.warn(t,i)}get proxyOf(){return this}};var Ia=ql;ql.default=ql;let fk=Ia,Yl=class extends fk{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var xa=Yl;Yl.default=Yl;let dk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",hk=(n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},pk=(n=21)=>{let e="",t=n;for(;t--;)e+=dk[Math.random()*64|0];return e};var gk={nanoid:pk,customAlphabet:hk};let{SourceMapConsumer:op,SourceMapGenerator:ap}=Wt,{existsSync:mk,readFileSync:yk}=Wt,{dirname:du,join:vk}=Wt;function wk(n){return Fe?Fe.from(n,"base64").toString():window.atob(n)}let Kl=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=du(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new op(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(i.test(e)||s.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return wk(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=du(e),mk(e))return this.mapFile=e,yk(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof op)return ap.fromSourceMap(t).toString();if(t instanceof ap)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=vk(du(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Zv=Kl;Kl.default=Kl;let{SourceMapConsumer:bk,SourceMapGenerator:Sk}=Wt,{fileURLToPath:up,pathToFileURL:Ls}=Wt,{isAbsolute:Zl,resolve:Xl}=Wt,{nanoid:Ek}=gk,hu=Wt,lp=yf,Ck=Zv,pu=Symbol("fromOffsetCache"),Ik=!!(bk&&Sk),cp=!!(Xl&&Zl),qo=class{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!cp||/^\w+:\/\//.test(t.from)||Zl(t.from)?this.file=t.from:this.file=Xl(t.from)),cp&&Ik){let r=new Ck(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+Ek(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let s,o,l;if(t&&typeof t=="object"){let u=t,c=r;if(typeof u.offset=="number"){let d=this.fromOffset(u.offset);t=d.line,r=d.col}else t=u.line,r=u.column;if(typeof c.offset=="number"){let d=this.fromOffset(c.offset);o=d.line,l=d.col}else o=c.line,l=c.column}else if(!r){let u=this.fromOffset(t);t=u.line,r=u.col}let a=this.origin(t,r,o,l);return a?s=new lp(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,i.plugin):s=new lp(e,o===void 0?t:{column:r,line:t},o===void 0?r:{column:l,line:o},this.css,this.file,i.plugin),s.input={column:r,endColumn:l,endLine:o,line:t,source:this.css},this.file&&(Ls&&(s.input.url=Ls(this.file).toString()),s.input.file=this.file),s}fromOffset(e){let t,r;if(this[pu])r=this[pu];else{let s=this.css.split(`
`);r=new Array(s.length);let o=0;for(let l=0,a=s.length;l<a;l++)r[l]=o,o+=s[l].length+1;this[pu]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let s=r.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<r[o])s=o-1;else if(e>=r[o+1])i=o+1;else{i=o;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Xl(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof r=="number"&&(l=s.originalPositionFor({column:i,line:r}));let a;Zl(o.source)?a=Ls(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||Ls(this.map.mapFile));let u={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if(up)u.file=up(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=s.sourceContentFor(o.source);return c&&(u.source=c),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Aa=qo;qo.default=qo;hu&&hu.registerInput&&hu.registerInput(qo);let{SourceMapConsumer:Xv,SourceMapGenerator:ho}=Wt,{dirname:po,relative:Jv,resolve:Qv,sep:ew}=Wt,{pathToFileURL:fp}=Wt,xk=Aa,Ak=!!(Xv&&ho),_k=!!(po&&Qv&&Jv&&ew),Rk=class{constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||po(e.file),i;this.mapOpts.sourcesContent===!1?(i=new Xv(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),_k&&Ak&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=ho.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new ho({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new ho({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(l,a,u)=>{if(this.css+=l,a&&u!=="end"&&(i.generated.line=e,i.generated.column=t-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),s=l.match(/\n/g),s?(e+=s.length,o=l.lastIndexOf(`
`),t=l.length-o):t+=l.length,a&&u!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?po(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=po(Qv(r,this.mapOpts.annotation)));let i=Jv(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new xk(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Fe?Fe.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(fp){let r=fp(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;ew==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};var tw=Rk;let $k=Ia,Jl=class extends $k{constructor(e){super(e),this.type="comment"}};var _a=Jl;Jl.default=Jl;let{isClean:rw,my:nw}=Di,iw=xa,sw=_a,Ok=Ia,ow,vf,wf,aw;function uw(n){return n.map(e=>(e.nodes&&(e.nodes=uw(e.nodes)),delete e.source,e))}function lw(n){if(n[rw]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)lw(e)}let ar=class cw extends Ok{append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?r=>e[t]((i,...s)=>r(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let o of i)this.proxyOf.nodes.splice(r+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],r<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let l of s)this.proxyOf.nodes.splice(r,0,l);let o;for(let l in this.indexes)o=this.indexes[l],r<=o&&(this.indexes[l]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=uw(ow(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new iw(e)]}else if(e.selector)e=[new vf(e)];else if(e.name)e=[new wf(e)];else if(e.text)e=[new sw(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[nw]||cw.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[rw]&&lw(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};ar.registerParse=n=>{ow=n};ar.registerRule=n=>{vf=n};ar.registerAtRule=n=>{wf=n};ar.registerRoot=n=>{aw=n};var Dr=ar;ar.default=ar;ar.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,wf.prototype):n.type==="rule"?Object.setPrototypeOf(n,vf.prototype):n.type==="decl"?Object.setPrototypeOf(n,iw.prototype):n.type==="comment"?Object.setPrototypeOf(n,sw.prototype):n.type==="root"&&Object.setPrototypeOf(n,aw.prototype),n[nw]=!0,n.nodes&&n.nodes.forEach(e=>{ar.rebuild(e)})};let Tk=Dr,fw,dw,Ii=class extends Tk{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new fw(new dw,this,e).stringify()}};Ii.registerLazyResult=n=>{fw=n};Ii.registerProcessor=n=>{dw=n};var bf=Ii;Ii.default=Ii;let Ql=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var hw=Ql;Ql.default=Ql;let Pk=hw,ec=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Pk(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Sf=ec;ec.default=ec;const gu=39,dp=34,Ds=92,hp=47,Us=10,Vn=32,Fs=12,Bs=9,zs=13,kk=91,Nk=93,Mk=40,Lk=41,Dk=123,Uk=125,Fk=59,Bk=42,zk=58,jk=64,js=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ws=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Wk=/.[\r\n"'(/\\]/,pp=/[\da-f]/i;var Gk=function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,s,o,l,a,u,c,d,h,g,m,v=r.length,y=0,C=[],E=[];function b(){return y}function I(A){throw e.error("Unclosed "+A,y)}function _(){return E.length===0&&y>=v}function $(A){if(E.length)return E.pop();if(y>=v)return;let P=A?A.ignoreUnclosed:!1;switch(s=r.charCodeAt(y),s){case Us:case Vn:case Bs:case zs:case Fs:{o=y;do o+=1,s=r.charCodeAt(o);while(s===Vn||s===Us||s===Bs||s===zs||s===Fs);m=["space",r.slice(y,o)],y=o-1;break}case kk:case Nk:case Dk:case Uk:case zk:case Fk:case Lk:{let N=String.fromCharCode(s);m=[N,N,y];break}case Mk:{if(h=C.length?C.pop()[1]:"",g=r.charCodeAt(y+1),h==="url"&&g!==gu&&g!==dp&&g!==Vn&&g!==Us&&g!==Bs&&g!==Fs&&g!==zs){o=y;do{if(c=!1,o=r.indexOf(")",o+1),o===-1)if(i||P){o=y;break}else I("bracket");for(d=o;r.charCodeAt(d-1)===Ds;)d-=1,c=!c}while(c);m=["brackets",r.slice(y,o+1),y,o],y=o}else o=r.indexOf(")",y+1),a=r.slice(y,o+1),o===-1||Wk.test(a)?m=["(","(",y]:(m=["brackets",a,y,o],y=o);break}case gu:case dp:{l=s===gu?"'":'"',o=y;do{if(c=!1,o=r.indexOf(l,o+1),o===-1)if(i||P){o=y+1;break}else I("string");for(d=o;r.charCodeAt(d-1)===Ds;)d-=1,c=!c}while(c);m=["string",r.slice(y,o+1),y,o],y=o;break}case jk:{js.lastIndex=y+1,js.test(r),js.lastIndex===0?o=r.length-1:o=js.lastIndex-2,m=["at-word",r.slice(y,o+1),y,o],y=o;break}case Ds:{for(o=y,u=!0;r.charCodeAt(o+1)===Ds;)o+=1,u=!u;if(s=r.charCodeAt(o+1),u&&s!==hp&&s!==Vn&&s!==Us&&s!==Bs&&s!==zs&&s!==Fs&&(o+=1,pp.test(r.charAt(o)))){for(;pp.test(r.charAt(o+1));)o+=1;r.charCodeAt(o+1)===Vn&&(o+=1)}m=["word",r.slice(y,o+1),y,o],y=o;break}default:{s===hp&&r.charCodeAt(y+1)===Bk?(o=r.indexOf("*/",y+2)+1,o===0&&(i||P?o=r.length:I("comment")),m=["comment",r.slice(y,o+1),y,o],y=o):(Ws.lastIndex=y+1,Ws.test(r),Ws.lastIndex===0?o=r.length-1:o=Ws.lastIndex-2,m=["word",r.slice(y,o+1),y,o],C.push(m),y=o);break}}return y++,m}function O(A){E.push(A)}return{back:O,endOfFile:_,nextToken:$,position:b}};let pw=Dr,Yo=class extends pw{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Ef=Yo;Yo.default=Yo;pw.registerAtRule(Yo);let gw=Dr,mw,yw,xn=class extends gw{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new mw(new yw,this,e).stringify()}};xn.registerLazyResult=n=>{mw=n};xn.registerProcessor=n=>{yw=n};var Ui=xn;xn.default=xn;gw.registerRoot(xn);let xi={comma(n){return xi.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return xi.split(n,e)},split(n,e,t){let r=[],i="",s=!1,o=0,l=!1,a="",u=!1;for(let c of n)u?u=!1:c==="\\"?u=!0:l?c===a&&(l=!1):c==='"'||c==="'"?(l=!0,a=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(s=!0),s?(i!==""&&r.push(i.trim()),i="",s=!1):i+=c;return(t||i!=="")&&r.push(i.trim()),r}};var vw=xi;xi.default=xi;let ww=Dr,Vk=vw,Ko=class extends ww{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Vk.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var Cf=Ko;Ko.default=Ko;ww.registerRule(Ko);let Hk=xa,qk=Gk,Yk=_a,Kk=Ef,Zk=Ui,gp=Cf;const mp={empty:!0,space:!0};function Xk(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}let Jk=class{constructor(e){this.input=e,this.root=new Zk,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new Kk;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,s,o=!1,l=!1,a=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?u.push(r==="("?")":"]"):r==="{"&&u.length>0?u.push("}"):r===u[u.length-1]&&u.pop(),u.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){l=!0;break}else if(r==="}"){if(a.length>0){for(s=a.length-1,i=a[s];i&&i[0]==="space";)i=a[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(r+=1,r===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,s;for(let[o,l]of e.entries()){if(r=l,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=r}return!1}comment(e){let t=new Yk;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=qk(this.input)}decl(e,t){let r=new Hk;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||Xk(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){r.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(s=e[u],s[1].toLowerCase()==="!important"){r.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(r.raws.important=c);break}else if(s[1].toLowerCase()==="important"){let c=e.slice(0),d="";for(let h=u;h>0;h--){let g=c[h][0];if(d.trim().indexOf("!")===0&&g!=="space")break;d=c.pop()[1]+d}d.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=d,e=c)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(r.raws.between+=o.map(u=>u[1]).join(""),o=[]),this.raw(r,"value",o.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new gp;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),a=[],u=e;for(;u;){if(r=u[0],a.push(u),r==="("||r==="[")s||(s=u),o.push(r==="("?")":"]");else if(l&&i&&r==="{")s||(s=u),o.push("}");else if(o.length===0)if(r===";")if(i){this.decl(a,l);return}else break;else if(r==="{"){this.rule(a);return}else if(r==="}"){this.tokenizer.back(a.pop()),t=!0;break}else r===":"&&(i=!0);else r===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;a.length&&(u=a[a.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let s,o,l=r.length,a="",u=!0,c,d;for(let h=0;h<l;h+=1)s=r[h],o=s[0],o==="space"&&h===l-1&&!i?u=!1:o==="comment"?(d=r[h-1]?r[h-1][0]:"empty",c=r[h+1]?r[h+1][0]:"empty",!mp[d]&&!mp[c]?a.slice(-1)===","?u=!1:a+=s[1]:u=!1):a+=s[1];if(!u){let h=r.reduce((g,m)=>g+m[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new gp;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var Qk=Jk;let eN=Dr,tN=Qk,rN=Aa;function Zo(n,e){let t=new rN(n,e),r=new tN(t);try{r.parse()}catch(i){throw i}return r.root}var If=Zo;Zo.default=Zo;eN.registerParse(Zo);let{isClean:Yt,my:nN}=Di,iN=tw,sN=Ca,oN=Dr,aN=bf,yp=Sf,uN=If,lN=Ui;const cN={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},fN={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},dN={Once:!0,postcssPlugin:!0,prepare:!0},An=0;function Hn(n){return typeof n=="object"&&typeof n.then=="function"}function bw(n){let e=!1,t=cN[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,An,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,An,t+"Exit"]:[t,t+"Exit"]}function vp(n){let e;return n.type==="document"?e=["Document",An,"DocumentExit"]:n.type==="root"?e=["Root",An,"RootExit"]:e=bw(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}function tc(n){return n[Yt]=!1,n.nodes&&n.nodes.forEach(e=>tc(e)),n}let rc={},_n=class Sw{constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=tc(t);else if(t instanceof Sw||t instanceof yp)i=tc(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let s=uN;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(t,r)}catch(o){this.processed=!0,this.error=o}i&&!i[nN]&&oN.rebuild(i)}this.result=new yp(e,i,r),this.helpers={...rc,postcss:rc,result:this.result},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!fN[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!dN[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Hn(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Yt];){e[Yt]=!0;let t=[vp(e)];for(;t.length>0;){let r=this.visitTick(t);if(Hn(r))try{await r}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>r(s,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return Hn(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=sN;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new iN(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Hn(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Yt];)e[Yt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Hn(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(r.toProxy(),this.helpers)}catch(a){throw this.handleError(a,r)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!l[Yt]){l[Yt]=!0,e.push(vp(l));return}t.iterator=0,delete r.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===An){r.nodes&&r.nodes.length&&(r[Yt]=!0,t.iterator=r.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[Yt]=!0;let t=bw(e);for(let r of t)if(r===An)e.nodes&&e.each(i=>{i[Yt]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};_n.registerPostcss=n=>{rc=n};var Ew=_n;_n.default=_n;lN.registerLazyResult(_n);aN.registerLazyResult(_n);let hN=tw,pN=Ca,gN=If;const mN=Sf;let nc=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,s=pN;this.result=new mN(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new hN(s,i,this._opts,t);if(l.isMap()){let[a,u]=l.generate();a&&(this.result.css=a),u&&(this.result.map=u)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=gN;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var yN=nc;nc.default=nc;let vN=yN,wN=Ew,bN=bf,SN=Ui,Ai=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new vN(this,e,t):new wN(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var EN=Ai;Ai.default=Ai;SN.registerProcessor(Ai);bN.registerProcessor(Ai);let CN=xa,IN=Zv,xN=_a,AN=Ef,_N=Aa,RN=Ui,$N=Cf;function _i(n,e){if(Array.isArray(n))return n.map(i=>_i(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let s={...i,__proto__:_N.prototype};s.map&&(s.map={...s.map,__proto__:IN.prototype}),e.push(s)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>_i(i,e))),r.source){let{inputId:i,...s}=r.source;r.source=s,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new RN(r);if(r.type==="decl")return new CN(r);if(r.type==="rule")return new $N(r);if(r.type==="comment")return new xN(r);if(r.type==="atrule")return new AN(r);throw new Error("Unknown node type: "+n.type)}var ON=_i;_i.default=_i;let TN=yf,Cw=xa,PN=Ew,kN=Dr,xf=EN,NN=Ca,MN=ON,Iw=bf,LN=hw,xw=_a,Aw=Ef,DN=Sf,UN=Aa,FN=If,BN=vw,_w=Cf,Rw=Ui,zN=Ia;function fe(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new xf(n)}fe.plugin=function(e,t){let r=!1;function i(...o){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),zo.LANG&&zo.LANG.startsWith("cn")&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new xf().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,a){return fe([i(a)]).process(o,l)},i};fe.stringify=NN;fe.parse=FN;fe.fromJSON=MN;fe.list=BN;fe.comment=n=>new xw(n);fe.atRule=n=>new Aw(n);fe.decl=n=>new Cw(n);fe.rule=n=>new _w(n);fe.root=n=>new Rw(n);fe.document=n=>new Iw(n);fe.CssSyntaxError=TN;fe.Declaration=Cw;fe.Container=kN;fe.Processor=xf;fe.Document=Iw;fe.Comment=xw;fe.Warning=LN;fe.AtRule=Aw;fe.Result=DN;fe.Input=UN;fe.Rule=_w;fe.Root=Rw;fe.Node=zN;PN.registerPostcss(fe);var jN=fe;fe.default=fe;const De=ek(jN);De.stringify;De.fromJSON;De.plugin;De.parse;De.list;De.document;De.comment;De.atRule;De.rule;De.decl;De.root;De.CssSyntaxError;De.Declaration;De.Container;De.Processor;De.Document;De.Comment;De.Warning;De.AtRule;De.Result;De.Input;De.Rule;De.Root;De.Node;class Af{constructor(...e){St(this,"parentElement",null),St(this,"parentNode",null),St(this,"ownerDocument"),St(this,"firstChild",null),St(this,"lastChild",null),St(this,"previousSibling",null),St(this,"nextSibling",null),St(this,"ELEMENT_NODE",1),St(this,"TEXT_NODE",3),St(this,"nodeType"),St(this,"nodeName"),St(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof Af){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const wp={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},bp={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Gs={},WN=()=>!!globalThis.Zone;function _f(n){if(Gs[n])return Gs[n];const e=globalThis[n],t=e.prototype,r=n in wp?wp[n]:void 0,i=!!(r&&r.every(l=>{var a,u;return!!((u=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&u.toString().includes("[native code]"))})),s=n in bp?bp[n]:void 0,o=!!(s&&s.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(i&&o&&!WN())return Gs[n]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const u=a[n].prototype;return document.body.removeChild(l),u?Gs[n]=u:t}catch{return t}}const mu={};function Er(n,e,t){var r;const i=`${n}.${String(t)}`;if(mu[i])return mu[i].call(e);const s=_f(n),o=(r=Object.getOwnPropertyDescriptor(s,t))==null?void 0:r.get;return o?(mu[i]=o,o.call(e)):e[t]}const yu={};function $w(n,e,t){const r=`${n}.${String(t)}`;if(yu[r])return yu[r].bind(e);const s=_f(n)[t];return typeof s!="function"?e[t]:(yu[r]=s,s.bind(e))}function GN(n){return Er("Node",n,"childNodes")}function VN(n){return Er("Node",n,"parentNode")}function HN(n){return Er("Node",n,"parentElement")}function qN(n){return Er("Node",n,"textContent")}function YN(n,e){return $w("Node",n,"contains")(e)}function KN(n){return $w("Node",n,"getRootNode")()}function ZN(n){return!n||!("host"in n)?null:Er("ShadowRoot",n,"host")}function XN(n){return n.styleSheets}function JN(n){return!n||!("shadowRoot"in n)?null:Er("Element",n,"shadowRoot")}function QN(n,e){return Er("Element",n,"querySelector")(e)}function eM(n,e){return Er("Element",n,"querySelectorAll")(e)}function tM(){return _f("MutationObserver").constructor}const _t={childNodes:GN,parentNode:VN,parentElement:HN,textContent:qN,contains:YN,getRootNode:KN,host:ZN,styleSheets:XN,shadowRoot:JN,querySelector:QN,querySelectorAll:eM,mutationObserver:tM};function rM(n,e,t=document){const r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}const Qr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ic={map:{},getId(){return console.error(Qr),-1},getNode(){return console.error(Qr),null},removeNodeFromMap(){console.error(Qr)},has(){return console.error(Qr),!1},reset(){console.error(Qr)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ic=new Proxy(ic,{get(n,e,t){return e==="map"&&console.error(Qr),Reflect.get(n,e,t)}}));function nM(n,e,t={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&t.leading===!1&&(i=o);const l=e-(o-i),a=this;l<=0||l>e?(r&&(clearTimeout(r),r=null),i=o,n.apply(a,s)):!r&&t.trailing!==!1&&(r=setTimeout(()=>{i=t.leading===!1?0:Date.now(),r=null,n.apply(a,s)},l))}}function Ow(n,e,t,r,i=window){const s=i.Object.getOwnPropertyDescriptor(n,e);return i.Object.defineProperty(n,e,r?t:{set(o){setTimeout(()=>{t.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>Ow(n,e,s||{},!0)}function iM(n,e,t){try{if(!(e in n))return()=>{};const r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}let Tw=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Tw=()=>new Date().getTime());function sM(n){var e,t,r,i;const s=n.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:s.documentElement.scrollLeft||s?.body&&((e=_t.parentElement(s.body))==null?void 0:e.scrollLeft)||((t=s?.body)==null?void 0:t.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:s?.documentElement.scrollTop||s?.body&&((r=_t.parentElement(s.body))==null?void 0:r.scrollTop)||((i=s?.body)==null?void 0:i.scrollTop)||0}}function oM(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function aM(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Pw(n){return n?n.nodeType===n.ELEMENT_NODE?n:_t.parentElement(n):null}function uM(n,e,t,r){if(!n)return!1;const i=Pw(n);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||r&&i.closest("."+e)!==null)return!0}else if(_l(i,e,r))return!0}catch{}return!!(t&&(i.matches(t)||r&&i.closest(t)!==null))}function lM(n,e){return e.getId(n)!==-1}function cM(n,e,t){return n.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(n)===uT}function kw(n,e){if(sT(n))return!1;const t=e.getId(n);if(!e.has(t))return!0;const r=_t.parentNode(n);return r&&r.nodeType===n.DOCUMENT_NODE?!1:r?kw(r,e):!0}function fM(n){return!!n.changedTouches}function dM(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function hM(n){const e={},t=(i,s)=>{const o={value:i,parent:s,children:[]};return e[i.node.id]=o,o},r=[];for(const i of n){const{nextId:s,parentId:o}=i;if(s&&s in e){const l=e[s];if(l.parent){const a=l.parent.children.indexOf(l);l.parent.children.splice(a,0,t(i,l.parent))}else{const a=r.indexOf(l);r.splice(a,0,t(i,null))}continue}if(o in e){const l=e[o];l.children.push(t(i,l));continue}r.push(t(i,null))}return r}function Nw(n,e){e(n.value);for(let t=n.children.length-1;t>=0;t--)Nw(n.children[t],e)}function pM(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}function gM(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}function Mw(n,e){var t,r;const i=(r=(t=n.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.frameElement;if(!i||i===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};const s=i.getBoundingClientRect(),o=Mw(i,e),l=s.height/i.clientHeight;return{x:s.x*o.relativeScale+o.x,y:s.y*o.relativeScale+o.y,relativeScale:l,absoluteScale:o.absoluteScale*l}}function mM(n){return n?n instanceof Af&&"shadowRoot"in n?!!n.shadowRoot:!!_t.shadowRoot(n):!1}function Lw(n,e){const t=n[e[0]];return e.length===1?t:Lw(t.cssRules[e[1]].cssRules,e.slice(2))}function yM(n){const e=[...n],t=e.pop();return{positions:e,index:t}}function vM(n){const e=new Set,t=[];for(let r=n.length;r--;){const i=n[r];e.has(i.id)||(t.push(i),e.add(i.id))}return t}class wM{constructor(){su(this,"id",1),su(this,"styleIDMap",new WeakMap),su(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Dw(n){var e;let t=null;return"getRootNode"in n&&((e=_t.getRootNode(n))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&_t.host(_t.getRootNode(n))&&(t=_t.host(_t.getRootNode(n))),t}function Uw(n){let e=n,t;for(;t=Dw(e);)e=t;return e}function Fw(n){const e=n.ownerDocument;if(!e)return!1;const t=Uw(n);return _t.contains(e,t)}function bM(n){const e=n.ownerDocument;return e?_t.contains(e,n)||Fw(n):!1}const SM=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:wM,get _mirror(){return ic},closestElementOfNode:Pw,getBaseDimension:Mw,getNestedRule:Lw,getPositionsAndIndex:yM,getRootShadowHost:Uw,getShadowHost:Dw,getWindowHeight:oM,getWindowScroll:sM,getWindowWidth:aM,hasShadowRoot:mM,hookSetter:Ow,inDom:bM,isAncestorRemoved:kw,isBlocked:uM,isIgnored:cM,isSerialized:lM,isSerializedIframe:pM,isSerializedStylesheet:gM,iterateResolveTree:Nw,legacy_isTouchEvent:fM,get nowTimestamp(){return Tw},on:rM,patch:iM,polyfill:dM,queueToResolveTrees:hM,shadowHostInDom:Fw,throttle:nM,uniqueTextMutations:vM},Symbol.toStringTag,{value:"Module"}));var Sp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",EM=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vs=0;Vs<Sp.length;Vs++)EM[Sp.charCodeAt(Vs)]=Vs;const CM="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",IM=n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0));typeof window<"u"&&window.Blob&&new Blob([IM(CM)],{type:"text/javascript;charset=utf-8"});try{if(Array.from([1],n=>n*2)[0]!==2){const n=document.createElement("iframe");document.body.appendChild(n),Array.from=((Dh=n.contentWindow)==null?void 0:Dh.Array.from)||Array.from,document.body.removeChild(n)}}catch(n){console.debug("Unable to override Array.from",n)}aT();var Ep;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(Ep||(Ep={}));class Vr{constructor(e){Is(this,"fileName"),Is(this,"functionName"),Is(this,"lineNumber"),Is(this,"columnNumber"),this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${t})`:`${this.fileName}:${e}:${t}`}}const xM=/(^|@)\S+:\d+/,Cp=/^\s*at .*(\S+:\d+|\(native\))/m,AM=/^(eval@)?(\[native code])?$/,vu={parse:function(n){return n?typeof n.stacktrace<"u"||typeof n["opera#sourceloc"]<"u"?this.parseOpera(n):n.stack&&n.stack.match(Cp)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):(console.warn("[console-record-plugin]: Failed to parse error object:",n),[]):[]},extractLocation:function(n){if(n.indexOf(":")===-1)return[n];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g,""));if(!t)throw new Error(`Cannot parse given url: ${n}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(n){return n.stack.split(`
`).filter(function(t){return!!t.match(Cp)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(");const i=r.match(/ (\((.+):(\d+):(\d+)\)$)/);r=i?r.replace(i[0],""):r;const s=r.split(/\s+/).slice(1),o=this.extractLocation(i?i[1]:s.pop()),l=s.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new Vr({functionName:l,fileName:a,lineNumber:o[1],columnNumber:o[2]})},this)},parseFFOrSafari:function(n){return n.stack.split(`
`).filter(function(t){return!t.match(AM)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new Vr({functionName:t});{const r=/((.*".+"[^@]*)?[^@]*)(?:@)/,i=t.match(r),s=i&&i[1]?i[1]:void 0,o=this.extractLocation(t.replace(r,""));return new Vr({functionName:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}},this)},parseOpera:function(n){return!n.stacktrace||n.message.indexOf(`
`)>-1&&n.message.split(`
`).length>n.stacktrace.split(`
`).length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},parseOpera9:function(n){const e=/Line (\d+).*script (?:in )?(\S+)/i,t=n.message.split(`
`),r=[];for(let i=2,s=t.length;i<s;i+=2){const o=e.exec(t[i]);o&&r.push(new Vr({fileName:o[2],lineNumber:parseFloat(o[1])}))}return r},parseOpera10:function(n){const e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,t=n.stacktrace.split(`
`),r=[];for(let i=0,s=t.length;i<s;i+=2){const o=e.exec(t[i]);o&&r.push(new Vr({functionName:o[3]||void 0,fileName:o[2],lineNumber:parseFloat(o[1])}))}return r},parseOpera11:function(n){return n.stack.split(`
`).filter(function(t){return!!t.match(xM)&&!t.match(/^Error created at/)},this).map(function(t){const r=t.split("@"),i=this.extractLocation(r.pop()),o=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Vr({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2]})},this)}};function _M(n){if(!n||!n.outerHTML)return"";let e="";for(;n.parentElement;){let t=n.localName;if(!t)break;t=t.toLowerCase();const r=n.parentElement,i=[];if(r.children&&r.children.length>0)for(let s=0;s<r.children.length;s++){const o=r.children[s];o.localName&&o.localName.toLowerCase&&o.localName.toLowerCase()===t&&i.push(o)}i.length>1&&(t+=`:eq(${i.indexOf(n)})`),e=t+(e?">"+e:""),n=r}return e}function sc(n){return Object.prototype.toString.call(n)==="[object Object]"}function Bw(n,e){if(e===0)return!0;const t=Object.keys(n);for(const r of t)if(sc(n[r])&&Bw(n[r],e-1))return!0;return!1}function Hr(n,e){const t={numOfKeysLimit:50,depthOfLimit:4};Object.assign(t,e);const r=[],i=[];return JSON.stringify(n,function(l,a){if(r.length>0){const u=r.indexOf(this);~u?r.splice(u+1):r.push(this),~u?i.splice(u,1/0,l):i.push(l),~r.indexOf(a)&&(r[0]===a?a="[Circular ~]":a="[Circular ~."+i.slice(0,r.indexOf(a)).join(".")+"]")}else r.push(a);if(a===null)return a;if(a===void 0)return"undefined";if(s(a))return o(a);if(typeof a=="bigint")return a.toString()+"n";if(a instanceof Event){const u={};for(const c in a){const d=a[c];Array.isArray(d)?u[c]=_M(d.length?d[0]:null):u[c]=d}return u}else{if(a instanceof Node)return a instanceof HTMLElement?a?a.outerHTML:"":a.nodeName;if(a instanceof Error)return a.stack?a.stack+`
End of stack for Error object`:a.name+": "+a.message}return a});function s(l){return!!(sc(l)&&Object.keys(l).length>t.numOfKeysLimit||typeof l=="function"||sc(l)&&Bw(l,t.depthOfLimit))}function o(l){let a=l.toString();return t.stringLengthLimit&&a.length>t.stringLengthLimit&&(a=`${a.slice(0,t.stringLengthLimit)}...`),a}}const Ip={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function RM(n,e,t){const r=t?Object.assign({},Ip,t):Ip,i=r.logger;if(!i)return()=>{};let s;typeof i=="string"?s=e[i]:s=i;let o=0,l=!1;const a=[];if(r.level.includes("error")){const c=h=>{const g=h.message,m=h.error,v=vu.parse(m).map(C=>C.toString()),y=[Hr(g,r.stringifyOptions)];n({level:"error",trace:v,payload:y})};e.addEventListener("error",c),a.push(()=>{e.removeEventListener("error",c)});const d=h=>{let g,m;h.reason instanceof Error?(g=h.reason,m=[Hr(`Uncaught (in promise) ${g.name}: ${g.message}`,r.stringifyOptions)]):(g=new Error,m=[Hr("Uncaught (in promise)",r.stringifyOptions),Hr(h.reason,r.stringifyOptions)]);const v=vu.parse(g).map(y=>y.toString());n({level:"error",trace:v,payload:m})};e.addEventListener("unhandledrejection",d),a.push(()=>{e.removeEventListener("unhandledrejection",d)})}for(const c of r.level)a.push(u(s,c));return()=>{a.forEach(c=>c())};function u(c,d){return c[d]?SM.patch(c,d,h=>(...g)=>{if(h.apply(this,g),!(d==="assert"&&g[0])&&!l){l=!0;try{const m=vu.parse(new Error).map(C=>C.toString()).splice(1),y=(d==="assert"?g.slice(1):g).map(C=>Hr(C,r.stringifyOptions));o++,o<r.lengthThreshold?n({level:d,trace:m,payload:y}):o===r.lengthThreshold&&n({level:"warn",trace:[],payload:[Hr("The number of log records reached the threshold.")]})}catch(m){h("rrweb logger error:",m,...g)}finally{l=!1}}}):()=>{}}}const zw="rrweb/console@1",$M=n=>({name:zw,observer:RM,options:n}),OM=Object.freeze(Object.defineProperty({__proto__:null,PLUGIN_NAME:zw,getRecordConsolePlugin:$M},Symbol.toStringTag,{value:"Module"}));export{Fe as B,CL as E,mo as I,Vw as _,nr as a,PM as b,jw as c,MM as d,BM as e,DM as f,TM as g,LM as h,UM as i,NM as j,FM as r,EL as s,zM as t};
