import{j as e,u as h,$ as v,f as k,dr as C,h as N,i as E,C as m,t as A,e as f,ds as j,dt as y,du as _,K as S,dv as z,bi as b,dw as D,B as M,bv as F,bx as U,b8 as L,ab as I,dx as O,dy as T,dz as W}from"./index-BTMYyhc6.js";import{i as H}from"./artwork-D9vxumxJ.js";import{b as V,a as q,d as K}from"./utils-CORjiwlf.js";import{g as Z}from"./UserLink-D-ltrUye.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="d869bbf1-5af2-435d-b472-d769c9a2b309",t._sentryDebugIdIdentifier="sentry-dbid-d869bbf1-5af2-435d-b472-d769c9a2b309")}catch{}})();{var g=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};g._sentryModuleMetadata=g._sentryModuleMetadata||{},g._sentryModuleMetadata[new Error().stack]=Object.assign({},g._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const J=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11l-5 5Zm-6 4q-.825 0-1.413-.588T4 18v-3h2v3h12v-3h2v3q0 .825-.588 1.413T18 20H6Z"})}),Q=t=>e.jsx("svg",{viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M1 6.5A3.5 3.5 0 0 1 4.5 3h4a3.5 3.5 0 0 1 3.469 3.031a3.5 3.5 0 0 1-.122 1.499A3.5 3.5 0 0 1 8.5 10h-.75a.75.75 0 0 1 0-1.5h.75a2 2 0 1 0 0-4h-4a2 2 0 0 0-1.262 3.552a4.5 4.5 0 0 0-.235 1.613A3.5 3.5 0 0 1 1 6.5m8 .25a.75.75 0 0 1-.75.75H7.5a2 2 0 1 0 0 4h4a2 2 0 0 0 1.263-3.551a4.5 4.5 0 0 0 .235-1.613A3.5 3.5 0 0 1 11.5 13h-4a3.5 3.5 0 1 1 0-7h.75a.75.75 0 0 1 .75.75"})}),X="_dark_15lth_6",Y="_white_15lth_18",G="_black_15lth_21",ee="_selected_15lth_26",P={"rounded-btn":"_rounded-btn_15lth_1",dark:X,white:Y,black:G,selected:ee,"social-btn":"_social-btn_15lth_39"},te=["pixai","AIイラスト","AIart","stableDiffusion"];function ae(t){const{t:r}=h(["artwork"]),{artwork:a,scene:s}=t,i=v(a.media),{data:n}=k(),{data:{countRemains:c}={}}=C(!(n!=null&&n.id)),[d,x]=N(async o=>{if(n!=null&&n.id&&!((c??0)<1))try{const l=await E.claimShareCredit();m("share_credits_dialog_show",{fromPath:o,scene:s}),await re(l.getShareCredit)}catch(l){A.error(l.message)}},[n==null?void 0:n.id,c]),u=f.useCallback(o=>{if(!d)return m("share_platform_btn_click",{value:o,scene:s}),x(o)},[d,x,s]),w=f.useCallback(o=>{var p;const l=((p=a.tags)==null?void 0:p.map(({name:R})=>R).slice(0,5))??[],B=j[o].shareUrl;return{href:B({link:y(_(a.id),{utm_medium:"referral",utm_source:o,utm_content:"share"}),image:i,text:r("artwork:social-share-text",{authorName:`${Z(a.author)||"anonymous"}`}),tags:[...te,...l]}),target:"_blank",rel:"noopener noreferrer",onClick:()=>u(o)}},[a,i,u]);return e.jsxs(e.Fragment,{children:[Object.entries(j).map(([o,l])=>e.jsx("a",{className:S("inline-grid place-items-center size-12 text-white rounded-full"),style:{backgroundColor:l.color},...w(o),children:f.cloneElement(l.icon,{className:"size-8"})},o)),e.jsx("button",{className:P["rounded-btn"],onClick:o=>{m("copy_link_click",{scene:s,location:"share"}),z(y(_(a.id),{utm_source:"copy_web"}))},disabled:d,children:e.jsx(Q,{className:"text-2xl"})})]})}function re(t){return new Promise(async(r,a)=>{const s=await b({children:e.jsx(se,{onClose:()=>{var i;(i=s.current)==null||i.close(),r()},result:t}),onClose:()=>{r()},maxWidth:"xs"})})}function se(t){var a,s;const{t:r}=h(["growth","action"]);return e.jsxs("div",{className:"p-8 flex flex-col justify-center items-center",children:[e.jsx("p",{className:"text-xl text-center mb-6",children:r("growth:watermark-share.claim-credit-dialog.title")}),e.jsxs("p",{className:"text-xl text-center mb-6",children:[e.jsxs("span",{className:"font-bold text-theme-primary inline-flex items-center leading-none mr-2 translate-y-1",children:[e.jsx(D,{width:28}),r("growth:watermark-share.claim-credit-dialog.claim-amount",{amount:(a=t.result)==null?void 0:a.amountEach})]}),r("growth:watermark-share.claim-credit-dialog.claim-description")]}),e.jsx("p",{className:"text-center text-theme-primary font-medium mb-5",children:r("growth:watermark-share.claim-credit-dialog.remain-description",{count:((s=t.result)==null?void 0:s.countRemains)??0})}),e.jsx(M,{variant:"contained",className:"text-white bg-theme-primary px-12 py-2 !font-bold rounded-full text-sm",onClick:()=>{t.onClose()},children:r("action:ok")})]})}function ne(t){var a,s;const{artwork:r}=t;return r.media?e.jsxs(e.Fragment,{children:[e.jsx(ae,{artwork:r,scene:(a=t.opts)==null?void 0:a.scene}),e.jsx(ie,{artwork:r,scene:(s=t.opts)==null?void 0:s.scene})]}):null}function ie(t){const{t:r}=h(["artwork","action"]),{artwork:a,scene:s}=t,i=H(a),{data:n=a.videoMedia}=F(a.videoMedia?void 0:a.videoMediaId),[c,d]=N(async()=>{m("share_image_dl_click",{scene:s});const x=V({artwork:a,media:a.media}),u=`${q({artwork:a})}.${x}`,w=U(n)||v(a.media);if(w)try{await K(w,u,{skipConversion:i}),m("share_image_dl_dialog_show",{scene:s}),le(r,{type:"download"})}catch(o){A.error(r("artwork:share.watermark-dialog.notice.failed-to-download")+": ",o.message)}},[a]);return e.jsx("button",{disabled:c,className:P["rounded-btn"],onClick:d,children:c?e.jsx(L,{className:"text-primary",size:20}):e.jsx(J,{fontSize:20})})}const xe=(t,r)=>new Promise((a,s)=>{const i=b({children:e.jsx($,{onClose:()=>{var n;(n=i.current)==null||n.close(),a(null)},artwork:t,opts:r}),onClose:()=>{a(null)},fullWidth:!1,responsive:!0,dialogProps:{maxWidth:"sm"}})});function ue(t){return e.jsxs(O,{isOpen:t.open,onOpenChange:t.onOpenChange,triggerRef:t.triggerRef,placement:"top",containerPadding:16,className:S("text-sm bg-white dark:bg-zinc-700 border border-black/20 dark:border-white/20 rounded-[10px]",t.className),style:t.style,children:[e.jsx(T,{className:"group",children:e.jsx("svg",{width:12,height:6,viewBox:"0 0 12 6",className:"stroke-black/20 dark:stroke-white/20 fill-white dark:fill-zinc-700 group-data-[placement=bottom]:rotate-180",children:e.jsx("path",{d:"M0 0 L6 6 L12 0"})})}),e.jsx(W,{children:e.jsx($,{artwork:t.artwork,opts:{scene:t.scene}})})]})}function $(t){var i;const{t:r}=h(["artwork"]),{data:a}=k(),s=a&&(a==null?void 0:a.id)===((i=t.artwork.author)==null?void 0:i.id);return e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mx-auto text-center font-bold text-xl sm:text-2xl pt-7 pb-1 truncate",children:r(s?"artwork:share.watermark-dialog.title-for-self":"artwork:share.watermark-dialog.title-for-others")}),e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsxs("div",{className:"py-4 px-3 max-w-[520px] bg-[#7f3fd9]/10 text-theme-primary flex items-center rounded-xl gap-4 sm:mx-4",children:[e.jsx(D,{className:"text-xl sm:text-3xl shrink-0"}),e.jsx(oe,{})]})}),e.jsx("div",{className:"mt-1 mb-3 flex justify-center items-center gap-2 overflow-x-auto py-4 *:flex-none",children:e.jsx(ne,{...t,isSelfArtwork:!!s})})]})}function oe(){const{t}=h(["growth"]),{data:r}=k(),{data:{amountEach:a=100,countRemains:s=3}={}}=C(!(r!=null&&r.id));return e.jsxs("p",{className:"shrink min-w-0 text-xs sm:text-sm",children:[t("growth:watermark-share.share-to-credit.amount-description",{amountEach:a})," ",r!=null&&r.id?t("growth:watermark-share.share-to-credit.remain-description",{count:s}):t("growth:watermark-share.share-to-credit.login-to-claim-description")]})}function le(t,r){return new Promise(async(a,s)=>{const i=await b({children:e.jsxs("div",{className:"py-4 px-8 flex flex-col justify-center items-center",children:[e.jsx("p",{className:"text-xl text-center",children:r.type==="download"?t("artwork:share.watermark-dialog.download-modal.title"):t("artwork:share.watermark-dialog.copy-modal.title")}),e.jsx(M,{variant:"contained",className:"text-white bg-theme-primary mt-8 px-12 !font-bold",onClick:()=>{var n;(n=i.current)==null||n.close(),a()},children:t("action:ok")})]}),maxWidth:"xs"})})}const we=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})});export{ae as A,le as a,ue as b,Q as f,we as i,J as m,xe as o};
//# sourceMappingURL=baseline-add-XAdAsUn_.js.map
