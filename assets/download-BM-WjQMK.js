import{gg as Dr,gh as Zr,gi as _r,gj as Lr}from"./index-JhqgbpkX.js";import{$ as Jr,N as cr}from"./vendor-firebase-BKQqa5bK.js";import{d as Rr}from"./vendor-mui-DTp04zm4.js";import{g as Qr}from"./vendor-lodash-992l3ZN7.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};r.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new r.Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="a83f4f86-28c6-4cb9-b20e-7937e353b0e9",r._sentryDebugIdIdentifier="sentry-dbid-a83f4f86-28c6-4cb9-b20e-7937e353b0e9")})()}catch{}(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};r._sentryModuleMetadata=r._sentryModuleMetadata||{},r._sentryModuleMetadata[new r.Error().stack]=function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];if(n!=null)for(var f in n)n.hasOwnProperty(f)&&(e[f]=n[f])}return e}({},r._sentryModuleMetadata[new r.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();var Ur={},Vr=function(r,e,a,n,f){var t=new Worker(Ur[e]||(Ur[e]=URL.createObjectURL(new Blob([r+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return t.onmessage=function(o){var i=o.data,l=i.$e$;if(l){var u=new Error(l[0]);u.code=l[1],u.stack=l[2],f(u,null)}else f(null,i)},t.postMessage(a,n),t},D=Uint8Array,_=Uint16Array,fr=Int32Array,or=new D([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ir=new D([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hr=new D([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sr=function(r,e){for(var a=new _(31),n=0;n<31;++n)a[n]=e+=1<<r[n-1];for(var f=new fr(a[30]),n=1;n<30;++n)for(var t=a[n];t<a[n+1];++t)f[t]=t-a[n]<<5|n;return{b:a,r:f}},Cr=Sr(or,2),Xr=Cr.b,ar=Cr.r;Xr[28]=258,ar[258]=28;var re=Sr(ir,0),wr=re.r,nr=new _(32768);for(var g=0;g<32768;++g){var q=(g&43690)>>1|(g&21845)<<1;q=(q&52428)>>2|(q&13107)<<2,q=(q&61680)>>4|(q&3855)<<4,nr[g]=((q&65280)>>8|(q&255)<<8)>>1}var J=function(r,e,a){for(var n=r.length,f=0,t=new _(e);f<n;++f)r[f]&&++t[r[f]-1];var o=new _(e);for(f=1;f<e;++f)o[f]=o[f-1]+t[f-1]<<1;var i;if(a){i=new _(1<<e);var l=15-e;for(f=0;f<n;++f)if(r[f])for(var u=f<<4|r[f],v=e-r[f],y=o[r[f]-1]++<<v,m=y|(1<<v)-1;y<=m;++y)i[nr[y]>>l]=u}else for(i=new _(n),f=0;f<n;++f)r[f]&&(i[f]=nr[o[r[f]-1]++]>>15-r[f]);return i},N=new D(288);for(var g=0;g<144;++g)N[g]=8;for(var g=144;g<256;++g)N[g]=9;for(var g=256;g<280;++g)N[g]=7;for(var g=280;g<288;++g)N[g]=8;var X=new D(32);for(var g=0;g<32;++g)X[g]=5;var jr=J(N,9,0),Hr=J(X,5,0),dr=function(r){return(r+7)/8|0},Mr=function(r,e,a){return(e==null||e<0)&&(e=0),(a==null||a>r.length)&&(a=r.length),new D(r.subarray(e,a))},ee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Q=function(r,e,a){var n=new Error(e||ee[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Q),!a)throw n;return n},j=function(r,e,a){a<<=e&7;var n=e/8|0;r[n]|=a,r[n+1]|=a>>8},W=function(r,e,a){a<<=e&7;var n=e/8|0;r[n]|=a,r[n+1]|=a>>8,r[n+2]|=a>>16},er=function(r,e){for(var a=[],n=0;n<r.length;++n)r[n]&&a.push({s:n,f:r[n]});var f=a.length,t=a.slice();if(!f)return{t:xr,l:0};if(f==1){var o=new D(a[0].s+1);return o[a[0].s]=1,{t:o,l:1}}a.sort(function(k,F){return k.f-F.f}),a.push({s:-1,f:25001});var i=a[0],l=a[1],u=0,v=1,y=2;for(a[0]={s:-1,f:i.f+l.f,l:i,r:l};v!=f-1;)i=a[a[u].f<a[y].f?u++:y++],l=a[u!=v&&a[u].f<a[y].f?u++:y++],a[v++]={s:-1,f:i.f+l.f,l:i,r:l};for(var m=t[0].s,n=1;n<f;++n)t[n].s>m&&(m=t[n].s);var M=new _(m+1),U=tr(a[v-1],M,0);if(U>e){var n=0,d=0,w=U-e,Y=1<<w;for(t.sort(function(F,p){return M[p.s]-M[F.s]||F.f-p.f});n<f;++n){var B=t[n].s;if(M[B]>e)d+=Y-(1<<U-M[B]),M[B]=e;else break}for(d>>=w;d>0;){var T=t[n].s;M[T]<e?d-=1<<e-M[T]++-1:++n}for(;n>=0&&d;--n){var h=t[n].s;M[h]==e&&(--M[h],++d)}U=e}return{t:new D(M),l:U}},tr=function(r,e,a){return r.s==-1?Math.max(tr(r.l,e,a+1),tr(r.r,e,a+1)):e[r.s]=a},gr=function(r){for(var e=r.length;e&&!r[--e];);for(var a=new _(++e),n=0,f=r[0],t=1,o=function(l){a[n++]=l},i=1;i<=e;++i)if(r[i]==f&&i!=e)++t;else{if(!f&&t>2){for(;t>138;t-=138)o(32754);t>2&&(o(t>10?t-11<<5|28690:t-3<<5|12305),t=0)}else if(t>3){for(o(f),--t;t>6;t-=6)o(8304);t>2&&(o(t-3<<5|8208),t=0)}for(;t--;)o(f);t=1,f=r[i]}return{c:a.subarray(0,n),n:e}},Z=function(r,e){for(var a=0,n=0;n<e.length;++n)a+=r[n]*e[n];return a},pr=function(r,e,a){var n=a.length,f=dr(e+2);r[f]=n&255,r[f+1]=n>>8,r[f+2]=r[f]^255,r[f+3]=r[f+1]^255;for(var t=0;t<n;++t)r[f+t+4]=a[t];return(f+4+n)*8},yr=function(r,e,a,n,f,t,o,i,l,u,v){j(e,v++,a),++f[256];for(var y=er(f,15),m=y.t,M=y.l,U=er(t,15),d=U.t,w=U.l,Y=gr(m),B=Y.c,T=Y.n,h=gr(d),k=h.c,F=h.n,p=new _(19),c=0;c<B.length;++c)++p[B[c]&31];for(var c=0;c<k.length;++c)++p[k[c]&31];for(var s=er(p,7),A=s.t,H=s.l,$=19;$>4&&!A[hr[$-1]];--$);var b=u+5<<3,E=Z(f,N)+Z(t,X)+o,z=Z(f,m)+Z(t,d)+o+14+3*$+Z(p,A)+2*p[16]+3*p[17]+7*p[18];if(l>=0&&b<=E&&b<=z)return pr(e,v,r.subarray(l,l+u));var L,x,R,P;if(j(e,v,1+(z<E)),v+=2,z<E){L=J(m,M,0),x=m,R=J(d,w,0),P=d;var lr=J(A,H,0);j(e,v,T-257),j(e,v+5,F-1),j(e,v+10,$-4),v+=14;for(var c=0;c<$;++c)j(e,v+3*c,A[hr[c]]);v+=3*$;for(var S=[B,k],V=0;V<2;++V)for(var G=S[V],c=0;c<G.length;++c){var C=G[c]&31;j(e,v,lr[C]),v+=A[C],C>15&&(j(e,v,G[c]>>5&127),v+=G[c]>>12)}}else L=jr,x=N,R=Hr,P=X;for(var c=0;c<i;++c){var I=n[c];if(I>255){var C=I>>18&31;W(e,v,L[C+257]),v+=x[C+257],C>7&&(j(e,v,I>>23&31),v+=or[C]);var K=I&31;W(e,v,R[K]),v+=P[K],K>3&&(W(e,v,I>>5&8191),v+=ir[K])}else W(e,v,L[I]),v+=x[I]}return W(e,v,L[256]),v+x[256]},br=new fr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xr=new D(0),Pr=function(r,e,a,n,f,t){var o=t.z||r.length,i=new D(n+o+5*(1+Math.ceil(o/7e3))+f),l=i.subarray(n,i.length-f),u=t.l,v=(t.r||0)&7;if(e){v&&(l[0]=t.r>>3);for(var y=br[e-1],m=y>>13,M=y&8191,U=(1<<a)-1,d=t.p||new _(32768),w=t.h||new _(U+1),Y=Math.ceil(a/3),B=2*Y,T=function(sr){return(r[sr]^r[sr+1]<<Y^r[sr+2]<<B)&U},h=new fr(25e3),k=new _(288),F=new _(32),p=0,c=0,s=t.i||0,A=0,H=t.w||0,$=0;s+2<o;++s){var b=T(s),E=s&32767,z=w[b];if(d[E]=z,w[b]=E,H<=s){var L=o-s;if((p>7e3||A>24576)&&(L>423||!u)){v=yr(r,l,0,h,k,F,c,A,$,s-$,v),A=p=c=0,$=s;for(var x=0;x<286;++x)k[x]=0;for(var x=0;x<30;++x)F[x]=0}var R=2,P=0,lr=M,S=E-z&32767;if(L>2&&b==T(s-S))for(var V=Math.min(m,L)-1,G=Math.min(32767,s),C=Math.min(258,L);S<=G&&--lr&&E!=z;){if(r[s+R]==r[s+R-S]){for(var I=0;I<C&&r[s+I]==r[s+I-S];++I);if(I>R){if(R=I,P=S,I>V)break;for(var K=Math.min(S,I-2),Tr=0,x=0;x<K;++x){var vr=s-S+x&32767,Wr=d[vr],Fr=vr-Wr&32767;Fr>Tr&&(Tr=Fr,z=vr)}}}E=z,z=d[E],S+=E-z&32767}if(P){h[A++]=268435456|ar[R]<<18|wr[P];var Er=ar[R]&31,Or=wr[P]&31;c+=or[Er]+ir[Or],++k[257+Er],++F[Or],H=s+R,++p}else h[A++]=r[s],++k[r[s]]}}for(s=Math.max(s,H);s<o;++s)h[A++]=r[s],++k[r[s]];v=yr(r,l,u,h,k,F,c,A,$,s-$,v),u||(t.r=v&7|l[v/8|0]<<3,v-=7,t.h=w,t.p=d,t.i=s,t.w=H)}else{for(var s=t.w||0;s<o+u;s+=65535){var ur=s+65535;ur>=o&&(l[v/8|0]=u,ur=o),v=pr(l,v+1,r.subarray(s,ur))}t.i=o}return Mr(i,0,n+dr(v)+f)},ae=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var a=e,n=9;--n;)a=(a&1&&-306674912)^a>>>1;r[e]=a}return r}(),ne=function(){var r=-1;return{p:function(e){for(var a=r,n=0;n<e.length;++n)a=ae[a&255^e[n]]^a>>>8;r=a},d:function(){return~r}}},qr=function(r,e,a,n,f){if(!f&&(f={l:1},e.dictionary)){var t=e.dictionary.subarray(-32768),o=new D(t.length+r.length);o.set(t),o.set(r,t.length),r=o,f.w=t.length}return Pr(r,e.level==null?6:e.level,e.mem==null?f.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,a,n,f)},kr=function(r,e){var a={};for(var n in r)a[n]=r[n];for(var n in e)a[n]=e[n];return a},$r=function(r,e,a){for(var n=r(),f=r.toString(),t=f.slice(f.indexOf("[")+1,f.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var i=n[o],l=t[o];if(typeof i=="function"){e+=";"+l+"=";var u=i.toString();if(i.prototype)if(u.indexOf("[native code]")!=-1){var v=u.indexOf(" ",8)+1;e+=u.slice(v,u.indexOf("(",v))}else{e+=u;for(var y in i.prototype)e+=";"+l+".prototype."+y+"="+i.prototype[y].toString()}else e+=u}else a[l]=i}return e},rr=[],te=function(r){var e=[];for(var a in r)r[a].buffer&&e.push((r[a]=new r[a].constructor(r[a])).buffer);return e},fe=function(r,e,a,n){if(!rr[a]){for(var f="",t={},o=r.length-1,i=0;i<o;++i)f=$r(r[i],f,t);rr[a]={c:$r(r[o],f,t),e:t}}var l=kr({},rr[a].e);return Vr(rr[a].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",a,l,te(l),n)},oe=function(){return[D,_,fr,or,ir,hr,ar,wr,jr,N,Hr,X,nr,br,xr,J,j,W,er,tr,gr,Z,pr,yr,dr,Mr,Pr,qr,Ar,Nr]},Nr=function(r){return postMessage(r,[r.buffer])},ie=function(r,e,a,n,f,t){var o=fe(a,n,f,function(i,l){o.terminate(),t(i,l)});return o.postMessage([r,e],e.consume?[r.buffer]:[]),function(){o.terminate()}},O=function(r,e,a){for(;a;++e)r[e]=a,a>>>=8};function le(r,e,a){return a||(a=e,e={}),typeof a!="function"&&Q(7),ie(r,e,[oe],function(n){return Nr(Ar(n.data[0],n.data[1]))},0,a)}function Ar(r,e){return qr(r,e||{},0,0)}var Gr=function(r,e,a,n){for(var f in r){var t=r[f],o=e+f,i=n;Array.isArray(t)&&(i=kr(n,t[1]),t=t[0]),t instanceof D?a[o]=[t,i]:(a[o+="/"]=[new D(0),i],Gr(t,o,a,n))}},zr=typeof TextEncoder<"u"&&new TextEncoder,ve=typeof TextDecoder<"u"&&new TextDecoder,ue=0;try{ve.decode(xr,{stream:!0}),ue=1}catch{}function Ir(r,e){var a;if(zr)return zr.encode(r);for(var n=r.length,f=new D(r.length+(r.length>>1)),t=0,o=function(u){f[t++]=u},a=0;a<n;++a){if(t+5>f.length){var i=new D(t+8+(n-a<<1));i.set(f),f=i}var l=r.charCodeAt(a);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|r.charCodeAt(++a)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return Mr(f,0,t)}var mr=function(r){var e=0;if(r)for(var a in r){var n=r[a].length;n>65535&&Q(9),e+=n+4}return e},Yr=function(r,e,a,n,f,t,o,i){var l=n.length,u=a.extra,v=i&&i.length,y=mr(u);O(r,e,o!=null?33639248:67324752),e+=4,o!=null&&(r[e++]=20,r[e++]=a.os),r[e]=20,e+=2,r[e++]=a.flag<<1|(t<0&&8),r[e++]=f&&8,r[e++]=a.compression&255,r[e++]=a.compression>>8;var m=new Date(a.mtime==null?Date.now():a.mtime),M=m.getFullYear()-1980;if((M<0||M>119)&&Q(10),O(r,e,M<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>1),e+=4,t!=-1&&(O(r,e,a.crc),O(r,e+4,t<0?-t-2:t),O(r,e+8,a.size)),O(r,e+12,l),O(r,e+14,y),e+=16,o!=null&&(O(r,e,v),O(r,e+6,a.attrs),O(r,e+10,o),e+=14),r.set(n,e),e+=l,y)for(var U in u){var d=u[U],w=d.length;O(r,e,+U),O(r,e+2,w),r.set(d,e+4),e+=4+w}return v&&(r.set(i,e),e+=v),e},se=function(r,e,a,n,f){O(r,e,101010256),O(r,e+8,a),O(r,e+10,a),O(r,e+12,n),O(r,e+16,f)};function ce(r,e,a){a||(a=e,e={}),typeof a!="function"&&Q(7);var n={};Gr(r,"",n,e);var f=Object.keys(n),t=f.length,o=0,i=0,l=t,u=new Array(t),v=[],y=function(){for(var w=0;w<v.length;++w)v[w]()},m=function(w,Y){Br(function(){a(w,Y)})};Br(function(){m=a});var M=function(){var w=new D(i+22),Y=o,B=i-o;i=0;for(var T=0;T<l;++T){var h=u[T];try{var k=h.c.length;Yr(w,i,h,h.f,h.u,k);var F=30+h.f.length+mr(h.extra),p=i+F;w.set(h.c,p),Yr(w,o,h,h.f,h.u,k,i,h.m),o+=16+F+(h.m?h.m.length:0),i=p+k}catch(c){return m(c,null)}}se(w,o,u.length,B,Y),m(null,w)};t||M();for(var U=function(w){var Y=f[w],B=n[Y],T=B[0],h=B[1],k=ne(),F=T.length;k.p(T);var p=Ir(Y),c=p.length,s=h.comment,A=s&&Ir(s),H=A&&A.length,$=mr(h.extra),b=h.level==0?0:8,E=function(z,L){if(z)y(),m(z,null);else{var x=L.length;u[w]=kr(h,{size:F,crc:k.d(),c:L,f:p,m:A,u:c!=Y.length||A&&s.length!=H,compression:b}),o+=30+c+$+x,i+=76+2*(c+$)+(H||0)+x,--t||M()}};if(c>65535&&E(Q(11,0,1),null),!b)E(null,T);else if(F<16e4)try{E(null,Ar(T,h))}catch(z){E(z,null)}else v.push(le(T,h,E))},d=0;d<l;++d)U(d);return y}var Br=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(r){r()};class he{files=[];async prepareFile(e){return await Jr(e).with(cr.instanceOf(Uint8Array),a=>a).with(cr.instanceOf(ArrayBuffer),a=>new Uint8Array(a)).with(cr.instanceOf(Blob),a=>a.arrayBuffer().then(n=>new Uint8Array(n))).exhaustive()}file(e,a){return this.files.push([e,a]),this}async generateAsync(e){const a=await Promise.all(this.files.map(([f,t])=>this.prepareFile(t).then(o=>[f,o]))),n=await new Promise((f,t)=>{ce(Object.fromEntries(a),e??{},(o,i)=>{o?t(o):f(i)})});return new Blob([n])}}function we(r,e){const a=typeof r=="string",n=document.createElement("a");n.href=a?r:URL.createObjectURL(r),n.download=e,n.click(),a||URL.revokeObjectURL(n.href)}async function Kr(r,e,a){const n=r.length,f=new he;for(const[t,o]of r.entries())f.file(o.name,await o.toFile()),a?.({progress:t+1,total:n});we(await f.generateAsync({level:0}),e)}async function Me(r,e){const a=Qr(r.map(({id:n,media:f})=>{if(f)return _r.fromMedia(f,`pixai-artwork_${n}.${Lr({media:f})}`)}));await Kr(a,`pixai-artworks_${Rr().format("YYYY-MM-DD-HH-mm-ss")}.zip`,e)}async function pe(r,e){const a=Dr(r),n=new Map;for(const t of a){const o=await Zr({id:t}).then(i=>i.data.media);n.set(t,o)}const f=[];for(const t of r){const o=Dr([t]);for(const[i,l]of o.entries()){const u=n.get(l);u&&f.push(_r.fromMedia(u,`pixai-task_${t.id}${o.length>1?`_${i+1}`:""}.${Lr({media:u})}`))}}await Kr(f,`pixai-tasks_${Rr().format("YYYY-MM-DD-HH-mm-ss")}.zip`,e)}export{pe as a,we as b,Me as d};
