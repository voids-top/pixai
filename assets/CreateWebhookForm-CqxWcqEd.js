import{j as n}from"./vendor-motion-Bl2lDopP.js";import{r as x}from"./vendor-apollo-B9XqHIAo.js";import{f as w,b as j,aj as _,U as v}from"./index-JhqgbpkX.js";import{u as C}from"./vendor-i18next-TC5y0B3W.js";import{u as E}from"./useCopyToClipboard-BBBtjKLj.js";import{Q as p,v as T,h as M,j as I}from"./vendor-mui-DTp04zm4.js";import"./vendor-graphql-DeSYh9DC.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-react-router-Bm0RsDwP.js";import"./vendor-firebase-BKQqa5bK.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ed1f7d7a-7b31-443f-b6f6-9f1d1c8cd094",e._sentryDebugIdIdentifier="sentry-dbid-ed1f7d7a-7b31-443f-b6f6-9f1d1c8cd094")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(t){for(var o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])}return t}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const S=[{key:"task_updated",children:[{key:"task_running"},{key:"task_canceled"},{key:"task_completed"},{key:"task_failed"}]}],y=({scope:e,value:t,onChange:o})=>{const a=e.children?.some(r=>t[r.key])&&e.children?.some(r=>!t[r.key]);return n.jsxs(n.Fragment,{children:[n.jsx(M,{label:e.key,control:n.jsx(I,{checked:!!t[e.key],indeterminate:a,onChange:r=>{if(e.children){const s={...t,[e.key]:r.target.checked};for(const l of e.children)s[l.key]=r.target.checked;o(s)}else o({...t,[e.key]:r.target.checked})}})}),e.children?n.jsx("div",{className:"ml-3",children:e.children.map(r=>n.jsx(y,{scope:r,value:t,onChange:o},r.key))}):null]})},F=({value:e,onChange:t})=>n.jsx("div",{children:S.map(o=>n.jsx(y,{scope:o,value:e.reduce((a,r)=>({...a,[r]:!0}),{}),onChange:a=>{t(Object.entries(a).filter(([r,s])=>s).map(([r])=>r))}},o.key))}),$=({onCancel:e,onSuccess:t})=>{const{t:o}=C(["user","action"]),{values:{name:a,url:r,scopes:s},handleChange:l,getValues:h}=w(()=>({name:"",url:"",scopes:[]})),[d,i]=x.useState();E();const[b,k]=j(async()=>{i(null);const c=await h();if(!c)return;const{name:f,url:u,scopes:g}=c;if(!f)return i(o("user:profile.platform.webhook.create.error.name-required"));if(!u)return i(o("user:profile.platform.webhook.create.error.url-required"));try{await _.createWebhook({input:{name:f,url:u,scopes:g}}),t?.()}catch(m){m instanceof Error&&i(m.message)}},[]);return n.jsxs("div",{className:"p-8 max-w-full flex flex-col gap-8",children:[n.jsx("h1",{className:"font-semibold text-2xl",children:o("user:profile.platform.webhook.create.form.title")}),n.jsx(p,{label:o("user:profile.platform.webhook.create.form.name"),value:a,onChange:l("name")}),n.jsx(p,{label:"URL",value:r,onChange:l("url")}),n.jsx(F,{value:s,onChange:l("scopes")}),d?n.jsx(T,{severity:"error",children:d}):null,n.jsx("div",{className:"w-full flex justify-end",children:n.jsx(v,{busy:b,onPress:k,children:o("action:submit")})})]})};export{$ as default};
