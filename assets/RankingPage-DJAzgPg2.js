import{j as t}from"./vendor-motion-Bl2lDopP.js";import{r as g}from"./vendor-apollo-B9XqHIAo.js";import{c as N,N as y,L as x}from"./vendor-react-router-Bm0RsDwP.js";import{dd as s,de as i,df as b,M as A,I as C,m as h,dg as v,dh as _,di as L,aj as R,p as T,dj as $,dk as z,dl as B,P as I}from"./index-JhqgbpkX.js";import{M as D}from"./ModelCard-BbPEsrCH.js";import{S as G}from"./ShareTopArtworks-BOuTPYe4.js";import{e as P,N as E,$ as m,J as p,G as w}from"./vendor-firebase-BKQqa5bK.js";import{g as j}from"./vendor-graphql-DeSYh9DC.js";import{u as f}from"./vendor-i18next-TC5y0B3W.js";import{K as k,L as S}from"./vendor-lodash-992l3ZN7.js";import{s as H,ae as F,af as O,H as V}from"./vendor-mui-DTp04zm4.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="ce65f13b-35de-42f8-9720-8a760f81e638",e._sentryDebugIdIdentifier="sentry-dbid-ce65f13b-35de-42f8-9720-8a760f81e638")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(a){for(var o=1;o<arguments.length;o++){var r=arguments[o];if(r!=null)for(var n in r)r.hasOwnProperty(n)&&(a[n]=r[n])}return a}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const W=e=>t.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:t.jsx("path",{fill:"currentColor",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm3.3 14.71L11 12.41V7h2v4.59l3.71 3.71l-1.42 1.41z"})}),K=e=>t.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:t.jsx("path",{fill:"currentColor",d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"})}),q=e=>t.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...e,children:t.jsx("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1s-1-.45-1-1s.45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1s1 .45 1 1s-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1s1 .45 1 1s-.45 1-1 1z"})});function xe(){const{t:e}=f(["common","artwork","market"]),a=N(),o=k(Object.values(s),a.type)?a.type:s.Artwork,r=k(Object.values(i),a.filterType)?a.filterType:i.Today,n=b(e,o,r);return P({contentType:E.union(s.Model,s.Lora),rangeType:i.Newbies},{contentType:o,rangeType:r})?t.jsx(y,{to:`../${i.Today}`,relative:"path"}):t.jsxs(t.Fragment,{children:[t.jsx(A,{title:n,description:e("common:meta.description.ranking")}),t.jsxs("div",{children:[t.jsx(C,{title:n,description:e("common:ranking.hero.description")}),t.jsx(Y,{currentTab:o,btnGroupClassName:"mt-8",tabs:[{name:s.Artwork,path:`/ranking/${s.Artwork}/${r}`,label:e("common:ranking.artwork.label")},{name:s.Animated,path:`/ranking/${s.Animated}/${r}`,label:e("common:ranking.animated.label")},{name:s.Model,path:`/ranking/${s.Model}/${r}`,label:e("market:model.type.sdv1model")},{name:s.Lora,path:`/ranking/${s.Lora}/${r}`,label:e("market:model.type.lora")}],onChange:l=>{h("rank_tab_click",{value:l})}}),t.jsxs("div",{className:"w-full max-w-full flex flex-col justify-center items-center gap-4 py-4",children:[t.jsx("div",{className:"w-[calc(100%-32px)] mx-auto h-px bg-card-border"}),m(o).with(s.Artwork,s.Animated,()=>t.jsx(Q,{contentType:o,rangeType:r})).with(s.Model,s.Lora,()=>t.jsx(U,{contentType:o,rangeType:r})).otherwise(()=>t.jsx(y,{to:`/ranking/${s.Artwork}/${r}`}))]})]})]})}const J=H(F)(({theme:e})=>({flexWrap:"wrap","& .MuiToggleButtonGroup-grouped":{border:0,padding:"8px 16px","&.Mui-disabled":{border:0},"&:not(:first-of-type)":{borderRadius:"9999px"},"&:first-of-type":{borderRadius:"9999px"}}}));function Y(e){const{tabs:a,currentTab:o,onChange:r,btnGroupClassName:n,containerClassName:l}=e;return t.jsx("div",{className:l,children:t.jsxs("div",{className:n,children:[t.jsx(J,{exclusive:!0,size:"small",value:o,onChange:(c,d)=>{d!=null&&r(d)},children:a.map(({name:c,label:d,path:u})=>t.jsx(O,{value:c,component:x,to:u,children:t.jsx("span",{className:"normal-case inline-flex items-center",children:d})},c))}),t.jsx("nav",{hidden:!0,className:"hidden",children:a.map(({name:c,label:d,path:u})=>t.jsx("a",{href:u,children:d},c))})]})})}function M(e){const{t:a}=f(["common","artwork"]),o=g.useMemo(()=>m(e.contentType).with(s.Model,s.Lora,()=>S(Object.values(i),i.Newbies)).otherwise(()=>Object.values(i)),[e.contentType]),r=$(a,e.contentType,e.rangeType);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"w-full flex flex-col justify-center md:flex-row md:items-center gap-4",children:[t.jsx(z,{className:"bg-background-light rounded-lg",value:e.rangeType,children:o.map(n=>t.jsx(V,{value:n,className:"px-4",onClick:()=>{h("rank_time_select",{value:n})},children:t.jsxs(x,{to:`/ranking/${e.contentType}/${n}`,className:"normal-case inline-flex items-center gap-2",children:[n!==i.Newbies&&t.jsx(W,{className:T(n===e.rangeType&&"text-theme-primary")}),a(`common:ranking.filter-type.${n}`)]})},n))}),t.jsx("nav",{hidden:!0,className:"hidden",children:o.map(n=>t.jsx("a",{href:`/ranking/${e.contentType}/${n}`,children:a(`common:ranking.filter-type.${n}`)},n))}),t.jsxs("div",{className:"flex justify-center items-center gap-2 text-base font-bold px-3 py-1.5 border-[1.5px] border-theme-primary text-theme-primary rounded-xl",children:[t.jsx(K,{}),t.jsx("label",{children:B()})]}),t.jsx("h2",{className:"text-2xl font-bold",children:r}),t.jsx("span",{className:"mx-auto"}),e.slots?.share]}),t.jsx(g.Suspense,{fallback:t.jsx(I,{}),children:e.children})]})}function Q(e){const{t:a}=f(["common","artwork"]),o=b(a,e.contentType,e.rangeType),{value:r,loading:n}=v(async()=>{try{const d=(await _({rankMediaType:m(e.contentType).with(s.Artwork,()=>p.Artwork).with(s.Animated,()=>p.ArtworkAnimated).otherwise(()=>{}),feed:m(e.rangeType).with(i.Today,()=>"rankv2_daily").with(i.Weekly,()=>"rankv2_weekly").with(i.Monthly,()=>"rankv2_monthly").with(i.Newbies,()=>"rankv2_newbies").exhaustive(),first:12,isNsfw:!1})).data?.artworks;return j(d)}catch(c){return console.error(c),[]}},[e.contentType,e.rangeType]),l=g.useCallback(()=>{h("image_click",{scene:"ranking",isDaily:!0},{destinations:["getway"]})},[]);return t.jsx(M,{...e,slots:{share:r?.length&&!n&&t.jsx(G,{title:o,artworks:r,trackingProps:{type:e.contentType,filterType:e.rangeType},btnProps:{className:"font-semibold rounded-xl",variant:"outlined",icon:t.jsx(q,{}),children:t.jsx(t.Fragment,{children:a("artwork:share-artworks")}),size:"large"}})},children:t.jsx(L,{artworks:n?void 0:r,loading:n,trackingArgs:{scene:"ranking"},showIndex:!0,onArtworkClick:l})})}function U(e){const{value:a,loading:o}=v(async()=>{try{const{generationModels:n}=await R.listGenerationModels({type:m(e.contentType).with(s.Model,()=>w.AnyModel).with(s.Lora,()=>w.AnyLora).otherwise(()=>{}),orderBy:m(e.rangeType).with(i.Today,()=>"-markInfo.artworkLikedCountAvgDaily").with(i.Weekly,()=>"-markInfo.artworkLikedCountAvgWeekly").with(i.Monthly,()=>"-markInfo.artworkLikedCountAvgMonthly").otherwise(()=>{}),first:12});return j(n)}catch(n){return console.error(n),[]}},[e.contentType,e.rangeType]);function r(){h("model_click",{scene:"ranking",isDaily:!0},{destinations:["getway"]})}return t.jsx(M,{...e,children:t.jsx("div",{className:"grid grid-cols-1 msm:grid-cols-2 mmd:grid-cols-3 mlg:grid-cols-4 gap-3",children:Array.from({length:12}).map((n,l)=>a?.[l]&&t.jsx(D,{model:a[l],link:!0,scene:"ranking",onClick:r,slots:{typeLabel:({typeLabel:c})=>t.jsxs("div",{className:"absolute top-1 left-1 flex items-center gap-1",children:[t.jsx("span",{className:T("grid place-content-center size-8 text-xl font-quicksand font-bold text-shadow-xs shadow-black bg-amber-400 rounded-full shadow-sm",m(l+1).with(1,()=>"text-white bg-amber-400").with(2,()=>"text-white bg-slate-400").with(3,()=>"text-white bg-yellow-600").otherwise(()=>"text-shadow-none text-neutral-600 bg-white")),children:l+1}),c]})}},l))})})}export{xe as Component};
