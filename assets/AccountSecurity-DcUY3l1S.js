const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/OTPSetupForm-jA8dsxRL.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-motion-Bl2lDopP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-apollo-B9XqHIAo.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-graphql-DeSYh9DC.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-amplitude-core-CQMkGYFj.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/index-JhqgbpkX.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-mui-DTp04zm4.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-i18next-TC5y0B3W.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-react-router-Bm0RsDwP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-firebase-BKQqa5bK.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-axios-CFwfAwt2.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-lodash-992l3ZN7.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-sentry-BZZLy1DV.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-react-aria-BW9JtD2p.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-markdown-1uD3znr6.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/i18n-resources-43uzMSBc.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-hls-cbDBXQj9.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-tldraw-CaaMemrL.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-fabric-Bg02ktlP.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-radix-ui-DX5JiNHB.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-tldraw-DkB09obf.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-photoswipe-UqzIRFho.js","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/vendor-photoswipe-Nx4y_V0V.css","https://cdn.pixai.art/artifacts/app-0ec442be81a4ee21bfcf5745e8ef10bc76836958/assets/index-Cxs7Cmj3.css"])))=>i.map(i=>d[i]);
import{j as e}from"./vendor-motion-Bl2lDopP.js";import{r as c}from"./vendor-apollo-B9XqHIAo.js";import{aq as v,b as w,ar as M,as as C,ab as S,t as A,y as j,U as f,al as B,L,T as h,at as T,au as V,p as _,ak as P,aj as x}from"./index-JhqgbpkX.js";import{i as k}from"./baseline-delete-Dbq3-3Bm.js";import{_ as I}from"./vendor-amplitude-core-CQMkGYFj.js";import{g as z}from"./vendor-graphql-DeSYh9DC.js";import{u as y}from"./vendor-i18next-TC5y0B3W.js";import{P as g}from"./ProfileEditSection-DYLqWFBC.js";import{L as E,k as N,I as D,m as O,A as F,n as R,X as H,d as U,ab as W,B as K}from"./vendor-mui-DTp04zm4.js";import"./vendor-react-router-Bm0RsDwP.js";import"./vendor-firebase-BKQqa5bK.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-lodash-992l3ZN7.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="fb0e469a-586c-4f00-8a7b-4c7943be8aab",t._sentryDebugIdIdentifier="sentry-dbid-fb0e469a-586c-4f00-8a7b-4c7943be8aab")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(a){for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i!=null)for(var o in i)i.hasOwnProperty(o)&&(a[o]=i[o])}return a}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const q=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h6l-2 2v1h8v-1l-2-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})}),Z=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm-2 20h-4v-1h4v1zm3.25-3H6.75V4h10.5v14z"})}),G=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44c.91-1.29.4-3.7-2.18-3.7c-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41c.7 1.15 1.11 3.3.03 4.9c-1.2 1.77-2.35 2.31-2.97 3.45c-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2z"})}),Q=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M21 4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 6c0-1.1-.9-2-2-2zm-2 14H5V6h14v12z"})}),X=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M3 16V5.75a1.25 1.25 0 0 1 2.5 0V12h1V2.75a1.25 1.25 0 0 1 2.5 0V12h1V1.25a1.25 1.25 0 0 1 2.5 0V12h1V3.25a1.25 1.25 0 0 1 2.5 0V15h.75l1.41-3.53c.22-.55.68-.97 1.24-1.16l.79-.26a1 1 0 0 1 1.24 1.32L18.4 19c-1.21 3-4.14 5-7.4 5c-4.42 0-8-3.58-8-8Z"})}),Y=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M3 12V6.75l6-1.32v6.48L3 12m17-9v8.75l-10 .15V5.21L20 3M3 13l6 .09v6.81l-6-1.15V13m17 .25V22l-10-1.91V13.1l10 .15Z"})}),$=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M22 5.18L10.59 16.6l-4.24-4.24l1.41-1.41l2.83 2.83l10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78c0 4.42-3.58 8-8 8s-8-3.58-8-8s3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44A9.9 9.9 0 0 0 12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"})}),J=c.lazy(()=>I(()=>import("./OTPSetupForm-jA8dsxRL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url)),ee=()=>{const{t}=y(["user"]),[a,r]=c.useState(!1),{data:i,loading:o,refetch:d}=v({first:10,type:"otp"}),m=c.useMemo(()=>z(i),[i]),s=c.useMemo(()=>m.find(n=>n.status==="active"),[i]),[l,u]=w(async()=>{try{const n=await M({type:"otp"});await C({input:{type:"otp",mfaRequest:n,deactivate:!0}}),d()}catch(n){if(n===S)return;console.error(n),A.error(`failed to deactivate OTP: ${n?.message}`)}},[]);return e.jsxs(e.Fragment,{children:[s?e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx($,{className:"text-green-400 size-6"}),e.jsx("span",{children:t("user:profile.mfa.otp.setup-done")}),e.jsx("span",{className:"text-xs text-primary-light",children:j(s.updatedAt)}),e.jsx(f,{busy:l,onPress:u,children:t("user:profile.mfa.otp.disable")})]}):e.jsx(f,{busy:o,onPress:()=>r(!0),children:t("user:profile.mfa.otp.setup")}),e.jsx(B,{dialogProps:{maxWidth:"sm"},open:a,onClose:()=>r(!1),children:e.jsx(c.Suspense,{fallback:e.jsx(L,{}),children:e.jsx(J,{onSuccess:()=>{r(!1),d()},onCancel:()=>r(!1)})})})]})},te=()=>e.jsx(ee,{});function Se(){return e.jsxs(e.Fragment,{children:[e.jsx(g,{heading:e.jsx(h,{i18nKey:"user:profile.setup-2fa"}),children:e.jsx("div",{className:"flex flex-col",children:e.jsx(te,{})})}),e.jsx(g,{heading:e.jsx(h,{i18nKey:"user:profile.sessions"}),children:e.jsx("div",{className:"flex flex-col",children:e.jsx(se,{})})})]})}function se(){const{t}=y(["user"]),[{before:a,after:r},i]=c.useState({}),o=c.useRef(null),d=async s=>{await x.terminateSession({input:{id:s}}),o.current?.mutate()},m=async()=>{await x.terminateSession({input:{allOthers:!0}}),o.current?.mutate()};return e.jsxs(e.Fragment,{children:[e.jsx(T,{pagingRef:o,useSWR:V,getConnection:s=>s,extraArgs:{orderBy:"createdAt",isValid:!0},pageSize:20,renderContainer:({children:s})=>e.jsx(E,{sx:{padding:0},children:s}),renderItem:s=>{const l=s.userAgentData,u=s.client?s.client:[[l.browser.name,l.browser.major].join(" "),[l.os.name,l.os.version].join(" ")].filter(b=>b).join(" - "),n=l?.device?.type,p=l?.os?.name;return e.jsxs(N,{disableGutters:!0,divider:!0,secondaryAction:e.jsx(D,{edge:"end","aria-label":"delete",onClick:()=>d(s.id),children:e.jsx(k,{})}),children:[e.jsx(O,{children:e.jsx(F,{className:_("text-white",s.isCurrentSession?"bg-green-700":s.isValid?"bg-blue-600":"bg-gray-600"),children:n==="mobile"?e.jsx(Z,{}):n==="tablet"?e.jsx(Q,{}):p==="Mac OS"?e.jsx(q,{}):p==="Windows"?e.jsx(Y,{}):e.jsx(G,{})})}),e.jsx(R,{primary:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:u}),s.isCurrentSession&&e.jsx(H,{className:"ml-2",size:"small",color:"success",label:"Current"})]}),secondary:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"break-words",children:s.ip}),e.jsx("span",{className:"opacity-70",children:s.location}),e.jsx("span",{children:" Â· "}),e.jsx("span",{title:U(s.createdAt).format("lll"),children:j(s.createdAt)})]})})]},s.id)},empty:e.jsx(P,{description:t("user:profile.empty-sessions")}),before:a,after:r,onCursorChange:i}),e.jsx(W,{title:t("user:profile.terminate-other-sessions-tooltip"),placement:"bottom",children:e.jsx(K,{onClick:m,variant:"outlined",color:"error",startIcon:e.jsx(X,{fontSize:"inherit"}),children:t("user:profile.terminate-other-sessions")})})]})}export{Se as Component};
