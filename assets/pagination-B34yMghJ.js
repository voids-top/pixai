import{e as s,h as D,c9 as _,ca as k}from"./index-BTMYyhc6.js";import{u as m}from"./uniqBy-DWZdfvgJ.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="91baf466-6549-4f8e-a681-e09aee69f88c",e._sentryDebugIdIdentifier="sentry-dbid-91baf466-6549-4f8e-a681-e09aee69f88c")}catch{}})();{var h=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};h._sentryModuleMetadata=h._sentryModuleMetadata||{},h._sentryModuleMetadata[new Error().stack]=Object.assign({},h._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}function B(e){const{pageSize:a=30,dataOrder:n="desc"}=e??{},i=(t,u=a)=>!t||t.hasPreviousPage?{before:t==null?void 0:t.startCursor,last:u}:void 0,r=(t,u=a)=>!t||t.hasNextPage?{after:t==null?void 0:t.endCursor,first:u}:void 0;return n==="asc"?{prevArgs:i,nextArgs:r}:{prevArgs:r,nextArgs:i}}function O(e){const a=(e==null?void 0:e.dataOrder)??"desc",n=s.useRef(),{prevArgs:i,nextArgs:r}=s.useMemo(()=>B(e),[e==null?void 0:e.pageSize,e==null?void 0:e.dataOrder]),[t,u]=s.useState(r());return{pageArgs:t,prevPage:()=>u(i(n.current)),nextPage:()=>u(r(n.current)),setPageInfo:c=>{n.current=c},hasPrevPage:s.useCallback(()=>{var c,d;return a==="asc"?!!((c=n.current)!=null&&c.hasPreviousPage):!!((d=n.current)!=null&&d.hasNextPage)},[a]),hasNextPage:s.useCallback(()=>{var c,d;return a==="asc"?!!((c=n.current)!=null&&c.hasNextPage):!!((d=n.current)!=null&&d.hasPreviousPage)},[a])}}function S(e){const{fetcher:a,getArgs:n,getItems:i,customState:r}=e,t=s.useRef(n);t.current=n;const[u,c]=s.useState([]),[d,f]=s.useState(void 0),g=(r==null?void 0:r.items)??u,l=(r==null?void 0:r.setItems)??c,x=s.useRef(null),[w,o]=s.useState(!0),[y,A]=D(async()=>{if(y)return;const b=t.current(x.current);if(!b)return!1;const P=await a(b);x.current=P,l(M=>m([...M,...i(P)],"id"));const v=!!e.getHasMore(P);return o(v),e.getTotalCount&&d!==e.getTotalCount(P)&&f(e.getTotalCount(P)),v},[a]),C=s.useCallback(()=>{x.current=null,o(!0),l([])},[]);return{items:g,setItems:l,hasMore:w,loading:y,loadMore:A,reset:C,totalCount:d}}function R(e,a){const{windowSize:n=20,getId:i=o=>_({id:k.string},o)?o.id:N(),onReachStart:r,onReachEnd:t}=a,u=e.length-1,[c,d]=s.useState(),f=s.useMemo(()=>c?e.findIndex(o=>i(o)===c):0,[i,e,c]),g=Math.min(u,f+n-1);s.useEffect(()=>{f===0&&(r==null||r()),(n===1||g>0)&&g===u&&(t==null||t())},[e.length,n,f,g,u,r,t]);const l=s.useMemo(()=>e.slice(f,g+1),[e,f,g]);function x(){const o=e[Math.max(0,f-n)];o&&d(i(o))}function w(){const o=e[g+1];o&&d(i(o))}return{data:l,havingPrev:f>0,havingNext:g<u,prev:x,next:w,reset:()=>d(void 0),startIdx:f,endIdx:g}}function N(){throw new Error("Cannot access `id`")}export{R as a,O as b,S as u};
//# sourceMappingURL=pagination-B34yMghJ.js.map
