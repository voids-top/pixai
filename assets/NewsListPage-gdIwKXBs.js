import{j as t}from"./vendor-motion-Bl2lDopP.js";import{r as c}from"./vendor-apollo-B9XqHIAo.js";import{L as p}from"./vendor-react-router-Bm0RsDwP.js";import{gy as y,cS as x,gz as h,gA as b,M as w,L as j,ak as N,p as i,gB as _,gC as k}from"./index-JhqgbpkX.js";import{P as M}from"./PaperLayout-MMne1hCa.js";import{h as E,H as L}from"./vendor-firebase-BKQqa5bK.js";import{g as v}from"./vendor-graphql-DeSYh9DC.js";import{i as D}from"./baseline-arrow-downward-zIQhHbGH.js";import{u as P}from"./vendor-i18next-TC5y0B3W.js";import{x as T}from"./vendor-lodash-992l3ZN7.js";import{d as A,B as I,C}from"./vendor-mui-DTp04zm4.js";import"./vendor-amplitude-core-CQMkGYFj.js";import"./vendor-axios-CFwfAwt2.js";import"./vendor-sentry-BZZLy1DV.js";import"./vendor-react-aria-BW9JtD2p.js";import"./vendor-markdown-1uD3znr6.js";import"./i18n-resources-43uzMSBc.js";import"./vendor-hls-cbDBXQj9.js";import"./vendor-tldraw-CaaMemrL.js";import"./vendor-fabric-Bg02ktlP.js";import"./vendor-radix-ui-DX5JiNHB.js";import"./vendor-photoswipe-UqzIRFho.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0ec442be81a4ee21bfcf5745e8ef10bc76836958"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="3cd839ad-a699-4e12-bfb7-34236e96e953",e._sentryDebugIdIdentifier="sentry-dbid-3cd839ad-a699-4e12-bfb7-34236e96e953")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o!=null)for(var r in o)o.hasOwnProperty(r)&&(s[r]=o[r])}return s}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}catch{}})();const B="_news_item_1n0l1_1",z={news_item:B};function re(){const{t:e}=P(["common","action","artwork"]),s=c.useCallback(async a=>(await y(a)).data,[]),{items:n,loading:o,hasMore:r,loadMore:m}=x({fetcher:s,getArgs:a=>({type:L.News,last:10,before:a?.notifications?.pageInfo.startCursor}),getItems:a=>v(a.notifications),getHasMore:a=>a.notifications?.pageInfo.hasPreviousPage??!1}),d=T(n,a=>A(a.createdAt).format("YYYY-MM-DD")),f=Object.keys(d).sort().reverse(),{updateLastRead:u}=h();return b(async()=>{await m(),u()}),t.jsxs(M,{className:"mx-auto",children:[t.jsx(w,{title:e("common:news.title",{context:"long"}),ogUrlPathname:"/news"}),t.jsx("h1",{className:"max-mmd:mt-2 text-3xl mmd:text-4xl font-black mmd:text-center bg-gradient-to-t from-purple-700 to-purple-500 bg-clip-text text-transparent",children:e("common:news.title",{context:"long"})}),n.length===0?o?t.jsx(j,{}):t.jsx(N,{description:e("artwork:no-content")}):t.jsxs(t.Fragment,{children:[t.jsx("ul",{className:"mt-4 mmd:mt-8 grid grid-cols-1 mmd:grid-cols-[auto_1fr] gap-4 mmd:gap-8",children:f.map(a=>t.jsx(c.Fragment,{children:d[a].map((l,g)=>t.jsxs("li",{className:"contents",children:[t.jsx("span",{className:i("mmd:col-start-1 block mmd:text-sm mmd:leading-8 text-neutral-500 dark:text-neutral-400",g>0&&"hidden"),children:a}),t.jsx(F,{data:l,className:i("mmd:col-start-2 -my-2 mmd:-my-4 py-2 mmd:py-4 pl-4 mmd:pl-8 border-l border-zinc-300 dark:border-zinc-500","[--padding:1rem] mmd:[--padding:2rem]")})]},l.id))},a))}),t.jsx("div",{className:"mt-8 flex justify-center",children:t.jsx(I,{variant:"text",startIcon:o?t.jsx(C,{size:20}):r?t.jsx(D,{className:"size-5"}):null,disabled:!r||o,className:"",onClick:m,children:e(o?"common:hint.loading":r?"action:load-more":"common:list-reached-the-end")})})]})]})}function F(e){const s=E(_),{title:n}=e.data.locales[s]??e.data.locales[k];return t.jsx("article",{className:i("relative",z.news_item,e.className),style:e.style,children:t.jsx("h2",{className:i("mmd:text-lg mmd:leading-8","[--line-height:1.5em] mmd:[--line-height:2rem]"),children:t.jsx(p,{to:`/news/${e.data.id}`,className:"block",children:n})})})}export{re as Component};
