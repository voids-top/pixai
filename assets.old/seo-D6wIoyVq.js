import{f as Y,e as j,D as de,t as u,j as e,K as b,C as z,w as P,bQ as x,i as y,bR as me,a5 as B,u as k,bS as U,bT as ue,bU as _,bV as R,aB as w,aG as I,bW as T,U as N,bD as xe,by as G,a7 as K,H as J,bX as he,bi as $,bY as X,bZ as fe,b_ as v,F as pe,az as ge,aC as M,L as ee,J as je,a8 as we,l as ke,h as ve,a1 as ye,b$ as H,bH as O,c0 as be,$ as te,c1 as Me,c2 as Ae,Q as Ne,c3 as Se,aV as F,c4 as se,c5 as Ie,bv as Ce,c6 as V}from"./index-BTMYyhc6.js";import{B as re,g as C,U as Le}from"./UserLink-D-ltrUye.js";import{C as ne}from"./CircularSpinner-nWd4HBSC.js";import{D as De}from"./DropdownMenu-YH0VlLXg.js";import{d as Be}from"./InspectDialog-BPHcKRwz.js";import{M as ze}from"./MangaBaseInfoFormItems-BVy3ZBjO.js";import{M as A}from"./MenuItem-DLax9T5L.js";import{b as _e,c as Re}from"./artwork-D9vxumxJ.js";import{c as ae}from"./rx-DaL_68pT.js";import{a as Te}from"./formatNum-CBDReyYg.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="7054971b-e554-455b-b9f5-1688968c3d7e",t._sentryDebugIdIdentifier="sentry-dbid-7054971b-e554-455b-b9f5-1688968c3d7e")}catch{}})();{var D=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};D._sentryModuleMetadata=D._sentryModuleMetadata||{},D._sentryModuleMetadata[new Error().stack]=Object.assign({},D._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:pixai-web-app-key":!0})}const Fe=new re({}),Pe=ae(Fe,!1),Ue=new re({}),$e=ae(Ue,0),Ve=t=>{let s=null;return(...r)=>s||(s=t(...r).finally(()=>{s=null}),s)},We=({id:t,initialCount:s,initialValue:r,onSuccess:n=()=>{},onBtnClick:a=()=>{},handler:o,render:i,signModalProps:l})=>{const[c,m]=Pe(t,r),[h,p]=$e(t,s),{data:d}=Y(),f=j.useCallback(Ve(async g=>{g.preventDefault(),g.stopPropagation();const S=!c;if(a(S),!!t){if(!d){de(l,{fromPath:"like"});return}m(S),p(h+(S?1:-1));try{await o(t,S),n(S)}catch(q){m(c),p(h),u.error(q.message),console.error(q)}}}),[d,c,h,l]);return i({value:c,count:h,onClick:f})},Ee=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e.jsx("path",{fill:"currentColor",d:"M18.494 3.801c2.095 1.221 3.569 3.7 3.504 6.592C21.86 16.5 13.5 21 12 21s-9.861-4.5-9.998-10.607c-.065-2.892 1.409-5.37 3.504-6.592C7.466 2.66 9.928 2.653 12 4.338c2.072-1.685 4.534-1.679 6.494-.537Z"})]})}),Z={"animate-like":"_animate-like_1yr6u_1","animation-like":"_animation-like_1yr6u_1","animate-unlike":"_animate-unlike_1yr6u_10","animation-unlike":"_animation-unlike_1yr6u_1"};function qe(t){const{liked:s,className:r,...n}=t;return e.jsx(Ee,{...n,"data-liked":s?"":null,className:b("text-zinc-400 data-[liked]:text-red-500 [--duration:100ms]",s?Z["animate-like"]:Z["animate-unlike"],r)})}const W=({manga:t,id:s=t==null?void 0:t.id,initialCount:r=t==null?void 0:t.likedCount,initialValue:n=t==null?void 0:t.liked,className:a,style:o,afterClick:i})=>s?e.jsx(We,{id:s,initialCount:r,initialValue:n,onSuccess:l=>{l&&(z("like_click",{id:t==null?void 0:t.artworkId,type:_e(t)?P.AnimatedComic:x.Manga},{destinations:["amplitude"]}),i==null||i())},handler:async(l,c)=>{await y.markManga({mangaId:l,type:me.Like,target:c})},render:({value:l,count:c,onClick:m})=>e.jsx(B,{component:"div",role:"button",className:b("cursor-pointer outline transition -m-2 p-2 rounded-md focus-within:outline-1",a),style:o,onClick:m,children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(qe,{liked:l,className:"size-5"}),c?e.jsx("span",{className:"text-sm tabular-nums",style:{color:"inherit"},children:Te(c||0)}):null]})})}):null,Ct=({manga:t})=>{const{t:s}=k(["manga"]);return e.jsxs("div",{className:"bg-background w-full min-h-[300px] flex flex-col items-center justify-center",children:[e.jsx(W,{manga:t}),e.jsx("div",{className:"opacity-40 text-lg pt-4",children:s("manga:interesting")})]})},He=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8z"})}),L=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"})}),ie=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z"})}),oe=({refIds:t,refType:s,onComplete:r,values:n,textSafetyScore:a,mediaSafetyScore:o})=>{const[i,l]=j.useState({...E,...n}),[c,m]=j.useState(!1),h=async()=>{if(m(!0),s!==x.Artwork&&s!==x.Model)return u.error("Wrong moderation type");const d=f=>y.opModerationNSFW({input:{...s===x.Artwork?{artworkId:f}:{modelId:f},...he(i,["isMinors","isRealistic","isSensitive","isSexyPic","isSexyText"]),resolveReport:!0}});try{for(const f of t)if(i.isMinors)try{await K({title:"You've marked this entity as MINORS",description:"Proceeding this action will DELETE this entity. Confirm?"}),await d(f),u.success(`Moderation successfully updated: [${f}]`),s===x.Artwork?await y.deleteArtwork({id:f}):await y.deleteGenerationModel({id:f}),u.success("Entity successfully deleted: [${refId}]")}catch(g){if(g===J)return;u.error(g==null?void 0:g.message)}else await d(f),u.success(`Moderation successfully updated: [${f}]`);r==null||r()}catch(f){const g=f;u.error(g.message)}finally{m(!1)}},p=j.useCallback((d,f)=>l(ue(g=>{g[d]=f})),[]);return e.jsxs(e.Fragment,{children:[e.jsx(_,{heading:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(L,{className:"w-6",color:"inherit"}),e.jsx("span",{children:s===x.Artwork?"Adjust Artwork Moderation":"Adjust Model Moderation"})]})}),e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col mt-8",children:[e.jsxs("div",{className:"rounded-md px-2",children:["Text Safety Score (1-9): ",a??"N/A"]}),e.jsxs("div",{className:"rounded-md px-2",children:["Media Safety Score (1-9): ",o??"N/A"]}),e.jsx(w,{checked:i.isSensitive,control:e.jsx(I,{color:"error",onChange:d=>p("isSensitive",d.target.checked)}),label:e.jsx("div",{className:"rounded-md bg-red-700 text-white px-2",children:"Sensitive"})}),e.jsx(w,{checked:i.isMinors,control:e.jsx(I,{color:"error",onChange:d=>p("isMinors",d.target.checked)}),label:e.jsx("div",{className:"rounded-md bg-red-700 text-white px-2",children:"Minors"})}),e.jsx(w,{checked:i.isRealistic,control:e.jsx(I,{color:"warning",onChange:d=>p("isRealistic",d.target.checked)}),label:e.jsx("div",{className:"rounded-md bg-yellow-700 text-white px-2",children:"Realistic"})}),e.jsx(w,{checked:i.isSexyPic,control:e.jsx(I,{color:"warning",onChange:d=>p("isSexyPic",d.target.checked)}),label:e.jsx("div",{className:"rounded-md bg-pink-600 text-white px-2",children:"isSexyPic"})}),e.jsx(w,{checked:i.isSexyText,control:e.jsx(I,{color:"warning",onChange:d=>p("isSexyText",d.target.checked)}),label:e.jsx("div",{className:"rounded-md bg-pink-600 text-white px-2",children:"isSexyText"})})]})}),e.jsx(T,{children:e.jsx(N,{size:"large",variant:"filled",color:"normal",onPress:()=>{h()},busy:c,icon:e.jsx(ie,{}),children:e.jsx("span",{children:"Submit"})})})]})},E={isMinors:!1,isRealistic:!1,isSensitive:!1,isSexyPic:!1,isSexyText:!1};function Oe(t){const{refType:s,refIds:r}=t,{data:n,isValidating:a}=xe(s===x.Model?r[0]:void 0),{data:o,isValidating:i}=G(s===x.Artwork?r[0]:void 0);if(a||i)return e.jsx(ne,{});const l=s===x.Artwork?o:n,c=t.values??(l==null?void 0:l.flag)??E,{textSafetyScore:m,mediaSafetyScore:h}=(l==null?void 0:l.extra)??{};return e.jsx(oe,{...t,values:c,textSafetyScore:m,mediaSafetyScore:h})}const Ze=async({refType:t,refIds:s,values:r,shouldFetch:n,mutate:a})=>U.create({dismissable:!0,className:"max-w-screen-md",children:({close:o})=>s.length>1?e.jsx(oe,{refIds:s,refType:t,values:r??E,onComplete:()=>{a==null||a(),o()}}):e.jsx(Oe,{values:r,shouldFetch:n,refType:t,refIds:s,onComplete:()=>{a==null||a(),o()}})}),Qe=async({refType:t,refId:s,values:r,shouldFetch:n,mutate:a})=>{const o=await $({children:e.jsx(Ye,{values:r,shouldFetch:n,refType:t,refId:s,onComplete:()=>{var i;a==null||a(),(i=o.current)==null||i.close()}}),fullWidth:!0,maxWidth:"sm",classes:{paper:"rounded-xl"},TransitionComponent:X})};function Ye(t){const{refType:s,refId:r}=t,{data:n,isValidating:a}=G(s===x.Artwork?r:void 0);if(a)return e.jsx(ne,{});const o=t.values??(n==null?void 0:n.extra.archived)??!1;return e.jsx(Ge,{...t,values:o})}const Ge=({refId:t,refType:s,onComplete:r,values:n})=>{const[a,o]=j.useState(n),[i,l]=j.useState(!1),c=async()=>{l(!0);try{if(s!==x.Artwork)return u.error("Wrong moderation type");await y.upsertArtwork({id:t,input:{extra:{archived:a}}}),u.success("Archive status successfully updated"),r==null||r()}catch(m){const h=m;u.error(h.message)}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{heading:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(L,{className:"w-6",color:"inherit"}),e.jsx("span",{children:s===x.Artwork?"Adjust Artwork Moderations":"Adjust Model Moderations"})]})}),e.jsx(R,{children:e.jsx("div",{className:"flex flex-col mt-8",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{checked:a,onCheckedChange:m=>{o(m)}}),"Archive"]})})}),e.jsx(T,{children:e.jsx(N,{size:"large",variant:"filled",color:"normal",onPress:()=>{c()},busy:i,icon:e.jsx(ie,{}),children:e.jsx("span",{children:"Submit"})})})]})},le=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M2.01 21L23 12L2.01 3L2 10l15 2l-15 2z"})}),Ke=({refId:t,refType:s,onComplete:r})=>{const{t:n}=k(),[a,o]=j.useState(v.InappropriateContent),[i,l]=j.useState(!1),c=h=>{o(h.target.value)},m=async()=>{l(!0);try{await y.report({refType:s,refId:t,reason:a}),u.success(n("artwork:report.success")),r==null||r()}catch(h){const p=h;u.error(p.message)}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{heading:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(L,{className:"size-5"}),e.jsx("span",{children:n(`common:report.${s.toLowerCase()}`)})]})}),e.jsxs(R,{children:[e.jsx("p",{children:n("artwork:report.description")}),e.jsx(pe,{fullWidth:!0,className:"mt-4",children:e.jsxs(ge,{value:a,onChange:c,children:[e.jsx(w,{value:v.MistakenInfo,control:e.jsx(M,{}),label:n("artwork:report.reasons.mistaken_info")},"mistaken_info"),e.jsx(w,{value:v.InappropriateContent,control:e.jsx(M,{}),label:n("artwork:report.reasons.inappropriate_content")}),e.jsx(w,{value:v.IrrelevantTag,control:e.jsx(M,{}),label:n("artwork:report.reasons.irrelevant_tag")}),e.jsx(w,{value:v.IrrelevantTitle,control:e.jsx(M,{}),label:n("artwork:report.reasons.irrelevant_title")}),e.jsx(w,{value:v.Spam,control:e.jsx(M,{}),label:n("artwork:report.reasons.spam")}),e.jsx(w,{value:v.NotAiArtwork,control:e.jsx(M,{}),label:n("artwork:report.reasons.not_ai_artwork")}),e.jsx(w,{value:v.Offensive,control:e.jsx(M,{}),label:n("artwork:report.reasons.offensive")})]})})]}),e.jsx(T,{children:e.jsx(N,{variant:"filled",color:"admin",onPress:m,busy:i,icon:e.jsx(le,{className:"mx-2 size-5"}),children:e.jsx("span",{children:n("artwork:action.report")})})})]})},Je=async(t,s)=>(z("report_click",{refType:t,refId:s}),U.create({dismissable:!0,children:({close:r})=>e.jsx(Ke,{refType:t,refId:s,onComplete:()=>{r()}})})),Xe=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("path",{fill:"currentColor",d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2z"})}),et=({initialValues:t,onSuccess:s=()=>{}})=>{const{t:r}=k(["manga"]),{values:n,handleChange:a,getValues:o}=ke(t),[i,l]=ve(async()=>{const c=await o();if(!c)return;const{id:m,title:h,type:p,isArchived:d,isPrivate:f}=c;if(m)try{await y.upsertManga({id:m,input:{type:p,isArchived:d,isPrivate:f}}),s(),u.success("success")}catch(g){u.error(`${g==null?void 0:g.message}`)}},[]);return e.jsxs("div",{className:"flex flex-col gap-4 p-8",children:[e.jsx(ze,{values:n,handleChange:a}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx(N,{busy:i,onPress:l,variant:"filled",children:r("manga:submit")})})]})},tt=({close:t,manga:s})=>{const{t:r}=k(["manga"]);return e.jsxs(j.Suspense,{fallback:e.jsx(ee,{}),children:[e.jsxs("div",{className:"px-8 pt-6 text-2xl flex justify-between items-center",children:[e.jsx("span",{children:r("manga:edit-manga-form-title")}),e.jsx(je,{edge:"end",onClick:t,children:e.jsx(we,{className:"size-6"})})]}),e.jsx(et,{initialValues:s,onSuccess:t})]})},st=async t=>{const s=await $({children:e.jsx(tt,{manga:t,close:()=>{var r;return(r=s.current)==null?void 0:r.close()}}),fullWidth:!0,maxWidth:"xs"})},rt=async()=>{await K({title:"Delete manga?",description:"Are you sure you want to delete this manga?",confirmLabel:"Delete",ConfirmButtonProps:{color:"error",className:"font-bold"}})},nt=({manga:t})=>{const{t:s}=k(["manga","artwork"]),{data:r}=Y();if(!t||!r)return null;const n=t.authorId===r.id,a=r.isAdmin,o=async()=>{if(!t.artworkId)return u.error("This manga cannot be reported");Je(x.Artwork,t.artworkId)},i=async()=>{st(t)},l=async()=>{try{z("delete_manga_click"),await rt(),await y.deleteManga({id:t.id}),u.success("Delete successfully.")}catch(d){if(d===J)return;u.error(`Failed to delete. ${d==null?void 0:d.message}`)}},c=async()=>{if(!t.artworkId)return u.error("This manga cannot be moderated");Ze({refIds:[t.artworkId],refType:x.Artwork,shouldFetch:!0})},m=async()=>{if(!t.artworkId)return u.error("This manga cannot be adjusted archive status");Qe({refId:t.artworkId,refType:x.Artwork,shouldFetch:!0})},h=()=>{Be({manga:t})},p=ye([r&&!n&&e.jsxs(A,{onClick:o,children:[e.jsx(L,{className:"size-6 mr-2 opacity-80"}),s("artwork:action.report")]},"report"),!n&&a&&e.jsxs(H,{className:"flex items-center gap-4 font-bold",children:[e.jsx("span",{children:"Admin (override) Actions"}),e.jsx(O,{children:e.jsx("div",{className:"p-4 text-sm w-80",children:"This artwork is not yours, but you are admin so you can access these actions."})})]},"subheader-admin"),...n||a?[e.jsx(A,{onClick:i,children:s("manga:edit-info")},"edit-info"),e.jsx(A,{onClick:l,children:e.jsx("span",{className:"text-red-600",children:s("manga:delete")})},"delete")]:[],a&&e.jsxs(H,{className:"flex items-center gap-4 font-bold bg-orange-50 hover:bg-orange-100 dark:bg-orange-700 dark:text-orange-50",children:[e.jsx("span",{children:"Admin Actions"}),e.jsx(O,{children:e.jsx("div",{className:"p-4 text-sm w-80",children:"You are admin so you can access these actions."})})]},"subheader-admin-moderation"),...a?[e.jsx(A,{onClick:()=>c(),className:"",children:e.jsx("span",{className:"text-orange-600",children:"Adjust Manga Moderation"})},"mark-moderation-sfw"),e.jsx(A,{onClick:()=>{m()},className:"text-orange-600",children:"Adjust Manga Archive status"},"archive"),e.jsx(A,{onClick:h,className:"dark:text-orange-50",children:"Inspect"},"inspect")]:[]]);return p.length===0?null:e.jsx(De,{anchor:e.jsx(B,{children:e.jsx(Xe,{className:"size-6"})}),children:p})};function at(){const{t}=k();return j.useCallback(be(s=>{var a,o;const r=s.type===P.AnimatedComic,n={link:`${window.location.origin}/${r?"animated-comic":"manga"}/${s.id}`,image:te(s.coverMedia),text:t("manga:social-share-text",{authorName:C(s.author)})};$({children:e.jsxs("div",{className:"p-5 pb-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl leading-none pb-1 font-sans",children:"Share"}),((a=s.author)==null?void 0:a.username)&&e.jsxs("div",{className:"text-xs",children:[r?"Animated comic":"Manga"," by @",(o=s.author)==null?void 0:o.username]})]}),!!navigator.share&&e.jsx(Me,{...n})]}),e.jsx(Ae,{...n})]}),fullWidth:!0,maxWidth:"xs",classes:{paper:"rounded-xl"},TransitionComponent:X})},100),[t])}const Lt=({manga:t,showHomeButton:s=!0,onLikeClick:r})=>{var a;const n=at();return e.jsxs("div",{className:"h-[48px] flex items-center gap-4 px-4",children:[s&&e.jsx(B,{component:Ne,to:"/",children:e.jsx(He,{className:"size-6"})}),e.jsx("div",{className:"flex-1"}),e.jsx(Le,{user:t.author??((a=t.artwork)==null?void 0:a.author),showName:!1,target:"_blank",scene:"mange"}),e.jsx(nt,{manga:t}),t.type===P.Comic&&e.jsx(W,{manga:t,afterClick:r}),e.jsx(B,{onClick:()=>{n(t)},children:e.jsx(Se,{className:"size-6"})})]})},ce=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("g",{fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 12a8 8 0 1 1 16 0a8 8 0 0 1-16 0zm8-10C6.477 2 2 6.477 2 12s4.477 10 10 10s10-4.477 10-10S17.523 2 12 2zm6 10c0 1.296-.41 2.496-1.11 3.476L8.524 7.11A6 6 0 0 1 18 12zM6 12c0-1.296.41-2.496 1.11-3.477l8.366 8.368A6 6 0 0 1 6 12z",fill:"currentColor"})})}),it=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("g",{fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.378 4.661c1.143-2.057 4.101-2.057 5.245 0l6.6 11.882c1.111 2-.335 4.457-2.622 4.457H5.399c-2.287 0-3.733-2.457-2.622-4.457l6.6-11.882zM12 8a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1zm1 9a1 1 0 1 1-2 0a1 1 0 0 1 2 0z",fill:"currentColor"})})}),ot=t=>e.jsx("svg",{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t,children:e.jsx("g",{fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12zm10-5a2 2 0 0 0-2 2a1 1 0 0 1-2 0a4 4 0 1 1 5.31 3.78a.674.674 0 0 0-.273.169a.177.177 0 0 0-.037.054v.497a1 1 0 1 1-2 0V13c0-1.152.924-1.856 1.655-2.11A2.001 2.001 0 0 0 12 7zm1 6.007v-.004v.004zM13 17a1 1 0 1 1-2 0a1 1 0 0 1 2 0z",fill:"currentColor"})})});function lt(t){return se(t).returnType().with("model-cover-under-review",()=>it).with("model-cover-warned",()=>ce).otherwise(()=>ot)}function Dt(t){const{type:s,overlayType:r}=t,{t:n}=k(["common"]),a=lt(r);return e.jsxs(e.Fragment,{children:[a({className:b("text-neutral-300 dark:text-neutral-100/20",s==="standalone"&&"text-3xl sm:text-8xl",s==="in-grid"&&"text-6xl")}),e.jsx("p",{className:b("text-center font-light text-neutral-400 dark:text-neutral-100/20 mt-1 whitespace-pre",s==="standalone"&&"text-xl sm:text-3xl",s==="in-grid"&&"text-lg"),children:n(`common:content-removed.${r}.title`)}),e.jsx(F,{className:"prose text-xs font-normal text-neutral-400 dark:text-neutral-100/20 px-2",children:n(`common:content-removed.${r}.content`)})]})}function Bt(t){const{className:s,...r}=t;return e.jsx(ce,{className:b("text-neutral-700 dark:text-neutral-300",s),...r})}function ct(t){const{t:s}=k(["common"]);return t.placement==="in-grid"?e.jsx(F,{className:b("prose text-xs *:text-white",t.className),children:s("common:content-removed.artwork-warned.preview-content")}):e.jsx(F,{className:b("prose text-xs sm:text-base *:text-white",t.className),children:s("common:content-removed.artwork-warned.detail-content")})}const dt=({refId:t,refType:s,description:r,onComplete:n})=>{const{t:a}=k(["common","action"]),[o,i]=j.useState(!1),l=async()=>{i(!0);try{if(s!==x.Artwork&&s!==x.Model){u.error("Wrong appeal type");return}await y.report({refType:s,refId:t,reason:s===x.Artwork?v.MislabeledArchivedArtwork:v.MislabeledNsfw}),u.success(a(`common:appeal.${s.toLowerCase()}.success`)),n==null||n()}catch(c){const m=c;u.error(m.message)}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{heading:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(L,{className:"size-5",color:"inherit"}),e.jsx("span",{children:a(`common:appeal.${s.toLowerCase()}.title`)})]})}),e.jsx(R,{children:e.jsx("p",{className:"whitespace-pre-line",children:r||a(`common:appeal.${s.toLowerCase()}.description`)})}),e.jsx(T,{children:e.jsx(N,{variant:"filled",color:"admin",onPress:l,busy:o,icon:e.jsx(le,{className:"mx-2 size-5"}),children:e.jsx("span",{children:a("action:submit")})})})]})},mt=async(t,s,r)=>(z("appeal_click",{refType:t,refId:s}),U.create({dismissable:!0,children:({close:n})=>e.jsx(dt,{refType:t,refId:s,description:r==null?void 0:r.description,onComplete:()=>{n()}})}));function ut(t){const{t:s}=k(["common"]);return e.jsx(N,{variant:"filled",className:t.className,color:"danger",onPress:()=>mt(t.refType,t.refId,{description:t.description}),children:s("common:appeal.action-label")})}const xt=({mediaId:t,onLoad:s})=>{const{data:r}=Ce(t),n=te(r);return e.jsx("img",{className:"w-full select-none pointer-events-none bg-black",src:n,crossOrigin:"anonymous",loading:"lazy",decoding:"async",onLoad:s})},ht=j.memo(xt),ft=({manga:t,chapter:s,artwork:r})=>{const{content:n}=s,[a,o]=j.useState(!0),i=Array.isArray(n==null?void 0:n.mediaIds)?n.mediaIds:[];return e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"w-full text-primary bg-background min-h-[80px] flex flex-col justify-center items-center text-2xl font-bold p-4",children:[e.jsx("span",{className:"whitespace-normal w-full break-word mb-2 text-center",children:s.title}),t&&e.jsx(W,{manga:t})]}),e.jsx("div",{className:"mb-8 h-[1px] w-full bg-gray-300"}),e.jsxs("div",{className:b("flex flex-col w-full relative",{"min-h-[--visible-height]":a}),children:[a&&e.jsx("div",{className:"absolute w-full",children:e.jsx(ee,{})}),i.map(l=>e.jsx(ht,{mediaId:l,onLoad:()=>o(!1)},l)),(t==null?void 0:t.artworkId)&&e.jsx(pt,{artworkId:t==null?void 0:t.artworkId,artwork:r})]})]})};function pt(t){const s=Ie(t.artwork),r=Re(t.artwork);return s?e.jsxs("div",{className:b("absolute w-full h-full bg-black/30 backdrop-blur-sm flex flex-col justify-center items-center"),children:[e.jsx(ct,{className:"px-4",placement:"in-detail"}),r&&e.jsx(ut,{className:"mt-4",refType:x.Artwork,refId:t.artworkId})]}):null}const zt=j.memo(ft),Q={artworks:"artworks",likes:"likes",tasks:"tasks",credits:"credits",theme:"theme",models:"models",bookmarkedModels:"bookmarked-models",manga:"manga",likedManga:"liked-manga",likedSdv1Model:"liked-sdv1-model",likedLoraModel:"liked-lora-model",bookmarks:"favorites",files:"files",workflows:"workflows"},gt=(t,s)=>{if(!s)return"Artwork Detail";const r=s.title||"AI Artwork",n=C(s.author)||"Anonymous";return t("common:meta.title.artwork",{title:r,authorName:n})},_t=(t,s)=>{const r=(s==null?void 0:s.title)||"AI Artwork";return t("common:meta.title.artwork-relevant",{title:r})},Rt=(t,s)=>{const r=(s==null?void 0:s.title)||"AI Artwork",n=((s==null?void 0:s.prompts)||"").slice(0,100);return t("common:meta.description.artwork-relevant",{title:r,prompts:n})},Tt=(t,s)=>{const r=(s==null?void 0:s.title)||"Model";return V(s==null?void 0:s.type)?t("common:meta.title.lora",{title:r}):t("common:meta.title.sdv1model",{title:r})},Ft=(t,s)=>gt(t,s);function jt(t){if(!t)return;const s=/\b((?:https?|ftp):\/\/[^\s/$.?#].[^\s]*)/g;return t.replace(s,"")}const Pt=(t,s)=>{if(!s)return t("common:meta.description.home");const r=(s.tags??[]).map(i=>i.name).join(", "),n=s.prompts,a=s.title||"AI Artwork",o=C(s.author)||"Anonymous";return t("common:meta.description.artwork",{title:a,authorName:o,prompts:n,tags:r})},Ut=(t,s)=>{if(!s)return t("common:meta.description.home");const r=s.title||"AI Artwork";return t("common:meta.description.manga",{title:r})},$t=(t,s)=>{var o;const r=(s==null?void 0:s.title)||"Model",n=((s==null?void 0:s.tags)??[]).map(i=>i.name).join(", "),a=jt((o=s==null?void 0:s.extra)==null?void 0:o.description);return V(s==null?void 0:s.type)?t("common:meta.description.lora",{title:r,tags:n,description:a}):t("common:meta.description.sdv1model",{title:r,tags:n,description:a})},Vt=(t,s)=>{const r=(s==null?void 0:s.title)||"Model";return V(s==null?void 0:s.type)?t("market:model.image-alt.lora",{title:r}):t("market:model.image-alt.sdv1model",{title:r})},Wt=({q:t,tag:s,tagInfo:r})=>{const{t:n}=k(["common"]);return t?n("common:meta.title.tag-artwork-list",{tag:t}):s?n("common:meta.title.tag-artwork-list",{tag:`#${r.name}`}):""},Et=({q:t,tag:s,tagInfo:r})=>{const{t:n}=k(["common"]);return t?n("common:meta.description.tag-artwork-list",{tag:t}):s?n("common:meta.description.tag-artwork-list",{tag:`#${r.name}`}):n("common:meta.description.home")},qt=(t,s)=>{const r=C(s)||"Anonymous User";return t("common:meta.title.user.home",{username:r})},Ht=(t,s,r)=>{const n=C(s)||"Anonymous User";return se(r).with(Q.artworks,()=>t("common:meta.description.user.artworks",{username:n})).with(Q.likes,()=>t("common:meta.description.user.likes",{username:n})).otherwise(()=>t("common:meta.description.user.home",{username:n}))},Ot=(t,s,r,n)=>s==="model"?r?n?t("common:meta.title.model-query.keyword-and-tag",{keywords:n,tag:r}):t("common:meta.title.model-query.tag-only",{tag:r}):t("common:meta.title.model-query.keyword-only",{keywords:n}):r?n?t("common:meta.title.artwork-query.keyword-and-tag",{keywords:n,tag:r}):t("common:meta.title.artwork-query.tag-only",{tag:r}):t("common:meta.title.artwork-query.keyword-only",{keywords:n}),Zt=(t,s,r,n)=>s==="model"?r?n?t("common:meta.description.model-query.keyword-and-tag",{keywords:n,tag:r}):t("common:meta.description.model-query.tag-only",{tag:r}):t("common:meta.description.model-query.keyword-only",{keywords:n}):r?n?t("common:meta.description.artwork-query.keyword-and-tag",{keywords:n,tag:r}):t("common:meta.description.artwork-query.tag-only",{tag:r}):t("common:meta.description.artwork-query.keyword-only",{keywords:n});export{ut as A,We as B,L as C,qe as L,Lt as M,Q as P,Ut as a,zt as b,Ct as c,gt as d,Pt as e,_t as f,Ft as g,Rt as h,Ot as i,Zt as j,Tt as k,$t as l,Dt as m,Je as n,mt as o,Ze as p,Vt as q,Xe as r,Bt as s,ct as t,W as u,Ve as v,Wt as w,Et as x,qt as y,Ht as z};
//# sourceMappingURL=seo-D6wIoyVq.js.map
